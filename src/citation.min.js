require=function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n||e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){(function(global){"use strict";if(require("core-js/shim"),require("regenerator-runtime/runtime"),global._babelPolyfill)throw new Error("only one instance of @babel/polyfill is allowed");global._babelPolyfill=!0}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"core-js/shim":322,"regenerator-runtime/runtime":323}],2:[function(require,module,exports){module.exports=function(it){if("function"!=typeof it)throw TypeError(it+" is not a function!");return it}},{}],3:[function(require,module,exports){var cof=require("./_cof");module.exports=function(it,msg){if("number"!=typeof it&&"Number"!=cof(it))throw TypeError(msg);return+it}},{"./_cof":17}],4:[function(require,module,exports){var UNSCOPABLES=require("./_wks")("unscopables"),ArrayProto=Array.prototype;ArrayProto[UNSCOPABLES]==undefined&&require("./_hide")(ArrayProto,UNSCOPABLES,{}),module.exports=function(key){ArrayProto[UNSCOPABLES][key]=!0}},{"./_hide":41,"./_wks":124}],5:[function(require,module,exports){module.exports=function(it,Constructor,name,forbiddenField){if(!(it instanceof Constructor)||forbiddenField!==undefined&&forbiddenField in it)throw TypeError(name+": incorrect invocation!");return it}},{}],6:[function(require,module,exports){var isObject=require("./_is-object");module.exports=function(it){if(!isObject(it))throw TypeError(it+" is not an object!");return it}},{"./_is-object":50}],7:[function(require,module,exports){"use strict";var toObject=require("./_to-object"),toAbsoluteIndex=require("./_to-absolute-index"),toLength=require("./_to-length");module.exports=[].copyWithin||function(target,start){var O=toObject(this),len=toLength(O.length),to=toAbsoluteIndex(target,len),from=toAbsoluteIndex(start,len),end=arguments.length>2?arguments[2]:undefined,count=Math.min((end===undefined?len:toAbsoluteIndex(end,len))-from,len-to),inc=1;for(from<to&&to<from+count&&(inc=-1,from+=count-1,to+=count-1);count-- >0;)from in O?O[to]=O[from]:delete O[to],to+=inc,from+=inc;return O}},{"./_to-absolute-index":109,"./_to-length":113,"./_to-object":114}],8:[function(require,module,exports){"use strict";var toObject=require("./_to-object"),toAbsoluteIndex=require("./_to-absolute-index"),toLength=require("./_to-length");module.exports=function(value){for(var O=toObject(this),length=toLength(O.length),aLen=arguments.length,index=toAbsoluteIndex(aLen>1?arguments[1]:undefined,length),end=aLen>2?arguments[2]:undefined,endPos=end===undefined?length:toAbsoluteIndex(end,length);endPos>index;)O[index++]=value;return O}},{"./_to-absolute-index":109,"./_to-length":113,"./_to-object":114}],9:[function(require,module,exports){var forOf=require("./_for-of");module.exports=function(iter,ITERATOR){var result=[];return forOf(iter,!1,result.push,result,ITERATOR),result}},{"./_for-of":38}],10:[function(require,module,exports){var toIObject=require("./_to-iobject"),toLength=require("./_to-length"),toAbsoluteIndex=require("./_to-absolute-index");module.exports=function(IS_INCLUDES){return function($this,el,fromIndex){var value,O=toIObject($this),length=toLength(O.length),index=toAbsoluteIndex(fromIndex,length);if(IS_INCLUDES&&el!=el){for(;length>index;)if((value=O[index++])!=value)return!0}else for(;length>index;index++)if((IS_INCLUDES||index in O)&&O[index]===el)return IS_INCLUDES||index||0;return!IS_INCLUDES&&-1}}},{"./_to-absolute-index":109,"./_to-iobject":112,"./_to-length":113}],11:[function(require,module,exports){var ctx=require("./_ctx"),IObject=require("./_iobject"),toObject=require("./_to-object"),toLength=require("./_to-length"),asc=require("./_array-species-create");module.exports=function(TYPE,$create){var IS_MAP=1==TYPE,IS_FILTER=2==TYPE,IS_SOME=3==TYPE,IS_EVERY=4==TYPE,IS_FIND_INDEX=6==TYPE,NO_HOLES=5==TYPE||IS_FIND_INDEX,create=$create||asc;return function($this,callbackfn,that){for(var val,res,O=toObject($this),self=IObject(O),f=ctx(callbackfn,that,3),length=toLength(self.length),index=0,result=IS_MAP?create($this,length):IS_FILTER?create($this,0):undefined;length>index;index++)if((NO_HOLES||index in self)&&(res=f(val=self[index],index,O),TYPE))if(IS_MAP)result[index]=res;else if(res)switch(TYPE){case 3:return!0;case 5:return val;case 6:return index;case 2:result.push(val)}else if(IS_EVERY)return!1;return IS_FIND_INDEX?-1:IS_SOME||IS_EVERY?IS_EVERY:result}}},{"./_array-species-create":14,"./_ctx":24,"./_iobject":46,"./_to-length":113,"./_to-object":114}],12:[function(require,module,exports){var aFunction=require("./_a-function"),toObject=require("./_to-object"),IObject=require("./_iobject"),toLength=require("./_to-length");module.exports=function(that,callbackfn,aLen,memo,isRight){aFunction(callbackfn);var O=toObject(that),self=IObject(O),length=toLength(O.length),index=isRight?length-1:0,i=isRight?-1:1;if(aLen<2)for(;;){if(index in self){memo=self[index],index+=i;break}if(index+=i,isRight?index<0:length<=index)throw TypeError("Reduce of empty array with no initial value")}for(;isRight?index>=0:length>index;index+=i)index in self&&(memo=callbackfn(memo,self[index],index,O));return memo}},{"./_a-function":2,"./_iobject":46,"./_to-length":113,"./_to-object":114}],13:[function(require,module,exports){var isObject=require("./_is-object"),isArray=require("./_is-array"),SPECIES=require("./_wks")("species");module.exports=function(original){var C;return isArray(original)&&("function"!=typeof(C=original.constructor)||C!==Array&&!isArray(C.prototype)||(C=undefined),isObject(C)&&null===(C=C[SPECIES])&&(C=undefined)),C===undefined?Array:C}},{"./_is-array":48,"./_is-object":50,"./_wks":124}],14:[function(require,module,exports){var speciesConstructor=require("./_array-species-constructor");module.exports=function(original,length){return new(speciesConstructor(original))(length)}},{"./_array-species-constructor":13}],15:[function(require,module,exports){"use strict";var aFunction=require("./_a-function"),isObject=require("./_is-object"),invoke=require("./_invoke"),arraySlice=[].slice,factories={};module.exports=Function.bind||function(that){var fn=aFunction(this),partArgs=arraySlice.call(arguments,1),bound=function bound(){var args=partArgs.concat(arraySlice.call(arguments));return this instanceof bound?function(F,len,args){if(!(len in factories)){for(var n=[],i=0;i<len;i++)n[i]="a["+i+"]";factories[len]=Function("F,a","return new F("+n.join(",")+")")}return factories[len](F,args)}(fn,args.length,args):invoke(fn,args,that)};return isObject(fn.prototype)&&(bound.prototype=fn.prototype),bound}},{"./_a-function":2,"./_invoke":45,"./_is-object":50}],16:[function(require,module,exports){var cof=require("./_cof"),TAG=require("./_wks")("toStringTag"),ARG="Arguments"==cof(function(){return arguments}());module.exports=function(it){var O,T,B;return it===undefined?"Undefined":null===it?"Null":"string"==typeof(T=function(it,key){try{return it[key]}catch(e){}}(O=Object(it),TAG))?T:ARG?cof(O):"Object"==(B=cof(O))&&"function"==typeof O.callee?"Arguments":B}},{"./_cof":17,"./_wks":124}],17:[function(require,module,exports){var toString={}.toString;module.exports=function(it){return toString.call(it).slice(8,-1)}},{}],18:[function(require,module,exports){"use strict";var dP=require("./_object-dp").f,create=require("./_object-create"),redefineAll=require("./_redefine-all"),ctx=require("./_ctx"),anInstance=require("./_an-instance"),forOf=require("./_for-of"),$iterDefine=require("./_iter-define"),step=require("./_iter-step"),setSpecies=require("./_set-species"),DESCRIPTORS=require("./_descriptors"),fastKey=require("./_meta").fastKey,validate=require("./_validate-collection"),SIZE=DESCRIPTORS?"_s":"size",getEntry=function(that,key){var entry,index=fastKey(key);if("F"!==index)return that._i[index];for(entry=that._f;entry;entry=entry.n)if(entry.k==key)return entry};module.exports={getConstructor:function(wrapper,NAME,IS_MAP,ADDER){var C=wrapper(function(that,iterable){anInstance(that,C,NAME,"_i"),that._t=NAME,that._i=create(null),that._f=undefined,that._l=undefined,that[SIZE]=0,iterable!=undefined&&forOf(iterable,IS_MAP,that[ADDER],that)});return redefineAll(C.prototype,{clear:function(){for(var that=validate(this,NAME),data=that._i,entry=that._f;entry;entry=entry.n)entry.r=!0,entry.p&&(entry.p=entry.p.n=undefined),delete data[entry.i];that._f=that._l=undefined,that[SIZE]=0},"delete":function(key){var that=validate(this,NAME),entry=getEntry(that,key);if(entry){var next=entry.n,prev=entry.p;delete that._i[entry.i],entry.r=!0,prev&&(prev.n=next),next&&(next.p=prev),that._f==entry&&(that._f=next),that._l==entry&&(that._l=prev),that[SIZE]--}return!!entry},forEach:function(callbackfn){validate(this,NAME);for(var entry,f=ctx(callbackfn,arguments.length>1?arguments[1]:undefined,3);entry=entry?entry.n:this._f;)for(f(entry.v,entry.k,this);entry&&entry.r;)entry=entry.p},has:function(key){return!!getEntry(validate(this,NAME),key)}}),DESCRIPTORS&&dP(C.prototype,"size",{get:function(){return validate(this,NAME)[SIZE]}}),C},def:function(that,key,value){var prev,index,entry=getEntry(that,key);return entry?entry.v=value:(that._l=entry={i:index=fastKey(key,!0),k:key,v:value,p:prev=that._l,n:undefined,r:!1},that._f||(that._f=entry),prev&&(prev.n=entry),that[SIZE]++,"F"!==index&&(that._i[index]=entry)),that},getEntry:getEntry,setStrong:function(C,NAME,IS_MAP){$iterDefine(C,NAME,function(iterated,kind){this._t=validate(iterated,NAME),this._k=kind,this._l=undefined},function(){for(var kind=this._k,entry=this._l;entry&&entry.r;)entry=entry.p;return this._t&&(this._l=entry=entry?entry.n:this._t._f)?step(0,"keys"==kind?entry.k:"values"==kind?entry.v:[entry.k,entry.v]):(this._t=undefined,step(1))},IS_MAP?"entries":"values",!IS_MAP,!0),setSpecies(NAME)}}},{"./_an-instance":5,"./_ctx":24,"./_descriptors":28,"./_for-of":38,"./_iter-define":54,"./_iter-step":56,"./_meta":64,"./_object-create":69,"./_object-dp":70,"./_redefine-all":89,"./_set-species":95,"./_validate-collection":121}],19:[function(require,module,exports){var classof=require("./_classof"),from=require("./_array-from-iterable");module.exports=function(NAME){return function(){if(classof(this)!=NAME)throw TypeError(NAME+"#toJSON isn't generic");return from(this)}}},{"./_array-from-iterable":9,"./_classof":16}],20:[function(require,module,exports){"use strict";var redefineAll=require("./_redefine-all"),getWeak=require("./_meta").getWeak,anObject=require("./_an-object"),isObject=require("./_is-object"),anInstance=require("./_an-instance"),forOf=require("./_for-of"),createArrayMethod=require("./_array-methods"),$has=require("./_has"),validate=require("./_validate-collection"),arrayFind=createArrayMethod(5),arrayFindIndex=createArrayMethod(6),id=0,uncaughtFrozenStore=function(that){return that._l||(that._l=new UncaughtFrozenStore)},UncaughtFrozenStore=function(){this.a=[]},findUncaughtFrozen=function(store,key){return arrayFind(store.a,function(it){return it[0]===key})};UncaughtFrozenStore.prototype={get:function(key){var entry=findUncaughtFrozen(this,key);if(entry)return entry[1]},has:function(key){return!!findUncaughtFrozen(this,key)},set:function(key,value){var entry=findUncaughtFrozen(this,key);entry?entry[1]=value:this.a.push([key,value])},"delete":function(key){var index=arrayFindIndex(this.a,function(it){return it[0]===key});return~index&&this.a.splice(index,1),!!~index}},module.exports={getConstructor:function(wrapper,NAME,IS_MAP,ADDER){var C=wrapper(function(that,iterable){anInstance(that,C,NAME,"_i"),that._t=NAME,that._i=id++,that._l=undefined,iterable!=undefined&&forOf(iterable,IS_MAP,that[ADDER],that)});return redefineAll(C.prototype,{"delete":function(key){if(!isObject(key))return!1;var data=getWeak(key);return!0===data?uncaughtFrozenStore(validate(this,NAME))["delete"](key):data&&$has(data,this._i)&&delete data[this._i]},has:function(key){if(!isObject(key))return!1;var data=getWeak(key);return!0===data?uncaughtFrozenStore(validate(this,NAME)).has(key):data&&$has(data,this._i)}}),C},def:function(that,key,value){var data=getWeak(anObject(key),!0);return!0===data?uncaughtFrozenStore(that).set(key,value):data[that._i]=value,that},ufstore:uncaughtFrozenStore}},{"./_an-instance":5,"./_an-object":6,"./_array-methods":11,"./_for-of":38,"./_has":40,"./_is-object":50,"./_meta":64,"./_redefine-all":89,"./_validate-collection":121}],21:[function(require,module,exports){"use strict";var global=require("./_global"),$export=require("./_export"),redefine=require("./_redefine"),redefineAll=require("./_redefine-all"),meta=require("./_meta"),forOf=require("./_for-of"),anInstance=require("./_an-instance"),isObject=require("./_is-object"),fails=require("./_fails"),$iterDetect=require("./_iter-detect"),setToStringTag=require("./_set-to-string-tag"),inheritIfRequired=require("./_inherit-if-required");module.exports=function(NAME,wrapper,methods,common,IS_MAP,IS_WEAK){var Base=global[NAME],C=Base,ADDER=IS_MAP?"set":"add",proto=C&&C.prototype,O={},fixMethod=function(KEY){var fn=proto[KEY];redefine(proto,KEY,"delete"==KEY?function(a){return!(IS_WEAK&&!isObject(a))&&fn.call(this,0===a?0:a)}:"has"==KEY?function(a){return!(IS_WEAK&&!isObject(a))&&fn.call(this,0===a?0:a)}:"get"==KEY?function(a){return IS_WEAK&&!isObject(a)?undefined:fn.call(this,0===a?0:a)}:"add"==KEY?function(a){return fn.call(this,0===a?0:a),this}:function(a,b){return fn.call(this,0===a?0:a,b),this})};if("function"==typeof C&&(IS_WEAK||proto.forEach&&!fails(function(){(new C).entries().next()}))){var instance=new C,HASNT_CHAINING=instance[ADDER](IS_WEAK?{}:-0,1)!=instance,THROWS_ON_PRIMITIVES=fails(function(){instance.has(1)}),ACCEPT_ITERABLES=$iterDetect(function(iter){new C(iter)}),BUGGY_ZERO=!IS_WEAK&&fails(function(){for(var $instance=new C,index=5;index--;)$instance[ADDER](index,index);return!$instance.has(-0)});ACCEPT_ITERABLES||((C=wrapper(function(target,iterable){anInstance(target,C,NAME);var that=inheritIfRequired(new Base,target,C);return iterable!=undefined&&forOf(iterable,IS_MAP,that[ADDER],that),that})).prototype=proto,proto.constructor=C),(THROWS_ON_PRIMITIVES||BUGGY_ZERO)&&(fixMethod("delete"),fixMethod("has"),IS_MAP&&fixMethod("get")),(BUGGY_ZERO||HASNT_CHAINING)&&fixMethod(ADDER),IS_WEAK&&proto.clear&&delete proto.clear}else C=common.getConstructor(wrapper,NAME,IS_MAP,ADDER),redefineAll(C.prototype,methods),meta.NEED=!0;return setToStringTag(C,NAME),O[NAME]=C,$export($export.G+$export.W+$export.F*(C!=Base),O),IS_WEAK||common.setStrong(C,NAME,IS_MAP),C}},{"./_an-instance":5,"./_export":32,"./_fails":34,"./_for-of":38,"./_global":39,"./_inherit-if-required":44,"./_is-object":50,"./_iter-detect":55,"./_meta":64,"./_redefine":90,"./_redefine-all":89,"./_set-to-string-tag":96}],22:[function(require,module,exports){var core=module.exports={version:"2.5.3"};"number"==typeof __e&&(__e=core)},{}],23:[function(require,module,exports){"use strict";var $defineProperty=require("./_object-dp"),createDesc=require("./_property-desc");module.exports=function(object,index,value){index in object?$defineProperty.f(object,index,createDesc(0,value)):object[index]=value}},{"./_object-dp":70,"./_property-desc":88}],24:[function(require,module,exports){var aFunction=require("./_a-function");module.exports=function(fn,that,length){if(aFunction(fn),that===undefined)return fn;switch(length){case 1:return function(a){return fn.call(that,a)};case 2:return function(a,b){return fn.call(that,a,b)};case 3:return function(a,b,c){return fn.call(that,a,b,c)}}return function(){return fn.apply(that,arguments)}}},{"./_a-function":2}],25:[function(require,module,exports){"use strict";var fails=require("./_fails"),getTime=Date.prototype.getTime,$toISOString=Date.prototype.toISOString,lz=function(num){return num>9?num:"0"+num};module.exports=fails(function(){return"0385-07-25T07:06:39.999Z"!=$toISOString.call(new Date(-5e13-1))})||!fails(function(){$toISOString.call(new Date(NaN))})?function(){if(!isFinite(getTime.call(this)))throw RangeError("Invalid time value");var d=this,y=d.getUTCFullYear(),m=d.getUTCMilliseconds(),s=y<0?"-":y>9999?"+":"";return s+("00000"+Math.abs(y)).slice(s?-6:-4)+"-"+lz(d.getUTCMonth()+1)+"-"+lz(d.getUTCDate())+"T"+lz(d.getUTCHours())+":"+lz(d.getUTCMinutes())+":"+lz(d.getUTCSeconds())+"."+(m>99?m:"0"+lz(m))+"Z"}:$toISOString},{"./_fails":34}],26:[function(require,module,exports){"use strict";var anObject=require("./_an-object"),toPrimitive=require("./_to-primitive");module.exports=function(hint){if("string"!==hint&&"number"!==hint&&"default"!==hint)throw TypeError("Incorrect hint");return toPrimitive(anObject(this),"number"!=hint)}},{"./_an-object":6,"./_to-primitive":115}],27:[function(require,module,exports){module.exports=function(it){if(it==undefined)throw TypeError("Can't call method on  "+it);return it}},{}],28:[function(require,module,exports){module.exports=!require("./_fails")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},{"./_fails":34}],29:[function(require,module,exports){var isObject=require("./_is-object"),document=require("./_global").document,is=isObject(document)&&isObject(document.createElement);module.exports=function(it){return is?document.createElement(it):{}}},{"./_global":39,"./_is-object":50}],30:[function(require,module,exports){module.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},{}],31:[function(require,module,exports){var getKeys=require("./_object-keys"),gOPS=require("./_object-gops"),pIE=require("./_object-pie");module.exports=function(it){var result=getKeys(it),getSymbols=gOPS.f;if(getSymbols)for(var key,symbols=getSymbols(it),isEnum=pIE.f,i=0;symbols.length>i;)isEnum.call(it,key=symbols[i++])&&result.push(key);return result}},{"./_object-gops":76,"./_object-keys":79,"./_object-pie":80}],32:[function(require,module,exports){var global=require("./_global"),core=require("./_core"),hide=require("./_hide"),redefine=require("./_redefine"),ctx=require("./_ctx"),$export=function $export(type,name,source){var key,own,out,exp,IS_FORCED=type&$export.F,IS_GLOBAL=type&$export.G,IS_PROTO=type&$export.P,IS_BIND=type&$export.B,target=IS_GLOBAL?global:type&$export.S?global[name]||(global[name]={}):(global[name]||{}).prototype,exports=IS_GLOBAL?core:core[name]||(core[name]={}),expProto=exports.prototype||(exports.prototype={});for(key in IS_GLOBAL&&(source=name),source)out=((own=!IS_FORCED&&target&&target[key]!==undefined)?target:source)[key],exp=IS_BIND&&own?ctx(out,global):IS_PROTO&&"function"==typeof out?ctx(Function.call,out):out,target&&redefine(target,key,out,type&$export.U),exports[key]!=out&&hide(exports,key,exp),IS_PROTO&&expProto[key]!=out&&(expProto[key]=out)};global.core=core,$export.F=1,$export.G=2,$export.S=4,$export.P=8,$export.B=16,$export.W=32,$export.U=64,$export.R=128,module.exports=$export},{"./_core":22,"./_ctx":24,"./_global":39,"./_hide":41,"./_redefine":90}],33:[function(require,module,exports){var MATCH=require("./_wks")("match");module.exports=function(KEY){var re=/./;try{"/./"[KEY](re)}catch(e){try{return re[MATCH]=!1,!"/./"[KEY](re)}catch(f){}}return!0}},{"./_wks":124}],34:[function(require,module,exports){module.exports=function(exec){try{return!!exec()}catch(e){return!0}}},{}],35:[function(require,module,exports){"use strict";var hide=require("./_hide"),redefine=require("./_redefine"),fails=require("./_fails"),defined=require("./_defined"),wks=require("./_wks");module.exports=function(KEY,length,exec){var SYMBOL=wks(KEY),fns=exec(defined,SYMBOL,""[KEY]),strfn=fns[0],rxfn=fns[1];fails(function(){var O={};return O[SYMBOL]=function(){return 7},7!=""[KEY](O)})&&(redefine(String.prototype,KEY,strfn),hide(RegExp.prototype,SYMBOL,2==length?function(string,arg){return rxfn.call(string,this,arg)}:function(string){return rxfn.call(string,this)}))}},{"./_defined":27,"./_fails":34,"./_hide":41,"./_redefine":90,"./_wks":124}],36:[function(require,module,exports){"use strict";var anObject=require("./_an-object");module.exports=function(){var that=anObject(this),result="";return that.global&&(result+="g"),that.ignoreCase&&(result+="i"),that.multiline&&(result+="m"),that.unicode&&(result+="u"),that.sticky&&(result+="y"),result}},{"./_an-object":6}],37:[function(require,module,exports){"use strict";var isArray=require("./_is-array"),isObject=require("./_is-object"),toLength=require("./_to-length"),ctx=require("./_ctx"),IS_CONCAT_SPREADABLE=require("./_wks")("isConcatSpreadable");module.exports=function flattenIntoArray(target,original,source,sourceLen,start,depth,mapper,thisArg){for(var element,spreadable,targetIndex=start,sourceIndex=0,mapFn=!!mapper&&ctx(mapper,thisArg,3);sourceIndex<sourceLen;){if(sourceIndex in source){if(element=mapFn?mapFn(source[sourceIndex],sourceIndex,original):source[sourceIndex],spreadable=!1,isObject(element)&&(spreadable=(spreadable=element[IS_CONCAT_SPREADABLE])!==undefined?!!spreadable:isArray(element)),spreadable&&depth>0)targetIndex=flattenIntoArray(target,original,element,toLength(element.length),targetIndex,depth-1)-1;else{if(targetIndex>=9007199254740991)throw TypeError();target[targetIndex]=element}targetIndex++}sourceIndex++}return targetIndex}},{"./_ctx":24,"./_is-array":48,"./_is-object":50,"./_to-length":113,"./_wks":124}],38:[function(require,module,exports){var ctx=require("./_ctx"),call=require("./_iter-call"),isArrayIter=require("./_is-array-iter"),anObject=require("./_an-object"),toLength=require("./_to-length"),getIterFn=require("./core.get-iterator-method"),BREAK={},RETURN={};(exports=module.exports=function(iterable,entries,fn,that,ITERATOR){var length,step,iterator,result,iterFn=ITERATOR?function(){return iterable}:getIterFn(iterable),f=ctx(fn,that,entries?2:1),index=0;if("function"!=typeof iterFn)throw TypeError(iterable+" is not iterable!");if(isArrayIter(iterFn)){for(length=toLength(iterable.length);length>index;index++)if((result=entries?f(anObject(step=iterable[index])[0],step[1]):f(iterable[index]))===BREAK||result===RETURN)return result}else for(iterator=iterFn.call(iterable);!(step=iterator.next()).done;)if((result=call(iterator,f,step.value,entries))===BREAK||result===RETURN)return result}).BREAK=BREAK,exports.RETURN=RETURN},{"./_an-object":6,"./_ctx":24,"./_is-array-iter":47,"./_iter-call":52,"./_to-length":113,"./core.get-iterator-method":125}],39:[function(require,module,exports){var global=module.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=global)},{}],40:[function(require,module,exports){var hasOwnProperty={}.hasOwnProperty;module.exports=function(it,key){return hasOwnProperty.call(it,key)}},{}],41:[function(require,module,exports){var dP=require("./_object-dp"),createDesc=require("./_property-desc");module.exports=require("./_descriptors")?function(object,key,value){return dP.f(object,key,createDesc(1,value))}:function(object,key,value){return object[key]=value,object}},{"./_descriptors":28,"./_object-dp":70,"./_property-desc":88}],42:[function(require,module,exports){var document=require("./_global").document;module.exports=document&&document.documentElement},{"./_global":39}],43:[function(require,module,exports){module.exports=!require("./_descriptors")&&!require("./_fails")(function(){return 7!=Object.defineProperty(require("./_dom-create")("div"),"a",{get:function(){return 7}}).a})},{"./_descriptors":28,"./_dom-create":29,"./_fails":34}],44:[function(require,module,exports){var isObject=require("./_is-object"),setPrototypeOf=require("./_set-proto").set;module.exports=function(that,target,C){var P,S=target.constructor;return S!==C&&"function"==typeof S&&(P=S.prototype)!==C.prototype&&isObject(P)&&setPrototypeOf&&setPrototypeOf(that,P),that}},{"./_is-object":50,"./_set-proto":94}],45:[function(require,module,exports){module.exports=function(fn,args,that){var un=that===undefined;switch(args.length){case 0:return un?fn():fn.call(that);case 1:return un?fn(args[0]):fn.call(that,args[0]);case 2:return un?fn(args[0],args[1]):fn.call(that,args[0],args[1]);case 3:return un?fn(args[0],args[1],args[2]):fn.call(that,args[0],args[1],args[2]);case 4:return un?fn(args[0],args[1],args[2],args[3]):fn.call(that,args[0],args[1],args[2],args[3])}return fn.apply(that,args)}},{}],46:[function(require,module,exports){var cof=require("./_cof");module.exports=Object("z").propertyIsEnumerable(0)?Object:function(it){return"String"==cof(it)?it.split(""):Object(it)}},{"./_cof":17}],47:[function(require,module,exports){var Iterators=require("./_iterators"),ITERATOR=require("./_wks")("iterator"),ArrayProto=Array.prototype;module.exports=function(it){return it!==undefined&&(Iterators.Array===it||ArrayProto[ITERATOR]===it)}},{"./_iterators":57,"./_wks":124}],48:[function(require,module,exports){var cof=require("./_cof");module.exports=Array.isArray||function(arg){return"Array"==cof(arg)}},{"./_cof":17}],49:[function(require,module,exports){var isObject=require("./_is-object"),floor=Math.floor;module.exports=function(it){return!isObject(it)&&isFinite(it)&&floor(it)===it}},{"./_is-object":50}],50:[function(require,module,exports){function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}module.exports=function(it){return"object"===_typeof(it)?null!==it:"function"==typeof it}},{}],51:[function(require,module,exports){var isObject=require("./_is-object"),cof=require("./_cof"),MATCH=require("./_wks")("match");module.exports=function(it){var isRegExp;return isObject(it)&&((isRegExp=it[MATCH])!==undefined?!!isRegExp:"RegExp"==cof(it))}},{"./_cof":17,"./_is-object":50,"./_wks":124}],52:[function(require,module,exports){var anObject=require("./_an-object");module.exports=function(iterator,fn,value,entries){try{return entries?fn(anObject(value)[0],value[1]):fn(value)}catch(e){var ret=iterator["return"];throw ret!==undefined&&anObject(ret.call(iterator)),e}}},{"./_an-object":6}],53:[function(require,module,exports){"use strict";var create=require("./_object-create"),descriptor=require("./_property-desc"),setToStringTag=require("./_set-to-string-tag"),IteratorPrototype={};require("./_hide")(IteratorPrototype,require("./_wks")("iterator"),function(){return this}),module.exports=function(Constructor,NAME,next){Constructor.prototype=create(IteratorPrototype,{next:descriptor(1,next)}),setToStringTag(Constructor,NAME+" Iterator")}},{"./_hide":41,"./_object-create":69,"./_property-desc":88,"./_set-to-string-tag":96,"./_wks":124}],54:[function(require,module,exports){"use strict";var LIBRARY=require("./_library"),$export=require("./_export"),redefine=require("./_redefine"),hide=require("./_hide"),has=require("./_has"),Iterators=require("./_iterators"),$iterCreate=require("./_iter-create"),setToStringTag=require("./_set-to-string-tag"),getPrototypeOf=require("./_object-gpo"),ITERATOR=require("./_wks")("iterator"),BUGGY=!([].keys&&"next"in[].keys()),returnThis=function(){return this};module.exports=function(Base,NAME,Constructor,next,DEFAULT,IS_SET,FORCED){$iterCreate(Constructor,NAME,next);var methods,key,IteratorPrototype,getMethod=function(kind){if(!BUGGY&&kind in proto)return proto[kind];switch(kind){case"keys":case"values":return function(){return new Constructor(this,kind)}}return function(){return new Constructor(this,kind)}},TAG=NAME+" Iterator",DEF_VALUES="values"==DEFAULT,VALUES_BUG=!1,proto=Base.prototype,$native=proto[ITERATOR]||proto["@@iterator"]||DEFAULT&&proto[DEFAULT],$default=!BUGGY&&$native||getMethod(DEFAULT),$entries=DEFAULT?DEF_VALUES?getMethod("entries"):$default:undefined,$anyNative="Array"==NAME&&proto.entries||$native;if($anyNative&&(IteratorPrototype=getPrototypeOf($anyNative.call(new Base)))!==Object.prototype&&IteratorPrototype.next&&(setToStringTag(IteratorPrototype,TAG,!0),LIBRARY||has(IteratorPrototype,ITERATOR)||hide(IteratorPrototype,ITERATOR,returnThis)),DEF_VALUES&&$native&&"values"!==$native.name&&(VALUES_BUG=!0,$default=function(){return $native.call(this)}),LIBRARY&&!FORCED||!BUGGY&&!VALUES_BUG&&proto[ITERATOR]||hide(proto,ITERATOR,$default),Iterators[NAME]=$default,Iterators[TAG]=returnThis,DEFAULT)if(methods={values:DEF_VALUES?$default:getMethod("values"),keys:IS_SET?$default:getMethod("keys"),entries:$entries},FORCED)for(key in methods)key in proto||redefine(proto,key,methods[key]);else $export($export.P+$export.F*(BUGGY||VALUES_BUG),NAME,methods);return methods}},{"./_export":32,"./_has":40,"./_hide":41,"./_iter-create":53,"./_iterators":57,"./_library":58,"./_object-gpo":77,"./_redefine":90,"./_set-to-string-tag":96,"./_wks":124}],55:[function(require,module,exports){var ITERATOR=require("./_wks")("iterator"),SAFE_CLOSING=!1;try{var riter=[7][ITERATOR]();riter["return"]=function(){SAFE_CLOSING=!0},Array.from(riter,function(){throw 2})}catch(e){}module.exports=function(exec,skipClosing){if(!skipClosing&&!SAFE_CLOSING)return!1;var safe=!1;try{var arr=[7],iter=arr[ITERATOR]();iter.next=function(){return{done:safe=!0}},arr[ITERATOR]=function(){return iter},exec(arr)}catch(e){}return safe}},{"./_wks":124}],56:[function(require,module,exports){module.exports=function(done,value){return{value:value,done:!!done}}},{}],57:[function(require,module,exports){module.exports={}},{}],58:[function(require,module,exports){module.exports=!1},{}],59:[function(require,module,exports){var $expm1=Math.expm1;module.exports=!$expm1||$expm1(10)>22025.465794806718||$expm1(10)<22025.465794806718||-2e-17!=$expm1(-2e-17)?function(x){return 0==(x=+x)?x:x>-1e-6&&x<1e-6?x+x*x/2:Math.exp(x)-1}:$expm1},{}],60:[function(require,module,exports){var sign=require("./_math-sign"),pow=Math.pow,EPSILON=pow(2,-52),EPSILON32=pow(2,-23),MAX32=pow(2,127)*(2-EPSILON32),MIN32=pow(2,-126);module.exports=Math.fround||function(x){var a,result,$abs=Math.abs(x),$sign=sign(x);return $abs<MIN32?$sign*($abs/MIN32/EPSILON32+1/EPSILON-1/EPSILON)*MIN32*EPSILON32:(result=(a=(1+EPSILON32/EPSILON)*$abs)-(a-$abs))>MAX32||result!=result?$sign*Infinity:$sign*result}},{"./_math-sign":63}],61:[function(require,module,exports){module.exports=Math.log1p||function(x){return(x=+x)>-1e-8&&x<1e-8?x-x*x/2:Math.log(1+x)}},{}],62:[function(require,module,exports){module.exports=Math.scale||function(x,inLow,inHigh,outLow,outHigh){return 0===arguments.length||x!=x||inLow!=inLow||inHigh!=inHigh||outLow!=outLow||outHigh!=outHigh?NaN:x===Infinity||x===-Infinity?x:(x-inLow)*(outHigh-outLow)/(inHigh-inLow)+outLow}},{}],63:[function(require,module,exports){module.exports=Math.sign||function(x){return 0==(x=+x)||x!=x?x:x<0?-1:1}},{}],64:[function(require,module,exports){function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}var META=require("./_uid")("meta"),isObject=require("./_is-object"),has=require("./_has"),setDesc=require("./_object-dp").f,id=0,isExtensible=Object.isExtensible||function(){return!0},FREEZE=!require("./_fails")(function(){return isExtensible(Object.preventExtensions({}))}),setMeta=function(it){setDesc(it,META,{value:{i:"O"+ ++id,w:{}}})},meta=module.exports={KEY:META,NEED:!1,fastKey:function(it,create){if(!isObject(it))return"symbol"==_typeof(it)?it:("string"==typeof it?"S":"P")+it;if(!has(it,META)){if(!isExtensible(it))return"F";if(!create)return"E";setMeta(it)}return it[META].i},getWeak:function(it,create){if(!has(it,META)){if(!isExtensible(it))return!0;if(!create)return!1;setMeta(it)}return it[META].w},onFreeze:function(it){return FREEZE&&meta.NEED&&isExtensible(it)&&!has(it,META)&&setMeta(it),it}}},{"./_fails":34,"./_has":40,"./_is-object":50,"./_object-dp":70,"./_uid":119}],65:[function(require,module,exports){function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}var Map=require("./es6.map"),$export=require("./_export"),shared=require("./_shared")("metadata"),store=shared.store||(shared.store=new(require("./es6.weak-map"))),getOrCreateMetadataMap=function(target,targetKey,create){var targetMetadata=store.get(target);if(!targetMetadata){if(!create)return undefined;store.set(target,targetMetadata=new Map)}var keyMetadata=targetMetadata.get(targetKey);if(!keyMetadata){if(!create)return undefined;targetMetadata.set(targetKey,keyMetadata=new Map)}return keyMetadata};module.exports={store:store,map:getOrCreateMetadataMap,has:function(MetadataKey,O,P){var metadataMap=getOrCreateMetadataMap(O,P,!1);return metadataMap!==undefined&&metadataMap.has(MetadataKey)},get:function(MetadataKey,O,P){var metadataMap=getOrCreateMetadataMap(O,P,!1);return metadataMap===undefined?undefined:metadataMap.get(MetadataKey)},set:function(MetadataKey,MetadataValue,O,P){getOrCreateMetadataMap(O,P,!0).set(MetadataKey,MetadataValue)},keys:function(target,targetKey){var metadataMap=getOrCreateMetadataMap(target,targetKey,!1),keys=[];return metadataMap&&metadataMap.forEach(function(_,key){keys.push(key)}),keys},key:function(it){return it===undefined||"symbol"==_typeof(it)?it:String(it)},exp:function(O){$export($export.S,"Reflect",O)}}},{"./_export":32,"./_shared":98,"./es6.map":155,"./es6.weak-map":261}],66:[function(require,module,exports){var global=require("./_global"),macrotask=require("./_task").set,Observer=global.MutationObserver||global.WebKitMutationObserver,process=global.process,Promise=global.Promise,isNode="process"==require("./_cof")(process);module.exports=function(){var head,last,notify,flush=function(){var parent,fn;for(isNode&&(parent=process.domain)&&parent.exit();head;){fn=head.fn,head=head.next;try{fn()}catch(e){throw head?notify():last=undefined,e}}last=undefined,parent&&parent.enter()};if(isNode)notify=function(){process.nextTick(flush)};else if(!Observer||global.navigator&&global.navigator.standalone)if(Promise&&Promise.resolve){var promise=Promise.resolve();notify=function(){promise.then(flush)}}else notify=function(){macrotask.call(global,flush)};else{var toggle=!0,node=document.createTextNode("");new Observer(flush).observe(node,{characterData:!0}),notify=function(){node.data=toggle=!toggle}}return function(fn){var task={fn:fn,next:undefined};last&&(last.next=task),head||(head=task,notify()),last=task}}},{"./_cof":17,"./_global":39,"./_task":108}],67:[function(require,module,exports){"use strict";var aFunction=require("./_a-function");module.exports.f=function(C){return new function(C){var resolve,reject;this.promise=new C(function($$resolve,$$reject){if(resolve!==undefined||reject!==undefined)throw TypeError("Bad Promise constructor");resolve=$$resolve,reject=$$reject}),this.resolve=aFunction(resolve),this.reject=aFunction(reject)}(C)}},{"./_a-function":2}],68:[function(require,module,exports){"use strict";var getKeys=require("./_object-keys"),gOPS=require("./_object-gops"),pIE=require("./_object-pie"),toObject=require("./_to-object"),IObject=require("./_iobject"),$assign=Object.assign;module.exports=!$assign||require("./_fails")(function(){var A={},B={},S=Symbol(),K="abcdefghijklmnopqrst";return A[S]=7,K.split("").forEach(function(k){B[k]=k}),7!=$assign({},A)[S]||Object.keys($assign({},B)).join("")!=K})?function(target,source){for(var T=toObject(target),aLen=arguments.length,index=1,getSymbols=gOPS.f,isEnum=pIE.f;aLen>index;)for(var key,S=IObject(arguments[index++]),keys=getSymbols?getKeys(S).concat(getSymbols(S)):getKeys(S),length=keys.length,j=0;length>j;)isEnum.call(S,key=keys[j++])&&(T[key]=S[key]);return T}:$assign},{"./_fails":34,"./_iobject":46,"./_object-gops":76,"./_object-keys":79,"./_object-pie":80,"./_to-object":114}],69:[function(require,module,exports){var anObject=require("./_an-object"),dPs=require("./_object-dps"),enumBugKeys=require("./_enum-bug-keys"),IE_PROTO=require("./_shared-key")("IE_PROTO"),Empty=function(){},_createDict=function(){var iframeDocument,iframe=require("./_dom-create")("iframe"),i=enumBugKeys.length;for(iframe.style.display="none",require("./_html").appendChild(iframe),iframe.src="javascript:",(iframeDocument=iframe.contentWindow.document).open(),iframeDocument.write("<script>document.F=Object<\/script>"),iframeDocument.close(),_createDict=iframeDocument.F;i--;)delete _createDict.prototype[enumBugKeys[i]];return _createDict()};module.exports=Object.create||function(O,Properties){var result;return null!==O?(Empty.prototype=anObject(O),result=new Empty,Empty.prototype=null,result[IE_PROTO]=O):result=_createDict(),Properties===undefined?result:dPs(result,Properties)}},{"./_an-object":6,"./_dom-create":29,"./_enum-bug-keys":30,"./_html":42,"./_object-dps":71,"./_shared-key":97}],70:[function(require,module,exports){var anObject=require("./_an-object"),IE8_DOM_DEFINE=require("./_ie8-dom-define"),toPrimitive=require("./_to-primitive"),dP=Object.defineProperty;exports.f=require("./_descriptors")?Object.defineProperty:function(O,P,Attributes){if(anObject(O),P=toPrimitive(P,!0),anObject(Attributes),IE8_DOM_DEFINE)try{return dP(O,P,Attributes)}catch(e){}if("get"in Attributes||"set"in Attributes)throw TypeError("Accessors not supported!");return"value"in Attributes&&(O[P]=Attributes.value),O}},{"./_an-object":6,"./_descriptors":28,"./_ie8-dom-define":43,"./_to-primitive":115}],71:[function(require,module,exports){var dP=require("./_object-dp"),anObject=require("./_an-object"),getKeys=require("./_object-keys");module.exports=require("./_descriptors")?Object.defineProperties:function(O,Properties){anObject(O);for(var P,keys=getKeys(Properties),length=keys.length,i=0;length>i;)dP.f(O,P=keys[i++],Properties[P]);return O}},{"./_an-object":6,"./_descriptors":28,"./_object-dp":70,"./_object-keys":79}],72:[function(require,module,exports){"use strict";module.exports=require("./_library")||!require("./_fails")(function(){var K=Math.random();__defineSetter__.call(null,K,function(){}),delete require("./_global")[K]})},{"./_fails":34,"./_global":39,"./_library":58}],73:[function(require,module,exports){var pIE=require("./_object-pie"),createDesc=require("./_property-desc"),toIObject=require("./_to-iobject"),toPrimitive=require("./_to-primitive"),has=require("./_has"),IE8_DOM_DEFINE=require("./_ie8-dom-define"),gOPD=Object.getOwnPropertyDescriptor;exports.f=require("./_descriptors")?gOPD:function(O,P){if(O=toIObject(O),P=toPrimitive(P,!0),IE8_DOM_DEFINE)try{return gOPD(O,P)}catch(e){}if(has(O,P))return createDesc(!pIE.f.call(O,P),O[P])}},{"./_descriptors":28,"./_has":40,"./_ie8-dom-define":43,"./_object-pie":80,"./_property-desc":88,"./_to-iobject":112,"./_to-primitive":115}],74:[function(require,module,exports){function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}var toIObject=require("./_to-iobject"),gOPN=require("./_object-gopn").f,toString={}.toString,windowNames="object"==("undefined"==typeof window?"undefined":_typeof(window))&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];module.exports.f=function(it){return windowNames&&"[object Window]"==toString.call(it)?function(it){try{return gOPN(it)}catch(e){return windowNames.slice()}}(it):gOPN(toIObject(it))}},{"./_object-gopn":75,"./_to-iobject":112}],75:[function(require,module,exports){var $keys=require("./_object-keys-internal"),hiddenKeys=require("./_enum-bug-keys").concat("length","prototype");exports.f=Object.getOwnPropertyNames||function(O){return $keys(O,hiddenKeys)}},{"./_enum-bug-keys":30,"./_object-keys-internal":78}],76:[function(require,module,exports){exports.f=Object.getOwnPropertySymbols},{}],77:[function(require,module,exports){var has=require("./_has"),toObject=require("./_to-object"),IE_PROTO=require("./_shared-key")("IE_PROTO"),ObjectProto=Object.prototype;module.exports=Object.getPrototypeOf||function(O){return O=toObject(O),has(O,IE_PROTO)?O[IE_PROTO]:"function"==typeof O.constructor&&O instanceof O.constructor?O.constructor.prototype:O instanceof Object?ObjectProto:null}},{"./_has":40,"./_shared-key":97,"./_to-object":114}],78:[function(require,module,exports){var has=require("./_has"),toIObject=require("./_to-iobject"),arrayIndexOf=require("./_array-includes")(!1),IE_PROTO=require("./_shared-key")("IE_PROTO");module.exports=function(object,names){var key,O=toIObject(object),i=0,result=[];for(key in O)key!=IE_PROTO&&has(O,key)&&result.push(key);for(;names.length>i;)has(O,key=names[i++])&&(~arrayIndexOf(result,key)||result.push(key));return result}},{"./_array-includes":10,"./_has":40,"./_shared-key":97,"./_to-iobject":112}],79:[function(require,module,exports){var $keys=require("./_object-keys-internal"),enumBugKeys=require("./_enum-bug-keys");module.exports=Object.keys||function(O){return $keys(O,enumBugKeys)}},{"./_enum-bug-keys":30,"./_object-keys-internal":78}],80:[function(require,module,exports){exports.f={}.propertyIsEnumerable},{}],81:[function(require,module,exports){var $export=require("./_export"),core=require("./_core"),fails=require("./_fails");module.exports=function(KEY,exec){var fn=(core.Object||{})[KEY]||Object[KEY],exp={};exp[KEY]=exec(fn),$export($export.S+$export.F*fails(function(){fn(1)}),"Object",exp)}},{"./_core":22,"./_export":32,"./_fails":34}],82:[function(require,module,exports){var getKeys=require("./_object-keys"),toIObject=require("./_to-iobject"),isEnum=require("./_object-pie").f;module.exports=function(isEntries){return function(it){for(var key,O=toIObject(it),keys=getKeys(O),length=keys.length,i=0,result=[];length>i;)isEnum.call(O,key=keys[i++])&&result.push(isEntries?[key,O[key]]:O[key]);return result}}},{"./_object-keys":79,"./_object-pie":80,"./_to-iobject":112}],83:[function(require,module,exports){var gOPN=require("./_object-gopn"),gOPS=require("./_object-gops"),anObject=require("./_an-object"),Reflect=require("./_global").Reflect;module.exports=Reflect&&Reflect.ownKeys||function(it){var keys=gOPN.f(anObject(it)),getSymbols=gOPS.f;return getSymbols?keys.concat(getSymbols(it)):keys}},{"./_an-object":6,"./_global":39,"./_object-gopn":75,"./_object-gops":76}],84:[function(require,module,exports){var $parseFloat=require("./_global").parseFloat,$trim=require("./_string-trim").trim;module.exports=1/$parseFloat(require("./_string-ws")+"-0")!=-Infinity?function(str){var string=$trim(String(str),3),result=$parseFloat(string);return 0===result&&"-"==string.charAt(0)?-0:result}:$parseFloat},{"./_global":39,"./_string-trim":106,"./_string-ws":107}],85:[function(require,module,exports){var $parseInt=require("./_global").parseInt,$trim=require("./_string-trim").trim,ws=require("./_string-ws"),hex=/^[-+]?0[xX]/;module.exports=8!==$parseInt(ws+"08")||22!==$parseInt(ws+"0x16")?function(str,radix){var string=$trim(String(str),3);return $parseInt(string,radix>>>0||(hex.test(string)?16:10))}:$parseInt},{"./_global":39,"./_string-trim":106,"./_string-ws":107}],86:[function(require,module,exports){module.exports=function(exec){try{return{e:!1,v:exec()}}catch(e){return{e:!0,v:e}}}},{}],87:[function(require,module,exports){var anObject=require("./_an-object"),isObject=require("./_is-object"),newPromiseCapability=require("./_new-promise-capability");module.exports=function(C,x){if(anObject(C),isObject(x)&&x.constructor===C)return x;var promiseCapability=newPromiseCapability.f(C);return(0,promiseCapability.resolve)(x),promiseCapability.promise}},{"./_an-object":6,"./_is-object":50,"./_new-promise-capability":67}],88:[function(require,module,exports){module.exports=function(bitmap,value){return{enumerable:!(1&bitmap),configurable:!(2&bitmap),writable:!(4&bitmap),value:value}}},{}],89:[function(require,module,exports){var redefine=require("./_redefine");module.exports=function(target,src,safe){for(var key in src)redefine(target,key,src[key],safe);return target}},{"./_redefine":90}],90:[function(require,module,exports){var global=require("./_global"),hide=require("./_hide"),has=require("./_has"),SRC=require("./_uid")("src"),$toString=Function.toString,TPL=(""+$toString).split("toString");require("./_core").inspectSource=function(it){return $toString.call(it)},(module.exports=function(O,key,val,safe){var isFunction="function"==typeof val;isFunction&&(has(val,"name")||hide(val,"name",key)),O[key]!==val&&(isFunction&&(has(val,SRC)||hide(val,SRC,O[key]?""+O[key]:TPL.join(String(key)))),O===global?O[key]=val:safe?O[key]?O[key]=val:hide(O,key,val):(delete O[key],hide(O,key,val)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[SRC]||$toString.call(this)})},{"./_core":22,"./_global":39,"./_has":40,"./_hide":41,"./_uid":119}],91:[function(require,module,exports){module.exports=Object.is||function(x,y){return x===y?0!==x||1/x==1/y:x!=x&&y!=y}},{}],92:[function(require,module,exports){"use strict";var $export=require("./_export"),aFunction=require("./_a-function"),ctx=require("./_ctx"),forOf=require("./_for-of");module.exports=function(COLLECTION){$export($export.S,COLLECTION,{from:function(source){var mapping,A,n,cb,mapFn=arguments[1];return aFunction(this),(mapping=mapFn!==undefined)&&aFunction(mapFn),source==undefined?new this:(A=[],mapping?(n=0,cb=ctx(mapFn,arguments[2],2),forOf(source,!1,function(nextItem){A.push(cb(nextItem,n++))})):forOf(source,!1,A.push,A),new this(A))}})}},{"./_a-function":2,"./_ctx":24,"./_export":32,"./_for-of":38}],93:[function(require,module,exports){"use strict";var $export=require("./_export");module.exports=function(COLLECTION){$export($export.S,COLLECTION,{of:function(){for(var length=arguments.length,A=new Array(length);length--;)A[length]=arguments[length];return new this(A)}})}},{"./_export":32}],94:[function(require,module,exports){var isObject=require("./_is-object"),anObject=require("./_an-object"),check=function(O,proto){if(anObject(O),!isObject(proto)&&null!==proto)throw TypeError(proto+": can't set as prototype!")};module.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(test,buggy,set){try{(set=require("./_ctx")(Function.call,require("./_object-gopd").f(Object.prototype,"__proto__").set,2))(test,[]),buggy=!(test instanceof Array)}catch(e){buggy=!0}return function(O,proto){return check(O,proto),buggy?O.__proto__=proto:set(O,proto),O}}({},!1):undefined),check:check}},{"./_an-object":6,"./_ctx":24,"./_is-object":50,"./_object-gopd":73}],95:[function(require,module,exports){"use strict";var global=require("./_global"),dP=require("./_object-dp"),DESCRIPTORS=require("./_descriptors"),SPECIES=require("./_wks")("species");module.exports=function(KEY){var C=global[KEY];DESCRIPTORS&&C&&!C[SPECIES]&&dP.f(C,SPECIES,{configurable:!0,get:function(){return this}})}},{"./_descriptors":28,"./_global":39,"./_object-dp":70,"./_wks":124}],96:[function(require,module,exports){var def=require("./_object-dp").f,has=require("./_has"),TAG=require("./_wks")("toStringTag");module.exports=function(it,tag,stat){it&&!has(it=stat?it:it.prototype,TAG)&&def(it,TAG,{configurable:!0,value:tag})}},{"./_has":40,"./_object-dp":70,"./_wks":124}],97:[function(require,module,exports){var shared=require("./_shared")("keys"),uid=require("./_uid");module.exports=function(key){return shared[key]||(shared[key]=uid(key))}},{"./_shared":98,"./_uid":119}],98:[function(require,module,exports){var global=require("./_global"),store=global["__core-js_shared__"]||(global["__core-js_shared__"]={});module.exports=function(key){return store[key]||(store[key]={})}},{"./_global":39}],99:[function(require,module,exports){var anObject=require("./_an-object"),aFunction=require("./_a-function"),SPECIES=require("./_wks")("species");module.exports=function(O,D){var S,C=anObject(O).constructor;return C===undefined||(S=anObject(C)[SPECIES])==undefined?D:aFunction(S)}},{"./_a-function":2,"./_an-object":6,"./_wks":124}],100:[function(require,module,exports){"use strict";var fails=require("./_fails");module.exports=function(method,arg){return!!method&&fails(function(){arg?method.call(null,function(){},1):method.call(null)})}},{"./_fails":34}],101:[function(require,module,exports){var toInteger=require("./_to-integer"),defined=require("./_defined");module.exports=function(TO_STRING){return function(that,pos){var a,b,s=String(defined(that)),i=toInteger(pos),l=s.length;return i<0||i>=l?TO_STRING?"":undefined:(a=s.charCodeAt(i))<55296||a>56319||i+1===l||(b=s.charCodeAt(i+1))<56320||b>57343?TO_STRING?s.charAt(i):a:TO_STRING?s.slice(i,i+2):b-56320+(a-55296<<10)+65536}}},{"./_defined":27,"./_to-integer":111}],102:[function(require,module,exports){var isRegExp=require("./_is-regexp"),defined=require("./_defined");module.exports=function(that,searchString,NAME){if(isRegExp(searchString))throw TypeError("String#"+NAME+" doesn't accept regex!");return String(defined(that))}},{"./_defined":27,"./_is-regexp":51}],103:[function(require,module,exports){var $export=require("./_export"),fails=require("./_fails"),defined=require("./_defined"),quot=/"/g,createHTML=function(string,tag,attribute,value){var S=String(defined(string)),p1="<"+tag;return""!==attribute&&(p1+=" "+attribute+'="'+String(value).replace(quot,"&quot;")+'"'),p1+">"+S+"</"+tag+">"};module.exports=function(NAME,exec){var O={};O[NAME]=exec(createHTML),$export($export.P+$export.F*fails(function(){var test=""[NAME]('"');return test!==test.toLowerCase()||test.split('"').length>3}),"String",O)}},{"./_defined":27,"./_export":32,"./_fails":34}],104:[function(require,module,exports){var toLength=require("./_to-length"),repeat=require("./_string-repeat"),defined=require("./_defined");module.exports=function(that,maxLength,fillString,left){var S=String(defined(that)),stringLength=S.length,fillStr=fillString===undefined?" ":String(fillString),intMaxLength=toLength(maxLength);if(intMaxLength<=stringLength||""==fillStr)return S;var fillLen=intMaxLength-stringLength,stringFiller=repeat.call(fillStr,Math.ceil(fillLen/fillStr.length));return stringFiller.length>fillLen&&(stringFiller=stringFiller.slice(0,fillLen)),left?stringFiller+S:S+stringFiller}},{"./_defined":27,"./_string-repeat":105,"./_to-length":113}],105:[function(require,module,exports){"use strict";var toInteger=require("./_to-integer"),defined=require("./_defined");module.exports=function(count){var str=String(defined(this)),res="",n=toInteger(count);if(n<0||n==Infinity)throw RangeError("Count can't be negative");for(;n>0;(n>>>=1)&&(str+=str))1&n&&(res+=str);return res}},{"./_defined":27,"./_to-integer":111}],106:[function(require,module,exports){var $export=require("./_export"),defined=require("./_defined"),fails=require("./_fails"),spaces=require("./_string-ws"),space="["+spaces+"]",ltrim=RegExp("^"+space+space+"*"),rtrim=RegExp(space+space+"*$"),exporter=function(KEY,exec,ALIAS){var exp={},FORCE=fails(function(){return!!spaces[KEY]()||"\u200b\x85"!="\u200b\x85"[KEY]()}),fn=exp[KEY]=FORCE?exec(trim):spaces[KEY];ALIAS&&(exp[ALIAS]=fn),$export($export.P+$export.F*FORCE,"String",exp)},trim=exporter.trim=function(string,TYPE){return string=String(defined(string)),1&TYPE&&(string=string.replace(ltrim,"")),2&TYPE&&(string=string.replace(rtrim,"")),string};module.exports=exporter},{"./_defined":27,"./_export":32,"./_fails":34,"./_string-ws":107}],107:[function(require,module,exports){module.exports="\t\n\x0B\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff"},{}],108:[function(require,module,exports){var defer,channel,port,ctx=require("./_ctx"),invoke=require("./_invoke"),html=require("./_html"),cel=require("./_dom-create"),global=require("./_global"),process=global.process,setTask=global.setImmediate,clearTask=global.clearImmediate,MessageChannel=global.MessageChannel,Dispatch=global.Dispatch,counter=0,queue={},run=function(){var id=+this;if(queue.hasOwnProperty(id)){var fn=queue[id];delete queue[id],fn()}},listener=function(event){run.call(event.data)};setTask&&clearTask||(setTask=function(fn){for(var args=[],i=1;arguments.length>i;)args.push(arguments[i++]);return queue[++counter]=function(){invoke("function"==typeof fn?fn:Function(fn),args)},defer(counter),counter},clearTask=function(id){delete queue[id]},"process"==require("./_cof")(process)?defer=function(id){process.nextTick(ctx(run,id,1))}:Dispatch&&Dispatch.now?defer=function(id){Dispatch.now(ctx(run,id,1))}:MessageChannel?(port=(channel=new MessageChannel).port2,channel.port1.onmessage=listener,defer=ctx(port.postMessage,port,1)):global.addEventListener&&"function"==typeof postMessage&&!global.importScripts?(defer=function(id){global.postMessage(id+"","*")},global.addEventListener("message",listener,!1)):defer="onreadystatechange"in cel("script")?function(id){html.appendChild(cel("script")).onreadystatechange=function(){html.removeChild(this),run.call(id)}}:function(id){setTimeout(ctx(run,id,1),0)}),module.exports={set:setTask,clear:clearTask}},{"./_cof":17,"./_ctx":24,"./_dom-create":29,"./_global":39,"./_html":42,"./_invoke":45}],109:[function(require,module,exports){var toInteger=require("./_to-integer"),max=Math.max,min=Math.min;module.exports=function(index,length){return(index=toInteger(index))<0?max(index+length,0):min(index,length)}},{"./_to-integer":111}],110:[function(require,module,exports){var toInteger=require("./_to-integer"),toLength=require("./_to-length");module.exports=function(it){if(it===undefined)return 0;var number=toInteger(it),length=toLength(number);if(number!==length)throw RangeError("Wrong length!");return length}},{"./_to-integer":111,"./_to-length":113}],111:[function(require,module,exports){var ceil=Math.ceil,floor=Math.floor;module.exports=function(it){return isNaN(it=+it)?0:(it>0?floor:ceil)(it)}},{}],112:[function(require,module,exports){var IObject=require("./_iobject"),defined=require("./_defined");module.exports=function(it){return IObject(defined(it))}},{"./_defined":27,"./_iobject":46}],113:[function(require,module,exports){var toInteger=require("./_to-integer"),min=Math.min;module.exports=function(it){return it>0?min(toInteger(it),9007199254740991):0}},{"./_to-integer":111}],114:[function(require,module,exports){var defined=require("./_defined");module.exports=function(it){return Object(defined(it))}},{"./_defined":27}],115:[function(require,module,exports){var isObject=require("./_is-object");module.exports=function(it,S){if(!isObject(it))return it;var fn,val;if(S&&"function"==typeof(fn=it.toString)&&!isObject(val=fn.call(it)))return val;if("function"==typeof(fn=it.valueOf)&&!isObject(val=fn.call(it)))return val;if(!S&&"function"==typeof(fn=it.toString)&&!isObject(val=fn.call(it)))return val;throw TypeError("Can't convert object to primitive value")}},{"./_is-object":50}],116:[function(require,module,exports){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}if(require("./_descriptors")){var LIBRARY=require("./_library"),global=require("./_global"),fails=require("./_fails"),$export=require("./_export"),$typed=require("./_typed"),$buffer=require("./_typed-buffer"),ctx=require("./_ctx"),anInstance=require("./_an-instance"),propertyDesc=require("./_property-desc"),hide=require("./_hide"),redefineAll=require("./_redefine-all"),toInteger=require("./_to-integer"),toLength=require("./_to-length"),toIndex=require("./_to-index"),toAbsoluteIndex=require("./_to-absolute-index"),toPrimitive=require("./_to-primitive"),has=require("./_has"),classof=require("./_classof"),isObject=require("./_is-object"),toObject=require("./_to-object"),isArrayIter=require("./_is-array-iter"),create=require("./_object-create"),getPrototypeOf=require("./_object-gpo"),gOPN=require("./_object-gopn").f,getIterFn=require("./core.get-iterator-method"),uid=require("./_uid"),wks=require("./_wks"),createArrayMethod=require("./_array-methods"),createArrayIncludes=require("./_array-includes"),speciesConstructor=require("./_species-constructor"),ArrayIterators=require("./es6.array.iterator"),Iterators=require("./_iterators"),$iterDetect=require("./_iter-detect"),setSpecies=require("./_set-species"),arrayFill=require("./_array-fill"),arrayCopyWithin=require("./_array-copy-within"),$DP=require("./_object-dp"),$GOPD=require("./_object-gopd"),dP=$DP.f,gOPD=$GOPD.f,RangeError=global.RangeError,TypeError=global.TypeError,Uint8Array=global.Uint8Array,ArrayProto=Array.prototype,$ArrayBuffer=$buffer.ArrayBuffer,$DataView=$buffer.DataView,arrayForEach=createArrayMethod(0),arrayFilter=createArrayMethod(2),arraySome=createArrayMethod(3),arrayEvery=createArrayMethod(4),arrayFind=createArrayMethod(5),arrayFindIndex=createArrayMethod(6),arrayIncludes=createArrayIncludes(!0),arrayIndexOf=createArrayIncludes(!1),arrayValues=ArrayIterators.values,arrayKeys=ArrayIterators.keys,arrayEntries=ArrayIterators.entries,arrayLastIndexOf=ArrayProto.lastIndexOf,arrayReduce=ArrayProto.reduce,arrayReduceRight=ArrayProto.reduceRight,arrayJoin=ArrayProto.join,arraySort=ArrayProto.sort,arraySlice=ArrayProto.slice,arrayToString=ArrayProto.toString,arrayToLocaleString=ArrayProto.toLocaleString,ITERATOR=wks("iterator"),TAG=wks("toStringTag"),TYPED_CONSTRUCTOR=uid("typed_constructor"),DEF_CONSTRUCTOR=uid("def_constructor"),ALL_CONSTRUCTORS=$typed.CONSTR,TYPED_ARRAY=$typed.TYPED,VIEW=$typed.VIEW,$map=createArrayMethod(1,function(O,length){return allocate(speciesConstructor(O,O[DEF_CONSTRUCTOR]),length)}),LITTLE_ENDIAN=fails(function(){return 1===new Uint8Array(new Uint16Array([1]).buffer)[0]}),FORCED_SET=!!Uint8Array&&!!Uint8Array.prototype.set&&fails(function(){new Uint8Array(1).set({})}),toOffset=function(it,BYTES){var offset=toInteger(it);if(offset<0||offset%BYTES)throw RangeError("Wrong offset!");return offset},validate=function(it){if(isObject(it)&&TYPED_ARRAY in it)return it;throw TypeError(it+" is not a typed array!")},allocate=function(C,length){if(!(isObject(C)&&TYPED_CONSTRUCTOR in C))throw TypeError("It is not a typed array constructor!");return new C(length)},speciesFromList=function(O,list){return fromList(speciesConstructor(O,O[DEF_CONSTRUCTOR]),list)},fromList=function(C,list){for(var index=0,length=list.length,result=allocate(C,length);length>index;)result[index]=list[index++];return result},addGetter=function(it,key,internal){dP(it,key,{get:function(){return this._d[internal]}})},$from=function(source){var i,length,values,result,step,iterator,O=toObject(source),aLen=arguments.length,mapfn=aLen>1?arguments[1]:undefined,mapping=mapfn!==undefined,iterFn=getIterFn(O);if(iterFn!=undefined&&!isArrayIter(iterFn)){for(iterator=iterFn.call(O),values=[],i=0;!(step=iterator.next()).done;i++)values.push(step.value);O=values}for(mapping&&aLen>2&&(mapfn=ctx(mapfn,arguments[2],2)),i=0,length=toLength(O.length),result=allocate(this,length);length>i;i++)result[i]=mapping?mapfn(O[i],i):O[i];return result},$of=function(){for(var index=0,length=arguments.length,result=allocate(this,length);length>index;)result[index]=arguments[index++];return result},TO_LOCALE_BUG=!!Uint8Array&&fails(function(){arrayToLocaleString.call(new Uint8Array(1))}),$toLocaleString=function(){return arrayToLocaleString.apply(TO_LOCALE_BUG?arraySlice.call(validate(this)):validate(this),arguments)},proto={copyWithin:function(target,start){return arrayCopyWithin.call(validate(this),target,start,arguments.length>2?arguments[2]:undefined)},every:function(callbackfn){return arrayEvery(validate(this),callbackfn,arguments.length>1?arguments[1]:undefined)},fill:function(value){return arrayFill.apply(validate(this),arguments)},filter:function(callbackfn){return speciesFromList(this,arrayFilter(validate(this),callbackfn,arguments.length>1?arguments[1]:undefined))},find:function(predicate){return arrayFind(validate(this),predicate,arguments.length>1?arguments[1]:undefined)},findIndex:function(predicate){return arrayFindIndex(validate(this),predicate,arguments.length>1?arguments[1]:undefined)},forEach:function(callbackfn){arrayForEach(validate(this),callbackfn,arguments.length>1?arguments[1]:undefined)},indexOf:function(searchElement){return arrayIndexOf(validate(this),searchElement,arguments.length>1?arguments[1]:undefined)},includes:function(searchElement){return arrayIncludes(validate(this),searchElement,arguments.length>1?arguments[1]:undefined)},join:function(separator){return arrayJoin.apply(validate(this),arguments)},lastIndexOf:function(searchElement){return arrayLastIndexOf.apply(validate(this),arguments)},map:function(mapfn){return $map(validate(this),mapfn,arguments.length>1?arguments[1]:undefined)},reduce:function(callbackfn){return arrayReduce.apply(validate(this),arguments)},reduceRight:function(callbackfn){return arrayReduceRight.apply(validate(this),arguments)},reverse:function(){for(var value,length=validate(this).length,middle=Math.floor(length/2),index=0;index<middle;)value=this[index],this[index++]=this[--length],this[length]=value;return this},some:function(callbackfn){return arraySome(validate(this),callbackfn,arguments.length>1?arguments[1]:undefined)},sort:function(comparefn){return arraySort.call(validate(this),comparefn)},subarray:function(begin,end){var O=validate(this),length=O.length,$begin=toAbsoluteIndex(begin,length);return new(speciesConstructor(O,O[DEF_CONSTRUCTOR]))(O.buffer,O.byteOffset+$begin*O.BYTES_PER_ELEMENT,toLength((end===undefined?length:toAbsoluteIndex(end,length))-$begin))}},$slice=function(start,end){return speciesFromList(this,arraySlice.call(validate(this),start,end))},$set=function(arrayLike){validate(this);var offset=toOffset(arguments[1],1),length=this.length,src=toObject(arrayLike),len=toLength(src.length),index=0;if(len+offset>length)throw RangeError("Wrong length!");for(;index<len;)this[offset+index]=src[index++]},$iterators={entries:function(){return arrayEntries.call(validate(this))},keys:function(){return arrayKeys.call(validate(this))},values:function(){return arrayValues.call(validate(this))}},isTAIndex=function(target,key){return isObject(target)&&target[TYPED_ARRAY]&&"symbol"!=_typeof(key)&&key in target&&String(+key)==String(key)},$getDesc=function(target,key){return isTAIndex(target,key=toPrimitive(key,!0))?propertyDesc(2,target[key]):gOPD(target,key)},$setDesc=function(target,key,desc){return!(isTAIndex(target,key=toPrimitive(key,!0))&&isObject(desc)&&has(desc,"value"))||has(desc,"get")||has(desc,"set")||desc.configurable||has(desc,"writable")&&!desc.writable||has(desc,"enumerable")&&!desc.enumerable?dP(target,key,desc):(target[key]=desc.value,target)};ALL_CONSTRUCTORS||($GOPD.f=$getDesc,$DP.f=$setDesc),$export($export.S+$export.F*!ALL_CONSTRUCTORS,"Object",{getOwnPropertyDescriptor:$getDesc,defineProperty:$setDesc}),fails(function(){arrayToString.call({})})&&(arrayToString=arrayToLocaleString=function(){return arrayJoin.call(this)});var $TypedArrayPrototype$=redefineAll({},proto);redefineAll($TypedArrayPrototype$,$iterators),hide($TypedArrayPrototype$,ITERATOR,$iterators.values),redefineAll($TypedArrayPrototype$,{slice:$slice,set:$set,constructor:function(){},toString:arrayToString,toLocaleString:$toLocaleString}),addGetter($TypedArrayPrototype$,"buffer","b"),addGetter($TypedArrayPrototype$,"byteOffset","o"),addGetter($TypedArrayPrototype$,"byteLength","l"),addGetter($TypedArrayPrototype$,"length","e"),dP($TypedArrayPrototype$,TAG,{get:function(){return this[TYPED_ARRAY]}}),module.exports=function(KEY,BYTES,wrapper,CLAMPED){var NAME=KEY+((CLAMPED=!!CLAMPED)?"Clamped":"")+"Array",GETTER="get"+KEY,SETTER="set"+KEY,TypedArray=global[NAME],Base=TypedArray||{},TAC=TypedArray&&getPrototypeOf(TypedArray),FORCED=!TypedArray||!$typed.ABV,O={},TypedArrayPrototype=TypedArray&&TypedArray.prototype,addElement=function(that,index){dP(that,index,{get:function(){return function(that,index){var data=that._d;return data.v[GETTER](index*BYTES+data.o,LITTLE_ENDIAN)}(this,index)},set:function(value){return function(that,index,value){var data=that._d;CLAMPED&&(value=(value=Math.round(value))<0?0:value>255?255:255&value),data.v[SETTER](index*BYTES+data.o,value,LITTLE_ENDIAN)}(this,index,value)},enumerable:!0})};FORCED?(TypedArray=wrapper(function(that,data,$offset,$length){anInstance(that,TypedArray,NAME,"_d");var buffer,byteLength,length,klass,index=0,offset=0;if(isObject(data)){if(!(data instanceof $ArrayBuffer||"ArrayBuffer"==(klass=classof(data))||"SharedArrayBuffer"==klass))return TYPED_ARRAY in data?fromList(TypedArray,data):$from.call(TypedArray,data);buffer=data,offset=toOffset($offset,BYTES);var $len=data.byteLength;if($length===undefined){if($len%BYTES)throw RangeError("Wrong length!");if((byteLength=$len-offset)<0)throw RangeError("Wrong length!")}else if((byteLength=toLength($length)*BYTES)+offset>$len)throw RangeError("Wrong length!");length=byteLength/BYTES}else length=toIndex(data),buffer=new $ArrayBuffer(byteLength=length*BYTES);for(hide(that,"_d",{b:buffer,o:offset,l:byteLength,e:length,v:new $DataView(buffer)});index<length;)addElement(that,index++)}),TypedArrayPrototype=TypedArray.prototype=create($TypedArrayPrototype$),hide(TypedArrayPrototype,"constructor",TypedArray)):fails(function(){TypedArray(1)})&&fails(function(){new TypedArray(-1)})&&$iterDetect(function(iter){new TypedArray,new TypedArray(null),new TypedArray(1.5),new TypedArray(iter)},!0)||(TypedArray=wrapper(function(that,data,$offset,$length){var klass;return anInstance(that,TypedArray,NAME),isObject(data)?data instanceof $ArrayBuffer||"ArrayBuffer"==(klass=classof(data))||"SharedArrayBuffer"==klass?$length!==undefined?new Base(data,toOffset($offset,BYTES),$length):$offset!==undefined?new Base(data,toOffset($offset,BYTES)):new Base(data):TYPED_ARRAY in data?fromList(TypedArray,data):$from.call(TypedArray,data):new Base(toIndex(data))}),arrayForEach(TAC!==Function.prototype?gOPN(Base).concat(gOPN(TAC)):gOPN(Base),function(key){key in TypedArray||hide(TypedArray,key,Base[key])}),TypedArray.prototype=TypedArrayPrototype,LIBRARY||(TypedArrayPrototype.constructor=TypedArray));var $nativeIterator=TypedArrayPrototype[ITERATOR],CORRECT_ITER_NAME=!!$nativeIterator&&("values"==$nativeIterator.name||$nativeIterator.name==undefined),$iterator=$iterators.values;hide(TypedArray,TYPED_CONSTRUCTOR,!0),hide(TypedArrayPrototype,TYPED_ARRAY,NAME),hide(TypedArrayPrototype,VIEW,!0),hide(TypedArrayPrototype,DEF_CONSTRUCTOR,TypedArray),(CLAMPED?new TypedArray(1)[TAG]==NAME:TAG in TypedArrayPrototype)||dP(TypedArrayPrototype,TAG,{get:function(){return NAME}}),O[NAME]=TypedArray,$export($export.G+$export.W+$export.F*(TypedArray!=Base),O),$export($export.S,NAME,{BYTES_PER_ELEMENT:BYTES}),$export($export.S+$export.F*fails(function(){Base.of.call(TypedArray,1)}),NAME,{from:$from,of:$of}),"BYTES_PER_ELEMENT"in TypedArrayPrototype||hide(TypedArrayPrototype,"BYTES_PER_ELEMENT",BYTES),$export($export.P,NAME,proto),setSpecies(NAME),$export($export.P+$export.F*FORCED_SET,NAME,{set:$set}),$export($export.P+$export.F*!CORRECT_ITER_NAME,NAME,$iterators),LIBRARY||TypedArrayPrototype.toString==arrayToString||(TypedArrayPrototype.toString=arrayToString),$export($export.P+$export.F*fails(function(){new TypedArray(1).slice()}),NAME,{slice:$slice}),$export($export.P+$export.F*(fails(function(){return[1,2].toLocaleString()!=new TypedArray([1,2]).toLocaleString()})||!fails(function(){TypedArrayPrototype.toLocaleString.call([1,2])})),NAME,{toLocaleString:$toLocaleString}),Iterators[NAME]=CORRECT_ITER_NAME?$nativeIterator:$iterator,LIBRARY||CORRECT_ITER_NAME||hide(TypedArrayPrototype,ITERATOR,$iterator)}}else module.exports=function(){}},{"./_an-instance":5,"./_array-copy-within":7,"./_array-fill":8,"./_array-includes":10,"./_array-methods":11,"./_classof":16,"./_ctx":24,"./_descriptors":28,"./_export":32,"./_fails":34,"./_global":39,"./_has":40,"./_hide":41,"./_is-array-iter":47,"./_is-object":50,"./_iter-detect":55,"./_iterators":57,"./_library":58,"./_object-create":69,"./_object-dp":70,"./_object-gopd":73,"./_object-gopn":75,"./_object-gpo":77,"./_property-desc":88,"./_redefine-all":89,"./_set-species":95,"./_species-constructor":99,"./_to-absolute-index":109,"./_to-index":110,"./_to-integer":111,"./_to-length":113,"./_to-object":114,"./_to-primitive":115,"./_typed":118,"./_typed-buffer":117,"./_uid":119,"./_wks":124,"./core.get-iterator-method":125,"./es6.array.iterator":136}],117:[function(require,module,exports){"use strict";var global=require("./_global"),DESCRIPTORS=require("./_descriptors"),LIBRARY=require("./_library"),$typed=require("./_typed"),hide=require("./_hide"),redefineAll=require("./_redefine-all"),fails=require("./_fails"),anInstance=require("./_an-instance"),toInteger=require("./_to-integer"),toLength=require("./_to-length"),toIndex=require("./_to-index"),gOPN=require("./_object-gopn").f,dP=require("./_object-dp").f,arrayFill=require("./_array-fill"),setToStringTag=require("./_set-to-string-tag"),PROTOTYPE="prototype",WRONG_INDEX="Wrong index!",$ArrayBuffer=global.ArrayBuffer,$DataView=global.DataView,Math=global.Math,RangeError=global.RangeError,Infinity=global.Infinity,BaseBuffer=$ArrayBuffer,abs=Math.abs,pow=Math.pow,floor=Math.floor,log=Math.log,LN2=Math.LN2,$BUFFER=DESCRIPTORS?"_b":"buffer",$LENGTH=DESCRIPTORS?"_l":"byteLength",$OFFSET=DESCRIPTORS?"_o":"byteOffset";function packIEEE754(value,mLen,nBytes){var e,m,c,buffer=new Array(nBytes),eLen=8*nBytes-mLen-1,eMax=(1<<eLen)-1,eBias=eMax>>1,rt=23===mLen?pow(2,-24)-pow(2,-77):0,i=0,s=value<0||0===value&&1/value<0?1:0;for((value=abs(value))!=value||value===Infinity?(m=value!=value?1:0,e=eMax):(e=floor(log(value)/LN2),value*(c=pow(2,-e))<1&&(e--,c*=2),(value+=e+eBias>=1?rt/c:rt*pow(2,1-eBias))*c>=2&&(e++,c/=2),e+eBias>=eMax?(m=0,e=eMax):e+eBias>=1?(m=(value*c-1)*pow(2,mLen),e+=eBias):(m=value*pow(2,eBias-1)*pow(2,mLen),e=0));mLen>=8;buffer[i++]=255&m,m/=256,mLen-=8);for(e=e<<mLen|m,eLen+=mLen;eLen>0;buffer[i++]=255&e,e/=256,eLen-=8);return buffer[--i]|=128*s,buffer}function unpackIEEE754(buffer,mLen,nBytes){var m,eLen=8*nBytes-mLen-1,eMax=(1<<eLen)-1,eBias=eMax>>1,nBits=eLen-7,i=nBytes-1,s=buffer[i--],e=127&s;for(s>>=7;nBits>0;e=256*e+buffer[i],i--,nBits-=8);for(m=e&(1<<-nBits)-1,e>>=-nBits,nBits+=mLen;nBits>0;m=256*m+buffer[i],i--,nBits-=8);if(0===e)e=1-eBias;else{if(e===eMax)return m?NaN:s?-Infinity:Infinity;m+=pow(2,mLen),e-=eBias}return(s?-1:1)*m*pow(2,e-mLen)}function unpackI32(bytes){return bytes[3]<<24|bytes[2]<<16|bytes[1]<<8|bytes[0]}function packI8(it){return[255&it]}function packI16(it){return[255&it,it>>8&255]}function packI32(it){return[255&it,it>>8&255,it>>16&255,it>>24&255]}function packF64(it){return packIEEE754(it,52,8)}function packF32(it){return packIEEE754(it,23,4)}function addGetter(C,key,internal){dP(C[PROTOTYPE],key,{get:function(){return this[internal]}})}function get(view,bytes,index,isLittleEndian){var intIndex=toIndex(+index);if(intIndex+bytes>view[$LENGTH])throw RangeError(WRONG_INDEX);var store=view[$BUFFER]._b,start=intIndex+view[$OFFSET],pack=store.slice(start,start+bytes);return isLittleEndian?pack:pack.reverse()}function set(view,bytes,index,conversion,value,isLittleEndian){var intIndex=toIndex(+index);if(intIndex+bytes>view[$LENGTH])throw RangeError(WRONG_INDEX);for(var store=view[$BUFFER]._b,start=intIndex+view[$OFFSET],pack=conversion(+value),i=0;i<bytes;i++)store[start+i]=pack[isLittleEndian?i:bytes-i-1]}if($typed.ABV){if(!fails(function(){$ArrayBuffer(1)})||!fails(function(){new $ArrayBuffer(-1)})||fails(function(){return new $ArrayBuffer,new $ArrayBuffer(1.5),new $ArrayBuffer(NaN),"ArrayBuffer"!=$ArrayBuffer.name})){for(var key,ArrayBufferProto=($ArrayBuffer=function(length){return anInstance(this,$ArrayBuffer),new BaseBuffer(toIndex(length))})[PROTOTYPE]=BaseBuffer[PROTOTYPE],keys=gOPN(BaseBuffer),j=0;keys.length>j;)(key=keys[j++])in $ArrayBuffer||hide($ArrayBuffer,key,BaseBuffer[key]);LIBRARY||(ArrayBufferProto.constructor=$ArrayBuffer)}var view=new $DataView(new $ArrayBuffer(2)),$setInt8=$DataView[PROTOTYPE].setInt8;view.setInt8(0,2147483648),view.setInt8(1,2147483649),!view.getInt8(0)&&view.getInt8(1)||redefineAll($DataView[PROTOTYPE],{setInt8:function(byteOffset,value){$setInt8.call(this,byteOffset,value<<24>>24)},setUint8:function(byteOffset,value){$setInt8.call(this,byteOffset,value<<24>>24)}},!0)}else $ArrayBuffer=function(length){anInstance(this,$ArrayBuffer,"ArrayBuffer");var byteLength=toIndex(length);this._b=arrayFill.call(new Array(byteLength),0),this[$LENGTH]=byteLength},$DataView=function(buffer,byteOffset,byteLength){anInstance(this,$DataView,"DataView"),anInstance(buffer,$ArrayBuffer,"DataView");var bufferLength=buffer[$LENGTH],offset=toInteger(byteOffset);if(offset<0||offset>bufferLength)throw RangeError("Wrong offset!");if(offset+(byteLength=byteLength===undefined?bufferLength-offset:toLength(byteLength))>bufferLength)throw RangeError("Wrong length!");this[$BUFFER]=buffer,this[$OFFSET]=offset,this[$LENGTH]=byteLength},DESCRIPTORS&&(addGetter($ArrayBuffer,"byteLength","_l"),addGetter($DataView,"buffer","_b"),addGetter($DataView,"byteLength","_l"),addGetter($DataView,"byteOffset","_o")),redefineAll($DataView[PROTOTYPE],{getInt8:function(byteOffset){return get(this,1,byteOffset)[0]<<24>>24},getUint8:function(byteOffset){return get(this,1,byteOffset)[0]},getInt16:function(byteOffset){var bytes=get(this,2,byteOffset,arguments[1]);return(bytes[1]<<8|bytes[0])<<16>>16},getUint16:function(byteOffset){var bytes=get(this,2,byteOffset,arguments[1]);return bytes[1]<<8|bytes[0]},getInt32:function(byteOffset){return unpackI32(get(this,4,byteOffset,arguments[1]))},getUint32:function(byteOffset){return unpackI32(get(this,4,byteOffset,arguments[1]))>>>0},getFloat32:function(byteOffset){return unpackIEEE754(get(this,4,byteOffset,arguments[1]),23,4)},getFloat64:function(byteOffset){return unpackIEEE754(get(this,8,byteOffset,arguments[1]),52,8)},setInt8:function(byteOffset,value){set(this,1,byteOffset,packI8,value)},setUint8:function(byteOffset,value){set(this,1,byteOffset,packI8,value)},setInt16:function(byteOffset,value){set(this,2,byteOffset,packI16,value,arguments[2])},setUint16:function(byteOffset,value){set(this,2,byteOffset,packI16,value,arguments[2])},setInt32:function(byteOffset,value){set(this,4,byteOffset,packI32,value,arguments[2])},setUint32:function(byteOffset,value){set(this,4,byteOffset,packI32,value,arguments[2])},setFloat32:function(byteOffset,value){set(this,4,byteOffset,packF32,value,arguments[2])},setFloat64:function(byteOffset,value){set(this,8,byteOffset,packF64,value,arguments[2])}});setToStringTag($ArrayBuffer,"ArrayBuffer"),setToStringTag($DataView,"DataView"),hide($DataView[PROTOTYPE],$typed.VIEW,!0),exports.ArrayBuffer=$ArrayBuffer,exports.DataView=$DataView},{"./_an-instance":5,"./_array-fill":8,"./_descriptors":28,"./_fails":34,"./_global":39,"./_hide":41,"./_library":58,"./_object-dp":70,"./_object-gopn":75,"./_redefine-all":89,"./_set-to-string-tag":96,"./_to-index":110,"./_to-integer":111,"./_to-length":113,"./_typed":118}],118:[function(require,module,exports){for(var Typed,global=require("./_global"),hide=require("./_hide"),uid=require("./_uid"),TYPED=uid("typed_array"),VIEW=uid("view"),ABV=!(!global.ArrayBuffer||!global.DataView),CONSTR=ABV,i=0,TypedArrayConstructors="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");i<9;)(Typed=global[TypedArrayConstructors[i++]])?(hide(Typed.prototype,TYPED,!0),hide(Typed.prototype,VIEW,!0)):CONSTR=!1;module.exports={ABV:ABV,CONSTR:CONSTR,TYPED:TYPED,VIEW:VIEW}},{"./_global":39,"./_hide":41,"./_uid":119}],119:[function(require,module,exports){var id=0,px=Math.random();module.exports=function(key){return"Symbol(".concat(key===undefined?"":key,")_",(++id+px).toString(36))}},{}],120:[function(require,module,exports){var navigator=require("./_global").navigator;module.exports=navigator&&navigator.userAgent||""},{"./_global":39}],121:[function(require,module,exports){var isObject=require("./_is-object");module.exports=function(it,TYPE){if(!isObject(it)||it._t!==TYPE)throw TypeError("Incompatible receiver, "+TYPE+" required!");return it}},{"./_is-object":50}],122:[function(require,module,exports){var global=require("./_global"),core=require("./_core"),LIBRARY=require("./_library"),wksExt=require("./_wks-ext"),defineProperty=require("./_object-dp").f;module.exports=function(name){var $Symbol=core.Symbol||(core.Symbol=LIBRARY?{}:global.Symbol||{});"_"==name.charAt(0)||name in $Symbol||defineProperty($Symbol,name,{value:wksExt.f(name)})}},{"./_core":22,"./_global":39,"./_library":58,"./_object-dp":70,"./_wks-ext":123}],123:[function(require,module,exports){exports.f=require("./_wks")},{"./_wks":124}],124:[function(require,module,exports){var store=require("./_shared")("wks"),uid=require("./_uid"),_Symbol=require("./_global").Symbol,USE_SYMBOL="function"==typeof _Symbol;(module.exports=function(name){return store[name]||(store[name]=USE_SYMBOL&&_Symbol[name]||(USE_SYMBOL?_Symbol:uid)("Symbol."+name))}).store=store},{"./_global":39,"./_shared":98,"./_uid":119}],125:[function(require,module,exports){var classof=require("./_classof"),ITERATOR=require("./_wks")("iterator"),Iterators=require("./_iterators");module.exports=require("./_core").getIteratorMethod=function(it){if(it!=undefined)return it[ITERATOR]||it["@@iterator"]||Iterators[classof(it)]}},{"./_classof":16,"./_core":22,"./_iterators":57,"./_wks":124}],126:[function(require,module,exports){var $export=require("./_export");$export($export.P,"Array",{copyWithin:require("./_array-copy-within")}),require("./_add-to-unscopables")("copyWithin")},{"./_add-to-unscopables":4,"./_array-copy-within":7,"./_export":32}],127:[function(require,module,exports){"use strict";var $export=require("./_export"),$every=require("./_array-methods")(4);$export($export.P+$export.F*!require("./_strict-method")([].every,!0),"Array",{every:function(callbackfn){return $every(this,callbackfn,arguments[1])}})},{"./_array-methods":11,"./_export":32,"./_strict-method":100}],128:[function(require,module,exports){var $export=require("./_export");$export($export.P,"Array",{fill:require("./_array-fill")}),require("./_add-to-unscopables")("fill")},{"./_add-to-unscopables":4,"./_array-fill":8,"./_export":32}],129:[function(require,module,exports){"use strict";var $export=require("./_export"),$filter=require("./_array-methods")(2);$export($export.P+$export.F*!require("./_strict-method")([].filter,!0),"Array",{filter:function(callbackfn){return $filter(this,callbackfn,arguments[1])}})},{"./_array-methods":11,"./_export":32,"./_strict-method":100}],130:[function(require,module,exports){"use strict";var $export=require("./_export"),$find=require("./_array-methods")(6),KEY="findIndex",forced=!0;KEY in[]&&Array(1)[KEY](function(){forced=!1}),$export($export.P+$export.F*forced,"Array",{findIndex:function(callbackfn){return $find(this,callbackfn,arguments.length>1?arguments[1]:undefined)}}),require("./_add-to-unscopables")(KEY)},{"./_add-to-unscopables":4,"./_array-methods":11,"./_export":32}],131:[function(require,module,exports){"use strict";var $export=require("./_export"),$find=require("./_array-methods")(5),forced=!0;"find"in[]&&Array(1).find(function(){forced=!1}),$export($export.P+$export.F*forced,"Array",{find:function(callbackfn){return $find(this,callbackfn,arguments.length>1?arguments[1]:undefined)}}),require("./_add-to-unscopables")("find")},{"./_add-to-unscopables":4,"./_array-methods":11,"./_export":32}],132:[function(require,module,exports){"use strict";var $export=require("./_export"),$forEach=require("./_array-methods")(0),STRICT=require("./_strict-method")([].forEach,!0);$export($export.P+$export.F*!STRICT,"Array",{forEach:function(callbackfn){return $forEach(this,callbackfn,arguments[1])}})},{"./_array-methods":11,"./_export":32,"./_strict-method":100}],133:[function(require,module,exports){"use strict";var ctx=require("./_ctx"),$export=require("./_export"),toObject=require("./_to-object"),call=require("./_iter-call"),isArrayIter=require("./_is-array-iter"),toLength=require("./_to-length"),createProperty=require("./_create-property"),getIterFn=require("./core.get-iterator-method");$export($export.S+$export.F*!require("./_iter-detect")(function(iter){Array.from(iter)}),"Array",{from:function(arrayLike){var length,result,step,iterator,O=toObject(arrayLike),C="function"==typeof this?this:Array,aLen=arguments.length,mapfn=aLen>1?arguments[1]:undefined,mapping=mapfn!==undefined,index=0,iterFn=getIterFn(O);if(mapping&&(mapfn=ctx(mapfn,aLen>2?arguments[2]:undefined,2)),iterFn==undefined||C==Array&&isArrayIter(iterFn))for(result=new C(length=toLength(O.length));length>index;index++)createProperty(result,index,mapping?mapfn(O[index],index):O[index]);else for(iterator=iterFn.call(O),result=new C;!(step=iterator.next()).done;index++)createProperty(result,index,mapping?call(iterator,mapfn,[step.value,index],!0):step.value);return result.length=index,result}})},{"./_create-property":23,"./_ctx":24,"./_export":32,"./_is-array-iter":47,"./_iter-call":52,"./_iter-detect":55,"./_to-length":113,"./_to-object":114,"./core.get-iterator-method":125}],134:[function(require,module,exports){"use strict";var $export=require("./_export"),$indexOf=require("./_array-includes")(!1),$native=[].indexOf,NEGATIVE_ZERO=!!$native&&1/[1].indexOf(1,-0)<0;$export($export.P+$export.F*(NEGATIVE_ZERO||!require("./_strict-method")($native)),"Array",{indexOf:function(searchElement){return NEGATIVE_ZERO?$native.apply(this,arguments)||0:$indexOf(this,searchElement,arguments[1])}})},{"./_array-includes":10,"./_export":32,"./_strict-method":100}],135:[function(require,module,exports){var $export=require("./_export");$export($export.S,"Array",{isArray:require("./_is-array")})},{"./_export":32,"./_is-array":48}],136:[function(require,module,exports){"use strict";var addToUnscopables=require("./_add-to-unscopables"),step=require("./_iter-step"),Iterators=require("./_iterators"),toIObject=require("./_to-iobject");module.exports=require("./_iter-define")(Array,"Array",function(iterated,kind){this._t=toIObject(iterated),this._i=0,this._k=kind},function(){var O=this._t,kind=this._k,index=this._i++;return!O||index>=O.length?(this._t=undefined,step(1)):step(0,"keys"==kind?index:"values"==kind?O[index]:[index,O[index]])},"values"),Iterators.Arguments=Iterators.Array,addToUnscopables("keys"),addToUnscopables("values"),addToUnscopables("entries")},{"./_add-to-unscopables":4,"./_iter-define":54,"./_iter-step":56,"./_iterators":57,"./_to-iobject":112}],137:[function(require,module,exports){"use strict";var $export=require("./_export"),toIObject=require("./_to-iobject"),arrayJoin=[].join;$export($export.P+$export.F*(require("./_iobject")!=Object||!require("./_strict-method")(arrayJoin)),"Array",{join:function(separator){return arrayJoin.call(toIObject(this),separator===undefined?",":separator)}})},{"./_export":32,"./_iobject":46,"./_strict-method":100,"./_to-iobject":112}],138:[function(require,module,exports){"use strict";var $export=require("./_export"),toIObject=require("./_to-iobject"),toInteger=require("./_to-integer"),toLength=require("./_to-length"),$native=[].lastIndexOf,NEGATIVE_ZERO=!!$native&&1/[1].lastIndexOf(1,-0)<0;$export($export.P+$export.F*(NEGATIVE_ZERO||!require("./_strict-method")($native)),"Array",{lastIndexOf:function(searchElement){if(NEGATIVE_ZERO)return $native.apply(this,arguments)||0;var O=toIObject(this),length=toLength(O.length),index=length-1;for(arguments.length>1&&(index=Math.min(index,toInteger(arguments[1]))),index<0&&(index=length+index);index>=0;index--)if(index in O&&O[index]===searchElement)return index||0;return-1}})},{"./_export":32,"./_strict-method":100,"./_to-integer":111,"./_to-iobject":112,"./_to-length":113}],139:[function(require,module,exports){"use strict";var $export=require("./_export"),$map=require("./_array-methods")(1);$export($export.P+$export.F*!require("./_strict-method")([].map,!0),"Array",{map:function(callbackfn){return $map(this,callbackfn,arguments[1])}})},{"./_array-methods":11,"./_export":32,"./_strict-method":100}],140:[function(require,module,exports){"use strict";var $export=require("./_export"),createProperty=require("./_create-property");$export($export.S+$export.F*require("./_fails")(function(){function F(){}return!(Array.of.call(F)instanceof F)}),"Array",{of:function(){for(var index=0,aLen=arguments.length,result=new("function"==typeof this?this:Array)(aLen);aLen>index;)createProperty(result,index,arguments[index++]);return result.length=aLen,result}})},{"./_create-property":23,"./_export":32,"./_fails":34}],141:[function(require,module,exports){"use strict";var $export=require("./_export"),$reduce=require("./_array-reduce");$export($export.P+$export.F*!require("./_strict-method")([].reduceRight,!0),"Array",{reduceRight:function(callbackfn){return $reduce(this,callbackfn,arguments.length,arguments[1],!0)}})},{"./_array-reduce":12,"./_export":32,"./_strict-method":100}],142:[function(require,module,exports){"use strict";var $export=require("./_export"),$reduce=require("./_array-reduce");$export($export.P+$export.F*!require("./_strict-method")([].reduce,!0),"Array",{reduce:function(callbackfn){return $reduce(this,callbackfn,arguments.length,arguments[1],!1)}})},{"./_array-reduce":12,"./_export":32,"./_strict-method":100}],143:[function(require,module,exports){"use strict";var $export=require("./_export"),html=require("./_html"),cof=require("./_cof"),toAbsoluteIndex=require("./_to-absolute-index"),toLength=require("./_to-length"),arraySlice=[].slice;$export($export.P+$export.F*require("./_fails")(function(){html&&arraySlice.call(html)}),"Array",{slice:function(begin,end){var len=toLength(this.length),klass=cof(this);if(end=end===undefined?len:end,"Array"==klass)return arraySlice.call(this,begin,end);for(var start=toAbsoluteIndex(begin,len),upTo=toAbsoluteIndex(end,len),size=toLength(upTo-start),cloned=new Array(size),i=0;i<size;i++)cloned[i]="String"==klass?this.charAt(start+i):this[start+i];return cloned}})},{"./_cof":17,"./_export":32,"./_fails":34,"./_html":42,"./_to-absolute-index":109,"./_to-length":113}],144:[function(require,module,exports){"use strict";var $export=require("./_export"),$some=require("./_array-methods")(3);$export($export.P+$export.F*!require("./_strict-method")([].some,!0),"Array",{some:function(callbackfn){return $some(this,callbackfn,arguments[1])}})},{"./_array-methods":11,"./_export":32,"./_strict-method":100}],145:[function(require,module,exports){"use strict";var $export=require("./_export"),aFunction=require("./_a-function"),toObject=require("./_to-object"),fails=require("./_fails"),$sort=[].sort,test=[1,2,3];$export($export.P+$export.F*(fails(function(){test.sort(undefined)})||!fails(function(){test.sort(null)})||!require("./_strict-method")($sort)),"Array",{sort:function(comparefn){return comparefn===undefined?$sort.call(toObject(this)):$sort.call(toObject(this),aFunction(comparefn))}})},{"./_a-function":2,"./_export":32,"./_fails":34,"./_strict-method":100,"./_to-object":114}],146:[function(require,module,exports){require("./_set-species")("Array")},{"./_set-species":95}],147:[function(require,module,exports){var $export=require("./_export");$export($export.S,"Date",{now:function(){return(new Date).getTime()}})},{"./_export":32}],148:[function(require,module,exports){var $export=require("./_export"),toISOString=require("./_date-to-iso-string");$export($export.P+$export.F*(Date.prototype.toISOString!==toISOString),"Date",{toISOString:toISOString})},{"./_date-to-iso-string":25,"./_export":32}],149:[function(require,module,exports){"use strict";var $export=require("./_export"),toObject=require("./_to-object"),toPrimitive=require("./_to-primitive");$export($export.P+$export.F*require("./_fails")(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(key){var O=toObject(this),pv=toPrimitive(O);return"number"!=typeof pv||isFinite(pv)?O.toISOString():null}})},{"./_export":32,"./_fails":34,"./_to-object":114,"./_to-primitive":115}],150:[function(require,module,exports){var TO_PRIMITIVE=require("./_wks")("toPrimitive"),proto=Date.prototype;TO_PRIMITIVE in proto||require("./_hide")(proto,TO_PRIMITIVE,require("./_date-to-primitive"))},{"./_date-to-primitive":26,"./_hide":41,"./_wks":124}],151:[function(require,module,exports){var DateProto=Date.prototype,$toString=DateProto.toString,getTime=DateProto.getTime;new Date(NaN)+""!="Invalid Date"&&require("./_redefine")(DateProto,"toString",function(){var value=getTime.call(this);return value==value?$toString.call(this):"Invalid Date"})},{"./_redefine":90}],152:[function(require,module,exports){var $export=require("./_export");$export($export.P,"Function",{bind:require("./_bind")})},{"./_bind":15,"./_export":32}],153:[function(require,module,exports){"use strict";var isObject=require("./_is-object"),getPrototypeOf=require("./_object-gpo"),HAS_INSTANCE=require("./_wks")("hasInstance"),FunctionProto=Function.prototype;HAS_INSTANCE in FunctionProto||require("./_object-dp").f(FunctionProto,HAS_INSTANCE,{value:function(O){if("function"!=typeof this||!isObject(O))return!1;if(!isObject(this.prototype))return O instanceof this;for(;O=getPrototypeOf(O);)if(this.prototype===O)return!0;return!1}})},{"./_is-object":50,"./_object-dp":70,"./_object-gpo":77,"./_wks":124}],154:[function(require,module,exports){var dP=require("./_object-dp").f,FProto=Function.prototype,nameRE=/^\s*function ([^ (]*)/;"name"in FProto||require("./_descriptors")&&dP(FProto,"name",{configurable:!0,get:function(){try{return(""+this).match(nameRE)[1]}catch(e){return""}}})},{"./_descriptors":28,"./_object-dp":70}],155:[function(require,module,exports){"use strict";var strong=require("./_collection-strong"),validate=require("./_validate-collection");module.exports=require("./_collection")("Map",function(get){return function(){return get(this,arguments.length>0?arguments[0]:undefined)}},{get:function(key){var entry=strong.getEntry(validate(this,"Map"),key);return entry&&entry.v},set:function(key,value){return strong.def(validate(this,"Map"),0===key?0:key,value)}},strong,!0)},{"./_collection":21,"./_collection-strong":18,"./_validate-collection":121}],156:[function(require,module,exports){var $export=require("./_export"),log1p=require("./_math-log1p"),sqrt=Math.sqrt,$acosh=Math.acosh;$export($export.S+$export.F*!($acosh&&710==Math.floor($acosh(Number.MAX_VALUE))&&$acosh(Infinity)==Infinity),"Math",{acosh:function(x){return(x=+x)<1?NaN:x>94906265.62425156?Math.log(x)+Math.LN2:log1p(x-1+sqrt(x-1)*sqrt(x+1))}})},{"./_export":32,"./_math-log1p":61}],157:[function(require,module,exports){var $export=require("./_export"),$asinh=Math.asinh;$export($export.S+$export.F*!($asinh&&1/$asinh(0)>0),"Math",{asinh:function asinh(x){return isFinite(x=+x)&&0!=x?x<0?-asinh(-x):Math.log(x+Math.sqrt(x*x+1)):x}})},{"./_export":32}],158:[function(require,module,exports){var $export=require("./_export"),$atanh=Math.atanh;$export($export.S+$export.F*!($atanh&&1/$atanh(-0)<0),"Math",{atanh:function(x){return 0==(x=+x)?x:Math.log((1+x)/(1-x))/2}})},{"./_export":32}],159:[function(require,module,exports){var $export=require("./_export"),sign=require("./_math-sign");$export($export.S,"Math",{cbrt:function(x){return sign(x=+x)*Math.pow(Math.abs(x),1/3)}})},{"./_export":32,"./_math-sign":63}],160:[function(require,module,exports){var $export=require("./_export");$export($export.S,"Math",{clz32:function(x){return(x>>>=0)?31-Math.floor(Math.log(x+.5)*Math.LOG2E):32}})},{"./_export":32}],161:[function(require,module,exports){var $export=require("./_export"),exp=Math.exp;$export($export.S,"Math",{cosh:function(x){return(exp(x=+x)+exp(-x))/2}})},{"./_export":32}],162:[function(require,module,exports){var $export=require("./_export"),$expm1=require("./_math-expm1");$export($export.S+$export.F*($expm1!=Math.expm1),"Math",{expm1:$expm1})},{"./_export":32,"./_math-expm1":59}],163:[function(require,module,exports){var $export=require("./_export");$export($export.S,"Math",{fround:require("./_math-fround")})},{"./_export":32,"./_math-fround":60}],164:[function(require,module,exports){var $export=require("./_export"),abs=Math.abs;$export($export.S,"Math",{hypot:function(value1,value2){for(var arg,div,sum=0,i=0,aLen=arguments.length,larg=0;i<aLen;)larg<(arg=abs(arguments[i++]))?(sum=sum*(div=larg/arg)*div+1,larg=arg):sum+=arg>0?(div=arg/larg)*div:arg;return larg===Infinity?Infinity:larg*Math.sqrt(sum)}})},{"./_export":32}],165:[function(require,module,exports){var $export=require("./_export"),$imul=Math.imul;$export($export.S+$export.F*require("./_fails")(function(){return-5!=$imul(4294967295,5)||2!=$imul.length}),"Math",{imul:function(x,y){var xn=+x,yn=+y,xl=65535&xn,yl=65535&yn;return 0|xl*yl+((65535&xn>>>16)*yl+xl*(65535&yn>>>16)<<16>>>0)}})},{"./_export":32,"./_fails":34}],166:[function(require,module,exports){var $export=require("./_export");$export($export.S,"Math",{log10:function(x){return Math.log(x)*Math.LOG10E}})},{"./_export":32}],167:[function(require,module,exports){var $export=require("./_export");$export($export.S,"Math",{log1p:require("./_math-log1p")})},{"./_export":32,"./_math-log1p":61}],168:[function(require,module,exports){var $export=require("./_export");$export($export.S,"Math",{log2:function(x){return Math.log(x)/Math.LN2}})},{"./_export":32}],169:[function(require,module,exports){var $export=require("./_export");$export($export.S,"Math",{sign:require("./_math-sign")})},{"./_export":32,"./_math-sign":63}],170:[function(require,module,exports){var $export=require("./_export"),expm1=require("./_math-expm1"),exp=Math.exp;$export($export.S+$export.F*require("./_fails")(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(x){return Math.abs(x=+x)<1?(expm1(x)-expm1(-x))/2:(exp(x-1)-exp(-x-1))*(Math.E/2)}})},{"./_export":32,"./_fails":34,"./_math-expm1":59}],171:[function(require,module,exports){var $export=require("./_export"),expm1=require("./_math-expm1"),exp=Math.exp;$export($export.S,"Math",{tanh:function(x){var a=expm1(x=+x),b=expm1(-x);return a==Infinity?1:b==Infinity?-1:(a-b)/(exp(x)+exp(-x))}})},{"./_export":32,"./_math-expm1":59}],172:[function(require,module,exports){var $export=require("./_export");$export($export.S,"Math",{trunc:function(it){return(it>0?Math.floor:Math.ceil)(it)}})},{"./_export":32}],173:[function(require,module,exports){"use strict";var global=require("./_global"),has=require("./_has"),cof=require("./_cof"),inheritIfRequired=require("./_inherit-if-required"),toPrimitive=require("./_to-primitive"),fails=require("./_fails"),gOPN=require("./_object-gopn").f,gOPD=require("./_object-gopd").f,dP=require("./_object-dp").f,$trim=require("./_string-trim").trim,$Number=global.Number,Base=$Number,proto=$Number.prototype,BROKEN_COF="Number"==cof(require("./_object-create")(proto)),TRIM="trim"in String.prototype,toNumber=function(argument){var it=toPrimitive(argument,!1);if("string"==typeof it&&it.length>2){var third,radix,maxCode,first=(it=TRIM?it.trim():$trim(it,3)).charCodeAt(0);if(43===first||45===first){if(88===(third=it.charCodeAt(2))||120===third)return NaN}else if(48===first){switch(it.charCodeAt(1)){case 66:case 98:radix=2,maxCode=49;break;case 79:case 111:radix=8,maxCode=55;break;default:return+it}for(var code,digits=it.slice(2),i=0,l=digits.length;i<l;i++)if((code=digits.charCodeAt(i))<48||code>maxCode)return NaN;return parseInt(digits,radix)}}return+it};if(!$Number(" 0o1")||!$Number("0b1")||$Number("+0x1")){$Number=function(value){var it=arguments.length<1?0:value,that=this;return that instanceof $Number&&(BROKEN_COF?fails(function(){proto.valueOf.call(that)}):"Number"!=cof(that))?inheritIfRequired(new Base(toNumber(it)),that,$Number):toNumber(it)};for(var key,keys=require("./_descriptors")?gOPN(Base):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),j=0;keys.length>j;j++)has(Base,key=keys[j])&&!has($Number,key)&&dP($Number,key,gOPD(Base,key));$Number.prototype=proto,proto.constructor=$Number,require("./_redefine")(global,"Number",$Number)}},{"./_cof":17,"./_descriptors":28,"./_fails":34,"./_global":39,"./_has":40,"./_inherit-if-required":44,"./_object-create":69,"./_object-dp":70,"./_object-gopd":73,"./_object-gopn":75,"./_redefine":90,"./_string-trim":106,"./_to-primitive":115}],174:[function(require,module,exports){var $export=require("./_export");$export($export.S,"Number",{EPSILON:Math.pow(2,-52)})},{"./_export":32}],175:[function(require,module,exports){var $export=require("./_export"),_isFinite=require("./_global").isFinite;$export($export.S,"Number",{isFinite:function(it){return"number"==typeof it&&_isFinite(it)}})},{"./_export":32,"./_global":39}],176:[function(require,module,exports){var $export=require("./_export");$export($export.S,"Number",{isInteger:require("./_is-integer")})},{"./_export":32,"./_is-integer":49}],177:[function(require,module,exports){var $export=require("./_export");$export($export.S,"Number",{isNaN:function(number){return number!=number}})},{"./_export":32}],178:[function(require,module,exports){var $export=require("./_export"),isInteger=require("./_is-integer"),abs=Math.abs;$export($export.S,"Number",{isSafeInteger:function(number){return isInteger(number)&&abs(number)<=9007199254740991}})},{"./_export":32,"./_is-integer":49}],179:[function(require,module,exports){var $export=require("./_export");$export($export.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},{"./_export":32}],180:[function(require,module,exports){var $export=require("./_export");$export($export.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},{"./_export":32}],181:[function(require,module,exports){var $export=require("./_export"),$parseFloat=require("./_parse-float");$export($export.S+$export.F*(Number.parseFloat!=$parseFloat),"Number",{parseFloat:$parseFloat})},{"./_export":32,"./_parse-float":84}],182:[function(require,module,exports){var $export=require("./_export"),$parseInt=require("./_parse-int");$export($export.S+$export.F*(Number.parseInt!=$parseInt),"Number",{parseInt:$parseInt})},{"./_export":32,"./_parse-int":85}],183:[function(require,module,exports){"use strict";var $export=require("./_export"),toInteger=require("./_to-integer"),aNumberValue=require("./_a-number-value"),repeat=require("./_string-repeat"),$toFixed=1..toFixed,floor=Math.floor,data=[0,0,0,0,0,0],ERROR="Number.toFixed: incorrect invocation!",multiply=function(n,c){for(var i=-1,c2=c;++i<6;)c2+=n*data[i],data[i]=c2%1e7,c2=floor(c2/1e7)},divide=function(n){for(var i=6,c=0;--i>=0;)c+=data[i],data[i]=floor(c/n),c=c%n*1e7},numToString=function(){for(var i=6,s="";--i>=0;)if(""!==s||0===i||0!==data[i]){var t=String(data[i]);s=""===s?t:s+repeat.call("0",7-t.length)+t}return s},pow=function pow(x,n,acc){return 0===n?acc:n%2==1?pow(x,n-1,acc*x):pow(x*x,n/2,acc)};$export($export.P+$export.F*(!!$toFixed&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!require("./_fails")(function(){$toFixed.call({})})),"Number",{toFixed:function(fractionDigits){var e,z,j,k,x=aNumberValue(this,ERROR),f=toInteger(fractionDigits),s="",m="0";if(f<0||f>20)throw RangeError(ERROR);if(x!=x)return"NaN";if(x<=-1e21||x>=1e21)return String(x);if(x<0&&(s="-",x=-x),x>1e-21)if(z=(e=function(x){for(var n=0,x2=x;x2>=4096;)n+=12,x2/=4096;for(;x2>=2;)n+=1,x2/=2;return n}(x*pow(2,69,1))-69)<0?x*pow(2,-e,1):x/pow(2,e,1),z*=4503599627370496,(e=52-e)>0){for(multiply(0,z),j=f;j>=7;)multiply(1e7,0),j-=7;for(multiply(pow(10,j,1),0),j=e-1;j>=23;)divide(1<<23),j-=23;divide(1<<j),multiply(1,1),divide(2),m=numToString()}else multiply(0,z),multiply(1<<-e,0),m=numToString()+repeat.call("0",f);return m=f>0?s+((k=m.length)<=f?"0."+repeat.call("0",f-k)+m:m.slice(0,k-f)+"."+m.slice(k-f)):s+m}})},{"./_a-number-value":3,"./_export":32,"./_fails":34,"./_string-repeat":105,"./_to-integer":111}],184:[function(require,module,exports){"use strict";var $export=require("./_export"),$fails=require("./_fails"),aNumberValue=require("./_a-number-value"),$toPrecision=1..toPrecision;$export($export.P+$export.F*($fails(function(){return"1"!==$toPrecision.call(1,undefined)})||!$fails(function(){$toPrecision.call({})})),"Number",{toPrecision:function(precision){var that=aNumberValue(this,"Number#toPrecision: incorrect invocation!");return precision===undefined?$toPrecision.call(that):$toPrecision.call(that,precision)}})},{"./_a-number-value":3,"./_export":32,"./_fails":34}],185:[function(require,module,exports){var $export=require("./_export");$export($export.S+$export.F,"Object",{assign:require("./_object-assign")})},{"./_export":32,"./_object-assign":68}],186:[function(require,module,exports){var $export=require("./_export");$export($export.S,"Object",{create:require("./_object-create")})},{"./_export":32,"./_object-create":69}],187:[function(require,module,exports){var $export=require("./_export");$export($export.S+$export.F*!require("./_descriptors"),"Object",{defineProperties:require("./_object-dps")})},{"./_descriptors":28,"./_export":32,"./_object-dps":71}],188:[function(require,module,exports){var $export=require("./_export");$export($export.S+$export.F*!require("./_descriptors"),"Object",{defineProperty:require("./_object-dp").f})},{"./_descriptors":28,"./_export":32,"./_object-dp":70}],189:[function(require,module,exports){var isObject=require("./_is-object"),meta=require("./_meta").onFreeze;require("./_object-sap")("freeze",function($freeze){return function(it){return $freeze&&isObject(it)?$freeze(meta(it)):it}})},{"./_is-object":50,"./_meta":64,"./_object-sap":81}],190:[function(require,module,exports){var toIObject=require("./_to-iobject"),$getOwnPropertyDescriptor=require("./_object-gopd").f;require("./_object-sap")("getOwnPropertyDescriptor",function(){return function(it,key){return $getOwnPropertyDescriptor(toIObject(it),key)}})},{"./_object-gopd":73,"./_object-sap":81,"./_to-iobject":112}],191:[function(require,module,exports){require("./_object-sap")("getOwnPropertyNames",function(){return require("./_object-gopn-ext").f})},{"./_object-gopn-ext":74,"./_object-sap":81}],192:[function(require,module,exports){var toObject=require("./_to-object"),$getPrototypeOf=require("./_object-gpo");require("./_object-sap")("getPrototypeOf",function(){return function(it){return $getPrototypeOf(toObject(it))}})},{"./_object-gpo":77,"./_object-sap":81,"./_to-object":114}],193:[function(require,module,exports){var isObject=require("./_is-object");require("./_object-sap")("isExtensible",function($isExtensible){return function(it){return!!isObject(it)&&(!$isExtensible||$isExtensible(it))}})},{"./_is-object":50,"./_object-sap":81}],194:[function(require,module,exports){var isObject=require("./_is-object");require("./_object-sap")("isFrozen",function($isFrozen){return function(it){return!isObject(it)||!!$isFrozen&&$isFrozen(it)}})},{"./_is-object":50,"./_object-sap":81}],195:[function(require,module,exports){var isObject=require("./_is-object");require("./_object-sap")("isSealed",function($isSealed){return function(it){return!isObject(it)||!!$isSealed&&$isSealed(it)}})},{"./_is-object":50,"./_object-sap":81}],196:[function(require,module,exports){var $export=require("./_export");$export($export.S,"Object",{is:require("./_same-value")})},{"./_export":32,"./_same-value":91}],197:[function(require,module,exports){var toObject=require("./_to-object"),$keys=require("./_object-keys");require("./_object-sap")("keys",function(){return function(it){return $keys(toObject(it))}})},{"./_object-keys":79,"./_object-sap":81,"./_to-object":114}],198:[function(require,module,exports){var isObject=require("./_is-object"),meta=require("./_meta").onFreeze;require("./_object-sap")("preventExtensions",function($preventExtensions){return function(it){return $preventExtensions&&isObject(it)?$preventExtensions(meta(it)):it}})},{"./_is-object":50,"./_meta":64,"./_object-sap":81}],199:[function(require,module,exports){var isObject=require("./_is-object"),meta=require("./_meta").onFreeze;require("./_object-sap")("seal",function($seal){return function(it){return $seal&&isObject(it)?$seal(meta(it)):it}})},{"./_is-object":50,"./_meta":64,"./_object-sap":81}],200:[function(require,module,exports){var $export=require("./_export");$export($export.S,"Object",{setPrototypeOf:require("./_set-proto").set})},{"./_export":32,"./_set-proto":94}],201:[function(require,module,exports){"use strict";var classof=require("./_classof"),test={};test[require("./_wks")("toStringTag")]="z",test+""!="[object z]"&&require("./_redefine")(Object.prototype,"toString",function(){return"[object "+classof(this)+"]"},!0)},{"./_classof":16,"./_redefine":90,"./_wks":124}],202:[function(require,module,exports){var $export=require("./_export"),$parseFloat=require("./_parse-float");$export($export.G+$export.F*(parseFloat!=$parseFloat),{parseFloat:$parseFloat})},{"./_export":32,"./_parse-float":84}],203:[function(require,module,exports){var $export=require("./_export"),$parseInt=require("./_parse-int");$export($export.G+$export.F*(parseInt!=$parseInt),{parseInt:$parseInt})},{"./_export":32,"./_parse-int":85}],204:[function(require,module,exports){"use strict";var Internal,newGenericPromiseCapability,OwnPromiseCapability,Wrapper,LIBRARY=require("./_library"),global=require("./_global"),ctx=require("./_ctx"),classof=require("./_classof"),$export=require("./_export"),isObject=require("./_is-object"),aFunction=require("./_a-function"),anInstance=require("./_an-instance"),forOf=require("./_for-of"),speciesConstructor=require("./_species-constructor"),task=require("./_task").set,microtask=require("./_microtask")(),newPromiseCapabilityModule=require("./_new-promise-capability"),perform=require("./_perform"),promiseResolve=require("./_promise-resolve"),TypeError=global.TypeError,process=global.process,$Promise=global.Promise,isNode="process"==classof(process),empty=function(){},newPromiseCapability=newGenericPromiseCapability=newPromiseCapabilityModule.f,USE_NATIVE=!!function(){try{var promise=$Promise.resolve(1),FakePromise=(promise.constructor={})[require("./_wks")("species")]=function(exec){exec(empty,empty)};return(isNode||"function"==typeof PromiseRejectionEvent)&&promise.then(empty)instanceof FakePromise}catch(e){}}(),isThenable=function(it){var then;return!(!isObject(it)||"function"!=typeof(then=it.then))&&then},notify=function(promise,isReject){if(!promise._n){promise._n=!0;var chain=promise._c;microtask(function(){for(var value=promise._v,ok=1==promise._s,i=0,run=function(reaction){var result,then,handler=ok?reaction.ok:reaction.fail,resolve=reaction.resolve,reject=reaction.reject,domain=reaction.domain;try{handler?(ok||(2==promise._h&&onHandleUnhandled(promise),promise._h=1),!0===handler?result=value:(domain&&domain.enter(),result=handler(value),domain&&domain.exit()),result===reaction.promise?reject(TypeError("Promise-chain cycle")):(then=isThenable(result))?then.call(result,resolve,reject):resolve(result)):reject(value)}catch(e){reject(e)}};chain.length>i;)run(chain[i++]);promise._c=[],promise._n=!1,isReject&&!promise._h&&onUnhandled(promise)})}},onUnhandled=function(promise){task.call(global,function(){var result,handler,console,value=promise._v,unhandled=isUnhandled(promise);if(unhandled&&(result=perform(function(){isNode?process.emit("unhandledRejection",value,promise):(handler=global.onunhandledrejection)?handler({promise:promise,reason:value}):(console=global.console)&&console.error&&console.error("Unhandled promise rejection",value)}),promise._h=isNode||isUnhandled(promise)?2:1),promise._a=undefined,unhandled&&result.e)throw result.v})},isUnhandled=function(promise){return 1!==promise._h&&0===(promise._a||promise._c).length},onHandleUnhandled=function(promise){task.call(global,function(){var handler;isNode?process.emit("rejectionHandled",promise):(handler=global.onrejectionhandled)&&handler({promise:promise,reason:promise._v})})},$reject=function(value){var promise=this;promise._d||(promise._d=!0,(promise=promise._w||promise)._v=value,promise._s=2,promise._a||(promise._a=promise._c.slice()),notify(promise,!0))},$resolve=function $resolve(value){var then,promise=this;if(!promise._d){promise._d=!0,promise=promise._w||promise;try{if(promise===value)throw TypeError("Promise can't be resolved itself");(then=isThenable(value))?microtask(function(){var wrapper={_w:promise,_d:!1};try{then.call(value,ctx($resolve,wrapper,1),ctx($reject,wrapper,1))}catch(e){$reject.call(wrapper,e)}}):(promise._v=value,promise._s=1,notify(promise,!1))}catch(e){$reject.call({_w:promise,_d:!1},e)}}};USE_NATIVE||($Promise=function(executor){anInstance(this,$Promise,"Promise","_h"),aFunction(executor),Internal.call(this);try{executor(ctx($resolve,this,1),ctx($reject,this,1))}catch(err){$reject.call(this,err)}},(Internal=function(executor){this._c=[],this._a=undefined,this._s=0,this._d=!1,this._v=undefined,this._h=0,this._n=!1}).prototype=require("./_redefine-all")($Promise.prototype,{then:function(onFulfilled,onRejected){var reaction=newPromiseCapability(speciesConstructor(this,$Promise));return reaction.ok="function"!=typeof onFulfilled||onFulfilled,reaction.fail="function"==typeof onRejected&&onRejected,reaction.domain=isNode?process.domain:undefined,this._c.push(reaction),this._a&&this._a.push(reaction),this._s&&notify(this,!1),reaction.promise},"catch":function(onRejected){return this.then(undefined,onRejected)}}),OwnPromiseCapability=function(){var promise=new Internal;this.promise=promise,this.resolve=ctx($resolve,promise,1),this.reject=ctx($reject,promise,1)},newPromiseCapabilityModule.f=newPromiseCapability=function(C){return C===$Promise||C===Wrapper?new OwnPromiseCapability(C):newGenericPromiseCapability(C)}),$export($export.G+$export.W+$export.F*!USE_NATIVE,{Promise:$Promise}),require("./_set-to-string-tag")($Promise,"Promise"),require("./_set-species")("Promise"),Wrapper=require("./_core").Promise,$export($export.S+$export.F*!USE_NATIVE,"Promise",{reject:function(r){var capability=newPromiseCapability(this);return(0,capability.reject)(r),capability.promise}}),$export($export.S+$export.F*(LIBRARY||!USE_NATIVE),"Promise",{resolve:function(x){return promiseResolve(LIBRARY&&this===Wrapper?$Promise:this,x)}}),$export($export.S+$export.F*!(USE_NATIVE&&require("./_iter-detect")(function(iter){$Promise.all(iter)["catch"](empty)})),"Promise",{all:function(iterable){var C=this,capability=newPromiseCapability(C),resolve=capability.resolve,reject=capability.reject,result=perform(function(){var values=[],index=0,remaining=1;forOf(iterable,!1,function(promise){var $index=index++,alreadyCalled=!1;values.push(undefined),remaining++,C.resolve(promise).then(function(value){alreadyCalled||(alreadyCalled=!0,values[$index]=value,--remaining||resolve(values))},reject)}),--remaining||resolve(values)});return result.e&&reject(result.v),capability.promise},race:function(iterable){var C=this,capability=newPromiseCapability(C),reject=capability.reject,result=perform(function(){forOf(iterable,!1,function(promise){C.resolve(promise).then(capability.resolve,reject)})});return result.e&&reject(result.v),capability.promise}})},{"./_a-function":2,"./_an-instance":5,"./_classof":16,"./_core":22,"./_ctx":24,"./_export":32,"./_for-of":38,"./_global":39,"./_is-object":50,"./_iter-detect":55,"./_library":58,"./_microtask":66,"./_new-promise-capability":67,"./_perform":86,"./_promise-resolve":87,"./_redefine-all":89,"./_set-species":95,"./_set-to-string-tag":96,"./_species-constructor":99,"./_task":108,"./_wks":124}],205:[function(require,module,exports){var $export=require("./_export"),aFunction=require("./_a-function"),anObject=require("./_an-object"),rApply=(require("./_global").Reflect||{}).apply,fApply=Function.apply;$export($export.S+$export.F*!require("./_fails")(function(){rApply(function(){})}),"Reflect",{apply:function(target,thisArgument,argumentsList){var T=aFunction(target),L=anObject(argumentsList);return rApply?rApply(T,thisArgument,L):fApply.call(T,thisArgument,L)}})},{"./_a-function":2,"./_an-object":6,"./_export":32,"./_fails":34,"./_global":39}],206:[function(require,module,exports){var $export=require("./_export"),create=require("./_object-create"),aFunction=require("./_a-function"),anObject=require("./_an-object"),isObject=require("./_is-object"),fails=require("./_fails"),bind=require("./_bind"),rConstruct=(require("./_global").Reflect||{}).construct,NEW_TARGET_BUG=fails(function(){function F(){}return!(rConstruct(function(){},[],F)instanceof F)}),ARGS_BUG=!fails(function(){rConstruct(function(){})});$export($export.S+$export.F*(NEW_TARGET_BUG||ARGS_BUG),"Reflect",{construct:function(Target,args){aFunction(Target),anObject(args);var newTarget=arguments.length<3?Target:aFunction(arguments[2]);if(ARGS_BUG&&!NEW_TARGET_BUG)return rConstruct(Target,args,newTarget);if(Target==newTarget){switch(args.length){case 0:return new Target;case 1:return new Target(args[0]);case 2:return new Target(args[0],args[1]);case 3:return new Target(args[0],args[1],args[2]);case 4:return new Target(args[0],args[1],args[2],args[3])}var $args=[null];return $args.push.apply($args,args),new(bind.apply(Target,$args))}var proto=newTarget.prototype,instance=create(isObject(proto)?proto:Object.prototype),result=Function.apply.call(Target,instance,args);return isObject(result)?result:instance}})},{"./_a-function":2,"./_an-object":6,"./_bind":15,"./_export":32,"./_fails":34,"./_global":39,"./_is-object":50,"./_object-create":69}],207:[function(require,module,exports){var dP=require("./_object-dp"),$export=require("./_export"),anObject=require("./_an-object"),toPrimitive=require("./_to-primitive");$export($export.S+$export.F*require("./_fails")(function(){Reflect.defineProperty(dP.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(target,propertyKey,attributes){anObject(target),propertyKey=toPrimitive(propertyKey,!0),anObject(attributes);try{return dP.f(target,propertyKey,attributes),!0}catch(e){return!1}}})},{"./_an-object":6,"./_export":32,"./_fails":34,"./_object-dp":70,"./_to-primitive":115}],208:[function(require,module,exports){var $export=require("./_export"),gOPD=require("./_object-gopd").f,anObject=require("./_an-object");$export($export.S,"Reflect",{deleteProperty:function(target,propertyKey){var desc=gOPD(anObject(target),propertyKey);return!(desc&&!desc.configurable)&&delete target[propertyKey]}})},{"./_an-object":6,"./_export":32,"./_object-gopd":73}],209:[function(require,module,exports){"use strict";var $export=require("./_export"),anObject=require("./_an-object"),Enumerate=function(iterated){this._t=anObject(iterated),this._i=0;var key,keys=this._k=[];for(key in iterated)keys.push(key)};require("./_iter-create")(Enumerate,"Object",function(){var key,keys=this._k;do{if(this._i>=keys.length)return{value:undefined,done:!0}}while(!((key=keys[this._i++])in this._t));return{value:key,done:!1}}),$export($export.S,"Reflect",{enumerate:function(target){return new Enumerate(target)}})},{"./_an-object":6,"./_export":32,"./_iter-create":53}],210:[function(require,module,exports){var gOPD=require("./_object-gopd"),$export=require("./_export"),anObject=require("./_an-object");$export($export.S,"Reflect",{getOwnPropertyDescriptor:function(target,propertyKey){return gOPD.f(anObject(target),propertyKey)}})},{"./_an-object":6,"./_export":32,"./_object-gopd":73}],211:[function(require,module,exports){var $export=require("./_export"),getProto=require("./_object-gpo"),anObject=require("./_an-object");$export($export.S,"Reflect",{getPrototypeOf:function(target){return getProto(anObject(target))}})},{"./_an-object":6,"./_export":32,"./_object-gpo":77}],212:[function(require,module,exports){var gOPD=require("./_object-gopd"),getPrototypeOf=require("./_object-gpo"),has=require("./_has"),$export=require("./_export"),isObject=require("./_is-object"),anObject=require("./_an-object");$export($export.S,"Reflect",{get:function get(target,propertyKey){var desc,proto,receiver=arguments.length<3?target:arguments[2];return anObject(target)===receiver?target[propertyKey]:(desc=gOPD.f(target,propertyKey))?has(desc,"value")?desc.value:desc.get!==undefined?desc.get.call(receiver):undefined:isObject(proto=getPrototypeOf(target))?get(proto,propertyKey,receiver):void 0}})},{"./_an-object":6,"./_export":32,"./_has":40,"./_is-object":50,"./_object-gopd":73,"./_object-gpo":77}],213:[function(require,module,exports){var $export=require("./_export");$export($export.S,"Reflect",{has:function(target,propertyKey){return propertyKey in target}})},{"./_export":32}],214:[function(require,module,exports){var $export=require("./_export"),anObject=require("./_an-object"),$isExtensible=Object.isExtensible;$export($export.S,"Reflect",{isExtensible:function(target){return anObject(target),!$isExtensible||$isExtensible(target)}})},{"./_an-object":6,"./_export":32}],215:[function(require,module,exports){var $export=require("./_export");$export($export.S,"Reflect",{ownKeys:require("./_own-keys")})},{"./_export":32,"./_own-keys":83}],216:[function(require,module,exports){var $export=require("./_export"),anObject=require("./_an-object"),$preventExtensions=Object.preventExtensions;$export($export.S,"Reflect",{preventExtensions:function(target){anObject(target);try{return $preventExtensions&&$preventExtensions(target),!0}catch(e){return!1}}})},{"./_an-object":6,"./_export":32}],217:[function(require,module,exports){var $export=require("./_export"),setProto=require("./_set-proto");setProto&&$export($export.S,"Reflect",{setPrototypeOf:function(target,proto){setProto.check(target,proto);try{return setProto.set(target,proto),!0}catch(e){return!1}}})},{"./_export":32,"./_set-proto":94}],218:[function(require,module,exports){var dP=require("./_object-dp"),gOPD=require("./_object-gopd"),getPrototypeOf=require("./_object-gpo"),has=require("./_has"),$export=require("./_export"),createDesc=require("./_property-desc"),anObject=require("./_an-object"),isObject=require("./_is-object");$export($export.S,"Reflect",{set:function set(target,propertyKey,V){var existingDescriptor,proto,receiver=arguments.length<4?target:arguments[3],ownDesc=gOPD.f(anObject(target),propertyKey);if(!ownDesc){if(isObject(proto=getPrototypeOf(target)))return set(proto,propertyKey,V,receiver);ownDesc=createDesc(0)}return has(ownDesc,"value")?!(!1===ownDesc.writable||!isObject(receiver)||((existingDescriptor=gOPD.f(receiver,propertyKey)||createDesc(0)).value=V,dP.f(receiver,propertyKey,existingDescriptor),0)):ownDesc.set!==undefined&&(ownDesc.set.call(receiver,V),!0)}})},{"./_an-object":6,"./_export":32,"./_has":40,"./_is-object":50,"./_object-dp":70,"./_object-gopd":73,"./_object-gpo":77,"./_property-desc":88}],219:[function(require,module,exports){var global=require("./_global"),inheritIfRequired=require("./_inherit-if-required"),dP=require("./_object-dp").f,gOPN=require("./_object-gopn").f,isRegExp=require("./_is-regexp"),$flags=require("./_flags"),$RegExp=global.RegExp,Base=$RegExp,proto=$RegExp.prototype,re1=/a/g,re2=/a/g,CORRECT_NEW=new $RegExp(re1)!==re1;if(require("./_descriptors")&&(!CORRECT_NEW||require("./_fails")(function(){return re2[require("./_wks")("match")]=!1,$RegExp(re1)!=re1||$RegExp(re2)==re2||"/a/i"!=$RegExp(re1,"i")}))){$RegExp=function(p,f){var tiRE=this instanceof $RegExp,piRE=isRegExp(p),fiU=f===undefined;return!tiRE&&piRE&&p.constructor===$RegExp&&fiU?p:inheritIfRequired(CORRECT_NEW?new Base(piRE&&!fiU?p.source:p,f):Base((piRE=p instanceof $RegExp)?p.source:p,piRE&&fiU?$flags.call(p):f),tiRE?this:proto,$RegExp)};for(var proxy=function(key){key in $RegExp||dP($RegExp,key,{configurable:!0,get:function(){return Base[key]},set:function(it){Base[key]=it}})},keys=gOPN(Base),i=0;keys.length>i;)proxy(keys[i++]);proto.constructor=$RegExp,$RegExp.prototype=proto,require("./_redefine")(global,"RegExp",$RegExp)}require("./_set-species")("RegExp")},{"./_descriptors":28,"./_fails":34,"./_flags":36,"./_global":39,"./_inherit-if-required":44,"./_is-regexp":51,"./_object-dp":70,"./_object-gopn":75,"./_redefine":90,"./_set-species":95,"./_wks":124}],220:[function(require,module,exports){require("./_descriptors")&&"g"!=/./g.flags&&require("./_object-dp").f(RegExp.prototype,"flags",{configurable:!0,get:require("./_flags")})},{"./_descriptors":28,"./_flags":36,"./_object-dp":70}],221:[function(require,module,exports){require("./_fix-re-wks")("match",1,function(defined,MATCH,$match){return[function(regexp){"use strict";var O=defined(this),fn=regexp==undefined?undefined:regexp[MATCH];return fn!==undefined?fn.call(regexp,O):new RegExp(regexp)[MATCH](String(O))},$match]})},{"./_fix-re-wks":35}],222:[function(require,module,exports){require("./_fix-re-wks")("replace",2,function(defined,REPLACE,$replace){return[function(searchValue,replaceValue){"use strict";var O=defined(this),fn=searchValue==undefined?undefined:searchValue[REPLACE];return fn!==undefined?fn.call(searchValue,O,replaceValue):$replace.call(String(O),searchValue,replaceValue)},$replace]})},{"./_fix-re-wks":35}],223:[function(require,module,exports){require("./_fix-re-wks")("search",1,function(defined,SEARCH,$search){return[function(regexp){"use strict";var O=defined(this),fn=regexp==undefined?undefined:regexp[SEARCH];return fn!==undefined?fn.call(regexp,O):new RegExp(regexp)[SEARCH](String(O))},$search]})},{"./_fix-re-wks":35}],224:[function(require,module,exports){require("./_fix-re-wks")("split",2,function(defined,SPLIT,$split){"use strict";var isRegExp=require("./_is-regexp"),_split=$split,$push=[].push;if("c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length){var NPCG=/()??/.exec("")[1]===undefined;$split=function(separator,limit){var string=String(this);if(separator===undefined&&0===limit)return[];if(!isRegExp(separator))return _split.call(string,separator,limit);var separator2,match,lastIndex,lastLength,i,output=[],flags=(separator.ignoreCase?"i":"")+(separator.multiline?"m":"")+(separator.unicode?"u":"")+(separator.sticky?"y":""),lastLastIndex=0,splitLimit=limit===undefined?4294967295:limit>>>0,separatorCopy=new RegExp(separator.source,flags+"g");for(NPCG||(separator2=new RegExp("^"+separatorCopy.source+"$(?!\\s)",flags));(match=separatorCopy.exec(string))&&!((lastIndex=match.index+match[0].length)>lastLastIndex&&(output.push(string.slice(lastLastIndex,match.index)),!NPCG&&match.length>1&&match[0].replace(separator2,function(){for(i=1;i<arguments.length-2;i++)arguments[i]===undefined&&(match[i]=undefined)}),match.length>1&&match.index<string.length&&$push.apply(output,match.slice(1)),lastLength=match[0].length,lastLastIndex=lastIndex,output.length>=splitLimit));)separatorCopy.lastIndex===match.index&&separatorCopy.lastIndex++;return lastLastIndex===string.length?!lastLength&&separatorCopy.test("")||output.push(""):output.push(string.slice(lastLastIndex)),output.length>splitLimit?output.slice(0,splitLimit):output}}else"0".split(undefined,0).length&&($split=function(separator,limit){return separator===undefined&&0===limit?[]:_split.call(this,separator,limit)});return[function(separator,limit){var O=defined(this),fn=separator==undefined?undefined:separator[SPLIT];return fn!==undefined?fn.call(separator,O,limit):$split.call(String(O),separator,limit)},$split]})},{"./_fix-re-wks":35,"./_is-regexp":51}],225:[function(require,module,exports){"use strict";require("./es6.regexp.flags");var anObject=require("./_an-object"),$flags=require("./_flags"),DESCRIPTORS=require("./_descriptors"),$toString=/./.toString,define=function(fn){require("./_redefine")(RegExp.prototype,"toString",fn,!0)};require("./_fails")(function(){return"/a/b"!=$toString.call({source:"a",flags:"b"})})?define(function(){var R=anObject(this);return"/".concat(R.source,"/","flags"in R?R.flags:!DESCRIPTORS&&R instanceof RegExp?$flags.call(R):undefined)}):"toString"!=$toString.name&&define(function(){return $toString.call(this)})},{"./_an-object":6,"./_descriptors":28,"./_fails":34,"./_flags":36,"./_redefine":90,"./es6.regexp.flags":220}],226:[function(require,module,exports){"use strict";var strong=require("./_collection-strong"),validate=require("./_validate-collection");module.exports=require("./_collection")("Set",function(get){return function(){return get(this,arguments.length>0?arguments[0]:undefined)}},{add:function(value){return strong.def(validate(this,"Set"),value=0===value?0:value,value)}},strong)},{"./_collection":21,"./_collection-strong":18,"./_validate-collection":121}],227:[function(require,module,exports){"use strict";require("./_string-html")("anchor",function(createHTML){return function(name){return createHTML(this,"a","name",name)}})},{"./_string-html":103}],228:[function(require,module,exports){"use strict";require("./_string-html")("big",function(createHTML){return function(){return createHTML(this,"big","","")}})},{"./_string-html":103}],229:[function(require,module,exports){"use strict";require("./_string-html")("blink",function(createHTML){return function(){return createHTML(this,"blink","","")}})},{"./_string-html":103}],230:[function(require,module,exports){"use strict";require("./_string-html")("bold",function(createHTML){return function(){return createHTML(this,"b","","")}})},{"./_string-html":103}],231:[function(require,module,exports){"use strict";var $export=require("./_export"),$at=require("./_string-at")(!1);$export($export.P,"String",{codePointAt:function(pos){return $at(this,pos)}})},{"./_export":32,"./_string-at":101}],232:[function(require,module,exports){"use strict";var $export=require("./_export"),toLength=require("./_to-length"),context=require("./_string-context"),$endsWith="".endsWith;$export($export.P+$export.F*require("./_fails-is-regexp")("endsWith"),"String",{endsWith:function(searchString){var that=context(this,searchString,"endsWith"),endPosition=arguments.length>1?arguments[1]:undefined,len=toLength(that.length),end=endPosition===undefined?len:Math.min(toLength(endPosition),len),search=String(searchString);return $endsWith?$endsWith.call(that,search,end):that.slice(end-search.length,end)===search}})},{"./_export":32,"./_fails-is-regexp":33,"./_string-context":102,"./_to-length":113}],233:[function(require,module,exports){"use strict";require("./_string-html")("fixed",function(createHTML){return function(){return createHTML(this,"tt","","")}})},{"./_string-html":103}],234:[function(require,module,exports){"use strict";require("./_string-html")("fontcolor",function(createHTML){return function(color){return createHTML(this,"font","color",color)}})},{"./_string-html":103}],235:[function(require,module,exports){"use strict";require("./_string-html")("fontsize",function(createHTML){return function(size){return createHTML(this,"font","size",size)}})},{"./_string-html":103}],236:[function(require,module,exports){var $export=require("./_export"),toAbsoluteIndex=require("./_to-absolute-index"),fromCharCode=String.fromCharCode,$fromCodePoint=String.fromCodePoint;$export($export.S+$export.F*(!!$fromCodePoint&&1!=$fromCodePoint.length),"String",{fromCodePoint:function(x){for(var code,res=[],aLen=arguments.length,i=0;aLen>i;){if(code=+arguments[i++],toAbsoluteIndex(code,1114111)!==code)throw RangeError(code+" is not a valid code point");res.push(code<65536?fromCharCode(code):fromCharCode(55296+((code-=65536)>>10),code%1024+56320))}return res.join("")}})},{"./_export":32,"./_to-absolute-index":109}],237:[function(require,module,exports){"use strict";var $export=require("./_export"),context=require("./_string-context");$export($export.P+$export.F*require("./_fails-is-regexp")("includes"),"String",{includes:function(searchString){return!!~context(this,searchString,"includes").indexOf(searchString,arguments.length>1?arguments[1]:undefined)}})},{"./_export":32,"./_fails-is-regexp":33,"./_string-context":102}],238:[function(require,module,exports){"use strict";require("./_string-html")("italics",function(createHTML){return function(){return createHTML(this,"i","","")}})},{"./_string-html":103}],239:[function(require,module,exports){"use strict";var $at=require("./_string-at")(!0);require("./_iter-define")(String,"String",function(iterated){this._t=String(iterated),this._i=0},function(){var point,O=this._t,index=this._i;return index>=O.length?{value:undefined,done:!0}:(point=$at(O,index),this._i+=point.length,{value:point,done:!1})})},{"./_iter-define":54,"./_string-at":101}],240:[function(require,module,exports){"use strict";require("./_string-html")("link",function(createHTML){return function(url){return createHTML(this,"a","href",url)}})},{"./_string-html":103}],241:[function(require,module,exports){var $export=require("./_export"),toIObject=require("./_to-iobject"),toLength=require("./_to-length");$export($export.S,"String",{raw:function(callSite){for(var tpl=toIObject(callSite.raw),len=toLength(tpl.length),aLen=arguments.length,res=[],i=0;len>i;)res.push(String(tpl[i++])),i<aLen&&res.push(String(arguments[i]));return res.join("")}})},{"./_export":32,"./_to-iobject":112,"./_to-length":113}],242:[function(require,module,exports){var $export=require("./_export");$export($export.P,"String",{repeat:require("./_string-repeat")})},{"./_export":32,"./_string-repeat":105}],243:[function(require,module,exports){"use strict";require("./_string-html")("small",function(createHTML){return function(){return createHTML(this,"small","","")}})},{"./_string-html":103}],244:[function(require,module,exports){"use strict";var $export=require("./_export"),toLength=require("./_to-length"),context=require("./_string-context"),$startsWith="".startsWith;$export($export.P+$export.F*require("./_fails-is-regexp")("startsWith"),"String",{startsWith:function(searchString){var that=context(this,searchString,"startsWith"),index=toLength(Math.min(arguments.length>1?arguments[1]:undefined,that.length)),search=String(searchString);return $startsWith?$startsWith.call(that,search,index):that.slice(index,index+search.length)===search}})},{"./_export":32,"./_fails-is-regexp":33,"./_string-context":102,"./_to-length":113}],245:[function(require,module,exports){"use strict";require("./_string-html")("strike",function(createHTML){return function(){return createHTML(this,"strike","","")}})},{"./_string-html":103}],246:[function(require,module,exports){"use strict";require("./_string-html")("sub",function(createHTML){return function(){return createHTML(this,"sub","","")}})},{"./_string-html":103}],247:[function(require,module,exports){"use strict";require("./_string-html")("sup",function(createHTML){return function(){return createHTML(this,"sup","","")}})},{"./_string-html":103}],248:[function(require,module,exports){"use strict";require("./_string-trim")("trim",function($trim){return function(){return $trim(this,3)}})},{"./_string-trim":106}],249:[function(require,module,exports){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}var global=require("./_global"),has=require("./_has"),DESCRIPTORS=require("./_descriptors"),$export=require("./_export"),redefine=require("./_redefine"),META=require("./_meta").KEY,$fails=require("./_fails"),shared=require("./_shared"),setToStringTag=require("./_set-to-string-tag"),uid=require("./_uid"),wks=require("./_wks"),wksExt=require("./_wks-ext"),wksDefine=require("./_wks-define"),enumKeys=require("./_enum-keys"),isArray=require("./_is-array"),anObject=require("./_an-object"),isObject=require("./_is-object"),toIObject=require("./_to-iobject"),toPrimitive=require("./_to-primitive"),createDesc=require("./_property-desc"),_create=require("./_object-create"),gOPNExt=require("./_object-gopn-ext"),$GOPD=require("./_object-gopd"),$DP=require("./_object-dp"),$keys=require("./_object-keys"),gOPD=$GOPD.f,dP=$DP.f,gOPN=gOPNExt.f,$Symbol=global.Symbol,$JSON=global.JSON,_stringify=$JSON&&$JSON.stringify,HIDDEN=wks("_hidden"),TO_PRIMITIVE=wks("toPrimitive"),isEnum={}.propertyIsEnumerable,SymbolRegistry=shared("symbol-registry"),AllSymbols=shared("symbols"),OPSymbols=shared("op-symbols"),ObjectProto=Object.prototype,USE_NATIVE="function"==typeof $Symbol,QObject=global.QObject,setter=!QObject||!QObject.prototype||!QObject.prototype.findChild,setSymbolDesc=DESCRIPTORS&&$fails(function(){return 7!=_create(dP({},"a",{get:function(){return dP(this,"a",{value:7}).a}})).a})?function(it,key,D){var protoDesc=gOPD(ObjectProto,key);protoDesc&&delete ObjectProto[key],dP(it,key,D),protoDesc&&it!==ObjectProto&&dP(ObjectProto,key,protoDesc)}:dP,wrap=function(tag){var sym=AllSymbols[tag]=_create($Symbol.prototype);return sym._k=tag,sym},isSymbol=USE_NATIVE&&"symbol"==_typeof($Symbol.iterator)?function(it){return"symbol"==_typeof(it)}:function(it){return it instanceof $Symbol},$defineProperty=function(it,key,D){return it===ObjectProto&&$defineProperty(OPSymbols,key,D),anObject(it),key=toPrimitive(key,!0),anObject(D),has(AllSymbols,key)?(D.enumerable?(has(it,HIDDEN)&&it[HIDDEN][key]&&(it[HIDDEN][key]=!1),D=_create(D,{enumerable:createDesc(0,!1)})):(has(it,HIDDEN)||dP(it,HIDDEN,createDesc(1,{})),it[HIDDEN][key]=!0),setSymbolDesc(it,key,D)):dP(it,key,D)},$defineProperties=function(it,P){anObject(it);for(var key,keys=enumKeys(P=toIObject(P)),i=0,l=keys.length;l>i;)$defineProperty(it,key=keys[i++],P[key]);return it},$propertyIsEnumerable=function(key){var E=isEnum.call(this,key=toPrimitive(key,!0));return!(this===ObjectProto&&has(AllSymbols,key)&&!has(OPSymbols,key))&&(!(E||!has(this,key)||!has(AllSymbols,key)||has(this,HIDDEN)&&this[HIDDEN][key])||E)},$getOwnPropertyDescriptor=function(it,key){if(it=toIObject(it),key=toPrimitive(key,!0),it!==ObjectProto||!has(AllSymbols,key)||has(OPSymbols,key)){var D=gOPD(it,key);return!D||!has(AllSymbols,key)||has(it,HIDDEN)&&it[HIDDEN][key]||(D.enumerable=!0),D}},$getOwnPropertyNames=function(it){for(var key,names=gOPN(toIObject(it)),result=[],i=0;names.length>i;)has(AllSymbols,key=names[i++])||key==HIDDEN||key==META||result.push(key);return result},$getOwnPropertySymbols=function(it){for(var key,IS_OP=it===ObjectProto,names=gOPN(IS_OP?OPSymbols:toIObject(it)),result=[],i=0;names.length>i;)!has(AllSymbols,key=names[i++])||IS_OP&&!has(ObjectProto,key)||result.push(AllSymbols[key]);return result};USE_NATIVE||(redefine(($Symbol=function(){if(this instanceof $Symbol)throw TypeError("Symbol is not a constructor!");var tag=uid(arguments.length>0?arguments[0]:undefined);return DESCRIPTORS&&setter&&setSymbolDesc(ObjectProto,tag,{configurable:!0,set:function $set(value){this===ObjectProto&&$set.call(OPSymbols,value),has(this,HIDDEN)&&has(this[HIDDEN],tag)&&(this[HIDDEN][tag]=!1),setSymbolDesc(this,tag,createDesc(1,value))}}),wrap(tag)}).prototype,"toString",function(){return this._k}),$GOPD.f=$getOwnPropertyDescriptor,$DP.f=$defineProperty,require("./_object-gopn").f=gOPNExt.f=$getOwnPropertyNames,require("./_object-pie").f=$propertyIsEnumerable,require("./_object-gops").f=$getOwnPropertySymbols,DESCRIPTORS&&!require("./_library")&&redefine(ObjectProto,"propertyIsEnumerable",$propertyIsEnumerable,!0),wksExt.f=function(name){return wrap(wks(name))}),$export($export.G+$export.W+$export.F*!USE_NATIVE,{Symbol:$Symbol});for(var es6Symbols="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),j=0;es6Symbols.length>j;)wks(es6Symbols[j++]);for(var wellKnownSymbols=$keys(wks.store),k=0;wellKnownSymbols.length>k;)wksDefine(wellKnownSymbols[k++]);$export($export.S+$export.F*!USE_NATIVE,"Symbol",{"for":function(key){return has(SymbolRegistry,key+="")?SymbolRegistry[key]:SymbolRegistry[key]=$Symbol(key)},keyFor:function(sym){if(!isSymbol(sym))throw TypeError(sym+" is not a symbol!");for(var key in SymbolRegistry)if(SymbolRegistry[key]===sym)return key},useSetter:function(){setter=!0},useSimple:function(){setter=!1}}),$export($export.S+$export.F*!USE_NATIVE,"Object",{create:function(it,P){return P===undefined?_create(it):$defineProperties(_create(it),P)},defineProperty:$defineProperty,defineProperties:$defineProperties,getOwnPropertyDescriptor:$getOwnPropertyDescriptor,getOwnPropertyNames:$getOwnPropertyNames,getOwnPropertySymbols:$getOwnPropertySymbols}),$JSON&&$export($export.S+$export.F*(!USE_NATIVE||$fails(function(){var S=$Symbol();return"[null]"!=_stringify([S])||"{}"!=_stringify({a:S})||"{}"!=_stringify(Object(S))})),"JSON",{stringify:function(it){for(var replacer,$replacer,args=[it],i=1;arguments.length>i;)args.push(arguments[i++]);if($replacer=replacer=args[1],(isObject(replacer)||it!==undefined)&&!isSymbol(it))return isArray(replacer)||(replacer=function(key,value){if("function"==typeof $replacer&&(value=$replacer.call(this,key,value)),!isSymbol(value))return value}),args[1]=replacer,_stringify.apply($JSON,args)}}),$Symbol.prototype[TO_PRIMITIVE]||require("./_hide")($Symbol.prototype,TO_PRIMITIVE,$Symbol.prototype.valueOf),setToStringTag($Symbol,"Symbol"),setToStringTag(Math,"Math",!0),setToStringTag(global.JSON,"JSON",!0)},{"./_an-object":6,"./_descriptors":28,"./_enum-keys":31,"./_export":32,"./_fails":34,"./_global":39,"./_has":40,"./_hide":41,"./_is-array":48,"./_is-object":50,"./_library":58,"./_meta":64,"./_object-create":69,"./_object-dp":70,"./_object-gopd":73,"./_object-gopn":75,"./_object-gopn-ext":74,"./_object-gops":76,"./_object-keys":79,"./_object-pie":80,"./_property-desc":88,"./_redefine":90,"./_set-to-string-tag":96,"./_shared":98,"./_to-iobject":112,"./_to-primitive":115,"./_uid":119,"./_wks":124,"./_wks-define":122,"./_wks-ext":123}],250:[function(require,module,exports){"use strict";var $export=require("./_export"),$typed=require("./_typed"),buffer=require("./_typed-buffer"),anObject=require("./_an-object"),toAbsoluteIndex=require("./_to-absolute-index"),toLength=require("./_to-length"),isObject=require("./_is-object"),ArrayBuffer=require("./_global").ArrayBuffer,speciesConstructor=require("./_species-constructor"),$ArrayBuffer=buffer.ArrayBuffer,$DataView=buffer.DataView,$isView=$typed.ABV&&ArrayBuffer.isView,$slice=$ArrayBuffer.prototype.slice,VIEW=$typed.VIEW;$export($export.G+$export.W+$export.F*(ArrayBuffer!==$ArrayBuffer),{ArrayBuffer:$ArrayBuffer}),$export($export.S+$export.F*!$typed.CONSTR,"ArrayBuffer",{isView:function(it){return $isView&&$isView(it)||isObject(it)&&VIEW in it}}),$export($export.P+$export.U+$export.F*require("./_fails")(function(){return!new $ArrayBuffer(2).slice(1,undefined).byteLength}),"ArrayBuffer",{slice:function(start,end){if($slice!==undefined&&end===undefined)return $slice.call(anObject(this),start);for(var len=anObject(this).byteLength,first=toAbsoluteIndex(start,len),final=toAbsoluteIndex(end===undefined?len:end,len),result=new(speciesConstructor(this,$ArrayBuffer))(toLength(final-first)),viewS=new $DataView(this),viewT=new $DataView(result),index=0;first<final;)viewT.setUint8(index++,viewS.getUint8(first++));return result}}),require("./_set-species")("ArrayBuffer")},{"./_an-object":6,"./_export":32,"./_fails":34,"./_global":39,"./_is-object":50,"./_set-species":95,"./_species-constructor":99,"./_to-absolute-index":109,"./_to-length":113,"./_typed":118,"./_typed-buffer":117}],251:[function(require,module,exports){var $export=require("./_export");$export($export.G+$export.W+$export.F*!require("./_typed").ABV,{DataView:require("./_typed-buffer").DataView})},{"./_export":32,"./_typed":118,"./_typed-buffer":117}],252:[function(require,module,exports){require("./_typed-array")("Float32",4,function(init){return function(data,byteOffset,length){return init(this,data,byteOffset,length)}})},{"./_typed-array":116}],253:[function(require,module,exports){require("./_typed-array")("Float64",8,function(init){return function(data,byteOffset,length){return init(this,data,byteOffset,length)}})},{"./_typed-array":116}],254:[function(require,module,exports){require("./_typed-array")("Int16",2,function(init){return function(data,byteOffset,length){return init(this,data,byteOffset,length)}})},{"./_typed-array":116}],255:[function(require,module,exports){require("./_typed-array")("Int32",4,function(init){return function(data,byteOffset,length){return init(this,data,byteOffset,length)}})},{"./_typed-array":116}],256:[function(require,module,exports){require("./_typed-array")("Int8",1,function(init){return function(data,byteOffset,length){return init(this,data,byteOffset,length)}})},{"./_typed-array":116}],257:[function(require,module,exports){require("./_typed-array")("Uint16",2,function(init){return function(data,byteOffset,length){return init(this,data,byteOffset,length)}})},{"./_typed-array":116}],258:[function(require,module,exports){require("./_typed-array")("Uint32",4,function(init){return function(data,byteOffset,length){return init(this,data,byteOffset,length)}})},{"./_typed-array":116}],259:[function(require,module,exports){require("./_typed-array")("Uint8",1,function(init){return function(data,byteOffset,length){return init(this,data,byteOffset,length)}})},{"./_typed-array":116}],260:[function(require,module,exports){require("./_typed-array")("Uint8",1,function(init){return function(data,byteOffset,length){return init(this,data,byteOffset,length)}},!0)},{"./_typed-array":116}],261:[function(require,module,exports){"use strict";var InternalMap,each=require("./_array-methods")(0),redefine=require("./_redefine"),meta=require("./_meta"),assign=require("./_object-assign"),weak=require("./_collection-weak"),isObject=require("./_is-object"),fails=require("./_fails"),validate=require("./_validate-collection"),getWeak=meta.getWeak,isExtensible=Object.isExtensible,uncaughtFrozenStore=weak.ufstore,tmp={},wrapper=function(get){return function(){return get(this,arguments.length>0?arguments[0]:undefined)}},methods={get:function(key){if(isObject(key)){var data=getWeak(key);return!0===data?uncaughtFrozenStore(validate(this,"WeakMap")).get(key):data?data[this._i]:undefined}},set:function(key,value){return weak.def(validate(this,"WeakMap"),key,value)}},$WeakMap=module.exports=require("./_collection")("WeakMap",wrapper,methods,weak,!0,!0);fails(function(){return 7!=(new $WeakMap).set((Object.freeze||Object)(tmp),7).get(tmp)})&&(assign((InternalMap=weak.getConstructor(wrapper,"WeakMap")).prototype,methods),meta.NEED=!0,each(["delete","has","get","set"],function(key){var proto=$WeakMap.prototype,method=proto[key];redefine(proto,key,function(a,b){if(isObject(a)&&!isExtensible(a)){this._f||(this._f=new InternalMap);var result=this._f[key](a,b);return"set"==key?this:result}return method.call(this,a,b)})}))},{"./_array-methods":11,"./_collection":21,"./_collection-weak":20,"./_fails":34,"./_is-object":50,"./_meta":64,"./_object-assign":68,"./_redefine":90,"./_validate-collection":121}],262:[function(require,module,exports){"use strict";var weak=require("./_collection-weak"),validate=require("./_validate-collection");require("./_collection")("WeakSet",function(get){return function(){return get(this,arguments.length>0?arguments[0]:undefined)}},{add:function(value){return weak.def(validate(this,"WeakSet"),value,!0)}},weak,!1,!0)},{"./_collection":21,"./_collection-weak":20,"./_validate-collection":121}],263:[function(require,module,exports){"use strict";var $export=require("./_export"),flattenIntoArray=require("./_flatten-into-array"),toObject=require("./_to-object"),toLength=require("./_to-length"),aFunction=require("./_a-function"),arraySpeciesCreate=require("./_array-species-create");$export($export.P,"Array",{flatMap:function(callbackfn){var sourceLen,A,O=toObject(this);return aFunction(callbackfn),sourceLen=toLength(O.length),A=arraySpeciesCreate(O,0),flattenIntoArray(A,O,O,sourceLen,0,1,callbackfn,arguments[1]),A}}),require("./_add-to-unscopables")("flatMap")},{"./_a-function":2,"./_add-to-unscopables":4,"./_array-species-create":14,"./_export":32,"./_flatten-into-array":37,"./_to-length":113,"./_to-object":114}],264:[function(require,module,exports){"use strict";var $export=require("./_export"),flattenIntoArray=require("./_flatten-into-array"),toObject=require("./_to-object"),toLength=require("./_to-length"),toInteger=require("./_to-integer"),arraySpeciesCreate=require("./_array-species-create");$export($export.P,"Array",{flatten:function(){var depthArg=arguments[0],O=toObject(this),sourceLen=toLength(O.length),A=arraySpeciesCreate(O,0);return flattenIntoArray(A,O,O,sourceLen,0,depthArg===undefined?1:toInteger(depthArg)),A}}),require("./_add-to-unscopables")("flatten")},{"./_add-to-unscopables":4,"./_array-species-create":14,"./_export":32,"./_flatten-into-array":37,"./_to-integer":111,"./_to-length":113,"./_to-object":114}],265:[function(require,module,exports){"use strict";var $export=require("./_export"),$includes=require("./_array-includes")(!0);$export($export.P,"Array",{includes:function(el){return $includes(this,el,arguments.length>1?arguments[1]:undefined)}}),require("./_add-to-unscopables")("includes")},{"./_add-to-unscopables":4,"./_array-includes":10,"./_export":32}],266:[function(require,module,exports){var $export=require("./_export"),microtask=require("./_microtask")(),process=require("./_global").process,isNode="process"==require("./_cof")(process);$export($export.G,{asap:function(fn){var domain=isNode&&process.domain;microtask(domain?domain.bind(fn):fn)}})},{"./_cof":17,"./_export":32,"./_global":39,"./_microtask":66}],267:[function(require,module,exports){var $export=require("./_export"),cof=require("./_cof");$export($export.S,"Error",{isError:function(it){return"Error"===cof(it)}})},{"./_cof":17,"./_export":32}],268:[function(require,module,exports){var $export=require("./_export");$export($export.G,{global:require("./_global")})},{"./_export":32,"./_global":39}],269:[function(require,module,exports){require("./_set-collection-from")("Map")},{"./_set-collection-from":92}],270:[function(require,module,exports){require("./_set-collection-of")("Map")},{"./_set-collection-of":93}],271:[function(require,module,exports){var $export=require("./_export");$export($export.P+$export.R,"Map",{toJSON:require("./_collection-to-json")("Map")})},{"./_collection-to-json":19,"./_export":32}],272:[function(require,module,exports){var $export=require("./_export");$export($export.S,"Math",{clamp:function(x,lower,upper){return Math.min(upper,Math.max(lower,x))}})},{"./_export":32}],273:[function(require,module,exports){var $export=require("./_export");$export($export.S,"Math",{DEG_PER_RAD:Math.PI/180})},{"./_export":32}],274:[function(require,module,exports){var $export=require("./_export"),RAD_PER_DEG=180/Math.PI;$export($export.S,"Math",{degrees:function(radians){return radians*RAD_PER_DEG}})},{"./_export":32}],275:[function(require,module,exports){var $export=require("./_export"),scale=require("./_math-scale"),fround=require("./_math-fround");$export($export.S,"Math",{fscale:function(x,inLow,inHigh,outLow,outHigh){return fround(scale(x,inLow,inHigh,outLow,outHigh))}})},{"./_export":32,"./_math-fround":60,"./_math-scale":62}],276:[function(require,module,exports){var $export=require("./_export");$export($export.S,"Math",{iaddh:function(x0,x1,y0,y1){var $x0=x0>>>0,$y0=y0>>>0;return(x1>>>0)+(y1>>>0)+(($x0&$y0|($x0|$y0)&~($x0+$y0>>>0))>>>31)|0}})},{"./_export":32}],277:[function(require,module,exports){var $export=require("./_export");$export($export.S,"Math",{imulh:function(u,v){var $u=+u,$v=+v,u0=65535&$u,v0=65535&$v,u1=$u>>16,v1=$v>>16,t=(u1*v0>>>0)+(u0*v0>>>16);return u1*v1+(t>>16)+((u0*v1>>>0)+(65535&t)>>16)}})},{"./_export":32}],278:[function(require,module,exports){var $export=require("./_export");$export($export.S,"Math",{isubh:function(x0,x1,y0,y1){var $x0=x0>>>0,$y0=y0>>>0;return(x1>>>0)-(y1>>>0)-((~$x0&$y0|~($x0^$y0)&$x0-$y0>>>0)>>>31)|0}})},{"./_export":32}],279:[function(require,module,exports){var $export=require("./_export");$export($export.S,"Math",{RAD_PER_DEG:180/Math.PI})},{"./_export":32}],280:[function(require,module,exports){var $export=require("./_export"),DEG_PER_RAD=Math.PI/180;$export($export.S,"Math",{radians:function(degrees){return degrees*DEG_PER_RAD}})},{"./_export":32}],281:[function(require,module,exports){var $export=require("./_export");$export($export.S,"Math",{scale:require("./_math-scale")})},{"./_export":32,"./_math-scale":62}],282:[function(require,module,exports){var $export=require("./_export");$export($export.S,"Math",{signbit:function(x){return(x=+x)!=x?x:0==x?1/x==Infinity:x>0}})},{"./_export":32}],283:[function(require,module,exports){var $export=require("./_export");$export($export.S,"Math",{umulh:function(u,v){var $u=+u,$v=+v,u0=65535&$u,v0=65535&$v,u1=$u>>>16,v1=$v>>>16,t=(u1*v0>>>0)+(u0*v0>>>16);return u1*v1+(t>>>16)+((u0*v1>>>0)+(65535&t)>>>16)}})},{"./_export":32}],284:[function(require,module,exports){"use strict";var $export=require("./_export"),toObject=require("./_to-object"),aFunction=require("./_a-function"),$defineProperty=require("./_object-dp");require("./_descriptors")&&$export($export.P+require("./_object-forced-pam"),"Object",{__defineGetter__:function(P,getter){$defineProperty.f(toObject(this),P,{get:aFunction(getter),enumerable:!0,configurable:!0})}})},{"./_a-function":2,"./_descriptors":28,"./_export":32,"./_object-dp":70,"./_object-forced-pam":72,"./_to-object":114}],285:[function(require,module,exports){"use strict";var $export=require("./_export"),toObject=require("./_to-object"),aFunction=require("./_a-function"),$defineProperty=require("./_object-dp");require("./_descriptors")&&$export($export.P+require("./_object-forced-pam"),"Object",{__defineSetter__:function(P,setter){$defineProperty.f(toObject(this),P,{set:aFunction(setter),enumerable:!0,configurable:!0})}})},{"./_a-function":2,"./_descriptors":28,"./_export":32,"./_object-dp":70,"./_object-forced-pam":72,"./_to-object":114}],286:[function(require,module,exports){var $export=require("./_export"),$entries=require("./_object-to-array")(!0);$export($export.S,"Object",{entries:function(it){return $entries(it)}})},{"./_export":32,"./_object-to-array":82}],287:[function(require,module,exports){var $export=require("./_export"),ownKeys=require("./_own-keys"),toIObject=require("./_to-iobject"),gOPD=require("./_object-gopd"),createProperty=require("./_create-property");$export($export.S,"Object",{getOwnPropertyDescriptors:function(object){for(var key,desc,O=toIObject(object),getDesc=gOPD.f,keys=ownKeys(O),result={},i=0;keys.length>i;)(desc=getDesc(O,key=keys[i++]))!==undefined&&createProperty(result,key,desc);return result}})},{"./_create-property":23,"./_export":32,"./_object-gopd":73,"./_own-keys":83,"./_to-iobject":112}],288:[function(require,module,exports){"use strict";var $export=require("./_export"),toObject=require("./_to-object"),toPrimitive=require("./_to-primitive"),getPrototypeOf=require("./_object-gpo"),getOwnPropertyDescriptor=require("./_object-gopd").f;require("./_descriptors")&&$export($export.P+require("./_object-forced-pam"),"Object",{__lookupGetter__:function(P){var D,O=toObject(this),K=toPrimitive(P,!0);do{if(D=getOwnPropertyDescriptor(O,K))return D.get}while(O=getPrototypeOf(O))}})},{"./_descriptors":28,"./_export":32,"./_object-forced-pam":72,"./_object-gopd":73,"./_object-gpo":77,"./_to-object":114,"./_to-primitive":115}],289:[function(require,module,exports){"use strict";var $export=require("./_export"),toObject=require("./_to-object"),toPrimitive=require("./_to-primitive"),getPrototypeOf=require("./_object-gpo"),getOwnPropertyDescriptor=require("./_object-gopd").f;require("./_descriptors")&&$export($export.P+require("./_object-forced-pam"),"Object",{__lookupSetter__:function(P){var D,O=toObject(this),K=toPrimitive(P,!0);do{if(D=getOwnPropertyDescriptor(O,K))return D.set}while(O=getPrototypeOf(O))}})},{"./_descriptors":28,"./_export":32,"./_object-forced-pam":72,"./_object-gopd":73,"./_object-gpo":77,"./_to-object":114,"./_to-primitive":115}],290:[function(require,module,exports){var $export=require("./_export"),$values=require("./_object-to-array")(!1);$export($export.S,"Object",{values:function(it){return $values(it)}})},{"./_export":32,"./_object-to-array":82}],291:[function(require,module,exports){"use strict";var $export=require("./_export"),global=require("./_global"),core=require("./_core"),microtask=require("./_microtask")(),OBSERVABLE=require("./_wks")("observable"),aFunction=require("./_a-function"),anObject=require("./_an-object"),anInstance=require("./_an-instance"),redefineAll=require("./_redefine-all"),hide=require("./_hide"),forOf=require("./_for-of"),RETURN=forOf.RETURN,getMethod=function(fn){return null==fn?undefined:aFunction(fn)},cleanupSubscription=function(subscription){var cleanup=subscription._c;cleanup&&(subscription._c=undefined,cleanup())},subscriptionClosed=function(subscription){return subscription._o===undefined},closeSubscription=function(subscription){subscriptionClosed(subscription)||(subscription._o=undefined,cleanupSubscription(subscription))},Subscription=function(observer,subscriber){anObject(observer),this._c=undefined,this._o=observer,observer=new SubscriptionObserver(this);try{var cleanup=subscriber(observer),subscription=cleanup;null!=cleanup&&("function"==typeof cleanup.unsubscribe?cleanup=function(){subscription.unsubscribe()}:aFunction(cleanup),this._c=cleanup)}catch(e){return void observer.error(e)}subscriptionClosed(this)&&cleanupSubscription(this)};Subscription.prototype=redefineAll({},{unsubscribe:function(){closeSubscription(this)}});var SubscriptionObserver=function(subscription){this._s=subscription};SubscriptionObserver.prototype=redefineAll({},{next:function(value){var subscription=this._s;if(!subscriptionClosed(subscription)){var observer=subscription._o;try{var m=getMethod(observer.next);if(m)return m.call(observer,value)}catch(e){try{closeSubscription(subscription)}finally{throw e}}}},error:function(value){var subscription=this._s;if(subscriptionClosed(subscription))throw value;var observer=subscription._o;subscription._o=undefined;try{var m=getMethod(observer.error);if(!m)throw value;value=m.call(observer,value)}catch(e){try{cleanupSubscription(subscription)}finally{throw e}}return cleanupSubscription(subscription),value},complete:function(value){var subscription=this._s;if(!subscriptionClosed(subscription)){var observer=subscription._o;subscription._o=undefined;try{var m=getMethod(observer.complete);value=m?m.call(observer,value):undefined}catch(e){try{cleanupSubscription(subscription)}finally{throw e}}return cleanupSubscription(subscription),value}}});var $Observable=function(subscriber){anInstance(this,$Observable,"Observable","_f")._f=aFunction(subscriber)};redefineAll($Observable.prototype,{subscribe:function(observer){return new Subscription(observer,this._f)},forEach:function(fn){var that=this;return new(core.Promise||global.Promise)(function(resolve,reject){aFunction(fn);var subscription=that.subscribe({next:function(value){try{return fn(value)}catch(e){reject(e),subscription.unsubscribe()}},error:reject,complete:resolve})})}}),redefineAll($Observable,{from:function(x){var C="function"==typeof this?this:$Observable,method=getMethod(anObject(x)[OBSERVABLE]);if(method){var observable=anObject(method.call(x));return observable.constructor===C?observable:new C(function(observer){return observable.subscribe(observer)})}return new C(function(observer){var done=!1;return microtask(function(){if(!done){try{if(forOf(x,!1,function(it){if(observer.next(it),done)return RETURN})===RETURN)return}catch(e){if(done)throw e;return void observer.error(e)}observer.complete()}}),function(){done=!0}})},of:function(){for(var i=0,l=arguments.length,items=new Array(l);i<l;)items[i]=arguments[i++];return new("function"==typeof this?this:$Observable)(function(observer){var done=!1;return microtask(function(){if(!done){for(var j=0;j<items.length;++j)if(observer.next(items[j]),done)return;observer.complete()}}),function(){done=!0}})}}),hide($Observable.prototype,OBSERVABLE,function(){return this}),$export($export.G,{Observable:$Observable}),require("./_set-species")("Observable")},{"./_a-function":2,"./_an-instance":5,"./_an-object":6,"./_core":22,"./_export":32,"./_for-of":38,"./_global":39,"./_hide":41,"./_microtask":66,"./_redefine-all":89,"./_set-species":95,"./_wks":124}],292:[function(require,module,exports){"use strict";var $export=require("./_export"),core=require("./_core"),global=require("./_global"),speciesConstructor=require("./_species-constructor"),promiseResolve=require("./_promise-resolve");$export($export.P+$export.R,"Promise",{"finally":function(onFinally){var C=speciesConstructor(this,core.Promise||global.Promise),isFunction="function"==typeof onFinally;return this.then(isFunction?function(x){return promiseResolve(C,onFinally()).then(function(){return x})}:onFinally,isFunction?function(e){return promiseResolve(C,onFinally()).then(function(){throw e})}:onFinally)}})},{"./_core":22,"./_export":32,"./_global":39,"./_promise-resolve":87,"./_species-constructor":99}],293:[function(require,module,exports){"use strict";var $export=require("./_export"),newPromiseCapability=require("./_new-promise-capability"),perform=require("./_perform");$export($export.S,"Promise",{"try":function(callbackfn){var promiseCapability=newPromiseCapability.f(this),result=perform(callbackfn);return(result.e?promiseCapability.reject:promiseCapability.resolve)(result.v),promiseCapability.promise}})},{"./_export":32,"./_new-promise-capability":67,"./_perform":86}],294:[function(require,module,exports){var metadata=require("./_metadata"),anObject=require("./_an-object"),toMetaKey=metadata.key,ordinaryDefineOwnMetadata=metadata.set;metadata.exp({defineMetadata:function(metadataKey,metadataValue,target,targetKey){ordinaryDefineOwnMetadata(metadataKey,metadataValue,anObject(target),toMetaKey(targetKey))}})},{"./_an-object":6,"./_metadata":65}],295:[function(require,module,exports){var metadata=require("./_metadata"),anObject=require("./_an-object"),toMetaKey=metadata.key,getOrCreateMetadataMap=metadata.map,store=metadata.store;metadata.exp({deleteMetadata:function(metadataKey,target){var targetKey=arguments.length<3?undefined:toMetaKey(arguments[2]),metadataMap=getOrCreateMetadataMap(anObject(target),targetKey,!1);if(metadataMap===undefined||!metadataMap["delete"](metadataKey))return!1;if(metadataMap.size)return!0;var targetMetadata=store.get(target);return targetMetadata["delete"](targetKey),!!targetMetadata.size||store["delete"](target)}})},{"./_an-object":6,"./_metadata":65}],296:[function(require,module,exports){var Set=require("./es6.set"),from=require("./_array-from-iterable"),metadata=require("./_metadata"),anObject=require("./_an-object"),getPrototypeOf=require("./_object-gpo"),ordinaryOwnMetadataKeys=metadata.keys,toMetaKey=metadata.key;metadata.exp({getMetadataKeys:function(target){return function ordinaryMetadataKeys(O,P){var oKeys=ordinaryOwnMetadataKeys(O,P),parent=getPrototypeOf(O);if(null===parent)return oKeys;var pKeys=ordinaryMetadataKeys(parent,P);return pKeys.length?oKeys.length?from(new Set(oKeys.concat(pKeys))):pKeys:oKeys}(anObject(target),arguments.length<2?undefined:toMetaKey(arguments[1]))}})},{"./_an-object":6,"./_array-from-iterable":9,"./_metadata":65,"./_object-gpo":77,"./es6.set":226}],297:[function(require,module,exports){var metadata=require("./_metadata"),anObject=require("./_an-object"),getPrototypeOf=require("./_object-gpo"),ordinaryHasOwnMetadata=metadata.has,ordinaryGetOwnMetadata=metadata.get,toMetaKey=metadata.key;metadata.exp({getMetadata:function(metadataKey,target){return function ordinaryGetMetadata(MetadataKey,O,P){if(ordinaryHasOwnMetadata(MetadataKey,O,P))return ordinaryGetOwnMetadata(MetadataKey,O,P);var parent=getPrototypeOf(O);return null!==parent?ordinaryGetMetadata(MetadataKey,parent,P):undefined}(metadataKey,anObject(target),arguments.length<3?undefined:toMetaKey(arguments[2]))}})},{"./_an-object":6,"./_metadata":65,"./_object-gpo":77}],298:[function(require,module,exports){var metadata=require("./_metadata"),anObject=require("./_an-object"),ordinaryOwnMetadataKeys=metadata.keys,toMetaKey=metadata.key;metadata.exp({getOwnMetadataKeys:function(target){return ordinaryOwnMetadataKeys(anObject(target),arguments.length<2?undefined:toMetaKey(arguments[1]))}})},{"./_an-object":6,"./_metadata":65}],299:[function(require,module,exports){var metadata=require("./_metadata"),anObject=require("./_an-object"),ordinaryGetOwnMetadata=metadata.get,toMetaKey=metadata.key;metadata.exp({getOwnMetadata:function(metadataKey,target){return ordinaryGetOwnMetadata(metadataKey,anObject(target),arguments.length<3?undefined:toMetaKey(arguments[2]))}})},{"./_an-object":6,"./_metadata":65}],300:[function(require,module,exports){var metadata=require("./_metadata"),anObject=require("./_an-object"),getPrototypeOf=require("./_object-gpo"),ordinaryHasOwnMetadata=metadata.has,toMetaKey=metadata.key;metadata.exp({hasMetadata:function(metadataKey,target){return function ordinaryHasMetadata(MetadataKey,O,P){if(ordinaryHasOwnMetadata(MetadataKey,O,P))return!0;var parent=getPrototypeOf(O);return null!==parent&&ordinaryHasMetadata(MetadataKey,parent,P)}(metadataKey,anObject(target),arguments.length<3?undefined:toMetaKey(arguments[2]))}})},{"./_an-object":6,"./_metadata":65,"./_object-gpo":77}],301:[function(require,module,exports){var metadata=require("./_metadata"),anObject=require("./_an-object"),ordinaryHasOwnMetadata=metadata.has,toMetaKey=metadata.key;metadata.exp({hasOwnMetadata:function(metadataKey,target){return ordinaryHasOwnMetadata(metadataKey,anObject(target),arguments.length<3?undefined:toMetaKey(arguments[2]))}})},{"./_an-object":6,"./_metadata":65}],302:[function(require,module,exports){var $metadata=require("./_metadata"),anObject=require("./_an-object"),aFunction=require("./_a-function"),toMetaKey=$metadata.key,ordinaryDefineOwnMetadata=$metadata.set;$metadata.exp({metadata:function(metadataKey,metadataValue){return function(target,targetKey){ordinaryDefineOwnMetadata(metadataKey,metadataValue,(targetKey!==undefined?anObject:aFunction)(target),toMetaKey(targetKey))}}})},{"./_a-function":2,"./_an-object":6,"./_metadata":65}],303:[function(require,module,exports){require("./_set-collection-from")("Set")},{"./_set-collection-from":92}],304:[function(require,module,exports){require("./_set-collection-of")("Set")},{"./_set-collection-of":93}],305:[function(require,module,exports){var $export=require("./_export");$export($export.P+$export.R,"Set",{toJSON:require("./_collection-to-json")("Set")})},{"./_collection-to-json":19,"./_export":32}],306:[function(require,module,exports){"use strict";var $export=require("./_export"),$at=require("./_string-at")(!0);$export($export.P,"String",{at:function(pos){return $at(this,pos)}})},{"./_export":32,"./_string-at":101}],307:[function(require,module,exports){"use strict";var $export=require("./_export"),defined=require("./_defined"),toLength=require("./_to-length"),isRegExp=require("./_is-regexp"),getFlags=require("./_flags"),RegExpProto=RegExp.prototype,$RegExpStringIterator=function(regexp,string){this._r=regexp,this._s=string};require("./_iter-create")($RegExpStringIterator,"RegExp String",function(){var match=this._r.exec(this._s);return{value:match,done:null===match}}),$export($export.P,"String",{matchAll:function(regexp){if(defined(this),!isRegExp(regexp))throw TypeError(regexp+" is not a regexp!");var S=String(this),flags="flags"in RegExpProto?String(regexp.flags):getFlags.call(regexp),rx=new RegExp(regexp.source,~flags.indexOf("g")?flags:"g"+flags);return rx.lastIndex=toLength(regexp.lastIndex),new $RegExpStringIterator(rx,S)}})},{"./_defined":27,"./_export":32,"./_flags":36,"./_is-regexp":51,"./_iter-create":53,"./_to-length":113}],308:[function(require,module,exports){"use strict";var $export=require("./_export"),$pad=require("./_string-pad"),userAgent=require("./_user-agent");$export($export.P+$export.F*/Version\/10\.\d+(\.\d+)? Safari\//.test(userAgent),"String",{padEnd:function(maxLength){return $pad(this,maxLength,arguments.length>1?arguments[1]:undefined,!1)}})},{"./_export":32,"./_string-pad":104,"./_user-agent":120}],309:[function(require,module,exports){"use strict";var $export=require("./_export"),$pad=require("./_string-pad"),userAgent=require("./_user-agent");$export($export.P+$export.F*/Version\/10\.\d+(\.\d+)? Safari\//.test(userAgent),"String",{padStart:function(maxLength){return $pad(this,maxLength,arguments.length>1?arguments[1]:undefined,!0)}})},{"./_export":32,"./_string-pad":104,"./_user-agent":120}],310:[function(require,module,exports){"use strict";require("./_string-trim")("trimLeft",function($trim){return function(){return $trim(this,1)}},"trimStart")},{"./_string-trim":106}],311:[function(require,module,exports){"use strict";require("./_string-trim")("trimRight",function($trim){return function(){return $trim(this,2)}},"trimEnd")},{"./_string-trim":106}],312:[function(require,module,exports){require("./_wks-define")("asyncIterator")},{"./_wks-define":122}],313:[function(require,module,exports){require("./_wks-define")("observable")},{"./_wks-define":122}],314:[function(require,module,exports){var $export=require("./_export");$export($export.S,"System",{global:require("./_global")})},{"./_export":32,"./_global":39}],315:[function(require,module,exports){require("./_set-collection-from")("WeakMap")},{"./_set-collection-from":92}],316:[function(require,module,exports){require("./_set-collection-of")("WeakMap")},{"./_set-collection-of":93}],317:[function(require,module,exports){require("./_set-collection-from")("WeakSet")},{"./_set-collection-from":92}],318:[function(require,module,exports){require("./_set-collection-of")("WeakSet")},{"./_set-collection-of":93}],319:[function(require,module,exports){for(var $iterators=require("./es6.array.iterator"),getKeys=require("./_object-keys"),redefine=require("./_redefine"),global=require("./_global"),hide=require("./_hide"),Iterators=require("./_iterators"),wks=require("./_wks"),ITERATOR=wks("iterator"),TO_STRING_TAG=wks("toStringTag"),ArrayValues=Iterators.Array,DOMIterables={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},collections=getKeys(DOMIterables),i=0;i<collections.length;i++){var key,NAME=collections[i],explicit=DOMIterables[NAME],Collection=global[NAME],proto=Collection&&Collection.prototype;if(proto&&(proto[ITERATOR]||hide(proto,ITERATOR,ArrayValues),proto[TO_STRING_TAG]||hide(proto,TO_STRING_TAG,NAME),Iterators[NAME]=ArrayValues,explicit))for(key in $iterators)proto[key]||redefine(proto,key,$iterators[key],!0)}},{"./_global":39,"./_hide":41,"./_iterators":57,"./_object-keys":79,"./_redefine":90,"./_wks":124,"./es6.array.iterator":136}],320:[function(require,module,exports){var $export=require("./_export"),$task=require("./_task");$export($export.G+$export.B,{setImmediate:$task.set,clearImmediate:$task.clear})},{"./_export":32,"./_task":108}],321:[function(require,module,exports){var global=require("./_global"),$export=require("./_export"),userAgent=require("./_user-agent"),slice=[].slice,MSIE=/MSIE .\./.test(userAgent),wrap=function(set){return function(fn,time){var boundArgs=arguments.length>2,args=!!boundArgs&&slice.call(arguments,2);return set(boundArgs?function(){("function"==typeof fn?fn:Function(fn)).apply(this,args)}:fn,time)}};$export($export.G+$export.B+$export.F*MSIE,{setTimeout:wrap(global.setTimeout),setInterval:wrap(global.setInterval)})},{"./_export":32,"./_global":39,"./_user-agent":120}],322:[function(require,module,exports){require("./modules/es6.symbol"),require("./modules/es6.object.create"),require("./modules/es6.object.define-property"),require("./modules/es6.object.define-properties"),require("./modules/es6.object.get-own-property-descriptor"),require("./modules/es6.object.get-prototype-of"),require("./modules/es6.object.keys"),require("./modules/es6.object.get-own-property-names"),require("./modules/es6.object.freeze"),require("./modules/es6.object.seal"),require("./modules/es6.object.prevent-extensions"),require("./modules/es6.object.is-frozen"),require("./modules/es6.object.is-sealed"),require("./modules/es6.object.is-extensible"),require("./modules/es6.object.assign"),require("./modules/es6.object.is"),require("./modules/es6.object.set-prototype-of"),require("./modules/es6.object.to-string"),require("./modules/es6.function.bind"),require("./modules/es6.function.name"),require("./modules/es6.function.has-instance"),require("./modules/es6.parse-int"),require("./modules/es6.parse-float"),require("./modules/es6.number.constructor"),require("./modules/es6.number.to-fixed"),require("./modules/es6.number.to-precision"),require("./modules/es6.number.epsilon"),require("./modules/es6.number.is-finite"),require("./modules/es6.number.is-integer"),require("./modules/es6.number.is-nan"),require("./modules/es6.number.is-safe-integer"),require("./modules/es6.number.max-safe-integer"),require("./modules/es6.number.min-safe-integer"),require("./modules/es6.number.parse-float"),require("./modules/es6.number.parse-int"),require("./modules/es6.math.acosh"),require("./modules/es6.math.asinh"),require("./modules/es6.math.atanh"),require("./modules/es6.math.cbrt"),require("./modules/es6.math.clz32"),require("./modules/es6.math.cosh"),require("./modules/es6.math.expm1"),require("./modules/es6.math.fround"),require("./modules/es6.math.hypot"),require("./modules/es6.math.imul"),require("./modules/es6.math.log10"),require("./modules/es6.math.log1p"),require("./modules/es6.math.log2"),require("./modules/es6.math.sign"),require("./modules/es6.math.sinh"),require("./modules/es6.math.tanh"),require("./modules/es6.math.trunc"),require("./modules/es6.string.from-code-point"),require("./modules/es6.string.raw"),require("./modules/es6.string.trim"),require("./modules/es6.string.iterator"),require("./modules/es6.string.code-point-at"),require("./modules/es6.string.ends-with"),require("./modules/es6.string.includes"),require("./modules/es6.string.repeat"),require("./modules/es6.string.starts-with"),require("./modules/es6.string.anchor"),require("./modules/es6.string.big"),require("./modules/es6.string.blink"),require("./modules/es6.string.bold"),require("./modules/es6.string.fixed"),require("./modules/es6.string.fontcolor"),require("./modules/es6.string.fontsize"),require("./modules/es6.string.italics"),require("./modules/es6.string.link"),require("./modules/es6.string.small"),require("./modules/es6.string.strike"),require("./modules/es6.string.sub"),require("./modules/es6.string.sup"),require("./modules/es6.date.now"),require("./modules/es6.date.to-json"),require("./modules/es6.date.to-iso-string"),require("./modules/es6.date.to-string"),require("./modules/es6.date.to-primitive"),require("./modules/es6.array.is-array"),require("./modules/es6.array.from"),require("./modules/es6.array.of"),require("./modules/es6.array.join"),require("./modules/es6.array.slice"),require("./modules/es6.array.sort"),require("./modules/es6.array.for-each"),require("./modules/es6.array.map"),require("./modules/es6.array.filter"),require("./modules/es6.array.some"),require("./modules/es6.array.every"),require("./modules/es6.array.reduce"),require("./modules/es6.array.reduce-right"),require("./modules/es6.array.index-of"),require("./modules/es6.array.last-index-of"),require("./modules/es6.array.copy-within"),require("./modules/es6.array.fill"),require("./modules/es6.array.find"),require("./modules/es6.array.find-index"),require("./modules/es6.array.species"),require("./modules/es6.array.iterator"),require("./modules/es6.regexp.constructor"),require("./modules/es6.regexp.to-string"),require("./modules/es6.regexp.flags"),require("./modules/es6.regexp.match"),require("./modules/es6.regexp.replace"),require("./modules/es6.regexp.search"),require("./modules/es6.regexp.split"),require("./modules/es6.promise"),require("./modules/es6.map"),require("./modules/es6.set"),require("./modules/es6.weak-map"),require("./modules/es6.weak-set"),require("./modules/es6.typed.array-buffer"),require("./modules/es6.typed.data-view"),require("./modules/es6.typed.int8-array"),require("./modules/es6.typed.uint8-array"),require("./modules/es6.typed.uint8-clamped-array"),require("./modules/es6.typed.int16-array"),require("./modules/es6.typed.uint16-array"),require("./modules/es6.typed.int32-array"),require("./modules/es6.typed.uint32-array"),require("./modules/es6.typed.float32-array"),require("./modules/es6.typed.float64-array"),require("./modules/es6.reflect.apply"),require("./modules/es6.reflect.construct"),require("./modules/es6.reflect.define-property"),require("./modules/es6.reflect.delete-property"),require("./modules/es6.reflect.enumerate"),require("./modules/es6.reflect.get"),require("./modules/es6.reflect.get-own-property-descriptor"),require("./modules/es6.reflect.get-prototype-of"),require("./modules/es6.reflect.has"),require("./modules/es6.reflect.is-extensible"),require("./modules/es6.reflect.own-keys"),require("./modules/es6.reflect.prevent-extensions"),require("./modules/es6.reflect.set"),require("./modules/es6.reflect.set-prototype-of"),require("./modules/es7.array.includes"),require("./modules/es7.array.flat-map"),require("./modules/es7.array.flatten"),require("./modules/es7.string.at"),require("./modules/es7.string.pad-start"),require("./modules/es7.string.pad-end"),require("./modules/es7.string.trim-left"),require("./modules/es7.string.trim-right"),require("./modules/es7.string.match-all"),require("./modules/es7.symbol.async-iterator"),require("./modules/es7.symbol.observable"),require("./modules/es7.object.get-own-property-descriptors"),require("./modules/es7.object.values"),require("./modules/es7.object.entries"),require("./modules/es7.object.define-getter"),require("./modules/es7.object.define-setter"),require("./modules/es7.object.lookup-getter"),require("./modules/es7.object.lookup-setter"),require("./modules/es7.map.to-json"),require("./modules/es7.set.to-json"),require("./modules/es7.map.of"),require("./modules/es7.set.of"),require("./modules/es7.weak-map.of"),require("./modules/es7.weak-set.of"),require("./modules/es7.map.from"),require("./modules/es7.set.from"),require("./modules/es7.weak-map.from"),require("./modules/es7.weak-set.from"),require("./modules/es7.global"),require("./modules/es7.system.global"),require("./modules/es7.error.is-error"),require("./modules/es7.math.clamp"),require("./modules/es7.math.deg-per-rad"),require("./modules/es7.math.degrees"),require("./modules/es7.math.fscale"),require("./modules/es7.math.iaddh"),require("./modules/es7.math.isubh"),require("./modules/es7.math.imulh"),require("./modules/es7.math.rad-per-deg"),require("./modules/es7.math.radians"),require("./modules/es7.math.scale"),require("./modules/es7.math.umulh"),require("./modules/es7.math.signbit"),require("./modules/es7.promise.finally"),require("./modules/es7.promise.try"),require("./modules/es7.reflect.define-metadata"),require("./modules/es7.reflect.delete-metadata"),require("./modules/es7.reflect.get-metadata"),require("./modules/es7.reflect.get-metadata-keys"),require("./modules/es7.reflect.get-own-metadata"),require("./modules/es7.reflect.get-own-metadata-keys"),require("./modules/es7.reflect.has-metadata"),require("./modules/es7.reflect.has-own-metadata"),require("./modules/es7.reflect.metadata"),require("./modules/es7.asap"),require("./modules/es7.observable"),require("./modules/web.timers"),require("./modules/web.immediate"),require("./modules/web.dom.iterable"),module.exports=require("./modules/_core")},{"./modules/_core":22,"./modules/es6.array.copy-within":126,"./modules/es6.array.every":127,"./modules/es6.array.fill":128,"./modules/es6.array.filter":129,"./modules/es6.array.find":131,"./modules/es6.array.find-index":130,"./modules/es6.array.for-each":132,"./modules/es6.array.from":133,"./modules/es6.array.index-of":134,"./modules/es6.array.is-array":135,"./modules/es6.array.iterator":136,"./modules/es6.array.join":137,"./modules/es6.array.last-index-of":138,"./modules/es6.array.map":139,"./modules/es6.array.of":140,"./modules/es6.array.reduce":142,"./modules/es6.array.reduce-right":141,"./modules/es6.array.slice":143,"./modules/es6.array.some":144,"./modules/es6.array.sort":145,"./modules/es6.array.species":146,"./modules/es6.date.now":147,"./modules/es6.date.to-iso-string":148,"./modules/es6.date.to-json":149,"./modules/es6.date.to-primitive":150,"./modules/es6.date.to-string":151,"./modules/es6.function.bind":152,"./modules/es6.function.has-instance":153,"./modules/es6.function.name":154,"./modules/es6.map":155,"./modules/es6.math.acosh":156,"./modules/es6.math.asinh":157,"./modules/es6.math.atanh":158,"./modules/es6.math.cbrt":159,"./modules/es6.math.clz32":160,"./modules/es6.math.cosh":161,"./modules/es6.math.expm1":162,"./modules/es6.math.fround":163,"./modules/es6.math.hypot":164,"./modules/es6.math.imul":165,"./modules/es6.math.log10":166,"./modules/es6.math.log1p":167,"./modules/es6.math.log2":168,"./modules/es6.math.sign":169,"./modules/es6.math.sinh":170,"./modules/es6.math.tanh":171,"./modules/es6.math.trunc":172,"./modules/es6.number.constructor":173,"./modules/es6.number.epsilon":174,"./modules/es6.number.is-finite":175,"./modules/es6.number.is-integer":176,"./modules/es6.number.is-nan":177,"./modules/es6.number.is-safe-integer":178,"./modules/es6.number.max-safe-integer":179,"./modules/es6.number.min-safe-integer":180,"./modules/es6.number.parse-float":181,"./modules/es6.number.parse-int":182,"./modules/es6.number.to-fixed":183,"./modules/es6.number.to-precision":184,"./modules/es6.object.assign":185,"./modules/es6.object.create":186,"./modules/es6.object.define-properties":187,"./modules/es6.object.define-property":188,"./modules/es6.object.freeze":189,"./modules/es6.object.get-own-property-descriptor":190,"./modules/es6.object.get-own-property-names":191,"./modules/es6.object.get-prototype-of":192,"./modules/es6.object.is":196,"./modules/es6.object.is-extensible":193,"./modules/es6.object.is-frozen":194,"./modules/es6.object.is-sealed":195,"./modules/es6.object.keys":197,"./modules/es6.object.prevent-extensions":198,"./modules/es6.object.seal":199,"./modules/es6.object.set-prototype-of":200,"./modules/es6.object.to-string":201,"./modules/es6.parse-float":202,"./modules/es6.parse-int":203,"./modules/es6.promise":204,"./modules/es6.reflect.apply":205,"./modules/es6.reflect.construct":206,"./modules/es6.reflect.define-property":207,"./modules/es6.reflect.delete-property":208,"./modules/es6.reflect.enumerate":209,"./modules/es6.reflect.get":212,"./modules/es6.reflect.get-own-property-descriptor":210,"./modules/es6.reflect.get-prototype-of":211,"./modules/es6.reflect.has":213,"./modules/es6.reflect.is-extensible":214,"./modules/es6.reflect.own-keys":215,"./modules/es6.reflect.prevent-extensions":216,"./modules/es6.reflect.set":218,"./modules/es6.reflect.set-prototype-of":217,"./modules/es6.regexp.constructor":219,"./modules/es6.regexp.flags":220,"./modules/es6.regexp.match":221,"./modules/es6.regexp.replace":222,"./modules/es6.regexp.search":223,"./modules/es6.regexp.split":224,"./modules/es6.regexp.to-string":225,"./modules/es6.set":226,"./modules/es6.string.anchor":227,"./modules/es6.string.big":228,"./modules/es6.string.blink":229,"./modules/es6.string.bold":230,"./modules/es6.string.code-point-at":231,"./modules/es6.string.ends-with":232,"./modules/es6.string.fixed":233,"./modules/es6.string.fontcolor":234,"./modules/es6.string.fontsize":235,"./modules/es6.string.from-code-point":236,"./modules/es6.string.includes":237,"./modules/es6.string.italics":238,"./modules/es6.string.iterator":239,"./modules/es6.string.link":240,"./modules/es6.string.raw":241,"./modules/es6.string.repeat":242,"./modules/es6.string.small":243,"./modules/es6.string.starts-with":244,"./modules/es6.string.strike":245,"./modules/es6.string.sub":246,"./modules/es6.string.sup":247,"./modules/es6.string.trim":248,"./modules/es6.symbol":249,"./modules/es6.typed.array-buffer":250,"./modules/es6.typed.data-view":251,"./modules/es6.typed.float32-array":252,"./modules/es6.typed.float64-array":253,"./modules/es6.typed.int16-array":254,"./modules/es6.typed.int32-array":255,"./modules/es6.typed.int8-array":256,"./modules/es6.typed.uint16-array":257,"./modules/es6.typed.uint32-array":258,"./modules/es6.typed.uint8-array":259,"./modules/es6.typed.uint8-clamped-array":260,"./modules/es6.weak-map":261,"./modules/es6.weak-set":262,"./modules/es7.array.flat-map":263,"./modules/es7.array.flatten":264,"./modules/es7.array.includes":265,"./modules/es7.asap":266,"./modules/es7.error.is-error":267,"./modules/es7.global":268,"./modules/es7.map.from":269,"./modules/es7.map.of":270,"./modules/es7.map.to-json":271,"./modules/es7.math.clamp":272,"./modules/es7.math.deg-per-rad":273,"./modules/es7.math.degrees":274,"./modules/es7.math.fscale":275,"./modules/es7.math.iaddh":276,"./modules/es7.math.imulh":277,"./modules/es7.math.isubh":278,"./modules/es7.math.rad-per-deg":279,"./modules/es7.math.radians":280,"./modules/es7.math.scale":281,"./modules/es7.math.signbit":282,"./modules/es7.math.umulh":283,"./modules/es7.object.define-getter":284,"./modules/es7.object.define-setter":285,"./modules/es7.object.entries":286,"./modules/es7.object.get-own-property-descriptors":287,"./modules/es7.object.lookup-getter":288,"./modules/es7.object.lookup-setter":289,"./modules/es7.object.values":290,"./modules/es7.observable":291,"./modules/es7.promise.finally":292,"./modules/es7.promise.try":293,"./modules/es7.reflect.define-metadata":294,"./modules/es7.reflect.delete-metadata":295,"./modules/es7.reflect.get-metadata":297,"./modules/es7.reflect.get-metadata-keys":296,"./modules/es7.reflect.get-own-metadata":299,"./modules/es7.reflect.get-own-metadata-keys":298,"./modules/es7.reflect.has-metadata":300,"./modules/es7.reflect.has-own-metadata":301,"./modules/es7.reflect.metadata":302,"./modules/es7.set.from":303,"./modules/es7.set.of":304,"./modules/es7.set.to-json":305,"./modules/es7.string.at":306,"./modules/es7.string.match-all":307,"./modules/es7.string.pad-end":308,"./modules/es7.string.pad-start":309,"./modules/es7.string.trim-left":310,"./modules/es7.string.trim-right":311,"./modules/es7.symbol.async-iterator":312,"./modules/es7.symbol.observable":313,"./modules/es7.system.global":314,"./modules/es7.weak-map.from":315,"./modules/es7.weak-map.of":316,"./modules/es7.weak-set.from":317,"./modules/es7.weak-set.of":318,"./modules/web.dom.iterable":319,"./modules/web.immediate":320,"./modules/web.timers":321}],323:[function(require,module,exports){function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}!function(global){"use strict";var undefined,Op=Object.prototype,hasOwn=Op.hasOwnProperty,$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag",inModule="object"===(void 0===module?"undefined":_typeof(module)),runtime=global.regeneratorRuntime;if(runtime)inModule&&(module.exports=runtime);else{(runtime=global.regeneratorRuntime=inModule?module.exports:{}).wrap=wrap;var GenStateSuspendedStart="suspendedStart",GenStateSuspendedYield="suspendedYield",GenStateExecuting="executing",GenStateCompleted="completed",ContinueSentinel={},IteratorPrototype={};IteratorPrototype[iteratorSymbol]=function(){return this};var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);GeneratorFunction.prototype=Gp.constructor=GeneratorFunctionPrototype,GeneratorFunctionPrototype.constructor=GeneratorFunction,GeneratorFunctionPrototype[toStringTagSymbol]=GeneratorFunction.displayName="GeneratorFunction",runtime.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},runtime.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,toStringTagSymbol in genFun||(genFun[toStringTagSymbol]="GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},runtime.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),AsyncIterator.prototype[asyncIteratorSymbol]=function(){return this},runtime.AsyncIterator=AsyncIterator,runtime.async=function(innerFn,outerFn,self,tryLocsList){var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList));return runtime.isGeneratorFunction(outerFn)?iter:iter.next().then(function(result){return result.done?result.value:iter.next()})},defineIteratorMethods(Gp),Gp[toStringTagSymbol]="Generator",Gp[iteratorSymbol]=function(){return this},Gp.toString=function(){return"[object Generator]"},runtime.keys=function(object){var keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},runtime.values=values,Context.prototype={constructor:Context,reset:function(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=undefined,this.done=!1,this.delegate=null,this.method="next",this.arg=undefined,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=undefined)},stop:function(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=undefined),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},"catch":function(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=undefined),ContinueSentinel}}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return generator._invoke=function(innerFn,self,context){var state=GenStateSuspendedStart;return function(method,arg){if(state===GenStateExecuting)throw new Error("Generator is already running");if(state===GenStateCompleted){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if(state===GenStateSuspendedStart)throw state=GenStateCompleted,context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state=GenStateExecuting;var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?GenStateCompleted:GenStateSuspendedYield,record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state=GenStateCompleted,context.method="throw",context.arg=record.arg)}}}(innerFn,self,context),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}function defineIteratorMethods(prototype){["next","throw","return"].forEach(function(method){prototype[method]=function(arg){return this._invoke(method,arg)}})}function AsyncIterator(generator){var previousPromise;this._invoke=function(method,arg){function callInvokeWithMethodAndArg(){return new Promise(function(resolve,reject){!function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"===_typeof(value)&&hasOwn.call(value,"__await")?Promise.resolve(value.__await).then(function(value){invoke("next",value,resolve,reject)},function(err){invoke("throw",err,resolve,reject)}):Promise.resolve(value).then(function(unwrapped){result.value=unwrapped,resolve(result)},reject)}reject(record.arg)}(method,arg,resolve,reject)})}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(delegate,context){var method=delegate.iterator[context.method];if(method===undefined){if(context.delegate=null,"throw"===context.method){if(delegate.iterator["return"]&&(context.method="return",context.arg=undefined,maybeInvokeDelegate(delegate,context),"throw"===context.method))return ContinueSentinel;context.method="throw",context.arg=new TypeError("The iterator does not provide a 'throw' method")}return ContinueSentinel}var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=undefined),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=undefined,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:undefined,done:!0}}}(function(){return this}()||Function("return this")())},{}],324:[function(require,module,exports){function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}var always_dropping_1,always_non_dropping_1,always_non_dropping_2,always_non_dropping_3,either_1,either_2,either_1_dropping_best,either_2_dropping_best,non_dropping_2_alt_dropping_1_non_dropping_1,CSL={PROCESSOR_VERSION:"1.1.183",CONDITION_LEVEL_TOP:1,CONDITION_LEVEL_BOTTOM:2,PLAIN_HYPHEN_REGEX:/(?:[^\\]-|\u2013)/,LOCATOR_LABELS_REGEXP:new RegExp("^((art|ch|subch|col|fig|l|n|no|op|p|pp|para|subpara|pt|r|sec|subsec|sv|sch|tit|vrs|vol)\\.)\\s+(.*)"),STATUTE_SUBDIV_GROUPED_REGEX:/((?:^| )(?:art|bk|ch|subch|col|fig|fol|l|n|no|op|p|pp|para|subpara|pt|r|sec|subsec|sv|sch|tit|vrs|vol)\. *)/g,STATUTE_SUBDIV_PLAIN_REGEX:/(?:(?:^| )(?:art|bk|ch|subch|col|fig|fol|l|n|no|op|p|pp|para|subpara|pt|r|sec|subsec|sv|sch|tit|vrs|vol)\. *)/,STATUTE_SUBDIV_STRINGS:{"art.":"article","bk.":"book","ch.":"chapter","subch.":"subchapter","p.":"page","pp.":"page","para.":"paragraph","subpara.":"subparagraph","pt.":"part","r.":"rule","sec.":"section","subsec.":"subsection","sch.":"schedule","tit.":"title","col.":"column","fig.":"figure","fol.":"folio","l.":"line","n.":"note","no.":"issue","op.":"opus","sv.":"sub-verbo","vrs.":"verse","vol.":"volume"},STATUTE_SUBDIV_STRINGS_REVERSE:{article:"art.",book:"bk.",chapter:"ch.",subchapter:"subch.",page:"p.",paragraph:"para.",subparagraph:"subpara.",part:"pt.",rule:"r.",section:"sec.",subsection:"subsec.",schedule:"sch.",title:"tit.",column:"col.",figure:"fig.",folio:"fol.",line:"l.",note:"n.",issue:"no.",opus:"op.","sub-verbo":"sv.","sub verbo":"sv.",verse:"vrs.",volume:"vol."},LOCATOR_LABELS_MAP:{art:"article",bk:"book",ch:"chapter",subch:"subchapter",col:"column",fig:"figure",fol:"folio",l:"line",n:"note",no:"issue",op:"opus",p:"page",pp:"page",para:"paragraph",subpara:"subparagraph",pt:"part",r:"rule",sec:"section",subsec:"subsection",sv:"sub-verbo",sch:"schedule",tit:"title",vrs:"verse",vol:"volume"},MODULE_MACROS:{"juris-pretitle":!0,"juris-title":!0,"juris-pretitle-short":!0,"juris-title-short":!0,"juris-main":!0,"juris-main-short":!0,"juris-tail":!0,"juris-tail-short":!0,"juris-locator":!0},MODULE_TYPES:{legal_case:!0,legislation:!0,bill:!0,hearing:!0,gazette:!0,report:!0,regulation:!0,standard:!0},NestedBraces:[["(","["],[")","]"]],checkNestedBrace:function(state){"note"===state.opt.xclass?(this.depth=0,this.update=function(str){for(var lst=(str=str||"").split(/([\(\)])/),i=1,ilen=lst.length;i<ilen;i+=2)"("===lst[i]?(1==this.depth%2&&(lst[i]="["),this.depth+=1):")"===lst[i]&&(0==this.depth%2&&(lst[i]="]"),this.depth-=1);return lst.join("")}):this.update=function(str){return str}},MULTI_FIELDS:["event","publisher","publisher-place","event-place","title","container-title","collection-title","authority","genre","title-short","medium","jurisdiction","archive","archive-place"],LangPrefsMap:{title:"titles","title-short":"titles",event:"titles",genre:"titles",medium:"titles","container-title":"journals","collection-title":"journals",archive:"journals",publisher:"publishers",authority:"publishers","publisher-place":"places","event-place":"places","archive-place":"places",jurisdiction:"places",number:"number",edition:"number",issue:"number",volume:"number"},AbbreviationSegments:function(){this["container-title"]={},this["collection-title"]={},this["institution-entire"]={},this["institution-part"]={},this.nickname={},this.number={},this.title={},this.place={},this.hereinafter={},this.classic={},this["container-phrase"]={},this["title-phrase"]={}},FIELD_CATEGORY_REMAP:{title:"title","container-title":"container-title","collection-title":"collection-title",number:"number",place:"place",archive:"collection-title","title-short":"title",genre:"title",event:"title",medium:"title","archive-place":"place","publisher-place":"place","event-place":"place",jurisdiction:"place","language-name":"place","language-name-original":"place","call-number":"number","chapter-number":"number","collection-number":"number",edition:"number",page:"number",issue:"number",locator:"number","number-of-pages":"number","number-of-volumes":"number",volume:"number","citation-number":"number",publisher:"institution-part"},parseLocator:function(item){if(this.opt.development_extensions.locator_date_and_revision&&item.locator){item.locator=""+item.locator;var idx=item.locator.indexOf("|");if(idx>-1){var raw_locator=item.locator;item.locator=raw_locator.slice(0,idx);var m=(raw_locator=raw_locator.slice(idx+1)).match(/^([0-9]{4}-[0-9]{2}-[0-9]{2}).*/);m&&(item["locator-date"]=this.fun.dateparser.parseDateToObject(m[1]),raw_locator=raw_locator.slice(m[1].length)),item["locator-extra"]=raw_locator.replace(/^\s+/,"").replace(/\s+$/,"")}}return item.locator&&(item.locator=(""+item.locator).replace(/\s+$/,"")),item},normalizeLocaleStr:function(str){if(str){var lst=str.split("-");return lst[0]=lst[0].toLowerCase(),lst[1]&&(lst[1]=lst[1].toUpperCase()),lst.join("-")}},parseNoteFieldHacks:function(Item,validFieldsForType,allowDateOverride){if("string"==typeof Item.note){for(var elems=[],lines=Item.note.split("\n"),i=0,ilen=lines.length;i<ilen;i++){elems=[];var m=(line=lines[i]).match(CSL.NOTE_FIELDS_REGEXP);if(m){for(var splt=line.split(CSL.NOTE_FIELDS_REGEXP),j=0,jlen=splt.length-1;j<jlen;j++)elems.push(splt[j]),elems.push(m[j]);elems.push(splt[splt.length-1]);for(j=1,jlen=elems.length;j<jlen&&(!elems[j-1].trim()||!(i>0||j>1)||elems[j-1].match(CSL.NOTE_FIELD_REGEXP));j+=2)elems[j]="\n"+elems[j].slice(2,-1).trim()+"\n";lines[i]=elems.join("")}}var offset=0,names={};for(i=0,ilen=(lines=lines.join("\n").split("\n")).length;i<ilen;i++){var line,mm=(line=lines[i]).match(CSL.NOTE_FIELD_REGEXP);if(line.trim()){if(!mm){if(0===i)continue;offset=i;break}var key=mm[1],val=mm[2].replace(/^\s+/,"").replace(/\s+$/,"");if("type"===key)Item.type=val,lines[i]="";else if(CSL.DATE_VARIABLES.indexOf(key)>-1)allowDateOverride&&(Item[key]={raw:val},(!validFieldsForType||validFieldsForType[key]&&val.match(/^[0-9]{4}(?:-[0-9]{1,2}(?:-[0-9]{1,2})*)*$/))&&(lines[i]=""));else if(!Item[key]){if(CSL.NAME_VARIABLES.indexOf(key)>-1){names[key]||(names[key]=[]);var lst=val.split(/\s*\|\|\s*/);if(1===lst.length)names[key].push({literal:lst[0]});else if(2===lst.length){var name={family:lst[0],given:lst[1]};CSL.parseParticles(name),names[key].push(name)}}else Item[key]=val;validFieldsForType&&!validFieldsForType[key]||(lines[i]="")}}}for(var key in names)Item[key]=names[key];if(validFieldsForType){lines[offset].trim()&&(lines[offset]="\n"+lines[offset]);for(i=offset-1;i>-1;i--)lines[i].trim()||(lines=lines.slice(0,i).concat(lines.slice(i+1)))}Item.note=lines.join("\n").trim()}},GENDERS:["masculine","feminine"],ERROR_NO_RENDERED_FORM:1,PREVIEW:"Just for laughs.",ASSUME_ALL_ITEMS_REGISTERED:2,START:0,END:1,SINGLETON:2,SEEN:6,SUCCESSOR:3,SUCCESSOR_OF_SUCCESSOR:4,SUPPRESS:5,SINGULAR:0,PLURAL:1,LITERAL:!0,BEFORE:1,AFTER:2,DESCENDING:1,ASCENDING:2,ONLY_FIRST:1,ALWAYS:2,ONLY_LAST:3,FINISH:1,POSITION_FIRST:0,POSITION_SUBSEQUENT:1,POSITION_IBID:2,POSITION_IBID_WITH_LOCATOR:3,MARK_TRAILING_NAMES:!0,POSITION_TEST_VARS:["position","first-reference-note-number","near-note"],AREAS:["citation","citation_sort","bibliography","bibliography_sort"],CITE_FIELDS:["first-reference-note-number","locator","locator-extra"],MINIMAL_NAME_FIELDS:["literal","family"],SWAPPING_PUNCTUATION:[".","!","?",":",","],TERMINAL_PUNCTUATION:[":",".",";","!","?"," "],NONE:0,NUMERIC:1,POSITION:2,COLLAPSE_VALUES:["citation-number","year","year-suffix"],DATE_PARTS:["year","month","day"],DATE_PARTS_ALL:["year","month","day","season"],DATE_PARTS_INTERNAL:["year","month","day","year_end","month_end","day_end"],NAME_PARTS:["non-dropping-particle","family","given","dropping-particle","suffix","literal"],DECORABLE_NAME_PARTS:["given","family","suffix"],DISAMBIGUATE_OPTIONS:["disambiguate-add-names","disambiguate-add-givenname","disambiguate-add-year-suffix"],GIVENNAME_DISAMBIGUATION_RULES:["all-names","all-names-with-initials","primary-name","primary-name-with-initials","by-cite"],NAME_ATTRIBUTES:["and","delimiter-precedes-last","delimiter-precedes-et-al","initialize-with","initialize","name-as-sort-order","sort-separator","et-al-min","et-al-use-first","et-al-subsequent-min","et-al-subsequent-use-first","form","prefix","suffix","delimiter"],PARALLEL_MATCH_VARS:["container-title"],PARALLEL_TYPES:["bill","gazette","regulation","legislation","legal_case","treaty","article-magazine","article-journal"],PARALLEL_COLLAPSING_MID_VARSET:["volume","issue","container-title","section","collection-number"],LOOSE:0,STRICT:1,TOLERANT:2,PREFIX_PUNCTUATION:/[.;:]\s*$/,SUFFIX_PUNCTUATION:/^\s*[.;:,\(\)]/,NUMBER_REGEXP:/(?:^\d+|\d+$)/,NAME_INITIAL_REGEXP:/^([A-Z\u0590-\u05ff\u00c0-\u017f\u0400-\u042f\u0600-\u06ff\u0370\u0372\u0376\u0386\u0388-\u03ab\u03e2\u03e4\u03e6\u03e8\u03ea\u03ec\u03ee\u03f4\u03f7\u03fd-\u03ff])([a-zA-Z\u00c0-\u017f\u0400-\u052f\u0600-\u06ff\u0370-\u03ff\u1f00-\u1fff]*|)/,ROMANESQUE_REGEXP:/[-0-9a-zA-Z\u0590-\u05d4\u05d6-\u05ff\u0080-\u017f\u0400-\u052f\u0370-\u03ff\u1f00-\u1fff\u0600-\u06ff\u200c\u200d\u200e\u0218\u0219\u021a\u021b\u202a-\u202e]/,ROMANESQUE_NOT_REGEXP:/[^a-zA-Z\u0590-\u05ff\u00c0-\u017f\u0400-\u052f\u0370-\u03ff\u1f00-\u1fff\u0600-\u06ff\u200c\u200d\u200e\u0218\u0219\u021a\u021b\u202a-\u202e]/g,STARTSWITH_ROMANESQUE_REGEXP:/^[&a-zA-Z\u0590-\u05d4\u05d6-\u05ff\u00c0-\u017f\u0400-\u052f\u0370-\u03ff\u1f00-\u1fff\u0600-\u06ff\u200c\u200d\u200e\u0218\u0219\u021a\u021b\u202a-\u202e]/,ENDSWITH_ROMANESQUE_REGEXP:/[.;:&a-zA-Z\u0590-\u05d4\u05d6-\u05ff\u00c0-\u017f\u0400-\u052f\u0370-\u03ff\u1f00-\u1fff\u0600-\u06ff\u200c\u200d\u200e\u0218\u0219\u021a\u021b\u202a-\u202e]$/,ALL_ROMANESQUE_REGEXP:/^[a-zA-Z\u0590-\u05ff\u00c0-\u017f\u0400-\u052f\u0370-\u03ff\u1f00-\u1fff\u0600-\u06ff\u200c\u200d\u200e\u0218\u0219\u021a\u021b\u202a-\u202e]+$/,VIETNAMESE_SPECIALS:/[\u00c0-\u00c3\u00c8-\u00ca\u00cc\u00cd\u00d2-\u00d5\u00d9\u00da\u00dd\u00e0-\u00e3\u00e8-\u00ea\u00ec\u00ed\u00f2-\u00f5\u00f9\u00fa\u00fd\u0101\u0103\u0110\u0111\u0128\u0129\u0168\u0169\u01a0\u01a1\u01af\u01b0\u1ea0-\u1ef9]/,VIETNAMESE_NAMES:/^(?:(?:[.AaBbCcDdEeGgHhIiKkLlMmNnOoPpQqRrSsTtUuVvXxYy \u00c0-\u00c3\u00c8-\u00ca\u00cc\u00cd\u00d2-\u00d5\u00d9\u00da\u00dd\u00e0-\u00e3\u00e8-\u00ea\u00ec\u00ed\u00f2-\u00f5\u00f9\u00fa\u00fd\u0101\u0103\u0110\u0111\u0128\u0129\u0168\u0169\u01a0\u01a1\u01af\u01b0\u1ea0-\u1ef9]{2,6})(\s+|$))+$/,NOTE_FIELDS_REGEXP:/\{:(?:[\-_a-z]+|[A-Z]+):[^\}]+\}/g,NOTE_FIELD_REGEXP:/^([\-_a-z]+|[A-Z]+):\s*([^\}]+)$/,PARTICLE_GIVEN_REGEXP:/^([^ ]+(?:\u02bb |\u2019 | |\' ) *)(.+)$/,PARTICLE_FAMILY_REGEXP:/^([^ ]+(?:\-|\u02bb|\u2019| |\') *)(.+)$/,DISPLAY_CLASSES:["block","left-margin","right-inline","indent"],NAME_VARIABLES:["author","editor","translator","contributor","collection-editor","composer","container-author","director","editorial-director","interviewer","original-author","recipient"],NUMERIC_VARIABLES:["call-number","chapter-number","collection-number","edition","page","issue","locator","number","number-of-pages","number-of-volumes","volume","citation-number"],DATE_VARIABLES:["locator-date","issued","event-date","accessed","container","original-date","publication-date","original-date","available-date","submitted"],TITLE_FIELD_SPLITS:function(seg){for(var keys=["title","short","main","sub"],ret={},i=0,ilen=keys.length;i<ilen;i++)ret[keys[i]]=seg+"title"+("title"===keys[i]?"":"-"+keys[i]);return ret},TAG_USEALL:function(str){var ret,open,close,end;for(ret=[""],open=str.indexOf("<"),close=str.indexOf(">");open>-1&&close>-1;)end=open>close?open+1:close+1,open<close&&-1===str.slice(open+1,close).indexOf("<")?(ret[ret.length-1]+=str.slice(0,open),ret.push(str.slice(open,close+1)),ret.push(""),str=str.slice(end)):(ret[ret.length-1]+=str.slice(0,close+1),str=str.slice(end)),open=str.indexOf("<"),close=str.indexOf(">");return ret[ret.length-1]+=str,ret},demoteNoiseWords:function(state,fld,drop_or_demote){var SKIP_WORDS=state.locale[state.opt.lang].opts["leading-noise-words"];if(fld&&drop_or_demote){(fld=fld.split(/\s+/)).reverse();for(var toEnd=[],j=fld.length-1;j>-1&&SKIP_WORDS.indexOf(fld[j].toLowerCase())>-1;j+=-1)toEnd.push(fld.pop());fld.reverse();var start=fld.join(" "),end=toEnd.join(" ");"drop"!==drop_or_demote&&end?"demote"===drop_or_demote&&(fld=[start,end].join(", ")):fld=start}return fld},extractTitleAndSubtitle:function(Item){for(var segments=["","container-"],i=0,ilen=segments.length;i<ilen;i++){var seg=segments[i],title=CSL.TITLE_FIELD_SPLITS(seg),langs=[!1];if(Item.multi)for(var lang in Item.multi._keys[title.short])langs.push(lang);var j=0;for(langs.length;j<ilen;j++){var vals={};if((lang=langs[j])?(Item.multi._keys[title.title]&&(vals[title.title]=Item.multi._keys[title.title][lang]),Item.multi._keys[title.short]&&(vals[title.short]=Item.multi._keys[title.short][lang])):(vals[title.title]=Item[title.title],vals[title.short]=Item[title.short]),vals[title.main]=vals[title.title],vals[title.sub]=!1,vals[title.title]&&vals[title.short]){var shortTitle=vals[title.short],offset=shortTitle.length;vals[title.title].slice(0,offset)===shortTitle&&vals[title.title].slice(offset).match(/^\s*:/)&&(vals[title.main]=vals[title.title].slice(0,offset).replace(/\s+$/,""),vals[title.sub]=vals[title.title].slice(offset).replace(/^\s*:\s*/,""))}if(lang)for(var key in vals)Item.multi._keys[key]||(Item.multi._keys[key]={}),Item.multi._keys[key][lang]=vals[key];else for(var key in vals)Item[key]=vals[key]}}},titlecaseSentenceOrNormal:function(state,Item,seg,lang,sentenceCase){var title=CSL.TITLE_FIELD_SPLITS(seg),vals={};if(lang&&Item.multi?(Item.multi._keys[title.title]&&(vals[title.title]=Item.multi._keys[title.title][lang]),Item.multi._keys[title.main]&&(vals[title.main]=Item.multi._keys[title.main][lang]),Item.multi._keys[title.sub]&&(vals[title.sub]=Item.multi._keys[title.sub][lang])):(vals[title.title]=Item[title.title],vals[title.main]=Item[title.main],vals[title.sub]=Item[title.sub]),vals[title.main]&&vals[title.sub]){var mainTitle=vals[title.main],subTitle=vals[title.sub];return sentenceCase?(mainTitle=CSL.Output.Formatters.sentence(state,mainTitle),subTitle=CSL.Output.Formatters.sentence(state,subTitle)):subTitle=CSL.Output.Formatters["capitalize-first"](state,subTitle),[mainTitle,subTitle].join(vals[title.title].slice(mainTitle.length,-1*subTitle.length))}return sentenceCase?CSL.Output.Formatters.sentence(state,vals[title.title]):vals[title.title]},getSafeEscape:function(state){if(["bibliography","citation"].indexOf(state.tmp.area)>-1){var callbacks=[];return state.opt.development_extensions.thin_non_breaking_space_html_hack&&"html"===state.opt.mode&&callbacks.push(function(txt){return txt.replace(/\u202f/g,'<span style="white-space:nowrap">&thinsp;</span>')}),callbacks.length?function(txt){for(var i=0,ilen=callbacks.length;i<ilen;i+=1)txt=callbacks[i](txt);return CSL.Output.Formats[state.opt.mode].text_escape(txt)}:CSL.Output.Formats[state.opt.mode].text_escape}return function(txt){return txt}},SKIP_WORDS:["about","above","across","afore","after","against","along","alongside","amid","amidst","among","amongst","anenst","apropos","apud","around","as","aside","astride","at","athwart","atop","barring","before","behind","below","beneath","beside","besides","between","beyond","but","by","circa","despite","down","during","except","for","forenenst","from","given","in","inside","into","lest","like","modulo","near","next","notwithstanding","of","off","on","onto","out","over","per","plus","pro","qua","sans","since","than","through"," thru","throughout","thruout","till","to","toward","towards","under","underneath","until","unto","up","upon","versus","vs.","v.","vs","v","via","vis-\xe0-vis","with","within","without","according to","ahead of","apart from","as for","as of","as per","as regards","aside from","back to","because of","close to","due to","except for","far from","inside of","instead of","near to","next to","on to","out from","out of","outside of","prior to","pursuant to","rather than","regardless of","such as","that of","up to","where as","or","yet","so","for","and","nor","a","an","the","de","d'","von","van","c","et","ca"],FORMAT_KEY_SEQUENCE:["@strip-periods","@font-style","@font-variant","@font-weight","@text-decoration","@vertical-align","@quotes"],INSTITUTION_KEYS:["font-style","font-variant","font-weight","text-decoration","text-case"],SUFFIX_CHARS:"a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z",ROMAN_NUMERALS:[["","i","ii","iii","iv","v","vi","vii","viii","ix"],["","x","xx","xxx","xl","l","lx","lxx","lxxx","xc"],["","c","cc","ccc","cd","d","dc","dcc","dccc","cm"],["","m","mm","mmm","mmmm","mmmmm"]],CREATORS:["author","editor","contributor","translator","recipient","interviewer","composer","original-author","container-author","collection-editor"],LANGS:{"af-ZA":"Afrikaans",ar:"Arabic","bg-BG":"Bulgarian","ca-AD":"Catalan","cs-CZ":"Czech","da-DK":"Danish","de-AT":"Austrian","de-CH":"German (CH)","de-DE":"German (DE)","el-GR":"Greek","en-GB":"English (GB)","en-US":"English (US)","es-ES":"Spanish","et-EE":"Estonian",eu:"European","fa-IR":"Persian","fi-FI":"Finnish","fr-CA":"French (CA)","fr-FR":"French (FR)","he-IL":"Hebrew","hr-HR":"Croatian","hu-HU":"Hungarian","is-IS":"Icelandic","it-IT":"Italian","ja-JP":"Japanese","km-KH":"Khmer","ko-KR":"Korean","lt-LT":"Lithuanian","lv-LV":"Latvian","mn-MN":"Mongolian","nb-NO":"Norwegian (Bokm\xe5l)","nl-NL":"Dutch","nn-NO":"Norwegian (Nynorsk)","pl-PL":"Polish","pt-BR":"Portuguese (BR)","pt-PT":"Portuguese (PT)","ro-RO":"Romanian","ru-RU":"Russian","sk-SK":"Slovak","sl-SI":"Slovenian","sr-RS":"Serbian","sv-SE":"Swedish","th-TH":"Thai","tr-TR":"Turkish","uk-UA":"Ukranian","vi-VN":"Vietnamese","zh-CN":"Chinese (CN)","zh-TW":"Chinese (TW)"},LANG_BASES:{af:"af_ZA",ar:"ar",bg:"bg_BG",ca:"ca_AD",cs:"cs_CZ",da:"da_DK",de:"de_DE",el:"el_GR",en:"en_US",es:"es_ES",et:"et_EE",eu:"eu",fa:"fa_IR",fi:"fi_FI",fr:"fr_FR",he:"he_IL",hr:"hr-HR",hu:"hu_HU",is:"is_IS",it:"it_IT",ja:"ja_JP",km:"km_KH",ko:"ko_KR",lt:"lt_LT",lv:"lv-LV",mn:"mn_MN",nb:"nb_NO",nl:"nl_NL",nn:"nn-NO",pl:"pl_PL",pt:"pt_PT",ro:"ro_RO",ru:"ru_RU",sk:"sk_SK",sl:"sl_SI",sr:"sr_RS",sv:"sv_SE",th:"th_TH",tr:"tr_TR",uk:"uk_UA",vi:"vi_VN",zh:"zh_CN"},SUPERSCRIPTS:{"\xaa":"a","\xb2":"2","\xb3":"3","\xb9":"1","\xba":"o","\u02b0":"h","\u02b1":"\u0266","\u02b2":"j","\u02b3":"r","\u02b4":"\u0279","\u02b5":"\u027b","\u02b6":"\u0281","\u02b7":"w","\u02b8":"y","\u02e0":"\u0263","\u02e1":"l","\u02e2":"s","\u02e3":"x","\u02e4":"\u0295","\u1d2c":"A","\u1d2d":"\xc6","\u1d2e":"B","\u1d30":"D","\u1d31":"E","\u1d32":"\u018e","\u1d33":"G","\u1d34":"H","\u1d35":"I","\u1d36":"J","\u1d37":"K","\u1d38":"L","\u1d39":"M","\u1d3a":"N","\u1d3c":"O","\u1d3d":"\u0222","\u1d3e":"P","\u1d3f":"R","\u1d40":"T","\u1d41":"U","\u1d42":"W","\u1d43":"a","\u1d44":"\u0250","\u1d45":"\u0251","\u1d46":"\u1d02","\u1d47":"b","\u1d48":"d","\u1d49":"e","\u1d4a":"\u0259","\u1d4b":"\u025b","\u1d4c":"\u025c","\u1d4d":"g","\u1d4f":"k","\u1d50":"m","\u1d51":"\u014b","\u1d52":"o","\u1d53":"\u0254","\u1d54":"\u1d16","\u1d55":"\u1d17","\u1d56":"p","\u1d57":"t","\u1d58":"u","\u1d59":"\u1d1d","\u1d5a":"\u026f","\u1d5b":"v","\u1d5c":"\u1d25","\u1d5d":"\u03b2","\u1d5e":"\u03b3","\u1d5f":"\u03b4","\u1d60":"\u03c6","\u1d61":"\u03c7","\u2070":"0","\u2071":"i","\u2074":"4","\u2075":"5","\u2076":"6","\u2077":"7","\u2078":"8","\u2079":"9","\u207a":"+","\u207b":"\u2212","\u207c":"=","\u207d":"(","\u207e":")","\u207f":"n","\u2120":"SM","\u2122":"TM","\u3192":"\u4e00","\u3193":"\u4e8c","\u3194":"\u4e09","\u3195":"\u56db","\u3196":"\u4e0a","\u3197":"\u4e2d","\u3198":"\u4e0b","\u3199":"\u7532","\u319a":"\u4e59","\u319b":"\u4e19","\u319c":"\u4e01","\u319d":"\u5929","\u319e":"\u5730","\u319f":"\u4eba","\u02c0":"\u0294","\u02c1":"\u0295","\u06e5":"\u0648","\u06e6":"\u064a"},SUPERSCRIPTS_REGEXP:new RegExp("[\xaa\xb2\xb3\xb9\xba\u02b0\u02b1\u02b2\u02b3\u02b4\u02b5\u02b6\u02b7\u02b8\u02e0\u02e1\u02e2\u02e3\u02e4\u1d2c\u1d2d\u1d2e\u1d30\u1d31\u1d32\u1d33\u1d34\u1d35\u1d36\u1d37\u1d38\u1d39\u1d3a\u1d3c\u1d3d\u1d3e\u1d3f\u1d40\u1d41\u1d42\u1d43\u1d44\u1d45\u1d46\u1d47\u1d48\u1d49\u1d4a\u1d4b\u1d4c\u1d4d\u1d4f\u1d50\u1d51\u1d52\u1d53\u1d54\u1d55\u1d56\u1d57\u1d58\u1d59\u1d5a\u1d5b\u1d5c\u1d5d\u1d5e\u1d5f\u1d60\u1d61\u2070\u2071\u2074\u2075\u2076\u2077\u2078\u2079\u207a\u207b\u207c\u207d\u207e\u207f\u2120\u2122\u3192\u3193\u3194\u3195\u3196\u3197\u3198\u3199\u319a\u319b\u319c\u319d\u319e\u319f\u02c0\u02c1\u06e5\u06e6]","g"),UPDATE_GROUP_CONTEXT_CONDITION:function(state,termtxt,valueTerm){if(state.tmp.group_context.tip.condition){if(state.tmp.group_context.tip.condition.test){var testres;if("empty-label"===state.tmp.group_context.tip.condition.test)testres=!termtxt;else if("comma-safe"===state.tmp.group_context.tip.condition.test){var empty=!termtxt,alpha=termtxt.slice(0,1).match(CSL.ALL_ROMANESQUE_REGEXP);state.tmp.just_did_number;testres=!!empty||!(!alpha||valueTerm)}state.tmp.group_context.tip.force_suppress=!testres,state.tmp.group_context.tip.condition.not&&(state.tmp.group_context.tip.force_suppress=!state.tmp.group_context.tip.force_suppress)}}else termtxt.slice(-1).match(/[0-9]/)?state.tmp.just_did_number=!0:state.tmp.just_did_number=!1},locale:{},locale_opts:{},locale_dates:{}};if(void 0!==require&&void 0!==module&&"exports"in module){exports.CSL=CSL}CSL.TERMINAL_PUNCTUATION_REGEXP=new RegExp("^(["+CSL.TERMINAL_PUNCTUATION.slice(0,-1).join("")+"])(.*)"),CSL.CLOSURES=new RegExp(".*[\\]\\)]"),module.exports=CSL,"undefined"==typeof console?(CSL.debug=function(str){dump("CSL: "+str+"\n")},CSL.error=function(str){dump("CSL error: "+str+"\n")}):(CSL.debug=function(str){console.log("CSL: "+str)},CSL.error=function(str){console.log("CSL error: "+str)}),module.exports=CSL,CSL.XmlJSON=function(dataObj){this.dataObj=dataObj,this.institution={name:"institution",attrs:{"institution-parts":"long",delimiter:", ","substitute-use-first":"1","use-last":"1"},children:[{name:"institution-part",attrs:{name:"long"},children:[]}]}},CSL.XmlJSON.prototype.clean=function(json){return json},CSL.XmlJSON.prototype.getStyleId=function(myjson,styleName){var tagName="id";styleName&&(tagName="title");for(var ret="",children=myjson.children,i=0,ilen=children.length;i<ilen;i++)if("info"===children[i].name)for(var grandkids=children[i].children,j=0,jlen=grandkids.length;j<jlen;j++)grandkids[j].name===tagName&&(ret=grandkids[j].children[0]);return ret},CSL.XmlJSON.prototype.children=function(myjson){return!(!myjson||!myjson.children.length)&&myjson.children.slice()},CSL.XmlJSON.prototype.nodename=function(myjson){return myjson?myjson.name:null},CSL.XmlJSON.prototype.attributes=function(myjson){var ret={};for(var attrname in myjson.attrs)ret["@"+attrname]=myjson.attrs[attrname];return ret},CSL.XmlJSON.prototype.content=function(myjson){var ret="";if(!myjson||!myjson.children)return ret;for(var i=0,ilen=myjson.children.length;i<ilen;i+=1)"string"==typeof myjson.children[i]&&(ret+=myjson.children[i]);return ret},CSL.XmlJSON.prototype.namespace={},CSL.XmlJSON.prototype.numberofnodes=function(myjson){return myjson&&"number"==typeof myjson.length?myjson.length:0},CSL.XmlJSON.prototype.getAttributeValue=function(myjson,name,namespace){var ret="";return namespace&&(name=namespace+":"+name),myjson&&myjson.attrs&&(ret=myjson.attrs[name]?myjson.attrs[name]:""),ret},CSL.XmlJSON.prototype.getNodeValue=function(myjson,name){var ret="";if(name)for(var i=0,ilen=myjson.children.length;i<ilen;i+=1)myjson.children[i].name===name&&(ret=myjson.children[i].children.length?myjson.children[i]:"");else myjson&&(ret=myjson);return ret&&ret.children&&1==ret.children.length&&"string"==typeof ret.children[0]&&(ret=ret.children[0]),ret},CSL.XmlJSON.prototype.setAttributeOnNodeIdentifiedByNameAttribute=function(myjson,nodename,partname,attrname,val){"@"===attrname.slice(0,1)&&(attrname=attrname.slice(1));for(var i=0,ilen=myjson.children.length;i<ilen;i+=1)myjson.children[i].name===nodename&&myjson.children[i].attrs.name===partname&&(myjson.children[i].attrs[attrname]=val)},CSL.XmlJSON.prototype.deleteNodeByNameAttribute=function(myjson,val){var i,ilen;for(i=0,ilen=myjson.children.length;i<ilen;i+=1)myjson.children[i]&&"string"!=typeof myjson.children[i]&&myjson.children[i].attrs.name==val&&(myjson.children=myjson.children.slice(0,i).concat(myjson.children.slice(i+1)))},CSL.XmlJSON.prototype.deleteAttribute=function(myjson,attrname){"undefined"!=typeof myjson.attrs[attrname]&&myjson.attrs.pop(attrname)},CSL.XmlJSON.prototype.setAttribute=function(myjson,attr,val){return myjson.attrs[attr]=val,!1},CSL.XmlJSON.prototype.nodeCopy=function(myjson,clone){if(!clone)clone={};if("object"===_typeof(clone)&&"undefined"==typeof clone.length)for(var key in myjson)"string"==typeof myjson[key]?clone[key]=myjson[key]:"object"===_typeof(myjson[key])&&("undefined"==typeof myjson[key].length?clone[key]=this.nodeCopy(myjson[key],{}):clone[key]=this.nodeCopy(myjson[key],[]));else for(var i=0,ilen=myjson.length;i<ilen;i+=1)"string"==typeof myjson[i]?clone[i]=myjson[i]:clone[i]=this.nodeCopy(myjson[i],{});return clone},CSL.XmlJSON.prototype.getNodesByName=function(myjson,name,nameattrval,ret){if(!ret)ret=[];if(!myjson||!myjson.children)return ret;name===myjson.name&&(nameattrval?nameattrval===myjson.attrs.name&&ret.push(myjson):ret.push(myjson));for(var i=0,ilen=myjson.children.length;i<ilen;i+=1)"object"===_typeof(myjson.children[i])&&this.getNodesByName(myjson.children[i],name,nameattrval,ret);return ret},CSL.XmlJSON.prototype.nodeNameIs=function(myjson,name){return void 0!==myjson&&name==myjson.name},CSL.XmlJSON.prototype.makeXml=function(myjson){return"string"==typeof myjson&&(myjson="<"===myjson.slice(0,1)?this.jsonStringWalker.walkToObject(myjson):JSON.parse(myjson)),myjson},CSL.XmlJSON.prototype.insertChildNodeAfter=function(parent,node,pos,datejson){for(var i=0,ilen=parent.children.length;i<ilen;i+=1)if(node===parent.children[i]){parent.children=parent.children.slice(0,i).concat([datejson]).concat(parent.children.slice(i+1));break}return parent},CSL.XmlJSON.prototype.insertPublisherAndPlace=function(myjson){if("group"===myjson.name){for(var useme=!0,mustHaves=["publisher","publisher-place"],i=0,ilen=myjson.children.length;i<ilen;i+=1){var haveVarname=mustHaves.indexOf(myjson.children[i].attrs.variable);if(!("text"===myjson.children[i].name&&haveVarname>-1)||myjson.children[i].attrs.prefix||myjson.children[i].attrs.suffix){useme=!1;break}mustHaves=mustHaves.slice(0,haveVarname).concat(mustHaves.slice(haveVarname+1))}useme&&!mustHaves.length&&(myjson.attrs["has-publisher-and-publisher-place"]=!0)}for(i=0,ilen=myjson.children.length;i<ilen;i+=1)"object"===_typeof(myjson.children[i])&&this.insertPublisherAndPlace(myjson.children[i])},CSL.XmlJSON.prototype.isChildOfSubstitute=function(parents){if(parents.length>0){var myparents=parents.slice();return"substitute"===myparents.pop()||this.isChildOfSubstitute(myparents)}return!1},CSL.XmlJSON.prototype.addMissingNameNodes=function(myjson,parents){if(parents||(parents=[]),"names"===myjson.name&&!this.isChildOfSubstitute(parents)){for(var addName=!0,i=0,ilen=myjson.children.length;i<ilen;i++)if("name"===myjson.children[i].name){addName=!1;break}addName&&(myjson.children=[{name:"name",attrs:{},children:[]}].concat(myjson.children))}parents.push(myjson.name);for(i=0,ilen=myjson.children.length;i<ilen;i+=1)"object"===_typeof(myjson.children[i])&&this.addMissingNameNodes(myjson.children[i],parents);parents.pop()},CSL.XmlJSON.prototype.addInstitutionNodes=function(myjson){if("names"===myjson.name){for(var attributes={},insertPos=-1,i=0,ilen=myjson.children.length;i<ilen;i+=1){if("name"==myjson.children[i].name){for(var key in myjson.children[i].attrs)attributes[key]=myjson.children[i].attrs[key];attributes.delimiter=myjson.children[i].attrs.delimiter,attributes.and=myjson.children[i].attrs.and,insertPos=i;for(var k=0,klen=myjson.children[i].children.length;k<klen;k+=1)if("family"===myjson.children[i].children[k].attrs.name)for(var key in myjson.children[i].children[k].attrs)attributes[key]=myjson.children[i].children[k].attrs[key]}if("institution"==myjson.children[i].name){insertPos=-1;break}}if(insertPos>-1){var institution=this.nodeCopy(this.institution);for(i=0,ilen=CSL.INSTITUTION_KEYS.length;i<ilen;i+=1){var attrname=CSL.INSTITUTION_KEYS[i];"undefined"!=typeof attributes[attrname]&&(institution.children[0].attrs[attrname]=attributes[attrname]),attributes.delimiter&&(institution.attrs.delimiter=attributes.delimiter),attributes.and&&(institution.attrs.and="text")}myjson.children=myjson.children.slice(0,insertPos+1).concat([institution]).concat(myjson.children.slice(insertPos+1))}}for(i=0,ilen=myjson.children.length;i<ilen;i+=1)"string"!=typeof myjson.children[i]&&this.addInstitutionNodes(myjson.children[i])},CSL.XmlJSON.prototype.flagDateMacros=function(myjson){for(var i=0,ilen=myjson.children.length;i<ilen;i+=1)"macro"===myjson.children[i].name&&this.inspectDateMacros(myjson.children[i])&&(myjson.children[i].attrs["macro-has-date"]="true")},CSL.XmlJSON.prototype.inspectDateMacros=function(myjson){if(!myjson||!myjson.children)return!1;if("date"===myjson.name)return!0;for(var i=0,ilen=myjson.children.length;i<ilen;i+=1)if(this.inspectDateMacros(myjson.children[i]))return!0;return!1},CSL.stripXmlProcessingInstruction=function(xml){return xml?xml=(xml=(xml=(xml=xml.replace(/^<\?[^?]+\?>/,"")).replace(/<!--[^>]+-->/g,"")).replace(/^\s+/g,"")).replace(/\s+$/g,""):xml},CSL.parseXml=function(str){var _obj={children:[]},_stack=[_obj.children];function _decodeHtmlEntities(str){return str.split("&amp;").join("&").split("&quot;").join('"').split("&gt;").join(">").split("&lt;").join("<").replace(/&#([0-9]{1,6});/gi,function(match,numStr){var num=parseInt(numStr,10);return String.fromCharCode(num)}).replace(/&#x([a-f0-9]{1,6});/gi,function(match,numStr){var num=parseInt(numStr,16);return String.fromCharCode(num)})}function _getAttribute(elem,attr){var rex=RegExp("^.*[\t ]+"+attr+"=(\"(?:[^\"]*)\"|'(?:[^']*)').*$"),m=elem.match(rex);return m?m[1].slice(1,-1):null}function _getTagName(elem){var rex=RegExp("^<([^\t />]+)"),m=elem.match(rex);return m?m[1]:null}function _castObjectFromOpeningTag(elem){var obj={};obj.name=_getTagName(elem),obj.attrs={};var attributes=function(elem){var m=elem.match(/([^\'\"=\x09 ]+)=(?:\"[^\"]*\"|\'[^\']*\')/g);if(m)for(var i=0,ilen=m.length;i<ilen;i++)m[i]=m[i].replace(/=.*/,"");return m}(elem);if(attributes)for(var i=0,ilen=attributes.length;i<ilen;i++){var attr={name:attributes[i],value:_getAttribute(elem,attributes[i])};obj.attrs[attr.name]=_decodeHtmlEntities(attr.value)}return obj.children=[],obj}function _appendToChildren(obj){_stack.slice(-1)[0].push(obj)}function processElement(elem){var obj;elem.slice(1).indexOf("<")>-1?((obj=_castObjectFromOpeningTag(elem.slice(0,elem.indexOf(">")+1))).children=[function(elem){return _decodeHtmlEntities(elem.match(/^.*>([^<]*)<.*$/)[1])}(elem)],_appendToChildren(obj)):"/>"===elem.slice(-2)?(obj=_castObjectFromOpeningTag(elem),"term"===_getTagName(elem)&&obj.children.push(""),_appendToChildren(obj)):"</"===elem.slice(0,2)?_stack.pop():(_appendToChildren(obj=_castObjectFromOpeningTag(elem)),function(obj){_stack.push(obj.children)}(obj))}for(var lst=function(str){for(var lst=(str=str.split(/(?:\r\n|\n|\r)/).join(" ").replace(/>[\x09 ]+</g,"><").replace(/<\!--.*?-->/g,"")).split("><"),stylePos=null,i=0,ilen=lst.length;i<ilen;i++)i>0&&(lst[i]="<"+lst[i]),i<lst.length-1&&(lst[i]=lst[i]+">"),"number"!=typeof stylePos&&("<style "!==lst[i].slice(0,7)&&"<locale "!=lst[i].slice(0,8)||(stylePos=i));for(i=(lst=lst.slice(stylePos)).length-2;i>-1;i--)if(-1===lst[i].slice(1).indexOf("<")){var stub=lst[i].slice(0,5);"/>"!==lst[i].slice(-2)&&("<term"===stub?"</term"===lst[i+1].slice(0,6)&&(lst[i]=lst[i]+lst[i+1],lst=lst.slice(0,i+1).concat(lst.slice(i+2))):["<sing","<mult"].indexOf(stub)>-1&&"/>"!==lst[i].slice(-2)&&"<"===lst[i+1].slice(0,1)&&(lst[i]=lst[i]+lst[i+1],lst=lst.slice(0,i+1).concat(lst.slice(i+2))))}return lst}(str),i=0,ilen=lst.length;i<ilen;i++){processElement(lst[i])}return _obj.children[0]},module.exports=CSL,CSL.XmlDOM=function(dataObj){this.dataObj=dataObj,"undefined"==typeof DOMParser?(DOMParser=function(){},DOMParser.prototype.parseFromString=function(str,contentType){if("undefined"!=typeof ActiveXObject)return(xmldata=new ActiveXObject("MSXML.DomDocument")).async=!1,xmldata.loadXML(str),xmldata;if("undefined"!=typeof XMLHttpRequest){var xmldata=new XMLHttpRequest;return contentType||(contentType="text/xml"),xmldata.open("GET","data:"+contentType+";charset=utf-8,"+encodeURIComponent(str),!1),xmldata.overrideMimeType&&xmldata.overrideMimeType(contentType),xmldata.send(null),xmldata.responseXML}return"undefined"!=typeof marknote?(new marknote.Parser).parse(str):void 0},this.hasAttributes=function(node){return!(!node.attributes||!node.attributes.length)}):this.hasAttributes=function(node){return!(!node.attributes||!node.attributes.length)},this.importNode=function(doc,srcElement){if("undefined"==typeof doc.importNode)var ret=this._importNode(doc,srcElement,!0);else ret=doc.importNode(srcElement,!0);return ret},this._importNode=function(doc,node,allChildren){switch(node.nodeType){case 1:var newNode=doc.createElement(node.nodeName);if(node.attributes&&node.attributes.length>0)for(var i=0,il=node.attributes.length;i<il;)newNode.setAttribute(node.attributes[i].nodeName,node.getAttribute(node.attributes[i++].nodeName));if(allChildren&&node.childNodes&&node.childNodes.length>0)for(i=0,il=node.childNodes.length;i<il;)newNode.appendChild(this._importNode(doc,node.childNodes[i++],allChildren));return newNode}},this.parser=new DOMParser;var inst_doc=this.parser.parseFromString('<docco><institution institution-parts="long" delimiter=", " substitute-use-first="1" use-last="1"><institution-part name="long"/></institution></docco>',"text/xml"),inst_node=inst_doc.getElementsByTagName("institution");this.institution=inst_node.item(0);var inst_part_node=inst_doc.getElementsByTagName("institution-part");this.institutionpart=inst_part_node.item(0),this.ns="http://purl.org/net/xbiblio/csl"},CSL.XmlDOM.prototype.clean=function(xml){return xml=(xml=(xml=(xml=(xml=xml.replace(/<\?[^?]+\?>/g,"")).replace(/<![^>]+>/g,"")).replace(/^\s+/,"")).replace(/\s+$/,"")).replace(/^\n*/,"")},CSL.XmlDOM.prototype.getStyleId=function(myxml,styleName){var text="",tagName="id";styleName&&(tagName="title");var node=myxml.getElementsByTagName(tagName);return node&&node.length&&(node=node.item(0)),node&&(text=node.textContent),text||(text=node.innerText),text||(text=node.innerHTML),text},CSL.XmlDOM.prototype.children=function(myxml){var children,pos,len,ret;if(myxml){for(ret=[],pos=0,len=(children=myxml.childNodes).length;pos<len;pos+=1)"#text"!=children[pos].nodeName&&ret.push(children[pos]);return ret}return[]},CSL.XmlDOM.prototype.nodename=function(myxml){return myxml.nodeName},CSL.XmlDOM.prototype.attributes=function(myxml){var ret,attrs,attr,pos,len;if(ret=new Object,myxml&&this.hasAttributes(myxml))for(pos=0,len=(attrs=myxml.attributes).length;pos<len;pos+=1)ret["@"+(attr=attrs[pos]).name]=attr.value;return ret},CSL.XmlDOM.prototype.content=function(myxml){return"undefined"!=typeof myxml.textContent?myxml.textContent:"undefined"!=typeof myxml.innerText?myxml.innerText:myxml.txt},CSL.XmlDOM.prototype.namespace={xml:"http://www.w3.org/XML/1998/namespace"},CSL.XmlDOM.prototype.numberofnodes=function(myxml){return myxml?myxml.length:0},CSL.XmlDOM.prototype.getAttributeName=function(attr){return attr.name},CSL.XmlDOM.prototype.getAttributeValue=function(myxml,name,namespace){var ret="";return namespace&&(name=namespace+":"+name),myxml&&this.hasAttributes(myxml)&&myxml.getAttribute(name)&&(ret=myxml.getAttribute(name)),ret},CSL.XmlDOM.prototype.getNodeValue=function(myxml,name){var ret=null;if(name){var vals=myxml.getElementsByTagName(name);vals.length>0&&(ret="undefined"!=typeof vals[0].textContent?vals[0].textContent:"undefined"!=typeof vals[0].innerText?vals[0].innerText:vals[0].text)}return null===ret&&myxml&&myxml.childNodes&&(0==myxml.childNodes.length||1==myxml.childNodes.length&&"#text"==myxml.firstChild.nodeName)&&(ret="undefined"!=typeof myxml.textContent?myxml.textContent:"undefined"!=typeof myxml.innerText?myxml.innerText:myxml.text),null===ret&&(ret=myxml),ret},CSL.XmlDOM.prototype.setAttributeOnNodeIdentifiedByNameAttribute=function(myxml,nodename,partname,attrname,val){var pos,len,nodes,node;for("@"===attrname.slice(0,1)&&(attrname=attrname.slice(1)),pos=0,len=(nodes=myxml.getElementsByTagName(nodename)).length;pos<len;pos+=1)(node=nodes[pos]).getAttribute("name")==partname&&node.setAttribute(attrname,val)},CSL.XmlDOM.prototype.deleteNodeByNameAttribute=function(myxml,val){var pos,len,node,nodes;for(pos=0,len=(nodes=myxml.childNodes).length;pos<len;pos+=1)(node=nodes[pos])&&node.nodeType!=node.TEXT_NODE&&this.hasAttributes(node)&&node.getAttribute("name")==val&&myxml.removeChild(nodes[pos])},CSL.XmlDOM.prototype.deleteAttribute=function(myxml,attr){myxml.removeAttribute(attr)},CSL.XmlDOM.prototype.setAttribute=function(myxml,attr,val){return myxml.ownerDocument||(myxml=myxml.firstChild),["function","unknown"].indexOf(_typeof(myxml.setAttribute))>-1&&myxml.setAttribute(attr,val),!1},CSL.XmlDOM.prototype.nodeCopy=function(myxml){return myxml.cloneNode(!0)},CSL.XmlDOM.prototype.getNodesByName=function(myxml,name,nameattrval){var ret,nodes,node,pos,len;for(ret=[],pos=0,len=(nodes=myxml.getElementsByTagName(name)).length;pos<len;pos+=1)node=nodes.item(pos),(!nameattrval||this.hasAttributes(node)&&node.getAttribute("name")==nameattrval)&&ret.push(node);return ret},CSL.XmlDOM.prototype.nodeNameIs=function(myxml,name){return name==myxml.nodeName},CSL.XmlDOM.prototype.makeXml=function(myxml){return myxml||(myxml="<docco><bogus/></docco>"),myxml=myxml.replace(/\s*<\?[^>]*\?>\s*\n*/g,""),this.parser.parseFromString(myxml,"application/xml").firstChild},CSL.XmlDOM.prototype.insertChildNodeAfter=function(parent,node,pos,datexml){var myxml;return myxml=this.importNode(node.ownerDocument,datexml),parent.replaceChild(myxml,node),parent},CSL.XmlDOM.prototype.insertPublisherAndPlace=function(myxml){for(var group=myxml.getElementsByTagName("group"),i=0,ilen=group.length;i<ilen;i+=1){for(var node=group.item(i),skippers=[],j=0,jlen=node.childNodes.length;j<jlen;j+=1)1!==node.childNodes.item(j).nodeType&&skippers.push(j);if(node.childNodes.length-skippers.length==2){var twovars=[];for(j=0,jlen=2;j<jlen;j+=1)if(!(skippers.indexOf(j)>-1)){for(var child=node.childNodes.item(j),subskippers=[],k=0,klen=child.childNodes.length;k<klen;k+=1)1!==child.childNodes.item(k).nodeType&&subskippers.push(k);if(child.childNodes.length-subskippers.length==0&&(twovars.push(child.getAttribute("variable")),child.getAttribute("suffix")||child.getAttribute("prefix"))){twovars=[];break}}twovars.indexOf("publisher")>-1&&twovars.indexOf("publisher-place")>-1&&node.setAttribute("has-publisher-and-publisher-place",!0)}}},CSL.XmlDOM.prototype.isChildOfSubstitute=function(node){return!!node.parentNode&&("substitute"===node.parentNode.tagName.toLowerCase()||this.isChildOfSubstitute(node.parentNode))},CSL.XmlDOM.prototype.addMissingNameNodes=function(myxml){for(var nameslist=myxml.getElementsByTagName("names"),i=0,ilen=nameslist.length;i<ilen;i+=1){var names=nameslist.item(i),namelist=names.getElementsByTagName("name");if(!(namelist&&0!==namelist.length||this.isChildOfSubstitute(names))){var name=names.ownerDocument.createElement("name");names.appendChild(name)}}},CSL.XmlDOM.prototype.addInstitutionNodes=function(myxml){var names,thenames,theinstitution,name,thename,pos,len;for(pos=0,len=(names=myxml.getElementsByTagName("names")).length;pos<len;pos+=1)if(0!=(name=(thenames=names.item(pos)).getElementsByTagName("name")).length&&0==thenames.getElementsByTagName("institution").length){theinstitution=this.importNode(myxml.ownerDocument,this.institution),theinstitutionpart=theinstitution.getElementsByTagName("institution-part").item(0),thename=name.item(0),thenames.insertBefore(theinstitution,thename.nextSibling);for(var j=0,jlen=CSL.INSTITUTION_KEYS.length;j<jlen;j+=1){var attrname=CSL.INSTITUTION_KEYS[j];(attrval=thename.getAttribute(attrname))&&theinstitutionpart.setAttribute(attrname,attrval)}var nameparts=thename.getElementsByTagName("name-part");for(j=0,jlen=nameparts.length;j<jlen;j+=1)if("family"===nameparts[j].getAttribute("name"))for(var k=0,klen=CSL.INSTITUTION_KEYS.length;k<klen;k+=1){var attrval;attrname=CSL.INSTITUTION_KEYS[k];(attrval=nameparts[j].getAttribute(attrname))&&theinstitutionpart.setAttribute(attrname,attrval)}}},CSL.XmlDOM.prototype.flagDateMacros=function(myxml){var pos,len,thenode;for(nodes=myxml.getElementsByTagName("macro"),pos=0,len=nodes.length;pos<len;pos+=1)(thenode=nodes.item(pos)).getElementsByTagName("date").length&&thenode.setAttribute("macro-has-date","true")},module.exports=CSL,module.exports=CSL,CSL.setupXml=function(xmlObject){var dataObj={},parser=null;if(void 0!==xmlObject?"string"==typeof xmlObject?(dataObj="<"===(xmlObject=xmlObject.replace("^\ufeff","").replace(/^\s+/,"")).slice(0,1)?CSL.parseXml(xmlObject):JSON.parse(xmlObject),parser=new CSL.XmlJSON(dataObj)):parser="undefined"!=typeof xmlObject.getAttribute?new CSL.XmlDOM(xmlObject):"undefined"!=typeof xmlObject.toXMLString?new CSL.XmlE4X(xmlObject):new CSL.XmlJSON(xmlObject):CSL.error("unable to parse XML input"),!parser)throw"citeproc-js error: unable to parse CSL style or locale object";return parser},module.exports=CSL,CSL.getSortCompare=function(default_locale){if(CSL.stringCompare)return CSL.stringCompare;var strcmp,strcmp_opts={sensitivity:"base",ignorePunctuation:!0,numeric:!0};default_locale||(default_locale="en-US");var stripPunct=function(str){return str.replace(/^[\[\]\'\"]*/g,"")},bracketPreSort=!!(strcmp=function(a,b){return a.toLocaleLowerCase().localeCompare(b.toLocaleLowerCase(),default_locale,strcmp_opts)})("[x","x")&&function(a,b){return strcmp(stripPunct(a),stripPunct(b))};return function(a,b){return bracketPreSort?bracketPreSort(a,b):strcmp(a,b)}},module.exports=CSL,CSL.ambigConfigDiff=function(a,b){var pos,len,ppos,llen;if(a.names.length!==b.names.length)return 1;for(pos=0,len=a.names.length;pos<len;pos+=1){if(a.names[pos]!==b.names[pos])return 1;for(ppos=0,llen=a.givens[pos];ppos<llen;ppos+=1)if(a.givens[pos][ppos]!==b.givens[pos][ppos])return 1}return a.disambiguate!=b.disambiguate?1:a.year_suffix!==b.year_suffix?1:0},CSL.cloneAmbigConfig=function(config,oldconfig,tainters){var i,ilen,j,jlen,param,ret={names:[],givens:[],year_suffix:!1,disambiguate:!1};for(i=0,ilen=config.names.length;i<ilen;i+=1)param=config.names[i],ret.names[i]=param;for(i=0,ilen=config.givens.length;i<ilen;i+=1){for(param=[],j=0,jlen=config.givens[i].length;j<jlen;j+=1)param.push(config.givens[i][j]);ret.givens.push(param)}return oldconfig?(ret.year_suffix=oldconfig.year_suffix,ret.disambiguate=oldconfig.disambiguate):(ret.year_suffix=config.year_suffix,ret.disambiguate=config.disambiguate),ret},CSL.getAmbigConfig=function(){var config;return(config=this.tmp.disambig_request)||(config=this.tmp.disambig_settings),CSL.cloneAmbigConfig(config)},CSL.getMaxVals=function(){return this.tmp.names_max.mystack.slice()},CSL.getMinVal=function(){return this.tmp["et-al-min"]},module.exports=CSL,CSL.tokenExec=function(token,Item,item){var next,maybenext;next=token.next,maybenext=!1;token.test&&(next=function(result){return result?(this.tmp.jump.replace("succeed"),token.succeed):(this.tmp.jump.replace("fail"),token.fail)}.call(this,token.test(Item,item)));for(var i=0,ilen=token.execs.length;i<ilen;i++)(maybenext=token.execs[i].call(token,this,Item,item))&&(next=maybenext);return next},CSL.expandMacro=function(macro_key_token,target){var mkey,macro_nodes,end_of_macro;mkey=macro_key_token.postponed_macro,macro_key_token=new CSL.Token("group",CSL.START);var hasDate=!1,macroid=!1;if((macro_nodes=this.cslXml.getNodesByName(this.cslXml.dataObj,"macro",mkey)).length&&(macroid=this.cslXml.getAttributeValue(macro_nodes[0],"cslid"),hasDate=this.cslXml.getAttributeValue(macro_nodes[0],"macro-has-date")),hasDate&&(mkey=mkey+"@"+this.build.current_default_locale,func=function(state,Item){state.tmp.extension&&(state.tmp["doing-macro-with-date"]=!0)},macro_key_token.execs.push(func)),this.build.macro_stack.indexOf(mkey)>-1)throw'CSL processor error: call to macro "'+mkey+'" would cause an infinite loop';if(this.build.macro_stack.push(mkey),macro_key_token.cslid=macroid,CSL.MODULE_MACROS[mkey]&&(macro_key_token.juris=mkey,this.opt.update_mode=CSL.POSITION),CSL.Node.group.build.call(macro_key_token,this,target,!0),!this.cslXml.getNodeValue(macro_nodes))throw'CSL style error: undefined macro "'+mkey+'"';var macro_name,mytarget=CSL.getMacroTarget.call(this,mkey);if(mytarget&&(CSL.buildMacro.call(this,mytarget,macro_nodes),CSL.configureMacro.call(this,mytarget)),!this.build.extension){var func=(macro_name=mkey,function(state,Item,item){for(var next=0;next<state.macros[macro_name].length;)next=CSL.tokenExec.call(state,state.macros[macro_name][next],Item,item)}),text_node=new CSL.Token("text",CSL.SINGLETON);text_node.execs.push(func),target.push(text_node)}end_of_macro=new CSL.Token("group",CSL.END),hasDate&&(func=function(state,Item){state.tmp.extension&&(state.tmp["doing-macro-with-date"]=!1)},end_of_macro.execs.push(func)),macro_key_token.juris&&(end_of_macro.juris=mkey),CSL.Node.group.build.call(end_of_macro,this,target,!0),this.build.macro_stack.pop()},CSL.getMacroTarget=function(mkey){var mytarget=!1;return this.build.extension?mytarget=this[this.build.root+this.build.extension].tokens:this.macros[mkey]||(mytarget=[],this.macros[mkey]=mytarget),mytarget},CSL.buildMacro=function(mytarget,macro_nodes){CSL.makeBuilder(this,mytarget)("undefined"==typeof macro_nodes.length?macro_nodes:macro_nodes[0])},CSL.configureMacro=function(mytarget){this.build.extension||this.configureTokenList(mytarget)},CSL.XmlToToken=function(state,tokentype,explicitTarget){var name,txt,attributes,decorations,token,target;if(name=state.cslXml.nodename(this),!state.build.skip||state.build.skip===name)if(name){if(!CSL.Node[state.cslXml.nodename(this)])throw'Undefined node name "'+name+'".';if([],attributes=state.cslXml.attributes(this),decorations=CSL.setDecorations.call(this,state,attributes),token=new CSL.Token(name,tokentype),tokentype!==CSL.END||"if"===name||"else-if"===name||"layout"===name){for(var key in attributes)if(attributes.hasOwnProperty(key)){if(tokentype===CSL.END&&"@language"!==key&&"@locale"!==key)continue;if(attributes.hasOwnProperty(key))if(CSL.Attributes[key])try{CSL.Attributes[key].call(token,state,""+attributes[key])}catch(e){throw CSL.error(e),"CSL processor error, "+key+" attribute: "+e}else CSL.debug('warning: undefined attribute "'+key+'" in style')}token.decorations=decorations}else tokentype===CSL.END&&attributes["@variable"]&&(token.hasVariable=!0,CSL.DATE_VARIABLES.indexOf(attributes["@variable"])>-1&&(token.variables=attributes["@variable"].split(/\s+/)));target=explicitTarget||state[state.build.area].tokens,CSL.Node[name].build.call(token,state,target,!0)}else(txt=state.cslXml.content(this))&&(state.build.text=txt)},module.exports=CSL,CSL.DateParser=new function(){for(var epochPairs=[["\u660e\u6cbb",1867],["\u5927\u6b63",1911],["\u662d\u548c",1925],["\u5e73\u6210",1988]],epochYearByName={},i=0,ilen=epochPairs.length;i<ilen;i++){var key=epochPairs[i][0],val=epochPairs[i][1];epochYearByName[key]=val}var epochMatchStrings=[];for(i=0,ilen=epochPairs.length;i<ilen;i++){val=epochPairs[i][0];epochMatchStrings.push(val)}var epochMatchString=epochMatchStrings.join("|"),epochSplitter=new RegExp("(?:"+epochMatchString+")(?:[0-9]+)"),epochMatcher=new RegExp("(?:"+epochMatchString+")(?:[0-9]+)","g"),kanjiMonthDay=/(\u6708|\u5E74)/g,kanjiYear=/\u65E5/g,kanjiRange=/\u301c/g,rexString="([?0-9]{4}(?:%%NUMD%%[?0-9]{1,2}){0,2}(?![0-9])|(?:[?0-9]{1,2}%%NUMD%%){0,2}[?0-9]{4}(?![0-9])|[?0-9]{1,3}|[%%DATED%%]|[?~]|[^-/~?0-9]+)",rexDash=new RegExp(rexString.replace(/%%NUMD%%/g,"-").replace(/%%DATED%%/g,"-")),rexDashSlash=new RegExp(rexString.replace(/%%NUMD%%/g,"-").replace(/%%DATED%%/g,"/")),rexSlashDash=new RegExp(rexString.replace(/%%NUMD%%/g,"/").replace(/%%DATED%%/g,"-"));this.monthStrings="january february march april may june july august september october november december spring summer fall winter spring summer".split(" "),this.setOrderDayMonth=function(){this.monthGuess=1,this.dayGuess=0},this.setOrderMonthDay=function(){this.monthGuess=0,this.dayGuess=1},this.resetDateParserMonths=function(){this.monthSets=[];for(var i=0,ilen=this.monthStrings.length;i<ilen;i++)this.monthSets.push([this.monthStrings[i]]);this.monthAbbrevs=[];for(i=0,ilen=this.monthSets.length;i<ilen;i++){this.monthAbbrevs.push([]);for(var j=0,jlen=this.monthSets[i].length;j<jlen;j++)this.monthAbbrevs[i].push(this.monthSets[i][0].slice(0,3))}this.monthRexes=[];for(i=0,ilen=this.monthAbbrevs.length;i<ilen;i++)this.monthRexes.push(new RegExp("(?:"+this.monthAbbrevs[i].join("|")+")"))},this.addDateParserMonths=function(lst){if("string"==typeof lst&&(lst=lst.split(/\s+/)),12===lst.length||16===lst.length){for(var i=0,ilen=lst.length;i<ilen;i++){for(var abbrevLength=null,skip=!1,insert=3,extendedSets={},j=0,jlen=this.monthAbbrevs.length;j<jlen;j++){if(extendedSets[j]={},j===i){for(var k=0,klen=this.monthAbbrevs[i].length;k<klen;k++)if(this.monthAbbrevs[i][k]===lst[i].slice(0,this.monthAbbrevs[i][k].length)){skip=!0;break}}else for(k=0,klen=this.monthAbbrevs[j].length;k<klen;k++)if(abbrevLength=this.monthAbbrevs[j][k].length,this.monthAbbrevs[j][k]===lst[i].slice(0,abbrevLength)){for(;this.monthSets[j][k].slice(0,abbrevLength)===lst[i].slice(0,abbrevLength);){if(abbrevLength>lst[i].length||abbrevLength>this.monthSets[j][k].length){CSL.debug("unable to disambiguate month string in date parser: "+lst[i]);break}abbrevLength+=1}insert=abbrevLength,extendedSets[j][k]=abbrevLength}for(var jKey in extendedSets)for(kKey in extendedSets[jKey])abbrevLength=extendedSets[jKey][kKey],jKey=parseInt(jKey,10),kKey=parseInt(kKey,10),this.monthAbbrevs[jKey][kKey]=this.monthSets[jKey][kKey].slice(0,abbrevLength)}skip||(this.monthSets[i].push(lst[i]),this.monthAbbrevs[i].push(lst[i].slice(0,insert)))}this.monthRexes=[],this.monthRexStrs=[];for(i=0,ilen=this.monthAbbrevs.length;i<ilen;i++)this.monthRexes.push(new RegExp("^(?:"+this.monthAbbrevs[i].join("|")+")")),this.monthRexStrs.push("^(?:"+this.monthAbbrevs[i].join("|")+")");if(18===this.monthAbbrevs.length)for(i=12,ilen=14;i<ilen;i++)this.monthRexes[i+4]=new RegExp("^(?:"+this.monthAbbrevs[i].join("|")+")"),this.monthRexStrs[i+4]="^(?:"+this.monthAbbrevs[i].join("|")+")"}else CSL.debug("month [+season] list of "+lst.length+", expected 12 or 16. Ignoring.")},this.convertDateObjectToArray=function(thedate){thedate["date-parts"]=[],thedate["date-parts"].push([]);for(var slicelen=0,i=0,ilen=3;i<ilen;i++){var part=["year","month","day"][i];if(!thedate[part])break;slicelen+=1,thedate["date-parts"][0].push(thedate[part]),delete thedate[part]}thedate["date-parts"].push([]);for(i=0,ilen=slicelen;i<ilen&&thedate[part=["year_end","month_end","day_end"][i]];i++)thedate["date-parts"][1].push(thedate[part]),delete thedate[part];return thedate["date-parts"][0].length!==thedate["date-parts"][1].length&&thedate["date-parts"].pop(),thedate},this.convertDateObjectToString=function(thedate){for(var ret=[],i=0;i<3&&thedate[DATE_PARTS_ALL[i]];i+=1)ret.push(thedate[DATE_PARTS_ALL[i]]);return ret.join("-")},this._parseNumericDate=function(ret,delim,suff,txt){suff||(suff="");for(var lst=txt.split(delim),i=0,ilen=lst.length;i<ilen;i++)if(4===lst[i].length){ret["year"+suff]=lst[i].replace(/^0*/,""),lst=i?lst.slice(0,i):lst.slice(1);break}for(i=0,ilen=lst.length;i<ilen;i++)lst[i]=parseInt(lst[i],10);1===lst.length||2===lst.length&&!lst[1]?ret["month"+suff]=""+lst[0]:2===lst.length&&(lst[this.monthGuess]>12?(ret["month"+suff]=""+lst[this.dayGuess],ret["day"+suff]=""+lst[this.monthGuess]):(ret["month"+suff]=""+lst[this.monthGuess],ret["day"+suff]=""+lst[this.dayGuess]))},this.parseDateToObject=function(txt){var lst,orig=txt,slashPos=-1,dashPos=-1,yearIsNegative=!1;if(txt){if("-"===txt.slice(0,1)&&(yearIsNegative=!0,txt=txt.slice(1)),txt.match(/^[0-9]{1,3}$/))for(;txt.length<4;)txt="0"+txt;if(m=(txt=(txt=""+txt).replace(/\s*[0-9]{2}:[0-9]{2}(?::[0-9]+)/,"")).match(kanjiMonthDay)){var slst=(txt=(txt=(txt=(txt=(txt=(txt=txt.replace(/\s+/g,"")).replace(kanjiYear,"")).replace(kanjiMonthDay,"-")).replace(kanjiRange,"/")).replace(/\-\//g,"/")).replace(/-$/g,"")).split(epochSplitter);lst=[];var mm=txt.match(epochMatcher);if(mm){for(var mmx=[],i=0,ilen=mm.length;i<ilen;i++)mmx=mmx.concat(mm[i].match(/([^0-9]+)([0-9]+)/).slice(1));for(i=0,ilen=slst.length;i<ilen;i++)if(lst.push(slst[i]),i!==len-1){var mmpos=2*pos;lst.push(mmx[mmpos]),lst.push(mmx[mmpos+1])}}else lst=slst;for(i=1,ilen=lst.length;i<ilen;i+=3)lst[i+1]=jiy[lst[i]]+parseInt(lst[i+1],10),lst[i]="";slashPos=(txt=(txt=(txt=(txt=lst.join("")).replace(/\s*-\s*$/,"").replace(/\s*-\s*\//,"/")).replace(/\.\s*$/,"")).replace(/\.(?! )/,"")).indexOf("/"),dashPos=txt.indexOf("-")}}var rangeDelim,dateDelim,number="",note="",thedate={};if('"'===(txt=txt.replace(/([A-Za-z])\./g,"$1")).slice(0,1)&&'"'===txt.slice(-1))return thedate.literal=txt.slice(1,-1),thedate;slashPos>-1&&dashPos>-1?txt.split("/").length>3?(rangeDelim="-",dateDelim="/",lst=(txt=txt.replace(/\_/g,"-")).split(rexSlashDash)):(rangeDelim="/",dateDelim="-",lst=(txt=txt.replace(/\_/g,"/")).split(rexDashSlash)):(rangeDelim="-",dateDelim="-",lst=(txt=(txt=txt.replace(/\//g,"-")).replace(/\_/g,"-")).split(rexDash));var ret=[];for(i=0,ilen=lst.length;i<ilen;i++){var m;(m=lst[i].match(/^\s*([\-\/]|[^\-\/\~\?0-9]+|[\-~?0-9]+)\s*$/))&&ret.push(m[1])}var delimPos=ret.indexOf(rangeDelim),delims=[],isRange=!1;delimPos>-1?(delims.push([0,delimPos]),delims.push([delimPos+1,ret.length]),isRange=!0):delims.push([0,ret.length]);var suff="";for(i=0,ilen=delims.length;i<ilen;i++){var delim=delims[i],date=ret.slice(delim[0],delim[1]);outer:for(var j=0,jlen=date.length;j<jlen;j++){var element=date[j];if(element.indexOf(dateDelim)>-1)this._parseNumericDate(thedate,dateDelim,suff,element);else if(element.match(/[0-9]{4}/))thedate["year"+suff]=element.replace(/^0*/,"");else{for(var k=0,klen=this.monthRexes.length;k<klen;k++)if(element.toLocaleLowerCase().match(this.monthRexes[k])){thedate["month"+suff]=""+(parseInt(k,10)+1);continue outer}element.match(/^[0-9]+$/)&&(number=element),element.toLocaleLowerCase().match(/^bc/)&&number?(thedate["year"+suff]=""+-1*number,number=""):element.toLocaleLowerCase().match(/^ad/)&&number?(thedate["year"+suff]=""+number,number=""):"~"===element||"?"===element||"c"===element||element.match(/^cir/)?thedate.circa="1":!element.toLocaleLowerCase().match(/(?:mic|tri|hil|eas)/)||thedate["season"+suff]||(note=element)}}number&&(thedate["day"+suff]=number,number=""),note&&!thedate["season"+suff]&&(thedate["season"+suff]=note,note=""),suff="_end"}if(isRange)for(j=0,jlen=CSL.DATE_PARTS_ALL.length;j<jlen;j++){var item=CSL.DATE_PARTS_ALL[j];thedate[item]&&!thedate[item+"_end"]?thedate[item+"_end"]=thedate[item]:!thedate[item]&&thedate[item+"_end"]&&(thedate[item]=thedate[item+"_end"])}(!thedate.year||thedate.year&&thedate.day&&!thedate.month)&&(thedate={literal:orig});var parts=["year","month","day","year_end","month_end","day_end"];for(i=0,ilen=parts.length;i<ilen;i++){var part=parts[i];"string"==typeof thedate[part]&&thedate[part].match(/^[0-9]+$/)&&(thedate[part]=parseInt(thedate[part],10))}return yearIsNegative&&Object.keys(thedate).indexOf("year")>-1&&(thedate.year=-1*thedate.year),thedate},this.parseDateToArray=function(txt){return this.convertDateObjectToArray(this.parseDateToObject(txt))},this.parseDateToString=function(txt){return this.convertDateObjectToString(this.parseDateToObject(txt))},this.parse=function(txt){return this.parseDateToObject(txt)},this.setOrderMonthDay(),this.resetDateParserMonths()},module.exports=CSL,CSL.Engine=function(sys,style,lang,forceLang){var langspec,lst;this.processor_version=CSL.PROCESSOR_VERSION,this.csl_version="1.0",this.sys=sys,sys.variableWrapper&&(CSL.VARIABLE_WRAPPER_PREPUNCT_REX=new RegExp("^(["+[" "].concat(CSL.SWAPPING_PUNCTUATION).join("")+"]*)(.*)")),CSL.retrieveStyleModule&&(this.sys.retrieveStyleModule=CSL.retrieveStyleModule),CSL.getAbbreviation&&(this.sys.getAbbreviation=CSL.getAbbreviation),this.sys.stringCompare&&(CSL.stringCompare=this.sys.stringCompare),this.sys.AbbreviationSegments=CSL.AbbreviationSegments,this.parallel=new CSL.Parallel(this),this.transform=new CSL.Transform(this),this.setParseNames=function(val){this.opt["parse-names"]=val},this.opt=new CSL.Engine.Opt,this.tmp=new CSL.Engine.Tmp,this.build=new CSL.Engine.Build,this.fun=new CSL.Engine.Fun(this),this.configure=new CSL.Engine.Configure,this.citation_sort=new CSL.Engine.CitationSort,this.bibliography_sort=new CSL.Engine.BibliographySort,this.citation=new CSL.Engine.Citation(this),this.bibliography=new CSL.Engine.Bibliography,this.output=new CSL.Output.Queue(this),this.dateput=new CSL.Output.Queue(this),this.cslXml=CSL.setupXml(style),(this.opt.development_extensions.csl_reverse_lookup_support||this.sys.csl_reverse_lookup_support)&&(this.build.cslNodeId=0,this.setCslNodeIds=function(myxml,nodename){var children=this.cslXml.children(myxml);this.cslXml.setAttribute(myxml,"cslid",this.build.cslNodeId),this.opt.nodenames.push(nodename),this.build.cslNodeId+=1;for(var i=0,ilen=this.cslXml.numberofnodes(children);i<ilen;i+=1)(nodename=this.cslXml.nodename(children[i]))&&this.setCslNodeIds(children[i],nodename)},this.setCslNodeIds(this.cslXml.dataObj,"style")),this.cslXml.addMissingNameNodes(this.cslXml.dataObj),this.cslXml.addInstitutionNodes(this.cslXml.dataObj),this.cslXml.insertPublisherAndPlace(this.cslXml.dataObj),this.cslXml.flagDateMacros(this.cslXml.dataObj),"undefined"==typeof this.cslXml.attributes(this.cslXml.dataObj)["@sort-separator"]&&this.cslXml.setAttribute(this.cslXml.dataObj,"sort-separator",", "),this.opt["initialize-with-hyphen"]=!0,this.setStyleAttributes(),this.opt.xclass=this.cslXml.getAttributeValue(this.cslXml.dataObj,"class"),this.opt["class"]=this.opt.xclass,this.opt.styleID=this.cslXml.getStyleId(this.cslXml.dataObj),CSL.setSuppressedJurisdictions&&CSL.setSuppressedJurisdictions(this.opt.styleID,this.opt.suppressedJurisdictions),this.opt.styleName=this.cslXml.getStyleId(this.cslXml.dataObj,!0),"1.1m"===this.opt.version.slice(0,4)&&(this.opt.development_extensions.static_statute_locator=!0,this.opt.development_extensions.handle_parallel_articles=!0,this.opt.development_extensions.main_title_from_short_title=!0,this.opt.development_extensions.rtl_support=!0,this.opt.development_extensions.expect_and_symbol_form=!0,this.opt.development_extensions.require_explicit_legal_case_title_short=!0,this.opt.development_extensions.force_jurisdiction=!0),lang&&(lang=lang.replace("_","-"),lang=CSL.normalizeLocaleStr(lang)),this.opt["default-locale"][0]&&(this.opt["default-locale"][0]=this.opt["default-locale"][0].replace("_","-"),this.opt["default-locale"][0]=CSL.normalizeLocaleStr(this.opt["default-locale"][0])),lang&&forceLang&&(this.opt["default-locale"]=[lang]),lang&&!forceLang&&this.opt["default-locale"][0]&&(lang=this.opt["default-locale"][0]),0===this.opt["default-locale"].length&&(lang||(lang="en-US"),this.opt["default-locale"].push("en-US")),lang||(lang=this.opt["default-locale"][0]),langspec=CSL.localeResolve(lang),this.opt.lang=langspec.best,this.opt["default-locale"][0]=langspec.best,this.locale={},this.opt["default-locale-sort"]||(this.opt["default-locale-sort"]=this.opt["default-locale"][0]),"dale|".localeCompare("daleb",this.opt["default-locale-sort"])>-1?this.opt.sort_sep="@":this.opt.sort_sep="|",this.localeConfigure(langspec),this.locale[this.opt.lang].opts["skip-words-regexp"]=(lst=(lst=this.locale[this.opt.lang].opts["skip-words"]).slice(),new RegExp("(?:(?:[?!:]*\\s+|-|^)(?:"+lst.join("|")+")(?=[!?:]*\\s+|-|$))","g")),this.output.adjust=new CSL.Output.Queue.adjust(this.getOpt("punctuation-in-quote")),this.registry=new CSL.Registry(this),this.macros={},this.build.area="citation";var area_nodes=this.cslXml.getNodesByName(this.cslXml.dataObj,this.build.area);this.buildTokenLists(area_nodes,this[this.build.area].tokens),this.build.area="bibliography";area_nodes=this.cslXml.getNodesByName(this.cslXml.dataObj,this.build.area);this.buildTokenLists(area_nodes,this[this.build.area].tokens),this.juris={},this.configureTokenLists(),this.disambiguate=new CSL.Disambiguation(this),this.splice_delimiter=!1,this.fun.dateparser=CSL.DateParser,this.fun.flipflopper=new CSL.Util.FlipFlopper(this),this.setCloseQuotesArray(),this.fun.ordinalizer.init(this),this.fun.long_ordinalizer.init(this),this.fun.page_mangler=CSL.Util.PageRangeMangler.getFunction(this,"page"),this.fun.year_mangler=CSL.Util.PageRangeMangler.getFunction(this,"year"),this.setOutputFormat("html")},CSL.Engine.prototype.setCloseQuotesArray=function(){var ret;(ret=[]).push(this.getTerm("close-quote")),ret.push(this.getTerm("close-inner-quote")),ret.push('"'),ret.push("'"),this.opt.close_quotes_array=ret},CSL.makeBuilder=function(me,target){function enterFunc(node){CSL.XmlToToken.call(node,me,CSL.START,target)}function leaveFunc(node){CSL.XmlToToken.call(node,me,CSL.END,target)}function singletonFunc(node){CSL.XmlToToken.call(node,me,CSL.SINGLETON,target)}return function buildStyle(node){var origparent;if(me.cslXml.numberofnodes(me.cslXml.children(node))){enterFunc(origparent=node);for(var i=0;i<me.cslXml.numberofnodes(me.cslXml.children(origparent));i+=1)node=me.cslXml.children(origparent)[i],null!==me.cslXml.nodename(node)&&("date"===me.cslXml.nodename(node)&&(CSL.Util.fixDateNode.call(me,origparent,i,node),node=me.cslXml.children(origparent)[i]),buildStyle(node));leaveFunc(origparent)}else singletonFunc(node)}},CSL.Engine.prototype.buildTokenLists=function(area_nodes,target){this.cslXml.getNodeValue(area_nodes)&&CSL.makeBuilder(this,target)("undefined"==typeof area_nodes.length?area_nodes:area_nodes[0])},CSL.Engine.prototype.setStyleAttributes=function(){var attributes,attrname,dummy={};for(attrname in dummy.name=this.cslXml.nodename(this.cslXml.dataObj),attributes=this.cslXml.attributes(this.cslXml.dataObj))attributes.hasOwnProperty(attrname)&&CSL.Attributes[attrname].call(dummy,this,attributes[attrname])},CSL.Engine.prototype.getTerm=function(term,form,plural,gender,mode,forceDefaultLocale){var lang;term&&term.match(/[A-Z]/)&&term===term.toUpperCase()&&(CSL.debug("Warning: term key is in uppercase form: "+term),term=term.toLowerCase()),lang=forceDefaultLocale?this.opt["default-locale"][0]:this.opt.lang;var ret=CSL.Engine.getField(CSL.LOOSE,this.locale[lang].terms,term,form,plural,gender);if(ret||"range-delimiter"!==term||(ret="\u2013"),void 0===ret){if(mode===CSL.STRICT)throw'Error in getTerm: term "'+term+'" does not exist.';mode===CSL.TOLERANT&&(ret="")}return ret&&(this.tmp.cite_renders_content=!0),ret},CSL.Engine.prototype.getDate=function(form,forceDefaultLocale){var lang;return lang=forceDefaultLocale?this.opt["default-locale"]:this.opt.lang,!!this.locale[lang].dates[form]&&this.locale[lang].dates[form]},CSL.Engine.prototype.getOpt=function(arg){return"undefined"!=typeof this.locale[this.opt.lang].opts[arg]&&this.locale[this.opt.lang].opts[arg]},CSL.Engine.prototype.getVariable=function(Item,varname,form,plural){return CSL.Engine.getField(CSL.LOOSE,Item,varname,form,plural)},CSL.Engine.prototype.getDateNum=function(ItemField,partname){return void 0===ItemField?0:ItemField[partname]},CSL.Engine.getField=function(mode,hash,term,form,plural,gender){var ret,forms,f,pos,len,hashterm;if(ret="","undefined"==typeof hash[term]){if(mode===CSL.STRICT)throw'Error in getField: term "'+term+'" does not exist.';return undefined}for(hashterm=gender&&hash[term][gender]?hash[term][gender]:hash[term],forms=[],"symbol"===form?forms=["symbol","short"]:"verb-short"===form?forms=["verb-short","verb"]:"long"!==form&&(forms=[form]),len=(forms=forms.concat(["long"])).length,pos=0;pos<len;pos+=1)if(f=forms[pos],"string"==typeof hashterm||"number"==typeof hashterm)ret=hashterm;else if("undefined"!=typeof hashterm[f]){ret="string"==typeof hashterm[f]||"number"==typeof hashterm[f]?hashterm[f]:"number"==typeof plural?hashterm[f][plural]:hashterm[f][0];break}return ret},CSL.Engine.prototype.configureTokenLists=function(){var pos,len;for(len=CSL.AREAS.length,pos=0;pos<len;pos+=1){var tokens=this[CSL.AREAS[pos]].tokens;this.configureTokenList(tokens)}return this.version=CSL.version,this.state},CSL.Engine.prototype.configureTokenList=function(tokens){var dateparts_master,token,dateparts,ppos,pppos,lllen;for(dateparts_master=["year","month","day"],ppos=tokens.length-1;ppos>-1;ppos+=-1){if("date"===(token=tokens[ppos]).name&&CSL.END===token.tokentype&&(dateparts=[]),"date-part"===token.name&&token.strings.name)for(lllen=dateparts_master.length,pppos=0;pppos<lllen;pppos+=1)dateparts_master[pppos]===token.strings.name&&dateparts.push(token.strings.name);"date"===token.name&&CSL.START===token.tokentype&&(dateparts.reverse(),token.dateparts=dateparts),token.next=ppos+1,token.name&&CSL.Node[token.name].configure&&CSL.Node[token.name].configure.call(token,this,ppos)}},CSL.Engine.prototype.retrieveItems=function(ids){var ret;ret=[];for(var i=0,ilen=ids.length;i<ilen;i+=1)ret.push(this.retrieveItem(""+ids[i]));return ret},CSL.ITERATION=0,CSL.Engine.prototype.retrieveItem=function(id){var Item,m;if(this.tmp.loadedItemIDs[id])return this.registry.refhash[id];if(this.tmp.loadedItemIDs[id]=!0,this.opt.development_extensions.normalize_lang_keys_to_lowercase&&"boolean"==typeof this.opt.development_extensions.normalize_lang_keys_to_lowercase){for(var i=0,ilen=this.opt["default-locale"].length;i<ilen;i+=1)this.opt["default-locale"][i]=this.opt["default-locale"][i].toLowerCase();for(i=0,ilen=this.opt["locale-translit"].length;i<ilen;i+=1)this.opt["locale-translit"][i]=this.opt["locale-translit"][i].toLowerCase();for(i=0,ilen=this.opt["locale-translat"].length;i<ilen;i+=1)this.opt["locale-translat"][i]=this.opt["locale-translat"][i].toLowerCase();this.opt.development_extensions.normalize_lang_keys_to_lowercase=100}if(CSL.ITERATION+=1,Item=JSON.parse(JSON.stringify(this.sys.retrieveItem(""+id))),this.opt.development_extensions.normalize_lang_keys_to_lowercase){if(Item.multi){if(Item.multi._keys)for(var field in Item.multi._keys)for(var key in Item.multi._keys[field])key!==key.toLowerCase()&&(Item.multi._keys[field][key.toLowerCase()]=Item.multi._keys[field][key],delete Item.multi._keys[field][key]);if(Item.multi.main)for(var field in Item.multi.main)Item.multi.main[field]=Item.multi.main[field].toLowerCase()}for(i=0,ilen=CSL.CREATORS.length;i>ilen;i+=1){var ctype=CSL.CREATORS[i];if(Item[ctype]&&Item[ctype].multi)for(var j=0,jlen=Item[ctype].length;j<jlen;j+=1){var creator=Item[ctype][j];if(creator.multi){if(creator.multi._key)for(var key in creator.multi._key)key!==key.toLowerCase()&&(creator.multi._key[key.toLowerCase()]=creator.multi._key[key],delete creator.multi._key[key]);creator.multi.main&&(creator.multi.main=creator.multi.main.toLowerCase())}}}}if(this.sys.getLanguageName&&Item.language&&Item.language){Item.language=Item.language.toLowerCase();var lst=Item.language.split("<");if(lst.length>0){var languageName=this.sys.getLanguageName(lst[0]);languageName&&(Item["language-name"]=languageName)}if(2===lst.length){var originalLanguage=this.sys.getLanguageName(lst[1]);originalLanguage&&(Item["language-name-original"]=originalLanguage)}}Item.page&&(Item["page-first"]=Item.page,"\\"!==(m=(""+Item.page).split(/\s*(?:&|, |-|\u2013)\s*/))[0].slice(-1)&&(Item["page-first"]=m[0]));this.opt.development_extensions.field_hack&&Item.note&&CSL.parseNoteFieldHacks(Item,!1,this.opt.development_extensions.allow_field_hack_date_override);for(i=1,ilen=CSL.DATE_VARIABLES.length;i<ilen;i+=1){var dateobj=Item[CSL.DATE_VARIABLES[i]];dateobj&&(this.opt.development_extensions.raw_date_parsing&&dateobj.raw&&(dateobj=this.fun.dateparser.parseDateToObject(dateobj.raw)),Item[CSL.DATE_VARIABLES[i]]=this.dateParseArray(dateobj))}if(this.opt.development_extensions.static_statute_locator&&Item.type&&["bill","gazette","legislation","regulation","treaty"].indexOf(Item.type)>-1){var varname,elements=["type","title","jurisdiction","genre","volume","container-title"],legislation_id=[];for(i=0,ilen=elements.length;i<ilen;i+=1)Item[varname=elements[i]]&&legislation_id.push(Item[varname]);for(i=0,(elements=["original-date","issued"]).length;i<ilen;i+=1)if(Item[varname=elements[i]]&&Item[varname].year){var value=Item[varname].year;legislation_id.push(value);break}Item.legislation_id=legislation_id.join("::")}this.opt.development_extensions.force_jurisdiction&&"string"==typeof Item.authority&&(Item.authority=[{literal:Item.authority}]),Item["title-short"]||(Item["title-short"]=Item.shortTitle),this.opt.development_extensions.main_title_from_short_title&&CSL.extractTitleAndSubtitle(Item);var isLegalType=["bill","legal_case","legislation","gazette","regulation"].indexOf(Item.type)>-1;if(this.opt.development_extensions.force_jurisdiction&&isLegalType&&(Item.jurisdiction||(Item.jurisdiction="us")),!isLegalType&&Item.title&&this.sys.getAbbreviation){Item.jurisdiction||!0;var jurisdiction=this.transform.loadAbbreviation(Item.jurisdiction,"title",Item.title,Item.type,!0);this.transform.abbrevs[jurisdiction].title&&this.transform.abbrevs[jurisdiction].title[Item.title]&&(Item["title-short"]=this.transform.abbrevs[jurisdiction].title[Item.title])}if(Item["container-title-short"]||(Item["container-title-short"]=Item.journalAbbreviation),Item["container-title"]&&this.sys.getAbbreviation){jurisdiction=this.transform.loadAbbreviation(Item.jurisdiction,"container-title",Item["container-title"]);this.transform.abbrevs[jurisdiction]["container-title"]&&this.transform.abbrevs[jurisdiction]["container-title"][Item["container-title"]]&&(Item["container-title-short"]=this.transform.abbrevs[jurisdiction]["container-title"][Item["container-title"]])}return this.registry.refhash[id]=Item,Item},CSL.Engine.prototype.setOpt=function(token,name,value){"style"===token.name||"cslstyle"===token.name?(this.opt.inheritedAttributes[name]=value,this.citation.opt.inheritedAttributes[name]=value,this.bibliography.opt.inheritedAttributes[name]=value):["citation","bibliography"].indexOf(token.name)>-1?this[token.name].opt.inheritedAttributes[name]=value:token.strings[name]=value},CSL.Engine.prototype.inheritOpt=function(token,attrname,parentname,defaultValue){if("undefined"!=typeof token.strings[attrname])return token.strings[attrname];var parentValue=this[this.tmp.root].opt.inheritedAttributes[parentname||attrname];return void 0!==parentValue?parentValue:defaultValue},module.exports=CSL,CSL.Engine.prototype.remapSectionVariable=function(inputList){for(var i=0,ilen=inputList.length;i<ilen;i+=1){var Item=inputList[i][0],item=inputList[i][1];if(["bill","gazette","legislation","regulation","treaty"].indexOf(Item.type)>-1){if(item.locator)item.locator=item.locator.trim(),(m=item.locator.match(CSL.STATUTE_SUBDIV_PLAIN_REGEX))||(item.label?item.locator=CSL.STATUTE_SUBDIV_STRINGS_REVERSE[item.label]+" "+item.locator:item.locator="p. "+item.locator);var sectionMasterLabel=null;if(Item.section)Item.section=Item.section.trim(),(m=Item.section.match(CSL.STATUTE_SUBDIV_PLAIN_REGEX))?sectionMasterLabel=m[0].trim():(Item.section="sec. "+Item.section,sectionMasterLabel="sec.");if(Item.section)if(item.locator){var m,space=" ";(m=item.locator.match(/^([^ ]*)\s*(.*)/))?("p."===m[1]&&"p."!==sectionMasterLabel&&(item.locator=m[2]),["[","(",".",",",";",":","?"].indexOf(item.locator.slice(0,1))>-1&&(space="")):space="",item.locator=Item.section+space+item.locator}else item.locator=Item.section;item.label=""}}},CSL.Engine.prototype.setNumberLabels=function(Item){if(Item.number&&["bill","gazette","legislation","regulation","treaty"].indexOf(Item.type)>-1&&this.opt.development_extensions.static_statute_locator&&!this.tmp.shadow_numbers.number){this.tmp.shadow_numbers.number={},this.tmp.shadow_numbers.number.values=[],this.tmp.shadow_numbers.number.plural=0,this.tmp.shadow_numbers.number.numeric=!1,this.tmp.shadow_numbers.number.label=!1;var value=""+Item.number,firstword=(value=value.split("\\").join("")).split(/\s+/)[0],firstlabel=CSL.STATUTE_SUBDIV_STRINGS[firstword];if(firstlabel){var m=value.match(CSL.STATUTE_SUBDIV_GROUPED_REGEX),splt=value.split(CSL.STATUTE_SUBDIV_PLAIN_REGEX);if(splt.length>1){for(var lst=[],j=1,jlen=splt.length;j<jlen;j+=1){m[j-1].replace(/^\s*/,"");lst.push(splt[j].replace(/\s*$/,"").replace(/^\s*/,""))}value=lst.join(" ")}else value=splt[0];this.tmp.shadow_numbers.number.label=firstlabel,this.tmp.shadow_numbers.number.values.push(["Blob",value,!1]),this.tmp.shadow_numbers.number.numeric=!1}else this.tmp.shadow_numbers.number.values.push(["Blob",value,!1]),this.tmp.shadow_numbers.number.numeric=!0}},module.exports=CSL,CSL.substituteOne=function(template){return function(state,list){return list?template.replace("%%STRING%%",list):""}},CSL.substituteTwo=function(template){return function(param){var template2=template.replace("%%PARAM%%",param);return function(state,list){return list?template2.replace("%%STRING%%",list):""}}},CSL.Mode=function(mode){var decorations,params,param,func,val,args;for(param in decorations={},params=CSL.Output.Formats[mode])if("@"===param.slice(0,1)){if(func=!1,val=params[param],args=param.split("/"),"string"==typeof val&&val.indexOf("%%STRING%%")>-1)func=val.indexOf("%%PARAM%%")>-1?CSL.substituteTwo(val):CSL.substituteOne(val);else if("boolean"!=typeof val||val){if("function"!=typeof val)throw"CSL.Compiler: Bad "+mode+" config entry for "+param+": "+val;func=val}else func=CSL.Output.Formatters.passthrough;1===args.length?decorations[args[0]]=func:2===args.length&&(decorations[args[0]]||(decorations[args[0]]={}),decorations[args[0]][args[1]]=func)}else decorations[param]=params[param];return decorations},CSL.setDecorations=function(state,attributes){var ret,pos;for(pos in ret=[],CSL.FORMAT_KEY_SEQUENCE){var key;attributes[key=CSL.FORMAT_KEY_SEQUENCE[pos]]&&(ret.push([key,attributes[key]]),delete attributes[key])}return ret},CSL.Doppeler=function(rexStr,stringMangler){this.split=function(str){stringMangler&&(str=stringMangler(str));var match=str.match(matchRex);if(!match)return{tags:[],strings:[str]};for(var split=str.split(splitRex),i=match.length-1;i>-1;i--){var tag=match[i];"'"===tag&&split[i+1].length>0&&(split[i+1]=match[i]+split[i+1],match[i]="")}return{tags:match,strings:split,origStrings:split.slice()}},this.join=function(obj){for(var lst=obj.strings.slice(-1),i=obj.tags.length-1;i>-1;i--)lst.push(obj.tags[i]),lst.push(obj.strings[i]);return lst.reverse(),lst.join("")};var matchRex=new RegExp("("+rexStr+")","g"),splitRex=new RegExp(rexStr,"g")},CSL.Engine.prototype.normalDecorIsOrphan=function(blob,params){if("normal"===params[1]){for(var all_the_decor,use_param=!1,k=(all_the_decor="citation"===this.tmp.area?[this.citation.opt.layout_decorations].concat(blob.alldecor):blob.alldecor).length-1;k>-1;k+=-1)for(var n=all_the_decor[k].length-1;n>-1;n+=-1)all_the_decor[k][n][0]===params[0]&&"normal"!==all_the_decor[k][n][1]&&(use_param=!0);if(!use_param)return!0}return!1},CSL.getJurisdictionNameAndSuppress=function(state,jurisdictionID,jurisdictionName,chopTo){var ret=null;if(chopTo&&(jurisdictionID=jurisdictionID.split(":").slice(0,chopTo).join(":"),jurisdictionName=state.sys.getHumanForm(jurisdictionID)),jurisdictionName||(jurisdictionName=state.sys.getHumanForm(jurisdictionID)),jurisdictionName){var code=jurisdictionID.split(":"),name=jurisdictionName.split("|"),valid=!1;if(1===code.length&&2===name.length?valid=!0:code.length>1&&name.length===code.length&&(valid=!0),valid){for(var stub,mask=0,i=0,ilen=code.length;i<ilen;i++)stub=code.slice(0,i+1).join(":"),state.opt.suppressedJurisdictions[stub]&&(mask=i+1);ret=0===mask?1===code.length?name[0]:name.join("|"):1===mask&&1===code.length?"":name.slice(mask).join("|")}else ret=name.join("|")}else ret=jurisdictionID;return ret},module.exports=CSL,CSL.Engine.prototype.getCitationLabel=function(Item){var label="",params=this.getTrigraphParams(),config=params[0],myname=this.getTerm("reference","short",0);void 0===myname&&(myname="reference"),myname=(myname=myname.replace(".","")).slice(0,1).toUpperCase()+myname.slice(1);for(var i=0,ilen=CSL.CREATORS.length;i<ilen;i+=1){var n=CSL.CREATORS[i];if(Item[n]){var names=Item[n];config=names.length>params.length?params[params.length-1]:params[names.length-1];for(var j=0,jlen=names.length;j<jlen&&j!==config.authors.length;j+=1){var name=this.nameOutput.getName(names[j],"locale-translit",!0).name;name&&name.family?myname=(myname=name.family).replace(/^([ \'\u2019a-z]+\s+)/,""):name&&name.literal&&(myname=name.literal);var m=myname.toLowerCase().match(/^(a\s+|the\s+|an\s+)/);if(m&&(myname=myname.slice(m[1].length)),!(myname=myname.replace(CSL.ROMANESQUE_NOT_REGEXP,"")))break;(myname=myname.slice(0,config.authors[j])).length>1?myname=myname.slice(0,1).toUpperCase()+myname.slice(1).toLowerCase():1===myname.length&&(myname=myname.toUpperCase()),label+=myname}break}}if(!label&&Item.title){var skipWords=this.locale[this.opt.lang].opts["skip-words"],lst=Item.title.split(/\s+/);for(i=lst.length-1;i>-1;i--)skipWords.indexOf(lst[i])>-1&&(lst=lst.slice(0,i).concat(lst.slice(i+1)));var str=lst.join("");(str=str.slice(0,params[0].authors[0])).length>1?str=str.slice(0,1).toUpperCase()+str.slice(1).toLowerCase():1===str.length&&(str=str.toUpperCase()),label=str}var year="0000";return Item.issued&&Item.issued.year&&(year=""+Item.issued.year),label+=year=year.slice(-1*config.year)},CSL.Engine.prototype.getTrigraphParams=function(){var params=[],ilst=this.opt.trigraph.split(":");if(!this.opt.trigraph||"A"!==this.opt.trigraph.slice(0,1))throw"Bad trigraph definition: "+this.opt.trigraph;for(var i=0,ilen=ilst.length;i<ilen;i+=1){for(var str=ilst[i],config={authors:[],year:0},j=0,jlen=str.length;j<jlen;j+=1)switch(str.slice(j,j+1)){case"A":config.authors.push(1);break;case"a":config.authors[config.authors.length-1]+=1;break;case"0":config.year+=1;break;default:throw"Invalid character in trigraph definition: "+this.opt.trigraph}params.push(config)}return params},module.exports=CSL,CSL.Engine.prototype.setOutputFormat=function(mode){this.opt.mode=mode,this.fun.decorate=CSL.Mode(mode),this.output[mode]||(this.output[mode]={},this.output[mode].tmp={})},CSL.Engine.prototype.getSortFunc=function(){return function(a,b){return a=a.split("-"),b=b.split("-"),a.length<b.length?1:a.length>b.length?-1:(a=a.slice(-1)[0],b=b.slice(-1)[0],a.length<b.length?1:a.length>b.length?-1:0)}},CSL.Engine.prototype.setLangTagsForCslSort=function(tags){var i,ilen;if(tags)for(this.opt["locale-sort"]=[],i=0,ilen=tags.length;i<ilen;i+=1)this.opt["locale-sort"].push(tags[i]);this.opt["locale-sort"].sort(this.getSortFunc())},CSL.Engine.prototype.setLangTagsForCslTransliteration=function(tags){var i,ilen;if(this.opt["locale-translit"]=[],tags)for(i=0,ilen=tags.length;i<ilen;i+=1)this.opt["locale-translit"].push(tags[i]);this.opt["locale-translit"].sort(this.getSortFunc())},CSL.Engine.prototype.setLangTagsForCslTranslation=function(tags){var i,ilen;if(this.opt["locale-translat"]=[],tags)for(i=0,ilen=tags.length;i<ilen;i+=1)this.opt["locale-translat"].push(tags[i]);this.opt["locale-translat"].sort(this.getSortFunc())},CSL.Engine.prototype.setLangPrefsForCites=function(obj,conv){var opt=this.opt["cite-lang-prefs"];conv||(conv=function(key){return key.toLowerCase()});for(var segments=["Persons","Institutions","Titles","Journals","Publishers","Places"],i=0,ilen=segments.length;i<ilen;i+=1){var clientSegment=conv(segments[i]),citeprocSegment=segments[i].toLowerCase();if(obj[clientSegment]){for(var supplements=[];obj[clientSegment].length>1;)supplements.push(obj[clientSegment].pop());var sortval={orig:1,translit:2,translat:3};for(2===supplements.length&&sortval[supplements[0]]<sortval[supplements[1]]&&supplements.reverse();supplements.length;)obj[clientSegment].push(supplements.pop());for(var lst=opt[citeprocSegment];lst.length;)lst.pop();for(var j=0,jlen=obj[clientSegment].length;j<jlen;j+=1)lst.push(obj[clientSegment][j])}}},CSL.Engine.prototype.setLangPrefsForCiteAffixes=function(affixList){if(affixList&&48===affixList.length){for(var value,affixes=this.opt.citeAffixes,count=0,settings=["persons","institutions","titles","journals","publishers","places"],forms=["translit","orig","translit","translat"],i=0,ilen=settings.length;i<ilen;i+=1)for(var j=0,jlen=forms.length;j<jlen;j+=1)value="",count%8==4&&(affixes[settings[i]]["locale-"+forms[j]].prefix||affixes[settings[i]]["locale-"+forms[j]].suffix)||(value=affixList[count]?affixList[count]:"",affixes[settings[i]]["locale-"+forms[j]].prefix=value,value=affixList[count]?affixList[count+1]:"",affixes[settings[i]]["locale-"+forms[j]].suffix=value),count+=2;this.opt.citeAffixes=affixes}},CSL.Engine.prototype.setAutoVietnameseNamesOption=function(arg){this.opt["auto-vietnamese-names"]=!!arg},CSL.Engine.prototype.setAbbreviations=function(arg){this.sys.setAbbreviations&&this.sys.setAbbreviations(arg)},CSL.Engine.prototype.setSuppressTrailingPunctuation=function(arg){this.citation.opt.suppressTrailingPunctuation=!!arg},module.exports=CSL,CSL.Output={},CSL.Output.Queue=function(state){this.levelname=["top"],this.state=state,this.queue=[],this.empty=new CSL.Token("empty");var tokenstore={};tokenstore.empty=this.empty,this.formats=new CSL.Stack(tokenstore),this.current=new CSL.Stack(this.queue)},CSL.Output.Queue.prototype.pop=function(){var drip=this.current.value();return drip.length?drip.pop():drip.blobs.pop()},CSL.Output.Queue.prototype.getToken=function(name){return this.formats.value()[name]},CSL.Output.Queue.prototype.mergeTokenStrings=function(base,modifier){var base_token,modifier_token,ret;if(ret=base_token=this.formats.value()[base],modifier_token=this.formats.value()[modifier]){base_token||((base_token=new CSL.Token(base,CSL.SINGLETON)).decorations=[]),ret=new CSL.Token(base,CSL.SINGLETON);var key="";for(var key in base_token.strings)base_token.strings.hasOwnProperty(key)&&(ret.strings[key]=base_token.strings[key]);for(var key in modifier_token.strings)modifier_token.strings.hasOwnProperty(key)&&(ret.strings[key]=modifier_token.strings[key]);ret.decorations=base_token.decorations.concat(modifier_token.decorations)}return ret},CSL.Output.Queue.prototype.addToken=function(name,modifier,token){var newtok,attr;if(newtok=new CSL.Token("output"),"string"==typeof token&&(token=this.formats.value()[token]),token&&token.strings){for(attr in token.strings)token.strings.hasOwnProperty(attr)&&(newtok.strings[attr]=token.strings[attr]);newtok.decorations=token.decorations}"string"==typeof modifier&&(newtok.strings.delimiter=modifier),this.formats.value()[name]=newtok},CSL.Output.Queue.prototype.pushFormats=function(tokenstore){tokenstore||(tokenstore={}),tokenstore.empty=this.empty,this.formats.push(tokenstore)},CSL.Output.Queue.prototype.popFormats=function(tokenstore){this.formats.pop()},CSL.Output.Queue.prototype.startTag=function(name,token){var tokenstore={};this.state.tmp["doing-macro-with-date"]&&this.state.tmp.extension&&(token=this.empty,name="empty"),tokenstore[name]=token,this.pushFormats(tokenstore),this.openLevel(name)},CSL.Output.Queue.prototype.endTag=function(name){this.closeLevel(name),this.popFormats()},CSL.Output.Queue.prototype.openLevel=function(token,ephemeral){var blob,curr;if("object"===_typeof(token))blob=new CSL.Blob(undefined,token);else if(void 0===token)blob=new CSL.Blob(undefined,this.formats.value().empty,"empty");else{if(!this.formats.value()||!this.formats.value()[token])throw'CSL processor error: call to nonexistent format token "'+token+'"';blob=new CSL.Blob(undefined,this.formats.value()[token],token)}curr=this.current.value(),!this.state.tmp.just_looking&&this.checkNestedBrace&&(blob.strings.prefix=this.checkNestedBrace.update(blob.strings.prefix)),curr.push(blob),this.current.push(blob)},CSL.Output.Queue.prototype.closeLevel=function(name){name&&name!==this.current.value().levelname&&CSL.error("Level mismatch error:  wanted "+name+" but found "+this.current.value().levelname);var blob=this.current.pop();!this.state.tmp.just_looking&&this.checkNestedBrace&&(blob.strings.suffix=this.checkNestedBrace.update(blob.strings.suffix))},CSL.Output.Queue.prototype.append=function(str,tokname,notSerious,ignorePredecessor,noStripPeriods){var token,blob,curr,useblob=!0;if(notSerious&&(ignorePredecessor=!0),this.state.tmp["doing-macro-with-date"]&&!notSerious){if("macro-with-date"!==tokname)return!1;"macro-with-date"===tokname&&(tokname="empty")}if(void 0===str)return!1;if("number"==typeof str&&(str=""+str),!notSerious&&this.state.tmp.element_trace&&"suppress-me"===this.state.tmp.element_trace.value())return!1;if(blob=!1,tokname?"literal"===tokname?(token=!0,useblob=!1):token="string"==typeof tokname?this.formats.value()[tokname]:tokname:token=this.formats.value().empty,!token)throw"CSL processor error: unknown format token name: "+tokname;if(token.strings&&"undefined"==typeof token.strings.delimiter&&(token.strings.delimiter=""),"string"==typeof str&&str.length&&(str=str.replace(/ ([:;?!\u00bb])/g,"\u202f$1").replace(/\u00ab /g,"\xab\u202f"),this.last_char_rendered=str.slice(-1),str=str.replace(/\s+'/g," '"),notSerious||(str=str.replace(/^'/g," '")),ignorePredecessor?notSerious&&(this.state.tmp.term_predecessor_name=!0):(this.state.tmp.term_predecessor=!0,this.state.tmp.in_cite_predecessor=!0)),blob=new CSL.Blob(str,token),void 0===(curr=this.current.value())&&0===this.current.mystack.length&&(this.current.mystack.push([]),curr=this.current.value()),"string"==typeof blob.blobs&&(ignorePredecessor?notSerious&&(this.state.tmp.term_predecessor_name=!0):(this.state.tmp.term_predecessor=!0,this.state.tmp.in_cite_predecessor=!0)),notSerious||this.state.parallel.AppendBlobPointer(curr),"string"==typeof str){if("string"==typeof blob.blobs&&" "!==blob.blobs.slice(0,1)){for(var blobPrefix="",blobBlobs=blob.blobs;CSL.TERMINAL_PUNCTUATION.indexOf(blobBlobs.slice(0,1))>-1;)blobPrefix+=blobBlobs.slice(0,1),blobBlobs=blobBlobs.slice(1);blobBlobs&&blobPrefix&&(blob.strings.prefix=blob.strings.prefix+blobPrefix,blob.blobs=blobBlobs)}blob.strings["text-case"]&&(blob.blobs=CSL.Output.Formatters[blob.strings["text-case"]](this.state,str)),this.state.tmp.strip_periods&&!noStripPeriods&&(blob.blobs=blob.blobs.replace(/\.([^a-z]|$)/g,"$1"));for(var i=blob.decorations.length-1;i>-1;i+=-1)"@quotes"===blob.decorations[i][0]&&"false"!==blob.decorations[i][1]&&(blob.punctuation_in_quote=this.state.getOpt("punctuation-in-quote")),blob.blobs.match(CSL.ROMANESQUE_REGEXP)||"@font-style"===blob.decorations[i][0]&&(blob.decorations=blob.decorations.slice(0,i).concat(blob.decorations.slice(i+1)));curr.push(blob),this.state.fun.flipflopper.processTags(blob)}else useblob?curr.push(blob):curr.push(str);return!0},CSL.Output.Queue.prototype.string=function(state,myblobs,blob){var b,txt_esc=CSL.getSafeEscape(this.state),blobs=myblobs.slice(),ret=[];if(0===blobs.length)return ret;var blobjr,use_suffix,use_prefix,params,blob_delimiter="";blob?blob_delimiter=blob.strings.delimiter:(state.tmp.count_offset_characters=!1,state.tmp.offset_characters=0),blob&&blob.new_locale&&(blob.old_locale=state.opt.lang,state.opt.lang=blob.new_locale);for(var i=0,ilen=blobs.length;i<ilen;i+=1){if((blobjr=blobs[i]).strings.first_blob&&(state.tmp.count_offset_characters=blobjr.strings.first_blob),"string"==typeof blobjr.blobs){if("number"==typeof blobjr.num)ret.push(blobjr);else if(blobjr.blobs){var blen=(b=txt_esc(blobjr.blobs)).length;if(!state.tmp.suppress_decorations)for(j=0,jlen=blobjr.decorations.length;j<jlen;j+=1)"@showid"!==(params=blobjr.decorations[j])[0]&&(state.normalDecorIsOrphan(blobjr,params)||(b=state.fun.decorate[params[0]][params[1]].call(blobjr,state,b,params[2])));if(b&&b.length){if(b=txt_esc(blobjr.strings.prefix)+b+txt_esc(blobjr.strings.suffix),(state.opt.development_extensions.csl_reverse_lookup_support||state.sys.csl_reverse_lookup_support)&&!state.tmp.suppress_decorations)for(j=0,jlen=blobjr.decorations.length;j<jlen;j+=1)"@showid"===(params=blobjr.decorations[j])[0]&&(b=state.fun.decorate[params[0]][params[1]].call(blobjr,state,b,params[2]));ret.push(b),state.tmp.count_offset_characters&&(state.tmp.offset_characters+=blen+blobjr.strings.suffix.length+blobjr.strings.prefix.length)}}}else if(blobjr.blobs.length){var addtoret=state.output.string(state,blobjr.blobs,blobjr);if(blob&&"string"!==addtoret&&addtoret.length>1&&blobjr.strings.delimiter)for(var numberSeen=!1,j=0,jlen=addtoret.length;j<jlen;j++)"string"!=typeof addtoret[j]?numberSeen=!0:numberSeen&&(addtoret[j]=blobjr.strings.delimiter+addtoret[j]);ret=ret.concat(addtoret)}blobjr.strings.first_blob&&state.registry.registry[blobjr.strings.first_blob]&&(state.registry.registry[blobjr.strings.first_blob].offset=state.tmp.offset_characters,state.tmp.count_offset_characters=!1)}for(i=0,ilen=ret.length-1;i<ilen;i+=1)"number"!=typeof ret[i].num||"number"!=typeof ret[i+1].num||ret[i+1].UGLY_DELIMITER_SUPPRESS_HACK||(ret[i].strings.suffix=ret[i].strings.suffix+(blob_delimiter||""),ret[i+1].successor_prefix="",ret[i+1].UGLY_DELIMITER_SUPPRESS_HACK=!0);var span_split=0;for(i=0,ilen=ret.length;i<ilen;i+=1)"string"==typeof ret[i]&&(span_split=parseInt(i,10)+1,i<ret.length-1&&"object"===_typeof(ret[i+1])&&(blob_delimiter&&!ret[i+1].UGLY_DELIMITER_SUPPRESS_HACK&&(ret[i]+=txt_esc(blob_delimiter)),ret[i+1].UGLY_DELIMITER_SUPPRESS_HACK=!0));if(blob&&(blob.decorations.length||blob.strings.suffix))span_split=ret.length;else if(blob&&blob.strings.prefix)for(i=0,ilen=ret.length;i<ilen;i++)if("undefined"!=typeof ret[i].num){span_split=i,0===i&&(ret[i].strings.prefix=blob.strings.prefix+ret[i].strings.prefix);break}var blobs_start=state.output.renderBlobs(ret.slice(0,span_split),blob_delimiter,!1,blob);if(blobs_start&&blob&&(blob.decorations.length||blob.strings.suffix||blob.strings.prefix)){if(!state.tmp.suppress_decorations)for(i=0,ilen=blob.decorations.length;i<ilen;i+=1)params=blob.decorations[i],["@cite","@bibliography","@display","@showid"].indexOf(params[0])>-1||state.normalDecorIsOrphan(blobjr,params)||"string"==typeof blobs_start&&(blobs_start=state.fun.decorate[params[0]][params[1]].call(blob,state,blobs_start,params[2]));if(b=blobs_start,use_suffix=blob.strings.suffix,b&&b.length&&(b=txt_esc(use_prefix=blob.strings.prefix)+b+txt_esc(use_suffix),state.tmp.count_offset_characters&&(state.tmp.offset_characters+=use_prefix.length+use_suffix.length)),blobs_start=b,!state.tmp.suppress_decorations)for(i=0,ilen=blob.decorations.length;i<ilen;i+=1)params=blob.decorations[i],-1!==["@cite","@bibliography","@display","@showid"].indexOf(params[0])&&"string"==typeof blobs_start&&(blobs_start=state.fun.decorate[params[0]][params[1]].call(blob,state,blobs_start,params[2]))}var blobs_end=ret.slice(span_split,ret.length);return!blobs_end.length&&blobs_start?ret=[blobs_start]:blobs_end.length&&!blobs_start?ret=blobs_end:blobs_start&&blobs_end.length&&(ret=[blobs_start].concat(blobs_end)),void 0===blob?(this.queue=[],this.current.mystack=[],this.current.mystack.push(this.queue),state.tmp.suppress_decorations&&(ret=state.output.renderBlobs(ret,undefined,!1))):"boolean"==typeof blob&&(ret=state.output.renderBlobs(ret,undefined,!0)),blob&&blob.new_locale&&(state.opt.lang=blob.old_locale),ret},CSL.Output.Queue.prototype.clearlevel=function(){var blob,pos,len;for(len=(blob=this.current.value()).blobs.length,pos=0;pos<len;pos+=1)blob.blobs.pop()},CSL.Output.Queue.prototype.renderBlobs=function(blobs,delim,in_cite,parent){var state,ret,use_delim,blob,pos,len,ppos,llen,str,params,txt_esc;if(txt_esc=CSL.getSafeEscape(this.state),delim||(delim=""),state=this.state,ret="",[],use_delim="",len=blobs.length,"citation"===this.state.tmp.area&&!this.state.tmp.just_looking&&1===len&&"object"===_typeof(blobs[0])&&parent)return blobs[0].strings.prefix=parent.strings.prefix+blobs[0].strings.prefix,blobs[0].strings.suffix=blobs[0].strings.suffix+parent.strings.suffix,blobs[0].decorations=blobs[0].decorations.concat(parent.decorations),blobs[0].params=parent.params,blobs[0];var start=!0;for(pos=0;pos<len;pos+=1)blobs[pos].checkNext?(blobs[pos].checkNext(blobs[pos+1],start),start=!1):start=!blobs[pos+1]||!blobs[pos+1].splice_prefix;var doit=!0;for(pos=blobs.length-1;pos>0;pos+=-1)blobs[pos].checkLast?doit&&blobs[pos].checkLast(blobs[pos-1])&&(doit=!1):doit=!0;for(len=blobs.length,pos=0;pos<len;pos+=1)if(blob=blobs[pos],ret&&(use_delim=delim),"string"==typeof blob)ret+=txt_esc(use_delim),ret+=blob,state.tmp.count_offset_characters&&(state.tmp.offset_characters+=use_delim.length);else if(in_cite)ret=ret?[ret,blob]:[blob];else if(blob.status!==CSL.SUPPRESS){var strlen=(str=blob.particle?blob.particle+blob.num:blob.formatter.format(blob.num,blob.gender)).replace(/<[^>]*>/g,"").length;this.append(str,"empty",!0);var str_blob=this.pop(),count_offset_characters=state.tmp.count_offset_characters;if(str=this.string(state,[str_blob],!1),state.tmp.count_offset_characters=count_offset_characters,blob.strings["text-case"]&&(str=CSL.Output.Formatters[blob.strings["text-case"]](this.state,str)),str&&this.state.tmp.strip_periods&&(str=str.replace(/\.([^a-z]|$)/g,"$1")),!state.tmp.suppress_decorations)for(llen=blob.decorations.length,ppos=0;ppos<llen;ppos+=1)params=blob.decorations[ppos],state.normalDecorIsOrphan(blob,params)||(str=state.fun.decorate[params[0]][params[1]].call(blob,state,str,params[2]));str=txt_esc(blob.strings.prefix)+str+txt_esc(blob.strings.suffix);var addme="";blob.status===CSL.END?addme=txt_esc(blob.range_prefix):blob.status===CSL.SUCCESSOR?addme=txt_esc(blob.successor_prefix):blob.status===CSL.START?addme=pos>0&&!blob.suppress_splice_prefix?txt_esc(blob.splice_prefix):"":blob.status===CSL.SEEN&&(addme=txt_esc(blob.splice_prefix)),ret+=addme,ret+=str,state.tmp.count_offset_characters&&(state.tmp.offset_characters+=addme.length+blob.strings.prefix.length+strlen+blob.strings.suffix.length)}return ret},CSL.Output.Queue.purgeEmptyBlobs=function(parent){if("object"===_typeof(parent)&&"object"===_typeof(parent.blobs)&&parent.blobs.length)for(var i=parent.blobs.length-1;i>-1;i--){CSL.Output.Queue.purgeEmptyBlobs(parent.blobs[i]);var child=parent.blobs[i];if(!child||!child.blobs||!child.blobs.length){for(var buf=[];parent.blobs.length-1>i;)buf.push(parent.blobs.pop());for(parent.blobs.pop();buf.length;)parent.blobs.push(buf.pop())}}},CSL.Output.Queue.adjust=function(punctInQuote){var NO_SWAP_IN={";":!0,":":!0},NO_SWAP_OUT={".":!0,"!":!0,"?":!0};this.upward=function(parent){if(parent.blobs&&"string"==typeof parent.blobs)return void(PUNCT[parent.strings.suffix.slice(0,1)]&&parent.strings.suffix.slice(0,1)===parent.blobs.slice(-1)&&(parent.strings.suffix=parent.strings.suffix.slice(1)));if("object"!==_typeof(parent)||"object"!==_typeof(parent.blobs)||!parent.blobs.length)return;for(var parentDecorations=blobHasDecorations(parent,!0),i=parent.blobs.length-1;i>-1;i--){parent.blobs.length;this.upward(parent.blobs[i]);var parentStrings=parent.strings,childStrings=parent.blobs[i].strings;if(0===i){" "===parentStrings.prefix.slice(-1)&&" "===childStrings.prefix.slice(0,1)&&(childStrings.prefix=childStrings.prefix.slice(1));var childChar=childStrings.prefix.slice(0,1);parentDecorations||!PUNCT_OR_SPACE[childChar]||parentStrings.prefix||(parentStrings.prefix+=childChar,childStrings.prefix=childStrings.prefix.slice(1))}if(i===parent.blobs.length-1){var childChar=childStrings.suffix.slice(-1);!parentDecorations&&[" "].indexOf(childChar)>-1&&(parentStrings.suffix.slice(0,1)!==childChar&&(parentStrings.suffix=childChar+parentStrings.suffix),childStrings.suffix=childStrings.suffix.slice(0,-1))}parentStrings.delimiter&&i>0&&PUNCT_OR_SPACE[parentStrings.delimiter.slice(-1)]&&parentStrings.delimiter.slice(-1)===childStrings.prefix.slice(0,1)&&(childStrings.prefix=childStrings.prefix.slice(1))}},this.leftward=function(parent){if("object"!==_typeof(parent)||"object"!==_typeof(parent.blobs)||!parent.blobs.length)return;for(var i=parent.blobs.length-1;i>-1;i--)if(this.leftward(parent.blobs[i]),i<parent.blobs.length-1&&!parent.strings.delimiter){var child=parent.blobs[i],childChar=child.strings.suffix.slice(-1),sibling=parent.blobs[i+1],siblingChar=sibling.strings.prefix.slice(0,1),hasDecorations=blobHasDecorations(child)||blobHasDecorations(sibling),hasNumber="number"==typeof childChar||"number"==typeof siblingChar;if(!hasDecorations&&!hasNumber&&PUNCT[siblingChar]&&!hasNumber){var suffixAndPrefixMatch=siblingChar===child.strings.suffix.slice(-1),suffixAndFieldMatch=!child.strings.suffix&&"string"==typeof child.blobs&&child.blobs.slice(-1)===siblingChar;suffixAndPrefixMatch||suffixAndFieldMatch?sibling.strings.prefix=sibling.strings.prefix.slice(1):mergeChars(child,"suffix",sibling,"prefix")}}},this.downward=function(parent,top){if(parent.blobs&&"string"==typeof parent.blobs)return void(PUNCT[parent.strings.suffix.slice(0,1)]&&parent.strings.suffix.slice(0,1)===parent.blobs.slice(-1)&&(parent.strings.suffix=parent.strings.suffix.slice(1)));if("object"!==_typeof(parent)||"object"!==_typeof(parent.blobs)||!parent.blobs.length)return;for(var parentStrings=parent.strings,i=0,ilen=parent.blobs.length;i<ilen;i++)if(blobIsNumber(parent.blobs[i])){!0;break}if(parentStrings.delimiter&&PUNCT[parentStrings.delimiter.slice(0,1)]){for(var delimChar=parentStrings.delimiter.slice(0,1),i=parent.blobs.length-2;i>-1;i--){var childStrings=parent.blobs[i].strings;childStrings.suffix.slice(-1)!==delimChar&&(childStrings.suffix+=delimChar)}parentStrings.delimiter=parentStrings.delimiter.slice(1)}blobHasDecorations(parent,!0),blobIsNumber(parent);for(var i=parent.blobs.length-1;i>-1;i--){var child=parent.blobs[i],childStrings=parent.blobs[i].strings,childDecorations=blobHasDecorations(child,!0),childIsNumber=blobIsNumber(child);if(i===parent.blobs.length-1){var parentChar=parentStrings.suffix.slice(0,1),allowMigration=!1;PUNCT[parentChar]&&!(allowMigration=blobHasDescendantMergingPunctuation(parentChar,child))&&punctInQuote&&(allowMigration=blobHasDescendantQuotes(child)),allowMigration&&PUNCT[parentChar]&&(blobEndsInNumber(child)||("string"==typeof child.blobs?mergeChars(child,"blobs",parent,"suffix"):mergeChars(child,"suffix",parent,"suffix"),"."===parentStrings.suffix.slice(0,1)&&(childStrings.suffix+=parentStrings.suffix.slice(0,1),parentStrings.suffix=parentStrings.suffix.slice(1)))),"\xa0"===childStrings.suffix.slice(-1)&&" "===parentStrings.suffix.slice(0,1)&&(parentStrings.suffix=parentStrings.suffix.slice(1)),PUNCT_OR_SPACE[childStrings.suffix.slice(0,1)]&&("string"==typeof child.blobs&&child.blobs.slice(-1)===childStrings.suffix.slice(0,1)&&(childStrings.suffix=childStrings.suffix.slice(1)),childStrings.suffix.slice(-1)===parentStrings.suffix.slice(0,1)&&(parentStrings.suffix=parentStrings.suffix.slice(0,-1))),matchLastChar(parent,parent.strings.suffix.slice(0,1))&&(parent.strings.suffix=parent.strings.suffix.slice(1))}else if(parentStrings.delimiter)PUNCT_OR_SPACE[parentStrings.delimiter.slice(0,1)]&&parentStrings.delimiter.slice(0,1)===childStrings.suffix.slice(-1)&&(parent.blobs[i].strings.suffix=parent.blobs[i].strings.suffix.slice(0,-1));else{var siblingStrings=parent.blobs[i+1].strings;blobIsNumber(child)||childDecorations||!PUNCT_OR_SPACE[childStrings.suffix.slice(-1)]||childStrings.suffix.slice(-1)!==siblingStrings.prefix.slice(0,1)||(siblingStrings.prefix=siblingStrings.prefix.slice(1))}childIsNumber||childDecorations||!PUNCT[childStrings.suffix.slice(0,1)]||"string"!=typeof child.blobs||mergeChars(child,"blobs",child,"suffix"),this.downward(parent.blobs[i])}},this.fix=function(parent){if("object"!==_typeof(parent)||"object"!==_typeof(parent.blobs)||!parent.blobs.length)return;for(var lastChar,i=0,ilen=parent.blobs.length;i<ilen;i++){for(var child=parent.blobs[i],quoteSwap=!1,j=0,jlen=child.decorations.length;j<jlen;j++){var decoration=child.decorations[j];"@quotes"===decoration[0]&&"false"!==decoration[1]&&(quoteSwap=!0)}quoteSwap&&(punctInQuote?swapToTheLeft(child):swapToTheRight(child)),lastChar=this.fix(parent.blobs[i]),child.blobs&&"string"==typeof child.blobs&&(lastChar=child.blobs.slice(-1))}return lastChar};var LtoR_MAP={"!":{".":"!","?":"!?",":":"!",",":"!,",";":"!;"},"?":{"!":"?!",".":"?",":":"?",",":"?,",";":"?;"},".":{"!":".!","?":".?",":":".:",",":".,",";":".;"},":":{"!":"!","?":"?",".":":",",":":,",";":":;"},",":{"!":",!","?":",?",":":",:",".":",.",";":",;"},";":{"!":"!","?":"?",":":";",",":";,",".":";"}},SWAP_IN={},SWAP_OUT={},PUNCT={},PUNCT_OR_SPACE={};for(var key in LtoR_MAP)PUNCT[key]=!0,PUNCT_OR_SPACE[key]=!0,NO_SWAP_IN[key]||(SWAP_IN[key]=!0),NO_SWAP_OUT[key]||(SWAP_OUT[key]=!0);PUNCT_OR_SPACE[" "]=!0,PUNCT_OR_SPACE["\xa0"]=!0;var RtoL_MAP={};for(var key in LtoR_MAP)for(var subkey in LtoR_MAP[key])RtoL_MAP[subkey]||(RtoL_MAP[subkey]={}),RtoL_MAP[subkey][key]=LtoR_MAP[key][subkey];function blobIsNumber(blob){return"number"==typeof blob.num||blob.blobs&&1===blob.blobs.length&&"number"==typeof blob.blobs[0].num}function blobEndsInNumber(blob){return"number"==typeof blob.num||!(!blob.blobs||"object"!==_typeof(blob.blobs))&&(!!blobEndsInNumber(blob.blobs[blob.blobs.length-1])||void 0)}function blobHasDecorations(blob,includeQuotes){var ret=!1,decorlist=["@font-style","@font-variant","@font-weight","@text-decoration","@vertical-align"];if(includeQuotes&&decorlist.push("@quotes"),blob.decorations)for(var i=0,ilen=blob.decorations.length;i<ilen;i++)if(decorlist.indexOf(blob.decorations[i][0])>-1){ret=!0;break}return ret}function blobHasDescendantQuotes(blob){if(blob.decorations)for(var i=0,ilen=blob.decorations.length;i<ilen;i++)if("@quotes"===blob.decorations[i][0]&&"false"!==blob.decorations[i][1])return!0;return"object"===_typeof(blob.blobs)&&blobHasDescendantQuotes(blob.blobs[blob.blobs.length-1])}function blobHasDescendantMergingPunctuation(parentChar,blob){var childChar=blob.strings.suffix.slice(-1);childChar||"string"!=typeof blob.blobs||(childChar=blob.blobs.slice(-1));var mergedChars=RtoL_MAP[parentChar][childChar];return!(!mergedChars||1!==mergedChars.length)||"object"===_typeof(blob.blobs)&&!!blobHasDescendantMergingPunctuation(parentChar,blob.blobs[blob.blobs.length-1])}function matchLastChar(blob,chr){if(!PUNCT[chr])return!1;if("string"==typeof blob.blobs)return blob.blobs.slice(-1)===chr;var child=blob.blobs[blob.blobs.length-1];return!!child&&(child.strings.suffix.slice(-1)?child.strings.suffix.slice(-1)==chr:matchLastChar(child,chr))}function mergeChars(First,first,Second,second,merge_right){var FirstStrings="blobs"===first?First:First.strings,SecondStrings="blobs"===second?Second:Second.strings,firstChar=FirstStrings[first].slice(-1),secondChar=SecondStrings[second].slice(0,1);function cullRight(){SecondStrings[second]=SecondStrings[second].slice(1)}function cullLeft(){FirstStrings[first]=FirstStrings[first].slice(0,-1)}function addRight(chr){SecondStrings[second]=chr+SecondStrings[second]}function addLeft(chr){FirstStrings[first]+=chr}var match=merge_right?function(){return LtoR_MAP[firstChar]}:function(){return RtoL_MAP[secondChar]};var merge=merge_right?function(){var chr=LtoR_MAP[firstChar][secondChar];"string"==typeof chr?(cullLeft(),cullRight(),addRight(chr)):(addRight(firstChar),cullLeft())}:function(){var chr=RtoL_MAP[secondChar][firstChar];"string"==typeof chr?(cullLeft(),cullRight(),addLeft(chr)):(addLeft(secondChar),cullRight())};firstChar===secondChar?(merge_right?cullLeft:cullRight)():match()&&merge()}function swapToTheLeft(child){var childChar=child.strings.suffix.slice(0,1);if("string"==typeof child.blobs)for(;SWAP_IN[childChar];)mergeChars(child,"blobs",child,"suffix"),childChar=child.strings.suffix.slice(0,1);else for(;SWAP_IN[childChar];)mergeChars(child.blobs[child.blobs.length-1],"suffix",child,"suffix"),childChar=child.strings.suffix.slice(0,1)}function swapToTheRight(child){if("string"==typeof child.blobs)for(var childChar=child.blobs.slice(-1);SWAP_OUT[childChar];)mergeChars(child,"blobs",child,"suffix",!0),childChar=child.blobs.slice(-1);else for(childChar=child.blobs[child.blobs.length-1].strings.suffix.slice(-1);SWAP_OUT[childChar];)mergeChars(child.blobs[child.blobs.length-1],"suffix",child,"suffix",!0),childChar=child.blobs[child.blobs.length-1].strings.suffix.slice(-1)}},module.exports=CSL,CSL.Engine.Opt=function(){this.has_disambiguate=!1,this.mode="html",this.dates={},this.jurisdictions_seen={},this.suppressedJurisdictions={},this.inheritedAttributes={},this["locale-sort"]=[],this["locale-translit"]=[],this["locale-translat"]=[],this.citeAffixes={persons:{"locale-orig":{prefix:"",suffix:""},"locale-translit":{prefix:"",suffix:""},"locale-translat":{prefix:"",suffix:""}},institutions:{"locale-orig":{prefix:"",suffix:""},"locale-translit":{prefix:"",suffix:""},"locale-translat":{prefix:"",suffix:""}},titles:{"locale-orig":{prefix:"",suffix:""},"locale-translit":{prefix:"",suffix:""},"locale-translat":{prefix:"",suffix:""}},journals:{"locale-orig":{prefix:"",suffix:""},"locale-translit":{prefix:"",suffix:""},"locale-translat":{prefix:"",suffix:""}},publishers:{"locale-orig":{prefix:"",suffix:""},"locale-translit":{prefix:"",suffix:""},"locale-translat":{prefix:"",suffix:""}},places:{"locale-orig":{prefix:"",suffix:""},"locale-translit":{prefix:"",suffix:""},"locale-translat":{prefix:"",suffix:""}}},this["default-locale"]=[],this.update_mode=CSL.NONE,this.bib_mode=CSL.NONE,this.sort_citations=!1,this["et-al-min"]=0,this["et-al-use-first"]=1,this["et-al-use-last"]=!1,this["et-al-subsequent-min"]=!1,this["et-al-subsequent-use-first"]=!1,this["demote-non-dropping-particle"]="display-and-sort",this["parse-names"]=!0,this.citation_number_slug=!1,this.trigraph="Aaaa00:AaAa00:AaAA00:AAAA00",this.nodenames=[],this.gender={},this["cite-lang-prefs"]={persons:["orig"],institutions:["orig"],titles:["orig"],journals:["orig"],publishers:["orig"],places:["orig"],number:["orig"]},this.has_layout_locale=!1,this.development_extensions={},this.development_extensions.field_hack=!0,this.development_extensions.allow_field_hack_date_override=!0,this.development_extensions.locator_date_and_revision=!0,this.development_extensions.locator_parsing_for_plurals=!0,this.development_extensions.locator_label_parse=!0,this.development_extensions.raw_date_parsing=!0,this.development_extensions.clean_up_csl_flaws=!0,this.development_extensions.flip_parentheses_to_braces=!0,this.development_extensions.jurisdiction_subfield=!0,this.development_extensions.static_statute_locator=!1,this.development_extensions.csl_reverse_lookup_support=!1,this.development_extensions.clobber_locator_if_no_statute_section=!1,this.development_extensions.wrap_url_and_doi=!1,this.development_extensions.allow_force_lowercase=!1,this.development_extensions.handle_parallel_articles=!1,this.development_extensions.thin_non_breaking_space_html_hack=!1,this.development_extensions.apply_citation_wrapper=!1,this.development_extensions.main_title_from_short_title=!1,this.development_extensions.uppercase_subtitles=!1,this.development_extensions.normalize_lang_keys_to_lowercase=!1,this.development_extensions.strict_text_case_locales=!1,this.development_extensions.rtl_support=!1,this.development_extensions.expect_and_symbol_form=!1,this.development_extensions.require_explicit_legal_case_title_short=!1,this.development_extensions.spoof_institutional_affiliations=!1,this.development_extensions.force_jurisdiction=!1,this.development_extensions.parse_names=!0},CSL.Engine.Tmp=function(){this.names_max=new CSL.Stack,this.names_base=new CSL.Stack,this.givens_base=new CSL.Stack,this.value=[],this.namepart_decorations={},this.namepart_type=!1,this.area="citation",this.root="citation",this.extension="",this.can_substitute=new CSL.Stack(0,CSL.LITERAL),this.element_rendered_ok=!1,this.element_trace=new CSL.Stack("style"),this.nameset_counter=0,this.group_context=new CSL.Stack({term_intended:!1,variable_attempt:!1,variable_success:!1,output_tip:undefined,label_form:undefined,parallel_conditions:undefined,condition:!1,force_suppress:!1,done_vars:[]}),this.term_predecessor=!1,this.in_cite_predecessor=!1,this.jump=new CSL.Stack(0,CSL.LITERAL),this.decorations=new CSL.Stack,this.tokenstore_stack=new CSL.Stack,this.last_suffix_used="",this.last_names_used=[],this.last_years_used=[],this.years_used=[],this.names_used=[],this.taintedItemIDs={},this.taintedCitationIDs={},this.initialize_with=new CSL.Stack,this.disambig_request=!1,this["name-as-sort-order"]=!1,this.suppress_decorations=!1,this.disambig_settings=new CSL.AmbigConfig,this.bib_sort_keys=[],this.prefix=new CSL.Stack("",CSL.LITERAL),this.suffix=new CSL.Stack("",CSL.LITERAL),this.delimiter=new CSL.Stack("",CSL.LITERAL),this.cite_locales=[],this.cite_affixes={citation:!1,bibliography:!1,citation_sort:!1,bibliography_sort:!1},this.strip_periods=0,this.shadow_numbers={},this.authority_stop_last=0,this.loadedItemIDs={}},CSL.Engine.Fun=function(state){this.match=new CSL.Util.Match,this.suffixator=new CSL.Util.Suffixator(CSL.SUFFIX_CHARS),this.romanizer=new CSL.Util.Romanizer,this.ordinalizer=new CSL.Util.Ordinalizer(state),this.long_ordinalizer=new CSL.Util.LongOrdinalizer},CSL.Engine.Build=function(){this["alternate-term"]=!1,this.in_bibliography=!1,this.in_style=!1,this.skip=!1,this.postponed_macro=!1,this.layout_flag=!1,this.name=!1,this.form=!1,this.term=!1,this.macro={},this.macro_stack=[],this.text=!1,this.lang=!1,this.area="citation",this.root="citation",this.extension="",this.substitute_level=new CSL.Stack(0,CSL.LITERAL),this.names_level=0,this.render_nesting_level=0,this.render_seen=!1},CSL.Engine.Configure=function(){this.fail=[],this.succeed=[]},CSL.Engine.Citation=function(state){this.opt={inheritedAttributes:{}},this.tokens=[],this.srt=new CSL.Registry.Comparifier(state,"citation_sort"),this.opt.collapse=[],this.opt["disambiguate-add-names"]=!1,this.opt["disambiguate-add-givenname"]=!1,this.opt["disambiguate-add-year-suffix"]=!1,this.opt["givenname-disambiguation-rule"]="by-cite",this.opt["near-note-distance"]=5,this.opt.topdecor=[],this.opt.layout_decorations=[],this.opt.layout_prefix="",this.opt.layout_suffix="",this.opt.layout_delimiter="",this.opt.sort_locales=[],this.opt.max_number_of_names=0,this.root="citation"},CSL.Engine.Bibliography=function(){this.opt={inheritedAttributes:{}},this.tokens=[],this.opt.collapse=[],this.opt.topdecor=[],this.opt.layout_decorations=[],this.opt.layout_prefix="",this.opt.layout_suffix="",this.opt.layout_delimiter="",this.opt["line-spacing"]=1,this.opt["entry-spacing"]=1,this.opt.sort_locales=[],this.opt.max_number_of_names=0,this.root="bibliography"},CSL.Engine.BibliographySort=function(){this.tokens=[],this.opt={},this.opt.sort_directions=[],this.keys=[],this.opt.topdecor=[],this.root="bibliography"},CSL.Engine.CitationSort=function(){this.tokens=[],this.opt={},this.opt.sort_directions=[],this.keys=[],this.opt.topdecor=[],this.root="citation"},module.exports=CSL,CSL.Engine.prototype.previewCitationCluster=function(citation,citationsPre,citationsPost,newMode){var oldMode=this.opt.mode;this.setOutputFormat(newMode);var ret=this.processCitationCluster(citation,citationsPre,citationsPost,CSL.PREVIEW);return this.setOutputFormat(oldMode),ret[1]},CSL.Engine.prototype.appendCitationCluster=function(citation){for(var citationsPre=[],len=this.registry.citationreg.citationByIndex.length,pos=0;pos<len;pos+=1){var c=this.registry.citationreg.citationByIndex[pos];citationsPre.push([""+c.citationID,c.properties.noteIndex])}return this.processCitationCluster(citation,citationsPre,[])[1]},CSL.Engine.prototype.processCitationCluster=function(citation,citationsPre,citationsPost,flag){var c,j,jlen,k,klen,n,nlen,Item,item,noteCitations,textCitations,citationsInNote;this.debug=!1,this.tmp.loadedItemIDs={},this.tmp.citation_errors=[];var oldCitationList,oldItemList,oldAmbigs,return_data={bibchange:!1};if(this.setCitationId(citation),flag===CSL.PREVIEW){oldCitationList=this.registry.citationreg.citationByIndex.slice(),oldItemList=this.registry.reflist.slice();for(var newCitationList=citationsPre.concat([[""+citation.citationID,citation.properties.noteIndex]]).concat(citationsPost),newItemIds={},newItemIdsList=[],i=0,ilen=newCitationList.length;i<ilen;i+=1)for(j=0,jlen=(c=this.registry.citationreg.citationById[newCitationList[i][0]]).citationItems.length;j<jlen;j+=1)newItemIds[c.citationItems[j].id]=!0,newItemIdsList.push(""+c.citationItems[j].id);oldAmbigs={};for(i=0,ilen=oldItemList.length;i<ilen;i+=1)if(!newItemIds[oldItemList[i].id]){var oldAkey=this.registry.registry[oldItemList[i].id].ambig,ids=this.registry.ambigcites[oldAkey];if(ids)for(j=0,jlen=ids.length;j<jlen;j+=1)oldAmbigs[ids[j]]=CSL.cloneAmbigConfig(this.registry.registry[ids[j]].disambig)}}this.tmp.taintedCitationIDs={};var sortedItems=[],rerunAkeys={};for(i=0,ilen=citation.citationItems.length;i<ilen;i+=1){for(var key in item={},citation.citationItems[i])item[key]=citation.citationItems[i][key];var m;if((Item=this.retrieveItem(""+item.id)).id&&this.transform.loadAbbreviation("default","hereinafter",Item.id),item=CSL.parseLocator.call(this,item),this.opt.development_extensions.static_statute_locator&&this.remapSectionVariable([[Item,item]]),this.opt.development_extensions.locator_label_parse)if(item.locator&&-1===["bill","gazette","legislation","regulation","treaty"].indexOf(Item.type)&&(!item.label||"page"===item.label))if(m=CSL.LOCATOR_LABELS_REGEXP.exec(item.locator)){var tryLabel=CSL.LOCATOR_LABELS_MAP[m[2]];this.getTerm(tryLabel)&&(item.label=tryLabel,item.locator=m[3])}var newitem=[Item,item];sortedItems.push(newitem),citation.citationItems[i].item=Item}citation.sortedItems=sortedItems;var citationByIndex=[];for(i=0,ilen=citationsPre.length;i<ilen;i+=1)c=citationsPre[i],this.registry.citationreg.citationById[c[0]].properties.noteIndex=c[1],citationByIndex.push(this.registry.citationreg.citationById[c[0]]);citationByIndex.push(citation);for(i=0,ilen=citationsPost.length;i<ilen;i+=1)c=citationsPost[i],this.registry.citationreg.citationById[c[0]].properties.noteIndex=c[1],citationByIndex.push(this.registry.citationreg.citationById[c[0]]);this.registry.citationreg.citationByIndex=citationByIndex,this.registry.citationreg.citationsByItemId={},this.opt.update_mode===CSL.POSITION&&(textCitations=[],noteCitations=[],citationsInNote={});var citations,update_items=[];for(i=0,ilen=citationByIndex.length;i<ilen;i+=1){for(citationByIndex[i].properties||(citationByIndex[i].properties={}),citationByIndex[i].properties.index=i,j=0,jlen=citationByIndex[i].sortedItems.length;j<jlen;j+=1)item=citationByIndex[i].sortedItems[j],this.registry.citationreg.citationsByItemId[item[1].id]||(this.registry.citationreg.citationsByItemId[item[1].id]=[],update_items.push(""+item[1].id)),-1===this.registry.citationreg.citationsByItemId[item[1].id].indexOf(citationByIndex[i])&&this.registry.citationreg.citationsByItemId[item[1].id].push(citationByIndex[i]);this.opt.update_mode===CSL.POSITION&&(citationByIndex[i].properties.noteIndex?noteCitations.push(citationByIndex[i]):(citationByIndex[i].properties.noteIndex=0,textCitations.push(citationByIndex[i])))}if(flag!==CSL.ASSUME_ALL_ITEMS_REGISTERED&&this.updateItems(update_items,null,null,!0),!this.opt.citation_number_sort&&sortedItems&&sortedItems.length>1&&this.citation_sort.tokens.length>0){for(i=0,ilen=sortedItems.length;i<ilen;i+=1)sortedItems[i][1].sortkeys=CSL.getSortKeys.call(this,sortedItems[i][0],"citation_sort");if(this.opt.grouped_sort&&!citation.properties.unsorted){for(i=0,ilen=sortedItems.length;i<ilen;i+=1){var sortkeys=sortedItems[i][1].sortkeys;this.tmp.authorstring_request=!0;var mydisambig=this.registry.registry[sortedItems[i][0].id].disambig;this.tmp.authorstring_request=!0,CSL.getAmbiguousCite.call(this,sortedItems[i][0],mydisambig);var authorstring=this.registry.authorstrings[sortedItems[i][0].id];this.tmp.authorstring_request=!1,sortedItems[i][1].sortkeys=[authorstring].concat(sortkeys)}sortedItems.sort(this.citation.srt.compareCompositeKeys);var lastauthor=!1,thiskey=!1,thisauthor=!1;for(i=0,ilen=sortedItems.length;i<ilen;i+=1)sortedItems[i][1].sortkeys[0]!==lastauthor&&(thisauthor=sortedItems[i][1].sortkeys[0],thiskey=sortedItems[i][1].sortkeys[1]),sortedItems[i][1].sortkeys[0]=""+thiskey+i,lastauthor=thisauthor}citation.properties.unsorted||sortedItems.sort(this.citation.srt.compareCompositeKeys)}if(this.opt.update_mode===CSL.POSITION)for(i=0;i<2;i+=1){var first_ref={},last_ref={};for(j=0,jlen=(citations=[textCitations,noteCitations][i]).length;j<jlen;j+=1){var onecitation=citations[j];for(citations[j].properties.noteIndex||(citations[j].properties.noteIndex=0),citations[j].properties.noteIndex=parseInt(citations[j].properties.noteIndex,10),j>0&&citations[j-1].properties.noteIndex>citations[j].properties.noteIndex&&(citationsInNote={},first_ref={},last_ref={}),k=0,klen=onecitation.sortedItems.length;k<klen;k+=1)this.registry.registry[onecitation.sortedItems[k][1].id].parallel||(citationsInNote[onecitation.properties.noteIndex]?citationsInNote[onecitation.properties.noteIndex]+=1:citationsInNote[onecitation.properties.noteIndex]=1);for(k=0,klen=citations[j].sortedItems.length;k<klen;k+=1){var incitationid,myid=(item=citations[j].sortedItems[k])[0].id,mylocator=item[1].locator,mylabel=item[1].label;if(item[0].legislation_id&&(myid=item[0].legislation_id),k>0&&(incitationid=onecitation.sortedItems[k-1][0].legislation_id?onecitation.sortedItems[k-1][0].legislation_id:onecitation.sortedItems[k-1][1].id),flag!==CSL.PREVIEW||onecitation.citationID==citation.citationID){var oldlastid,oldvalue={};if(oldvalue.position=item[1].position,oldvalue["first-reference-note-number"]=item[1]["first-reference-note-number"],oldvalue["near-note"]=item[1]["near-note"],item[1]["first-reference-note-number"]=0,item[1]["near-note"]=!1,this.registry.citationreg.citationsByItemId[myid]&&"note"===this.opt.xclass&&this.opt.has_disambiguate){var oldCount=this.registry.registry[myid]["citation-count"],newCount=this.registry.citationreg.citationsByItemId[myid].length;if(this.registry.registry[myid]["citation-count"]=this.registry.citationreg.citationsByItemId[myid].length,"number"==typeof oldCount){if(oldCount<2!==newCount<2)for(var l=0,llen=this.registry.citationreg.citationsByItemId[myid].length;l<llen;l++)rerunAkeys[this.registry.registry[myid].ambig]=!0,this.tmp.taintedCitationIDs[this.registry.citationreg.citationsByItemId[myid][l].citationID]=!0}else for(l=0,llen=this.registry.citationreg.citationsByItemId[myid].length;l<llen;l++)rerunAkeys[this.registry.registry[myid].ambig]=!0,this.tmp.taintedCitationIDs[this.registry.citationreg.citationsByItemId[myid][l].citationID]=!0}if("undefined"==typeof first_ref[myid])first_ref[myid]=onecitation.properties.noteIndex,this.registry.registry[myid]&&(this.registry.registry[myid]["first-reference-note-number"]=onecitation.properties.noteIndex),last_ref[myid]=onecitation.properties.noteIndex,item[1].position=CSL.POSITION_FIRST;else{var prev,prev_locator,prev_label,curr_locator,ibidme=!1,suprame=!1;if(j>0&&(oldlastid=citations[j-1].sortedItems.slice(-1)[0][1].id,citations[j-1].sortedItems[0].slice(-1)[0].legislation_id&&(oldlastid=citations[j-1].sortedItems[0].slice(-1)[0].legislation_id)),j>0&&0===parseInt(k,10)&&citations[j-1].properties.noteIndex!==citations[j].properties.noteIndex){var items=citations[j-1].sortedItems,useme=!1,oldid=citations[j-1].sortedItems[0][0].id;for(citations[j-1].sortedItems[0][0].legislation_id&&(oldid=citations[j-1].sortedItems[0][0].legislation_id),(oldid==myid&&citations[j-1].properties.noteIndex>=citations[j].properties.noteIndex-1||citations[j-1].sortedItems[0][1].id==this.registry.registry[item[1].id].parallel)&&(1!==citationsInNote[citations[j-1].properties.noteIndex]&&0!==citations[j-1].properties.noteIndex||(useme=!0)),n=0,nlen=items.slice(1).length;n<nlen;n+=1){var itmp=items.slice(1)[n];this.registry.registry[itmp[1].id].parallel&&this.registry.registry[itmp[1].id].parallel!=this.registry.registry[itmp[1].id]||(useme=!1)}useme?ibidme=!0:suprame=!0}else k>0&&incitationid==myid?ibidme=!0:0===k&&citations[j-1].properties.noteIndex==citations[j].properties.noteIndex&&citations[j-1].sortedItems.length&&oldlastid==myid?ibidme=!0:suprame=!0;if(ibidme&&((prev=k>0?onecitation.sortedItems[k-1][1]:citations[j-1].sortedItems[0][1]).locator?(prev_label=prev.label?prev.label:"",prev_locator=""+prev.locator+prev_label):prev_locator=prev.locator,curr_locator=mylocator?""+mylocator+(mylabel||""):mylocator),ibidme&&prev_locator&&!curr_locator&&(ibidme=!1,suprame=!0),ibidme&&(!prev_locator&&curr_locator?item[1].position=CSL.POSITION_IBID_WITH_LOCATOR:prev_locator||curr_locator?prev_locator&&curr_locator===prev_locator?item[1].position=CSL.POSITION_IBID:prev_locator&&curr_locator&&curr_locator!==prev_locator?item[1].position=CSL.POSITION_IBID_WITH_LOCATOR:(ibidme=!1,suprame=!0):item[1].position=CSL.POSITION_IBID),suprame&&(item[1].position=CSL.POSITION_SUBSEQUENT),(suprame||ibidme)&&first_ref[myid]!=onecitation.properties.noteIndex&&(item[1]["first-reference-note-number"]=first_ref[myid],this.registry.registry[myid])){var oldFirst=this.registry.citationreg.citationsByItemId[myid][0].properties.noteIndex,newFirst=onecitation.properties.noteIndex;this.registry.registry[myid]["first-reference-note-number"]=newFirst<oldFirst?newFirst:oldFirst}}if(onecitation.properties.noteIndex){var note_distance=parseInt(onecitation.properties.noteIndex,10)-parseInt(last_ref[myid],10);item[1].position!==CSL.POSITION_FIRST&&note_distance<=this.citation.opt["near-note-distance"]&&(item[1]["near-note"]=!0),last_ref[myid]=onecitation.properties.noteIndex}if(onecitation.citationID!=citation.citationID)for(n=0,nlen=CSL.POSITION_TEST_VARS.length;n<nlen;n+=1){var param=CSL.POSITION_TEST_VARS[n];item[1][param]!==oldvalue[param]&&(this.registry.registry[myid]&&"first-reference-note-number"===param&&(rerunAkeys[this.registry.registry[myid].ambig]=!0,this.tmp.taintedItemIDs[myid]=!0),this.tmp.taintedCitationIDs[onecitation.citationID]=!0)}this.sys.variableWrapper&&(item[1].index=onecitation.properties.index,item[1].noteIndex=onecitation.properties.noteIndex)}else"undefined"==typeof first_ref[item[1].id]?(first_ref[myid]=onecitation.properties.noteIndex,last_ref[myid]=onecitation.properties.noteIndex):last_ref[myid]=onecitation.properties.noteIndex}}}if(this.opt.citation_number_sort&&sortedItems&&sortedItems.length>1&&this.citation_sort.tokens.length>0&&!citation.properties.unsorted){for(i=0,ilen=sortedItems.length;i<ilen;i+=1)sortedItems[i][1].sortkeys=CSL.getSortKeys.call(this,sortedItems[i][0],"citation_sort");sortedItems.sort(this.citation.srt.compareCompositeKeys)}for(var key in this.tmp.taintedItemIDs)if(this.tmp.taintedItemIDs.hasOwnProperty(key)&&(citations=this.registry.citationreg.citationsByItemId[key]))for(i=0,ilen=citations.length;i<ilen;i+=1)this.tmp.taintedCitationIDs[citations[i].citationID]=!0;var ret=[];if(flag===CSL.PREVIEW){try{ret=this.process_CitationCluster.call(this,citation.sortedItems,citation.citationID)}catch(e){CSL.error("Error running CSL processor for preview: "+e)}this.registry.citationreg.citationByIndex=oldCitationList,this.registry.citationreg.citationById={};for(i=0,ilen=oldCitationList.length;i<ilen;i+=1)this.registry.citationreg.citationById[oldCitationList[i].citationID]=oldCitationList[i];var oldItemIds=[];for(i=0,ilen=oldItemList.length;i<ilen;i+=1)oldItemIds.push(""+oldItemList[i].id);for(var key in this.updateItems(oldItemIds,null,null,!0),oldAmbigs)oldAmbigs.hasOwnProperty(key)&&(this.registry.registry[key].disambig=oldAmbigs[key])}else{for(var rerunAkey in rerunAkeys)this.disambiguate.run(rerunAkey,citation);var obj;for(var key in this.tmp.taintedCitationIDs)if(key!=citation.citationID){var mycitation=this.registry.citationreg.citationById[key];if(!mycitation.properties.unsorted){for(i=0,ilen=mycitation.sortedItems.length;i<ilen;i+=1)mycitation.sortedItems[i][1].sortkeys=CSL.getSortKeys.call(this,mycitation.sortedItems[i][0],"citation_sort");mycitation.sortedItems.sort(this.citation.srt.compareCompositeKeys)}this.tmp.citation_pos=mycitation.properties.index,this.tmp.citation_note_index=mycitation.properties.noteIndex,this.tmp.citation_id=""+mycitation.citationID,(obj=[]).push(mycitation.properties.index),obj.push(this.process_CitationCluster.call(this,mycitation.sortedItems,mycitation.citationID)),obj.push(mycitation.citationID),ret.push(obj)}this.tmp.taintedItemIDs={},this.tmp.taintedCitationIDs={},this.tmp.citation_pos=citation.properties.index,this.tmp.citation_note_index=citation.properties.noteIndex,this.tmp.citation_id=""+citation.citationID,(obj=[]).push(citationsPre.length),obj.push(this.process_CitationCluster.call(this,sortedItems,citation.citationID)),obj.push(citation.citationID),ret.push(obj),ret.sort(function(a,b){return a[0]>b[0]?1:a[0]<b[0]?-1:0})}return return_data.citation_errors=this.tmp.citation_errors.slice(),[return_data,ret]},CSL.Engine.prototype.process_CitationCluster=function(sortedItems,citationID){return this.parallel.StartCitation(sortedItems),CSL.getCitationCluster.call(this,sortedItems,citationID)},CSL.Engine.prototype.makeCitationCluster=function(rawList){var inputList,newitem,pos,len,item,Item;for(inputList=[],len=rawList.length,pos=0;pos<len;pos+=1){for(var key in item={},rawList[pos])item[key]=rawList[pos][key];if(Item=this.retrieveItem(""+item.id),this.opt.development_extensions.locator_label_parse&&item.locator&&-1===["bill","gazette","legislation","regulation","treaty"].indexOf(Item.type)&&(!item.label||"page"===item.label)){var m=CSL.LOCATOR_LABELS_REGEXP.exec(item.locator);if(m){var tryLabel=CSL.LOCATOR_LABELS_MAP[m[2]];this.getTerm(tryLabel)&&(item.label=tryLabel,item.locator=m[3])}}item.locator&&(item.locator=(""+item.locator).replace(/\s+$/,"")),newitem=[Item,item],inputList.push(newitem)}if(this.opt.development_extensions.static_statute_locator&&this.remapSectionVariable(inputList),inputList&&inputList.length>1&&this.citation_sort.tokens.length>0){for(len=inputList.length,pos=0;pos<len;pos+=1)inputList[pos][1].sortkeys=CSL.getSortKeys.call(this,inputList[pos][0],"citation_sort");inputList.sort(this.citation.srt.compareCompositeKeys)}return this.tmp.citation_errors=[],this.parallel.StartCitation(inputList),CSL.getCitationCluster.call(this,inputList)},CSL.getAmbiguousCite=function(Item,disambig,visualForm,item){var flags=this.tmp.group_context.tip,oldTermSiblingLayer={term_intended:flags.term_intended,variable_attempt:flags.variable_attempt,variable_success:flags.variable_success,output_tip:flags.output_tip,label_form:flags.label_form,parallel_conditions:flags.parallel_conditions,condition:flags.condition,force_suppress:flags.force_suppress,done_vars:flags.done_vars.slice()};this.tmp.disambig_request=disambig||!1;var itemSupp={position:1,"near-note":!0};item&&(itemSupp.locator=item.locator,itemSupp.label=item.label),this.registry.registry[Item.id]&&this.registry.citationreg.citationsByItemId&&this.registry.citationreg.citationsByItemId[Item.id]&&this.registry.citationreg.citationsByItemId[Item.id].length&&visualForm&&"by-cite"===this.citation.opt["givenname-disambiguation-rule"]&&(itemSupp["first-reference-note-number"]=this.registry.registry[Item.id]["first-reference-note-number"]),this.tmp.area="citation",this.tmp.root="citation",this.parallel.use_parallels=(!0===this.parallel.use_parallels||null===this.parallel.use_parallels)&&null,this.tmp.suppress_decorations=!0,this.tmp.just_looking=!0,CSL.getCite.call(this,Item,itemSupp,null,!1);for(var i=0,ilen=this.output.queue.length;i<ilen;i+=1)CSL.Output.Queue.purgeEmptyBlobs(this.output.queue[i]);if(this.opt.development_extensions.clean_up_csl_flaws)for(var j=0,jlen=this.output.queue.length;j<jlen;j+=1)this.output.adjust.upward(this.output.queue[j]),this.output.adjust.leftward(this.output.queue[j]),this.output.adjust.downward(this.output.queue[j]),this.output.adjust.fix(this.output.queue[j]);var ret=this.output.string(this,this.output.queue);return this.tmp.just_looking=!1,this.tmp.suppress_decorations=!1,this.parallel.use_parallels=null===this.parallel.use_parallels,this.tmp.group_context.replace(oldTermSiblingLayer),ret},CSL.getSpliceDelimiter=function(last_collapsed,pos){if(last_collapsed&&!this.tmp.have_collapsed&&"string"==typeof this.citation.opt["after-collapse-delimiter"])this.tmp.splice_delimiter=this.citation.opt["after-collapse-delimiter"];else if(this.tmp.use_cite_group_delimiter)this.tmp.splice_delimiter=this.citation.opt.cite_group_delimiter;else if(this.tmp.have_collapsed&&"in-text"===this.opt.xclass&&this.opt.update_mode!==CSL.NUMERIC)this.tmp.splice_delimiter=", ";else if(this.tmp.cite_locales[pos-1]){var alt_affixes=this.tmp.cite_affixes[this.tmp.area][this.tmp.cite_locales[pos-1]];alt_affixes&&alt_affixes.delimiter&&(this.tmp.splice_delimiter=alt_affixes.delimiter)}else this.tmp.splice_delimiter||(this.tmp.splice_delimiter="");return this.tmp.splice_delimiter},CSL.getCitationCluster=function(inputList,citationID){var result,objects,myparams,len,pos,item,last_collapsed,params,composite,compie,myblobs,Item,llen,ppos,obj,preceding_item,txt_esc,error_object;inputList=inputList||[],this.tmp.last_primary_names_string=!1,txt_esc=CSL.getSafeEscape(this),this.tmp.area="citation",this.tmp.root="citation",result="",objects=[],this.tmp.last_suffix_used="",this.tmp.last_names_used=[],this.tmp.last_years_used=[],this.tmp.backref_index=[],this.tmp.cite_locales=[],this.output.checkNestedBrace=new CSL.checkNestedBrace(this);var use_layout_prefix=this.output.checkNestedBrace.update(this.citation.opt.layout_prefix),suppressTrailingPunctuation=!1;if("note"===this.opt.xclass&&this.citation.opt.suppressTrailingPunctuation&&(suppressTrailingPunctuation=!0),citationID&&this.registry.citationreg.citationById[citationID].properties["suppress-trailing-punctuation"]&&(suppressTrailingPunctuation=!0),"note"===this.opt.xclass){for(var parasets=[],lastTitle=!1,lastID=!1,lst=[],i=0,ilen=inputList.length;i<ilen;i+=1){var type=inputList[i][0].type,title=inputList[i][0].title,position=inputList[i][1].position,id=inputList[i][0].id;title&&"legal_case"===type&&id!==lastID&&position&&(title===lastTitle&&0!==parasets.length||(lst=[],parasets.push(lst)),lst.push(inputList[i][1])),lastTitle=title,position,lastID=id}for(i=0,ilen=parasets.length;i<ilen;i+=1)if(!((lst=parasets[i]).length<2)){var locatorInLastPosition=lst.slice(-1)[0].locator;if(locatorInLastPosition)for(var j=0,jlen=lst.length-1;j<jlen;j+=1)lst[j].locator&&(locatorInLastPosition=!1);locatorInLastPosition&&(lst[0].locator=locatorInLastPosition,delete lst.slice(-1)[0].locator,lst[0].label=lst.slice(-1)[0].label,lst.slice(-1)[0].label&&delete lst.slice(-1)[0].label)}}for(myparams=[],len=inputList.length,pos=0;pos<len;pos+=1){if(Item=inputList[pos][0],item=inputList[pos][1],item=CSL.parseLocator.call(this,item),last_collapsed=this.tmp.have_collapsed,params={},this.tmp.shadow_numbers={},!this.tmp.just_looking&&this.opt.hasPlaceholderTerm){var output=this.output;this.output=new CSL.Output.Queue(this),this.output.adjust=new CSL.Output.Queue.adjust,CSL.getAmbiguousCite.call(this,Item,null,!1,item),this.output=output}if(this.tmp.in_cite_predecessor=!1,pos>0?CSL.getCite.call(this,Item,item,""+inputList[pos-1][0].id,!0):(this.tmp.term_predecessor=!1,CSL.getCite.call(this,Item,item,null,!0)),this.tmp.cite_renders_content||(error_object={citationID:""+this.tmp.citation_id,index:this.tmp.citation_pos,noteIndex:this.tmp.citation_note_index,itemID:""+Item.id,citationItems_pos:pos,error_code:CSL.ERROR_NO_RENDERED_FORM},this.tmp.citation_errors.push(error_object)),pos===inputList.length-1&&this.parallel.ComposeSet(),params.splice_delimiter=CSL.getSpliceDelimiter.call(this,last_collapsed,pos),item&&item["author-only"]&&(this.tmp.suppress_decorations=!0),pos>0){var precedingEndsInPeriodOrComma=(preceding_item=inputList[pos-1][1]).suffix&&[".",","].indexOf(preceding_item.suffix.slice(-1))>-1,currentStartsWithPeriodOrComma=!preceding_item.suffix&&item.prefix&&[".",","].indexOf(item.prefix.slice(0,1))>-1;if(precedingEndsInPeriodOrComma||currentStartsWithPeriodOrComma){var spaceidx=params.splice_delimiter.indexOf(" ");params.splice_delimiter=spaceidx>-1&&!currentStartsWithPeriodOrComma?params.splice_delimiter.slice(spaceidx):""}}params.suppress_decorations=this.tmp.suppress_decorations,params.have_collapsed=this.tmp.have_collapsed,myparams.push(params)}this.tmp.has_purged_parallel=!1,this.parallel.PruneOutputQueue(this),myblobs=this.output.queue.slice();this.citation.opt.layout_suffix,this.citation.opt.layout_delimiter;var suffix=this.citation.opt.layout_suffix,last_locale=this.tmp.cite_locales[this.tmp.cite_locales.length-1];last_locale&&this.tmp.cite_affixes[this.tmp.area][last_locale]&&this.tmp.cite_affixes[this.tmp.area][last_locale].suffix&&(suffix=this.tmp.cite_affixes[this.tmp.area][last_locale].suffix),CSL.TERMINAL_PUNCTUATION.slice(0,-1).indexOf(suffix.slice(0,1))>-1&&(suffix=suffix.slice(0,1));var delimiter=this.citation.opt.layout_delimiter;delimiter||(delimiter=""),CSL.TERMINAL_PUNCTUATION.slice(0,-1).indexOf(delimiter.slice(0,1))>-1&&(delimiter=delimiter.slice(0,1)),suffix=this.output.checkNestedBrace.update(suffix);for(i=0,ilen=this.output.queue.length;i<ilen;i+=1)CSL.Output.Queue.purgeEmptyBlobs(this.output.queue[i]);if(!this.tmp.suppress_decorations&&this.output.queue.length&&(this.opt.development_extensions.apply_citation_wrapper&&this.sys.wrapCitationEntry&&!this.tmp.just_looking&&"citation"===this.tmp.area||(suppressTrailingPunctuation||(this.output.queue[this.output.queue.length-1].strings.suffix=suffix),this.output.queue[0].strings.prefix=use_layout_prefix)),this.opt.development_extensions.clean_up_csl_flaws)for(j=0,jlen=this.output.queue.length;j<jlen;j+=1)this.output.adjust.upward(this.output.queue[j]),this.output.adjust.leftward(this.output.queue[j]),this.output.adjust.downward(this.output.queue[j]),this.tmp.last_chr=this.output.adjust.fix(this.output.queue[j]);for(pos=0,len=myblobs.length;pos<len;pos+=1){var buffer=[];if(this.output.queue=[myblobs[pos]],this.tmp.suppress_decorations=myparams[pos].suppress_decorations,this.tmp.splice_delimiter=myparams[pos].splice_delimiter,myblobs[pos].parallel_delimiter&&(this.tmp.splice_delimiter=myblobs[pos].parallel_delimiter),this.tmp.have_collapsed=myparams[pos].have_collapsed,composite=this.output.string(this,this.output.queue),this.tmp.suppress_decorations=!1,"string"==typeof composite)return this.tmp.suppress_decorations=!1,composite;if("object"===_typeof(composite)&&0===composite.length&&!item["suppress-author"])if(this.tmp.has_purged_parallel)composite.push("");else{var preStr=0===pos?txt_esc(this.citation.opt.layout_prefix):"",sufStr=pos===myblobs.length-1?txt_esc(this.citation.opt.layout_suffix):"";composite.push(preStr+"[CSL STYLE ERROR: reference with no printed form.]"+sufStr)}if(buffer.length&&"string"==typeof composite[0]){composite.reverse();var tmpstr=composite.pop();tmpstr&&","===tmpstr.slice(0,1)?buffer.push(tmpstr):"string"==typeof buffer.slice(-1)[0]&&","===buffer.slice(-1)[0].slice(-1)?buffer.push(" "+tmpstr):tmpstr&&buffer.push(txt_esc(this.tmp.splice_delimiter)+tmpstr)}else composite.reverse(),void 0!==(compie=composite.pop())&&(buffer.length&&"string"==typeof buffer[buffer.length-1]&&(buffer[buffer.length-1]+=compie.successor_prefix),buffer.push(compie));for(llen=composite.length,ppos=0;ppos<llen;ppos+=1)"string"!=typeof(obj=composite[ppos])?void 0!==(compie=composite.pop())&&buffer.push(compie):buffer.push(txt_esc(this.tmp.splice_delimiter)+obj);0!==buffer.length||inputList[pos][1]["suppress-author"]||1,buffer.length>1&&"string"!=typeof buffer[0]&&(buffer=[this.output.renderBlobs(buffer)]),buffer.length&&("string"==typeof buffer[0]?pos>0&&(myblobs.length-1>pos&&myparams[pos+1].have_collapsed&&!myparams[pos].have_collapsed&&(this.tmp.splice_delimiter=myparams[pos-1].splice_delimiter),buffer[0]=txt_esc(this.tmp.splice_delimiter)+buffer[0]):buffer[0].splice_prefix=pos>0?this.tmp.splice_delimiter:""),objects=objects.concat(buffer)}if((result+=this.output.renderBlobs(objects))&&!this.tmp.suppress_decorations)for(len=this.citation.opt.layout_decorations.length,pos=0;pos<len;pos+=1)"normal"!==(params=this.citation.opt.layout_decorations[pos])[1]&&(item&&item["author-only"]||(result=this.fun.decorate[params[0]][params[1]](this,result)));return this.tmp.suppress_decorations=!1,result},CSL.getCite=function(Item,item,prevItemID,blockShadowNumberReset){var next,error_object;for(this.tmp.cite_renders_content=!1,this.parallel.StartCite(Item,item,prevItemID),CSL.citeStart.call(this,Item,item,blockShadowNumberReset),next=0,this.tmp.name_node={},this.nameOutput=new CSL.NameOutput(this,Item,item);next<this[this.tmp.area].tokens.length;)next=CSL.tokenExec.call(this,this[this.tmp.area].tokens[next],Item,item);return CSL.citeEnd.call(this,Item,item),this.parallel.CloseCite(this),this.tmp.cite_renders_content||this.tmp.just_looking||"bibliography"===this.tmp.area&&(error_object={index:this.tmp.bibliography_pos,itemID:""+Item.id,error_code:CSL.ERROR_NO_RENDERED_FORM},this.tmp.bibliography_errors.push(error_object)),""+Item.id},CSL.citeStart=function(Item,item,blockShadowNumberReset){if(blockShadowNumberReset||(this.tmp.shadow_numbers={}),this.tmp.disambiguate_count=0,this.tmp.disambiguate_maxMax=0,this.tmp.same_author_as_previous_cite=!1,this.tmp.suppress_decorations?this.tmp.subsequent_author_substitute_ok=!1:this.tmp.subsequent_author_substitute_ok=!0,this.tmp.lastchr="","citation"===this.tmp.area&&this.citation.opt.collapse&&this.citation.opt.collapse.length?this.tmp.have_collapsed=!0:this.tmp.have_collapsed=!1,this.tmp.render_seen=!1,this.tmp.disambig_request&&!this.tmp.disambig_override?this.tmp.disambig_settings=this.tmp.disambig_request:this.registry.registry[Item.id]&&!this.tmp.disambig_override?(this.tmp.disambig_request=this.registry.registry[Item.id].disambig,this.tmp.disambig_settings=this.registry.registry[Item.id].disambig):this.tmp.disambig_settings=new CSL.AmbigConfig,"citation"!==this.tmp.area)if(this.registry.registry[Item.id]){if(this.tmp.disambig_restore=CSL.cloneAmbigConfig(this.registry.registry[Item.id].disambig),"bibliography"===this.tmp.area&&this.tmp.disambig_settings&&this.tmp.disambig_override&&(this.opt["disambiguate-add-names"]&&(this.tmp.disambig_settings.names=this.registry.registry[Item.id].disambig.names.slice(),this.tmp.disambig_request&&(this.tmp.disambig_request.names=this.registry.registry[Item.id].disambig.names.slice())),this.opt["disambiguate-add-givenname"])){this.tmp.disambig_request=this.tmp.disambig_settings,this.tmp.disambig_settings.givens=this.registry.registry[Item.id].disambig.givens.slice(),this.tmp.disambig_request.givens=this.registry.registry[Item.id].disambig.givens.slice();for(var i=0,ilen=this.tmp.disambig_settings.givens.length;i<ilen;i+=1)this.tmp.disambig_settings.givens[i]=this.registry.registry[Item.id].disambig.givens[i].slice();for(i=0,ilen=this.tmp.disambig_request.givens.length;i<ilen;i+=1)this.tmp.disambig_request.givens[i]=this.registry.registry[Item.id].disambig.givens[i].slice()}}else this.tmp.disambig_restore=new CSL.AmbigConfig;this.tmp.names_used=[],this.tmp.nameset_counter=0,this.tmp.years_used=[],this.tmp.names_max.clear(),this.tmp.splice_delimiter=this[this.tmp.area].opt.layout_delimiter,this.bibliography_sort.keys=[],this.citation_sort.keys=[],this.tmp.has_done_year_suffix=!1,this.tmp.last_cite_locale=!1,!this.tmp.just_looking&&item&&!item.position&&this.registry.registry[Item.id]&&(this.tmp.disambig_restore=CSL.cloneAmbigConfig(this.registry.registry[Item.id].disambig)),this.tmp.first_name_string=!1,this.tmp.authority_stop_last=0},CSL.citeEnd=function(Item,item){if(this.tmp.disambig_restore&&this.registry.registry[Item.id]){this.registry.registry[Item.id].disambig.names=this.tmp.disambig_restore.names.slice(),this.registry.registry[Item.id].disambig.givens=this.tmp.disambig_restore.givens.slice();for(var i=0,ilen=this.registry.registry[Item.id].disambig.givens.length;i<ilen;i+=1)this.registry.registry[Item.id].disambig.givens[i]=this.tmp.disambig_restore.givens[i].slice()}if(this.tmp.disambig_restore=!1,item&&item.suffix?this.tmp.last_suffix_used=item.suffix:this.tmp.last_suffix_used="",this.tmp.last_years_used=this.tmp.years_used.slice(),this.tmp.last_names_used=this.tmp.names_used.slice(),this.tmp.cut_var=!1,this.tmp.disambig_request=!1,this.tmp.cite_locales.push(this.tmp.last_cite_locale),this.tmp.issued_date&&this.tmp.renders_collection_number){var buf=[];for(i=this.tmp.issued_date.list.length-1;i>this.tmp.issued_date.pos;i+=-1)buf.push(this.tmp.issued_date.list.pop());for(this.tmp.issued_date.list.pop(),i=buf.length-1;i>-1;i+=-1)this.tmp.issued_date.list.push(buf.pop());this.parallel.use_parallels&&(this.parallel.cite.issued=!1)}this.tmp.issued_date=!1,this.tmp.renders_collection_number=!1},module.exports=CSL,CSL.Engine.prototype.makeBibliography=function(bibsection){var ret,params,item,len,pos,entry_ids,entry_strings;if(!1,!this.bibliography.tokens.length)return!1;"string"==typeof bibsection&&(this.opt.citation_number_slug=bibsection,bibsection=!1),entry_ids=(ret=CSL.getBibliographyEntries.call(this,bibsection))[0],entry_strings=ret[1];var done=ret[2];for(params={maxoffset:0,entryspacing:this.bibliography.opt["entry-spacing"],linespacing:this.bibliography.opt["line-spacing"],"second-field-align":!1,entry_ids:entry_ids,bibliography_errors:this.tmp.bibliography_errors.slice(),done:done},this.bibliography.opt["second-field-align"]&&(params["second-field-align"]=this.bibliography.opt["second-field-align"]),0,len=this.registry.reflist.length,pos=0;pos<len;pos+=1)(item=this.registry.reflist[pos]).offset>params.maxoffset&&(params.maxoffset=item.offset);return this.bibliography.opt.hangingindent&&(params.hangingindent=this.bibliography.opt.hangingindent),params.bibstart=this.fun.decorate.bibstart,params.bibend=this.fun.decorate.bibend,this.opt.citation_number_slug=!1,[params,entry_strings]},CSL.getBibliographyEntries=function(bibsection){var ret,input,include,anymatch,allmatch,bib_entry,item,spec,lllen,pppos,topblobs,entry_item_ids,collapse_parallel,skips,sortedItems,eyetem,entry_item_data,page_item_count;function eval_string(a,b){return a===b}function eval_spec(a,b){return!("none"!==a&&a||b)||("string"==typeof b?eval_string(a,b):!!b&&function(a,lst){for(lllen=lst.length,pppos=0;pppos<lllen;pppos+=1)if(eval_string(a,lst[pppos]))return!0;return!1}(a,b))}if(ret=[],entry_item_data=[],this.tmp.area="bibliography",this.tmp.root="bibliography",this.tmp.last_rendered_name=!1,this.tmp.bibliography_errors=[],this.tmp.bibliography_pos=0,input=bibsection&&bibsection.page_start&&bibsection.page_length?this.registry.getSortedIds():this.retrieveItems(this.registry.getSortedIds()),this.tmp.disambig_override=!0,skips={},bibsection&&bibsection.page_start&&bibsection.page_length&&(page_item_count=0,!0!==bibsection.page_start))for(var i=0,ilen=input.length;i<ilen&&(skips[input[i]]=!0,bibsection.page_start!=input[i]);i+=1);var processed_item_ids=[];for(i=0,ilen=input.length;i<ilen;i+=1){if(bibsection&&bibsection.page_start&&bibsection.page_length){if(skips[input[i]])continue;if(item=this.retrieveItem(input[i]),page_item_count===bibsection.page_length)break}else if(skips[(item=input[i]).id])continue;if(bibsection){if(include=!0,bibsection.include){for(include=!1,j=0,jlen=bibsection.include.length;j<jlen;j+=1)if(eval_spec((spec=bibsection.include[j]).value,item[spec.field])){include=!0;break}}else if(bibsection.exclude){for(anymatch=!1,j=0,jlen=bibsection.exclude.length;j<jlen;j+=1)if(eval_spec((spec=bibsection.exclude[j]).value,item[spec.field])){anymatch=!0;break}anymatch&&(include=!1)}else if(bibsection.select){for(include=!1,allmatch=!0,j=0,jlen=bibsection.select.length;j<jlen;j+=1)eval_spec((spec=bibsection.select[j]).value,item[spec.field])||(allmatch=!1);allmatch&&(include=!0)}if(bibsection.quash){for(allmatch=!0,j=0,jlen=bibsection.quash.length;j<jlen;j+=1)eval_spec((spec=bibsection.quash[j]).value,item[spec.field])||(allmatch=!1);allmatch&&(include=!1)}if(!include)continue}if((bib_entry=new CSL.Token("group",CSL.START)).decorations=[["@bibliography","entry"]].concat(this.bibliography.opt.layout_decorations),this.output.startTag("bib_entry",bib_entry),item.system_id&&this.sys.embedBibliographyEntry?this.output.current.value().item_id=item.system_id:this.output.current.value().system_id=item.id,sortedItems=[[{id:""+item.id},item]],entry_item_ids=[],!this.registry.registry[item.id].master||bibsection&&bibsection.page_start&&bibsection.page_length)this.registry.registry[item.id].siblings||(this.parallel.StartCitation(sortedItems),this.tmp.term_predecessor=!1,entry_item_ids.push(""+CSL.getCite.call(this,item)),bibsection&&bibsection.page_start&&bibsection.page_length&&(page_item_count+=1));else{for(collapse_parallel=!0,this.parallel.StartCitation(sortedItems),this.output.queue[0].strings.delimiter=", ",this.tmp.term_predecessor=!1,entry_item_ids.push(""+CSL.getCite.call(this,item)),skips[item.id]=!0,j=0,jlen=this.registry.registry[item.id].siblings.length;j<jlen;j+=1){var k=this.registry.registry[item.id].siblings[j];eyetem=this.retrieveItem(k),entry_item_ids.push(""+CSL.getCite.call(this,eyetem)),skips[eyetem.id]=!0}this.parallel.ComposeSet(),this.parallel.PruneOutputQueue()}entry_item_data.push(""),this.tmp.bibliography_pos+=1,processed_item_ids.push(entry_item_ids),this.output.endTag("bib_entry"),this.output.queue[0].blobs.length&&this.output.queue[0].blobs[0].blobs.length&&(collapse_parallel||!this.output.queue[0].blobs[0].blobs[0].strings?(topblobs=this.output.queue[0].blobs,collapse_parallel=!1):topblobs=this.output.queue[0].blobs[0].blobs,topblobs[0].strings.prefix=this.bibliography.opt.layout_prefix+topblobs[0].strings.prefix);for(var j=0,jlen=this.output.queue.length;j<jlen;j+=1)CSL.Output.Queue.purgeEmptyBlobs(this.output.queue[j]);for(j=0,jlen=this.output.queue.length;j<jlen;j+=1)this.output.adjust.upward(this.output.queue[j]),this.output.adjust.leftward(this.output.queue[j]),this.output.adjust.downward(this.output.queue[j],!0),this.output.adjust.fix(this.output.queue[j]);var res;if(!(res=this.output.string(this,this.output.queue)[0])&&this.opt.update_mode===CSL.NUMERIC){var err=ret.length+1+". [CSL STYLE ERROR: reference with no printed form.]";res=CSL.Output.Formats[this.opt.mode]["@bibliography/entry"](this,err)}res&&ret.push(res)}var done=!1;if(bibsection&&bibsection.page_start&&bibsection.page_length){var last_expected_id=input.slice(-1)[0],last_seen_id=processed_item_ids.slice(-1)[0];last_expected_id&&last_seen_id&&last_expected_id!=last_seen_id||(done=!0)}return this.tmp.disambig_override=!1,[processed_item_ids,ret,done]},module.exports=CSL,CSL.Engine.prototype.setCitationId=function(citation,force){var ret,id,direction;if(ret=!1,!citation.citationID||force){for(id=Math.floor(1e14*Math.random());;){if(direction=0,!this.registry.citationreg.citationById[id]){citation.citationID="a"+id.toString(32);break}id+=1===(direction=!direction&&id<5e13?1:-1)?1:-1}ret=""+id}return this.registry.citationreg.citationById[citation.citationID]=citation,ret},module.exports=CSL,CSL.Engine.prototype.rebuildProcessorState=function(citations,mode,uncitedItemIDs){citations||(citations=[]),mode||(mode="html");for(var doneIDs={},itemIDs=[],i=0,ilen=citations.length;i<ilen;i+=1)for(var j=0,jlen=citations[i].citationItems.length;j<jlen;j+=1){var itemID=""+citations[i].citationItems[j].id;doneIDs[itemID]||itemIDs.push(itemID),doneIDs[itemID]=!0}this.updateItems(itemIDs);var pre=[],post=[],ret=[],oldMode=this.opt.mode;this.setOutputFormat(mode);for(i=0,ilen=citations.length;i<ilen;i+=1){var res=this.processCitationCluster(citations[i],pre,post,CSL.ASSUME_ALL_ITEMS_REGISTERED);pre.push([citations[i].citationID,citations[i].properties.noteIndex]);for(j=0,jlen=res[1].length;j<jlen;j+=1){var index=res[1][j][0];ret[index]=[pre[index][0],pre[index][1],res[1][j][1]]}}return this.updateUncitedItems(uncitedItemIDs),this.setOutputFormat(oldMode),ret},CSL.Engine.prototype.restoreProcessorState=function(citations){var i,ilen,j,jlen,item,Item,newitem,citationList,itemList,sortedItems;citationList=[],itemList=[],citations||(citations=[]);var indexNumbers=[],citationIds={};for(i=0,ilen=citations.length;i<ilen;i+=1)citationIds[citations[i].citationID]&&this.setCitationId(citations[i],!0),citationIds[citations[i].citationID]=!0,indexNumbers.push(citations[i].properties.index);var oldCitations=citations.slice();for(oldCitations.sort(function(a,b){return a.properties.index<b.properties.index?-1:a.properties.index>b.properties.index?1:0}),i=0,ilen=oldCitations.length;i<ilen;i+=1)oldCitations[i].properties.index=i;for(i=0,ilen=oldCitations.length;i<ilen;i+=1){for(sortedItems=[],j=0,jlen=oldCitations[i].citationItems.length;j<jlen;j+=1)"undefined"==typeof(item=oldCitations[i].citationItems[j]).sortkeys&&(item.sortkeys=[]),newitem=[Item=this.retrieveItem(""+item.id),item],sortedItems.push(newitem),oldCitations[i].citationItems[j].item=Item,itemList.push(""+item.id);oldCitations[i].properties.unsorted||sortedItems.sort(this.citation.srt.compareCompositeKeys),oldCitations[i].sortedItems=sortedItems,this.registry.citationreg.citationById[oldCitations[i].citationID]=oldCitations[i]}for(this.updateItems(itemList),i=0,ilen=citations.length;i<ilen;i+=1)citationList.push([""+citations[i].citationID,citations[i].properties.noteIndex]);var ret=[];return citations&&citations.length?ret=this.processCitationCluster(citations[0],[],citationList.slice(1)):(this.registry=new CSL.Registry(this),this.tmp=new CSL.Engine.Tmp,this.disambiguate=new CSL.Disambiguation(this)),ret},CSL.Engine.prototype.updateItems=function(idList,nosort,rerun_ambigs,implicitUpdate){var oldArea=this.tmp.area,oldRoot=this.tmp.root,oldExtension=this.tmp.extension;if(this.tmp.area="citation",this.tmp.root="citation",this.tmp.extension="",implicitUpdate||(this.tmp.loadedItemIDs={}),this.registry.init(idList),rerun_ambigs)for(var ambig in this.registry.ambigcites)this.registry.ambigsTouched[ambig]=!0;return this.registry.dodeletes(this.registry.myhash),this.registry.doinserts(this.registry.mylist),this.registry.dorefreshes(),this.registry.rebuildlist(),this.registry.setsortkeys(),this.registry.setdisambigs(),nosort||this.registry.sorttokens(),this.registry.renumber(),this.tmp.extension=oldExtension,this.tmp.area=oldArea,this.tmp.root=oldRoot,this.registry.getSortedIds()},CSL.Engine.prototype.updateUncitedItems=function(idList,nosort){var oldArea=this.tmp.area,oldRoot=this.tmp.root,oldExtension=this.tmp.extension;if(this.tmp.area="citation",this.tmp.root="citation",this.tmp.extension="",this.tmp.loadedItemIDs={},idList||(idList=[]),"object"==_typeof(idList))if("undefined"==typeof idList.length){var idHash=idList;for(var key in idList=[],idHash)idList.push(key)}else if("number"==typeof idList.length){idHash={};for(var i=0,ilen=idList.length;i<ilen;i+=1)idHash[idList[i]]=!0}return this.registry.init(idList,!0),this.registry.dopurge(idHash),this.registry.doinserts(this.registry.mylist),this.registry.dorefreshes(),this.registry.rebuildlist(),this.registry.setsortkeys(),this.registry.setdisambigs(),nosort||this.registry.sorttokens(),this.registry.renumber(),this.tmp.extension=oldExtension,this.tmp.area=oldArea,this.tmp.root=oldRoot,this.registry.getSortedIds()},module.exports=CSL,CSL.localeResolve=function(langstr,defaultLocale){var ret,langlst;return defaultLocale||(defaultLocale="en-US"),langstr||(langstr=defaultLocale),ret={},langlst=langstr.split(/[\-_]/),ret.base=CSL.LANG_BASES[langlst[0]],"undefined"==typeof ret.base?{base:defaultLocale,best:langstr,bare:langlst[0]}:(1===langlst.length&&(ret.generic=!0),1===langlst.length||"x"===langlst[1]?ret.best=ret.base.replace("_","-"):ret.best=langlst.slice(0,2).join("-"),ret.base=ret.base.replace("_","-"),ret.bare=langlst[0],ret)},CSL.Engine.prototype.localeConfigure=function(langspec,beShy){var localexml;if((!beShy||!this.locale[langspec.best])&&("en-US"===langspec.best?(localexml=CSL.setupXml(this.sys.retrieveLocale("en-US")),this.localeSet(localexml,"en-US",langspec.best)):"en-US"!==langspec.best&&(langspec.base!==langspec.best&&(localexml=CSL.setupXml(this.sys.retrieveLocale(langspec.base)),this.localeSet(localexml,langspec.base,langspec.best)),localexml=CSL.setupXml(this.sys.retrieveLocale(langspec.best)),this.localeSet(localexml,langspec.best,langspec.best)),this.localeSet(this.cslXml,"",langspec.best),this.localeSet(this.cslXml,langspec.bare,langspec.best),langspec.base!==langspec.best&&this.localeSet(this.cslXml,langspec.base,langspec.best),this.localeSet(this.cslXml,langspec.best,langspec.best),"undefined"==typeof this.locale[langspec.best].terms["page-range-delimiter"]&&(["fr","pt"].indexOf(langspec.best.slice(0,2).toLowerCase())>-1?this.locale[langspec.best].terms["page-range-delimiter"]="-":this.locale[langspec.best].terms["page-range-delimiter"]="\u2013"),"undefined"==typeof this.locale[langspec.best].terms["year-range-delimiter"]&&(this.locale[langspec.best].terms["year-range-delimiter"]="\u2013"),"undefined"==typeof this.locale[langspec.best].terms["citation-range-delimiter"]&&(this.locale[langspec.best].terms["citation-range-delimiter"]="\u2013"),this.opt.development_extensions.normalize_lang_keys_to_lowercase)){for(var localeLists=["default-locale","locale-sort","locale-translit","locale-translat"],i=0,ilen=localeLists.length;i<ilen;i+=1)for(var j=0,jlen=this.opt[localeLists[i]].length;j<jlen;j+=1)this.opt[localeLists[i]][j]=this.opt[localeLists[i]][j].toLowerCase();this.opt.lang=this.opt.lang.toLowerCase()}},CSL.Engine.prototype.localeSet=function(myxml,lang_in,lang_out){var blob,locale,nodes,attributes,pos,term,form,termname,styleopts,attrname,len,target;if(lang_in=lang_in.replace("_","-"),lang_out=lang_out.replace("_","-"),this.opt.development_extensions.normalize_lang_keys_to_lowercase&&(lang_in=lang_in.toLowerCase(),lang_out=lang_out.toLowerCase()),this.locale[lang_out]||(this.locale[lang_out]={},this.locale[lang_out].terms={},this.locale[lang_out].opts={},this.locale[lang_out].opts["skip-words"]=CSL.SKIP_WORDS,this.locale[lang_out].opts["leading-noise-words"]||(this.locale[lang_out].opts["leading-noise-words"]=[]),this.locale[lang_out].dates={},this.locale[lang_out].ord={"1.0.1":!1,keys:{}},this.locale[lang_out]["noun-genders"]={}),locale=myxml.makeXml(),myxml.nodeNameIs(myxml.dataObj,"locale"))locale=myxml.dataObj;else for(nodes=myxml.getNodesByName(myxml.dataObj,"locale"),pos=0,len=myxml.numberofnodes(nodes);pos<len;pos+=1)if(blob=nodes[pos],myxml.getAttributeValue(blob,"lang","xml")===lang_in){locale=blob;break}for(nodes=myxml.getNodesByName(locale,"type"),i=0,ilen=myxml.numberofnodes(nodes);i<ilen;i+=1){var typenode=nodes[i],type=myxml.getAttributeValue(typenode,"name"),gender=myxml.getAttributeValue(typenode,"gender");this.opt.gender[type]=gender}if(myxml.getNodesByName(locale,"term","ordinal").length){for(var key in this.locale[lang_out].ord.keys)delete this.locale[lang_out].terms[key];this.locale[lang_out].ord={"1.0.1":!1,keys:{}}}nodes=myxml.getNodesByName(locale,"term");var ordinals101={"last-digit":{},"last-two-digits":{},"whole-number":{}},ordinals101_toggle=!1,genderized_terms={};for(pos=0,len=myxml.numberofnodes(nodes);pos<len;pos+=1){if(term=nodes[pos],"sub verbo"===(termname=myxml.getAttributeValue(term,"name"))&&(termname="sub-verbo"),"ordinal"===termname.slice(0,7)){myxml.getNodeValue(term);if("ordinal"===termname)ordinals101_toggle=!0;else{var genderform,match=myxml.getAttributeValue(term,"match"),termstub=termname.slice(8);(genderform=myxml.getAttributeValue(term,"gender-form"))||(genderform="neuter"),match||(match="last-two-digits","0"===termstub.slice(0,1)&&(match="last-digit")),"0"===termstub.slice(0,1)&&(termstub=termstub.slice(1)),ordinals101[match][termstub]||(ordinals101[match][termstub]={}),ordinals101[match][termstub][genderform]=termname}this.locale[lang_out].ord.keys[termname]=!0}"undefined"==typeof this.locale[lang_out].terms[termname]&&(this.locale[lang_out].terms[termname]={}),form="long",genderform=!1,myxml.getAttributeValue(term,"form")&&(form=myxml.getAttributeValue(term,"form")),myxml.getAttributeValue(term,"gender-form")&&(genderform=myxml.getAttributeValue(term,"gender-form")),myxml.getAttributeValue(term,"gender")&&(this.locale[lang_out]["noun-genders"][termname]=myxml.getAttributeValue(term,"gender")),genderform?(this.locale[lang_out].terms[termname][genderform]={},this.locale[lang_out].terms[termname][genderform][form]=[],target=this.locale[lang_out].terms[termname][genderform],genderized_terms[termname]=!0):(this.locale[lang_out].terms[termname][form]=[],target=this.locale[lang_out].terms[termname]),myxml.numberofnodes(myxml.getNodesByName(term,"multiple"))?(target[form][0]=myxml.getNodeValue(term,"single"),target[form][0].indexOf("%s")>-1&&(this.opt.hasPlaceholderTerm=!0),target[form][1]=myxml.getNodeValue(term,"multiple"),target[form][1].indexOf("%s")>-1&&(this.opt.hasPlaceholderTerm=!0)):(target[form]=myxml.getNodeValue(term),target[form].indexOf("%s")>-1&&(this.opt.hasPlaceholderTerm=!0))}if(ordinals101_toggle){for(var ikey in genderized_terms){var gender_segments={},form_segments=0;for(var jkey in this.locale[lang_out].terms[ikey])["masculine","feminine"].indexOf(jkey)>-1?gender_segments[jkey]=this.locale[lang_out].terms[ikey][jkey]:form_segments+=1;if(!form_segments)if(gender_segments.feminine)for(var jkey in gender_segments.feminine)this.locale[lang_out].terms[ikey][jkey]=gender_segments.feminine[jkey];else if(gender_segments.masculine)for(var jkey in gender_segments.masculine)this.locale[lang_out].terms[ikey][jkey]=gender_segments.masculine[jkey]}this.locale[lang_out].ord["1.0.1"]=ordinals101}for(termname in this.locale[lang_out].terms)for(i=0,ilen=2;i<ilen;i+=1)if(genderform=CSL.GENDERS[i],this.locale[lang_out].terms[termname][genderform])for(form in this.locale[lang_out].terms[termname])this.locale[lang_out].terms[termname][genderform][form]||(this.locale[lang_out].terms[termname][genderform][form]=this.locale[lang_out].terms[termname][form]);for(nodes=myxml.getNodesByName(locale,"style-options"),pos=0,len=myxml.numberofnodes(nodes);pos<len;pos+=1)for(attrname in styleopts=nodes[pos],attributes=myxml.attributes(styleopts))if(attributes.hasOwnProperty(attrname))if("@punctuation-in-quote"===attrname||"@limit-day-ordinals-to-day-1"===attrname)"true"===attributes[attrname]?this.locale[lang_out].opts[attrname.slice(1)]=!0:this.locale[lang_out].opts[attrname.slice(1)]=!1;else if("@jurisdiction-preference"===attrname){var jurisdiction_preference=attributes[attrname].split(/\s*,\s*/);this.locale[lang_out].opts[attrname.slice(1)]=jurisdiction_preference}else if("@skip-words"===attrname){var skip_words=attributes[attrname].split(/\s*,\s*/);this.locale[lang_out].opts[attrname.slice(1)]=skip_words}else if("@leading-noise-words"===attrname){var val=attributes[attrname].split(/\s*,\s*/);this.locale[lang_out].opts["leading-noise-words"]=val}else if("@name-as-sort-order"===attrname){this.locale[lang_out].opts["name-as-sort-order"]={};for(var i=0,ilen=(lst=attributes[attrname].split(/\s+/)).length;i<ilen;i+=1)this.locale[lang_out].opts["name-as-sort-order"][lst[i]]=!0}else if("@name-as-reverse-order"===attrname){this.locale[lang_out].opts["name-as-reverse-order"]={};for(i=0,ilen=(lst=attributes[attrname].split(/\s+/)).length;i<ilen;i+=1)this.locale[lang_out].opts["name-as-reverse-order"][lst[i]]=!0}else if("@name-never-short"===attrname){this.locale[lang_out].opts["name-never-short"]={};var lst;for(i=0,ilen=(lst=attributes[attrname].split(/\s+/)).length;i<ilen;i+=1)this.locale[lang_out].opts["name-never-short"][lst[i]]=!0}for(nodes=myxml.getNodesByName(locale,"date"),pos=0,len=myxml.numberofnodes(nodes);pos<len;pos+=1){var date=nodes[pos];this.locale[lang_out].dates[myxml.getAttributeValue(date,"form")]=date}},module.exports=CSL,CSL.getLocaleNames=function(myxml,preferredLocale){var stylexml=CSL.setupXml(myxml);function extendLocaleList(localeList,locale){var forms=["base","best"];if(locale){normalizedLocale=CSL.localeResolve(locale);for(var i=0,ilen=forms.length;i<ilen;i++)normalizedLocale[forms[i]]&&-1===localeList.indexOf(normalizedLocale[forms[i]])&&localeList.push(normalizedLocale[forms[i]])}}function sniffLocaleOnOneNodeName(nodeName){for(var nodes=stylexml.getNodesByName(stylexml.dataObj,nodeName),i=0,ilen=nodes.length;i<ilen;i++){var nodeLocales=stylexml.getAttributeValue(nodes[i],"locale");if(nodeLocales)for(var j=0,jlen=(nodeLocales=nodeLocales.split(/ +/)).length;j<jlen;j++)this.extendLocaleList(localeIDs,nodeLocales[j])}}var localeIDs=["en-US"];extendLocaleList(localeIDs,preferredLocale);var styleNode=stylexml.getNodesByName(stylexml.dataObj,"style")[0],defaultLocale=stylexml.getAttributeValue(styleNode,"default-locale");extendLocaleList(localeIDs,defaultLocale);for(var nodeNames=["layout","if","else-if","condition"],i=0,ilen=nodeNames.length;i<ilen;i++)sniffLocaleOnOneNodeName(stylexml);return localeIDs},module.exports=CSL,CSL.Node={},CSL.Node.bibliography={build:function(state,target){if(this.tokentype===CSL.START){state.build.area="bibliography",state.build.root="bibliography",state.build.extension="";this.execs.push(function(state,Item){state.tmp.area="bibliography",state.tmp.root="bibliography",state.tmp.extension=""})}target.push(this)}},module.exports=CSL,CSL.Node.choose={build:function(state,target){var func;this.tokentype===CSL.START&&(func=function(state,Item){state.tmp.jump.push(undefined,CSL.LITERAL)}),this.tokentype===CSL.END&&(func=function(state,Item){state.tmp.jump.pop()}),this.execs.push(func),target.push(this)},configure:function(state,pos){this.tokentype===CSL.END?(state.configure.fail.push(pos),state.configure.succeed.push(pos)):(state.configure.fail.pop(),state.configure.succeed.pop())}},module.exports=CSL,CSL.Node.citation={build:function(state,target){if(this.tokentype===CSL.START){state.build.area="citation",state.build.root="citation",state.build.extension="";this.execs.push(function(state,Item){state.tmp.area="citation",state.tmp.root="citation",state.tmp.extension=""})}if(this.tokentype===CSL.END){if(state.opt.grouped_sort="in-text"===state.opt.xclass&&state.citation.opt.collapse&&state.citation.opt.collapse.length||state.citation.opt.cite_group_delimiter&&state.citation.opt.cite_group_delimiter.length&&state.opt.update_mode!==CSL.POSITION&&state.opt.update_mode!==CSL.NUMERIC,state.opt.grouped_sort&&state.citation_sort.opt.sort_directions.length){var firstkey=state.citation_sort.opt.sort_directions[0].slice();state.citation_sort.opt.sort_directions=[firstkey].concat(state.citation_sort.opt.sort_directions)}state.citation.srt=new CSL.Registry.Comparifier(state,"citation_sort")}target.push(this)}},module.exports=CSL,CSL.Node["#comment"]={build:function(state,target){}},module.exports=CSL,CSL.Node.date={build:function(state,target){var func,date_obj,len,pos,part,dpx,parts,mypos,start,end;this.tokentype!==CSL.START&&this.tokentype!==CSL.SINGLETON||(state.build.date_parts=[],state.build.date_variables=this.variables,state.build.extension||CSL.Util.substituteStart.call(this,state,target),func=state.build.extension?CSL.dateMacroAsSortKey:function(state,Item,item){var dp;if(state.tmp.element_rendered_ok=!1,state.tmp.donesies=[],state.tmp.dateparts=[],dp=[],!this.variables.length||state.tmp.just_looking&&"accessed"===this.variables[0])state.tmp.date_object=!1;else{for(void 0===(date_obj=Item[this.variables[0]])&&(date_obj={"date-parts":[[0]]},state.opt.development_extensions.locator_date_and_revision&&item&&"locator-date"===this.variables[0]&&item["locator-date"]&&(date_obj=item["locator-date"])),state.tmp.date_object=date_obj,len=this.dateparts.length,pos=0;pos<len;pos+=1)part=this.dateparts[pos],"undefined"!=typeof state.tmp.date_object[part+"_end"]?dp.push(part):"month"===part&&"undefined"!=typeof state.tmp.date_object.season_end&&dp.push(part);for(dpx=[],len=(parts=["year","month","day"]).length,pos=0;pos<len;pos+=1)dp.indexOf(parts[pos])>-1&&dpx.push(parts[pos]);for(dp=dpx.slice(),mypos=2,len=dp.length,pos=0;pos<len;pos+=1)if(part=dp[pos],start=state.tmp.date_object[part],end=state.tmp.date_object[part+"_end"],start!==end){mypos=pos;break}state.tmp.date_collapse_at=dp.slice(mypos)}},this.execs.push(func),func=function(state,Item){if(Item[this.variables[0]]&&(state.parallel.StartVariable(this.variables[0]),state.output.startTag("date",this),"issued"===this.variables[0]&&"legal_case"===Item.type&&!state.tmp.extension&&""+Item["collection-number"]==""+state.tmp.date_object.year&&1===this.dateparts.length&&"year"===this.dateparts[0]))for(var key in state.tmp.date_object)if(state.tmp.date_object.hasOwnProperty(key)&&"year"===key.slice(0,4)){state.tmp.issued_date={};var lst=state.output.current.mystack.slice(-2)[0].blobs;state.tmp.issued_date.list=lst,state.tmp.issued_date.pos=lst.length-1}},this.execs.push(func)),state.build.extension||this.tokentype!==CSL.END&&this.tokentype!==CSL.SINGLETON||(func=function(state,Item){Item[this.variables[0]]&&(state.output.endTag(),state.parallel.CloseVariable(this.variables[0]))},this.execs.push(func)),target.push(this),this.tokentype!==CSL.END&&this.tokentype!==CSL.SINGLETON||state.build.extension||CSL.Util.substituteEnd.call(this,state,target)}},module.exports=CSL,CSL.Node["date-part"]={build:function(state,target){var func,pos,len,first_date,value,value_end,real,have_collapsed,invoked,precondition,bc,ad,ready,curr,dcurr,number,num,formatter,item;this.strings.form||(this.strings.form="long"),state.build.date_parts.push(this.strings.name);var date_variable=state.build.date_variables[0];func=function(state,Item){if(state.tmp.date_object){if(first_date=!0,value="",value_end="",state.tmp.donesies.push(this.strings.name),state.tmp.date_object.literal&&"year"===this.strings.name&&(state.parallel.AppendToVariable(state.tmp.date_object.literal),state.output.append(state.tmp.date_object.literal,this)),state.tmp.date_object&&(value=state.tmp.date_object[this.strings.name],value_end=state.tmp.date_object[this.strings.name+"_end"]),"year"!==this.strings.name||0!==value||state.tmp.suppress_decorations||(value=!1),real=!state.tmp.suppress_decorations,have_collapsed=state.tmp.have_collapsed,invoked="year-suffix"===state[state.tmp.area].opt.collapse||"year-suffix-ranged"===state[state.tmp.area].opt.collapse,precondition=state.opt["disambiguate-add-year-suffix"],real&&precondition&&invoked&&(state.tmp.years_used.push(value),state.tmp.last_years_used.length>=state.tmp.years_used.length&&have_collapsed&&state.tmp.last_years_used[state.tmp.years_used.length-1]===value&&(value=!1)),void 0!==value){bc=!1,ad=!1,!1,!1,"year"===this.strings.name&&(parseInt(value,10)<500&&parseInt(value,10)>0&&(ad=state.getTerm("ad")),parseInt(value,10)<0&&(bc=state.getTerm("bc"),value=-1*parseInt(value,10)),value_end&&(parseInt(value_end,10)<500&&parseInt(value_end,10)>0&&state.getTerm("ad"),parseInt(value_end,10)<0&&(state.getTerm("bc"),value_end=-1*parseInt(value_end,10)))),state.parallel.AppendToVariable(value);for(var monthnameid=""+state.tmp.date_object.month;monthnameid.length<2;)monthnameid="0"+monthnameid;monthnameid="month-"+monthnameid;var gender=state.locale[state.opt.lang]["noun-genders"][monthnameid];if(this.strings.form){var myform=this.strings.form;if("day"===this.strings.name&&"ordinal"===myform&&state.locale[state.opt.lang].opts["limit-day-ordinals-to-day-1"]&&""+value!="1"&&(myform="numeric"),value=CSL.Util.Dates[this.strings.name][myform](state,value,gender,this.default_locale),"month"===this.strings.name)if(state.tmp.strip_periods)value=value.replace(/\./g,"");else for(var i=0,ilen=this.decorations.length;i<ilen;i+=1)if("@strip-periods"===this.decorations[i][0]&&"true"===this.decorations[i][1]){value=value.replace(/\./g,"");break}if(value_end)if(value_end=CSL.Util.Dates[this.strings.name][myform](state,value_end,gender,"accessed"===date_variable,"_end"),state.tmp.strip_periods)value_end=value_end.replace(/\./g,"");else for(i=0,ilen=this.decorations.length;i<ilen;i+=1)if("@strip-periods"===this.decorations[i][0]&&"true"===this.decorations[i][1]){value_end=value_end.replace(/\./g,"");break}}if(state.output.openLevel("empty"),state.tmp.date_collapse_at.length){for(ready=!0,len=state.tmp.date_collapse_at.length,pos=0;pos<len;pos+=1)if(item=state.tmp.date_collapse_at[pos],-1===state.tmp.donesies.indexOf(item)){ready=!1;break}if(ready){if(""+value_end!="0"){if(0===state.dateput.queue.length&&(first_date=!0),state.opt["year-range-format"]&&"expanded"!==state.opt["year-range-format"]&&!state.tmp.date_object.day&&!state.tmp.date_object.month&&!state.tmp.date_object.season&&"year"===this.strings.name&&value&&value_end){value_end=state.fun.year_mangler(value+"-"+value_end,!0);var range_delimiter=state.getTerm("year-range-delimiter");value_end=value_end.slice(value_end.indexOf(range_delimiter)+1)}state.dateput.append(value_end,this),first_date&&(state.dateput.current.value()[0].strings.prefix="")}state.output.append(value,this),(curr=state.output.current.value()).blobs[curr.blobs.length-1].strings.suffix="",state.output.append(state.getTerm("year-range-delimiter"),"empty"),dcurr=state.dateput.current.value(),curr.blobs=curr.blobs.concat(dcurr),state.dateput.string(state,state.dateput.queue),state.tmp.date_collapse_at=[]}else state.output.append(value,this),state.tmp.date_collapse_at.indexOf(this.strings.name)>-1&&""+value_end!="0"&&(0===state.dateput.queue.length&&(first_date=!0),state.dateput.openLevel("empty"),state.dateput.append(value_end,this),first_date&&(state.dateput.current.value().blobs[0].strings.prefix=""),bc&&state.dateput.append(bc),ad&&state.dateput.append(ad),state.dateput.closeLevel())}else state.output.append(value,this);bc&&state.output.append(bc),ad&&state.output.append(ad),state.output.closeLevel()}else"month"===this.strings.name&&state.tmp.date_object.season&&((value=""+state.tmp.date_object.season)&&value.match(/^[1-4]$/)?(state.tmp.group_context.tip.variable_success=!0,state.output.append(state.getTerm("season-0"+value),this)):value&&state.output.append(value,this));state.tmp.value=[],!Item[date_variable]||!value&&!state.tmp.have_collapsed||state.opt.has_year_suffix||"year"!==this.strings.name||state.tmp.just_looking||state.registry.registry[Item.id]&&!1!==state.registry.registry[Item.id].disambig.year_suffix&&!state.tmp.has_done_year_suffix&&(state.tmp.has_done_year_suffix=!0,num=parseInt(state.registry.registry[Item.id].disambig.year_suffix,10),number=new CSL.NumericBlob(!1,num,this,Item.id),this.successor_prefix=state[state.build.area].opt.layout_delimiter,this.splice_prefix=state[state.build.area].opt.layout_delimiter,formatter=new CSL.Util.Suffixator(CSL.SUFFIX_CHARS),number.setFormatter(formatter),"year-suffix-ranged"===state[state.tmp.area].opt.collapse&&(number.range_prefix=state.getTerm("citation-range-delimiter")),state[state.tmp.area].opt.cite_group_delimiter?number.successor_prefix=state[state.tmp.area].opt.cite_group_delimiter:state[state.tmp.area].opt["year-suffix-delimiter"]?number.successor_prefix=state[state.tmp.area].opt["year-suffix-delimiter"]:number.successor_prefix=state[state.tmp.area].opt.layout_delimiter,number.UGLY_DELIMITER_SUPPRESS_HACK=!0,state.output.append(number,"literal"))}},this.execs.push(func),target.push(this)}},module.exports=CSL,CSL.Node["else-if"]={build:function(state,target){CSL.Conditions.TopNode.call(this,state,target),target.push(this)},configure:function(state,pos){CSL.Conditions.Configure.call(this,state,pos)}},module.exports=CSL,CSL.Node["else"]={build:function(state,target){target.push(this)},configure:function(state,pos){this.tokentype===CSL.START&&(state.configure.fail[state.configure.fail.length-1]=pos)}},module.exports=CSL,CSL.Node["et-al"]={build:function(state,target){if("citation"===state.build.area||"bibliography"===state.build.area){this.execs.push(function(state,Item,item){state.tmp.etal_node=this,"string"==typeof this.strings.term&&(state.tmp.etal_term=this.strings.term)})}target.push(this)}},module.exports=CSL,CSL.Node.group={build:function(state,target,realGroup){var func,execs,macroName;if(this.realGroup=realGroup,this.tokentype===CSL.START&&(CSL.Util.substituteStart.call(this,state,target),state.build.substitute_level.value()&&state.build.substitute_level.replace(state.build.substitute_level.value()+1),this.juris||target.push(this),(execs=[]).push(func=function(state,Item){if(state.output.startTag("group",this),this.strings.label_form_override&&(state.tmp.group_context.tip.label_form||(state.tmp.group_context.tip.label_form=this.strings.label_form_override)),this.realGroup){var condition=!1,force_suppress=!1;state.tmp.group_context.mystack.length&&(state.output.current.value().parent=state.tmp.group_context.tip.output_tip);var label_form=state.tmp.group_context.tip.label_form;label_form||(label_form=this.strings.label_form_override),state.tmp.group_context.tip.condition?(condition=state.tmp.group_context.tip.condition,force_suppress=state.tmp.group_context.tip.force_suppress):this.strings.reject?(condition={test:this.strings.reject,not:!0},force_suppress=!0,[]):this.strings.require&&(condition={test:this.strings.require,not:!1},[]),state.tmp.group_context.push({term_intended:!1,variable_attempt:!1,variable_success:!1,variable_success_parent:state.tmp.group_context.tip.variable_success,output_tip:state.output.current.tip,label_form:label_form,parallel_conditions:this.strings.set_parallel_condition,condition:condition,force_suppress:force_suppress,done_vars:state.tmp.group_context.tip.done_vars.slice()})}}),this.execs=execs.concat(this.execs),this.strings["has-publisher-and-publisher-place"]&&(state.build["publisher-special"]=!0,func=function(state,Item){if(this.strings["subgroup-delimiter"]&&Item.publisher&&Item["publisher-place"]){var publisher_lst=Item.publisher.split(/;\s*/),publisher_place_lst=Item["publisher-place"].split(/;\s*/);publisher_lst.length>1&&publisher_lst.length===publisher_place_lst.length&&(state.publisherOutput=new CSL.PublisherOutput(state,this),state.publisherOutput["publisher-list"]=publisher_lst,state.publisherOutput["publisher-place-list"]=publisher_place_lst)}},this.execs.push(func)),this.juris)){for(var x=0,xlen=target.length;x<xlen;x++)target[x];var choose_start=new CSL.Token("choose",CSL.START);CSL.Node.choose.build.call(choose_start,state,target);var if_start=new CSL.Token("if",CSL.START);macroName=this.juris,func=function(Item){if(!state.sys.retrieveStyleModule||!CSL.MODULE_MACROS[macroName]||!Item.jurisdiction)return!1;var jurisdictionList=state.getJurisdictionList(Item.jurisdiction);if(!state.opt.jurisdictions_seen[jurisdictionList[0]]){var res=state.retrieveAllStyleModules(jurisdictionList);for(var jurisdiction in res){state.juris[jurisdiction]={};for(var myXml=CSL.setupXml(res[jurisdiction]),i=0,ilen=(myNodes=myXml.getNodesByName(myXml.dataObj,"law-module")).length;i<ilen;i++){var myTypes=myXml.getAttributeValue(myNodes[i],"types");if(myTypes){state.juris[jurisdiction].types={};for(var j=0,jlen=(myTypes=myTypes.split(/\s+/)).length;j<jlen;j++)state.juris[jurisdiction].types[myTypes[j]]=!0}}var myNodes;for(state.juris[jurisdiction].types||(state.juris[jurisdiction].types=CSL.MODULE_TYPES),i=0,ilen=(myNodes=myXml.getNodesByName(myXml.dataObj,"macro")).length;i<ilen;i++){var myName=myXml.getAttributeValue(myNodes[i],"name");CSL.MODULE_MACROS[myName]?(state.juris[jurisdiction][myName]=[],state.buildTokenLists(myNodes[i],state.juris[jurisdiction][myName]),state.configureTokenList(state.juris[jurisdiction][myName])):CSL.debug('CSL: skipping non-modular macro name "'+myName+'" in module context')}}}for(i=0,ilen=jurisdictionList.length;i<ilen;i++)if(jurisdiction=jurisdictionList[i],state.juris[jurisdiction]&&state.juris[jurisdiction].types[Item.type])return Item["best-jurisdiction"]=jurisdiction,!0;return!1},if_start.tests.push(func),if_start.test=state.fun.match.any(if_start,state,if_start.tests),target.push(if_start);var text_node=new CSL.Token("text",CSL.SINGLETON);func=function(state,Item,item){var next=0;if(state.juris[Item["best-jurisdiction"]][this.juris])for(;next<state.juris[Item["best-jurisdiction"]][this.juris].length;)next=CSL.tokenExec.call(state,state.juris[Item["best-jurisdiction"]][this.juris][next],Item,item)},text_node.juris=this.juris,text_node.execs.push(func),target.push(text_node);var if_end=new CSL.Token("if",CSL.END);CSL.Node["if"].build.call(if_end,state,target);var else_start=new CSL.Token("else",CSL.START);CSL.Node["else"].build.call(else_start,state,target)}if(this.tokentype===CSL.END&&(state.build["publisher-special"]&&(state.build["publisher-special"]=!1,"string"==typeof state[state.build.root].opt["name-delimiter"]&&(func=function(state,Item){state.publisherOutput&&(state.publisherOutput.render(),state.publisherOutput=!1)},this.execs.push(func))),func=function(state,Item){if(state.output.endTag(),this.realGroup){var flags=state.tmp.group_context.pop();if(state.tmp.group_context.tip.condition&&(state.tmp.group_context.tip.force_suppress=flags.force_suppress),!flags.force_suppress&&(flags.variable_success||flags.term_intended&&!flags.variable_attempt)){this.isJurisLocatorLabel||(state.tmp.group_context.tip.variable_success=!0);var blobs=state.output.current.value().blobs,pos=state.output.current.value().blobs.length-1;if(!state.tmp.just_looking&&"undefined"!=typeof flags.parallel_conditions){var parallel_condition_object={blobs:blobs,conditions:flags.parallel_conditions,id:Item.id,pos:pos};state.parallel.parallel_conditional_blobs_list.push(parallel_condition_object)}}else{if(state.tmp.group_context.tip.variable_attempt=flags.variable_attempt,flags.force_suppress&&!state.tmp.group_context.tip.condition){state.tmp.group_context.tip.variable_attempt=!0,state.tmp.group_context.tip.variable_success=flags.variable_success_parent;for(var i=0,ilen=flags.done_vars.length;i<ilen;i++)state.tmp.done_vars.indexOf(flags.done_vars[i])>-1&&(state.tmp.done_vars=state.tmp.done_vars.slice(0,i).concat(state.tmp.done_vars.slice(i+1)))}state.output.current.value().blobs&&state.output.current.value().blobs.pop()}}},this.execs.push(func),this.juris)){var else_end=new CSL.Token("else",CSL.END);CSL.Node["else"].build.call(else_end,state,target);var choose_end=new CSL.Token("choose",CSL.END);CSL.Node.choose.build.call(choose_end,state,target)}this.tokentype===CSL.END&&(this.juris||target.push(this),state.build.substitute_level.value()&&state.build.substitute_level.replace(state.build.substitute_level.value()-1),CSL.Util.substituteEnd.call(this,state,target))}},module.exports=CSL,CSL.Node["if"]={build:function(state,target){CSL.Conditions.TopNode.call(this,state,target),target.push(this)},configure:function(state,pos){CSL.Conditions.Configure.call(this,state,pos)}},module.exports=CSL,CSL.Node.conditions={build:function(state,target){this.tokentype===CSL.START&&state.tmp.conditions.addMatch(this.match),this.tokentype===CSL.END&&state.tmp.conditions.matchCombine()}},module.exports=CSL,CSL.Node.condition={build:function(state,target){if(this.tokentype===CSL.SINGLETON){var test=state.fun.match[this.match](this,state,this.tests);state.tmp.conditions.addTest(test)}}},module.exports=CSL,CSL.Conditions={},CSL.Conditions.TopNode=function(state,target){var func;this.tokentype!==CSL.START&&this.tokentype!==CSL.SINGLETON||(this.locale&&(state.opt.lang=this.locale),this.tests&&this.tests.length?this.test=state.fun.match[this.match](this,state,this.tests):state.tmp.conditions=new CSL.Conditions.Engine(state,this)),this.tokentype!==CSL.END&&this.tokentype!==CSL.SINGLETON||(func=function(state,Item){return this.locale_default&&(state.output.current.value().old_locale=this.locale_default,state.output.closeLevel("empty"),state.opt.lang=this.locale_default),this[state.tmp.jump.value()]},this.execs.push(func),this.locale_default&&(state.opt.lang=this.locale_default))},CSL.Conditions.Configure=function(state,pos){this.tokentype===CSL.START?(this.fail=state.configure.fail.slice(-1)[0],this.succeed=this.next,state.configure.fail[state.configure.fail.length-1]=pos):this.tokentype===CSL.SINGLETON?(this.fail=this.next,this.succeed=state.configure.succeed.slice(-1)[0],state.configure.fail[state.configure.fail.length-1]=pos):(this.succeed=state.configure.succeed.slice(-1)[0],this.fail=this.next)},CSL.Conditions.Engine=function(state,token){this.token=token,this.state=state},CSL.Conditions.Engine.prototype.addTest=function(test){this.token.tests.push(test)},CSL.Conditions.Engine.prototype.addMatch=function(match){this.token.match=match},CSL.Conditions.Engine.prototype.matchCombine=function(){this.token.test=this.state.fun.match[this.token.match](this.token,this.state,this.token.tests)},module.exports=CSL,CSL.Node.info={build:function(state,target){this.tokentype===CSL.START?state.build.skip="info":state.build.skip=!1}},module.exports=CSL,CSL.Node.institution={build:function(state,target){if([CSL.SINGLETON,CSL.START].indexOf(this.tokentype)>-1){this.execs.push(function(state,Item){"string"==typeof this.strings.delimiter?state.tmp.institution_delimiter=this.strings.delimiter:state.tmp.institution_delimiter=state.tmp.name_delimiter,"text"===state.inheritOpt(this,"and")?this.and_term=state.getTerm("and","long",0):"symbol"===state.inheritOpt(this,"and")?state.opt.development_extensions.expect_and_symbol_form?this.and_term=state.getTerm("and","symbol",0):this.and_term="&":"none"===state.inheritOpt(this,"and")&&(this.and_term=state.tmp.institution_delimiter),"undefined"==typeof this.and_term&&state.tmp.and_term&&(this.and_term=state.getTerm("and","long",0)),CSL.STARTSWITH_ROMANESQUE_REGEXP.test(this.and_term)?(this.and_prefix_single=" ",this.and_prefix_multiple=", ","string"==typeof state.tmp.institution_delimiter&&(this.and_prefix_multiple=state.tmp.institution_delimiter),this.and_suffix=" "):(this.and_prefix_single="",this.and_prefix_multiple="",this.and_suffix=""),"always"===state.inheritOpt(this,"delimiter-precedes-last")?this.and_prefix_single=state.tmp.institution_delimiter:"never"===state.inheritOpt(this,"delimiter-precedes-last")&&this.and_prefix_multiple&&(this.and_prefix_multiple=" "),this.and={},"undefined"!=typeof this.and_term?(state.output.append(this.and_term,"empty",!0),this.and.single=state.output.pop(),this.and.single.strings.prefix=this.and_prefix_single,this.and.single.strings.suffix=this.and_suffix,state.output.append(this.and_term,"empty",!0),this.and.multiple=state.output.pop(),this.and.multiple.strings.prefix=this.and_prefix_multiple,this.and.multiple.strings.suffix=this.and_suffix):"undefined"!==this.strings.delimiter&&(this.and.single=new CSL.Blob(state.tmp.institution_delimiter),this.and.single.strings.prefix="",this.and.single.strings.suffix="",this.and.multiple=new CSL.Blob(state.tmp.institution_delimiter),this.and.multiple.strings.prefix="",this.and.multiple.strings.suffix=""),state.nameOutput.institution=this})}target.push(this)},configure:function(state,pos){[CSL.SINGLETON,CSL.START].indexOf(this.tokentype)>-1&&(state.build.has_institution=!0)}},module.exports=CSL,CSL.Node["institution-part"]={build:function(state,target){var func;"long"===this.strings.name?func=this.strings["if-short"]?function(state,Item){state.nameOutput.institutionpart["long-with-short"]=this}:function(state,Item){state.nameOutput.institutionpart.long=this}:"short"===this.strings.name&&(func=function(state,Item){state.nameOutput.institutionpart.short=this}),this.execs.push(func),target.push(this)}},module.exports=CSL,CSL.Node.key={build:function(state,target){var func;target=state[state.build.root+"_sort"].tokens;var start_key=new CSL.Token("key",CSL.START);state.tmp.root=state.build.root,start_key.strings["et-al-min"]=state.inheritOpt(this,"et-al-min"),start_key.strings["et-al-use-first"]=state.inheritOpt(this,"et-al-use-first"),start_key.strings["et-al-use-last"]=state.inheritOpt(this,"et-al-use-last"),func=function(state,Item){state.tmp.done_vars=[]},start_key.execs.push(func),state.opt.citation_number_sort_direction=this.strings.sort_direction,func=function(state,Item){state.output.openLevel("empty")},start_key.execs.push(func);var sort_direction=[];if(this.strings.sort_direction===CSL.DESCENDING?(sort_direction.push(1),sort_direction.push(-1)):(sort_direction.push(-1),sort_direction.push(1)),state[state.build.area].opt.sort_directions.push(sort_direction),CSL.DATE_VARIABLES.indexOf(this.variables[0])>-1&&(state.build.date_key=!0),func=function(state,Item){state.tmp.sort_key_flag=!0,state.inheritOpt(this,"et-al-min")&&(state.tmp["et-al-min"]=state.inheritOpt(this,"et-al-min")),state.inheritOpt(this,"et-al-use-first")&&(state.tmp["et-al-use-first"]=state.inheritOpt(this,"et-al-use-first")),"boolean"==typeof state.inheritOpt(this,"et-al-use-last")&&(state.tmp["et-al-use-last"]=state.inheritOpt(this,"et-al-use-last"))},start_key.execs.push(func),target.push(start_key),this.variables.length){var variable=this.variables[0];if("citation-number"===variable&&("citation"===state.build.area&&"_sort"===state.build.extension&&(state.opt.citation_number_sort=!1),"bibliography"===state.build.root&&"_sort"===state.build.extension&&(state.opt.citation_number_sort_used=!1)),CSL.CREATORS.indexOf(variable)>-1){var names_start_token=new CSL.Token("names",CSL.START);names_start_token.tokentype=CSL.START,names_start_token.variables=this.variables,CSL.Node.names.build.call(names_start_token,state,target);var name_token=new CSL.Token("name",CSL.SINGLETON);name_token.tokentype=CSL.SINGLETON,name_token.strings["name-as-sort-order"]="all",name_token.strings["sort-separator"]=" ",name_token.strings["et-al-use-last"]=state.inheritOpt(this,"et-al-use-last"),name_token.strings["et-al-min"]=state.inheritOpt(this,"et-al-min"),name_token.strings["et-al-use-first"]=state.inheritOpt(this,"et-al-use-first"),CSL.Node.name.build.call(name_token,state,target);var institution_token=new CSL.Token("institution",CSL.SINGLETON);institution_token.tokentype=CSL.SINGLETON,CSL.Node.institution.build.call(institution_token,state,target);var names_end_token=new CSL.Token("names",CSL.END);names_end_token.tokentype=CSL.END,CSL.Node.names.build.call(names_end_token,state,target)}else{var single_text=new CSL.Token("text",CSL.SINGLETON);if(single_text.dateparts=this.dateparts,CSL.NUMERIC_VARIABLES.indexOf(variable)>-1)func=function(state,Item){var num;num=!1,(num="citation-number"===variable?state.registry.registry[Item.id].seq.toString():Item[variable])&&(num=CSL.Util.padding(num)),state.output.append(num,this)};else if("citation-label"===variable)func=function(state,Item){var trigraph=state.getCitationLabel(Item);state.output.append(trigraph,this)};else if(CSL.DATE_VARIABLES.indexOf(variable)>-1)func=CSL.dateAsSortKey,single_text.variables=this.variables;else if("title"===variable){func=state.transform.getOutputFunction(this.variables,"title",!1,!1,!0)}else func=function(state,Item){var varval=Item[variable];state.output.append(varval,"empty")};single_text.execs.push(func),target.push(single_text)}}else{var token=new CSL.Token("text",CSL.SINGLETON);token.postponed_macro=this.postponed_macro,CSL.expandMacro.call(state,token,target)}var end_key=new CSL.Token("key",CSL.END);func=function(state,Item){var keystring=state.output.string(state,state.output.queue);state.sys.normalizeUnicode&&(keystring=state.sys.normalizeUnicode(keystring)),""===(keystring=keystring?keystring.split(" ").join(state.opt.sort_sep)+state.opt.sort_sep:"")&&(keystring=undefined),("string"!=typeof keystring||state.tmp.empty_date)&&(keystring=undefined,state.tmp.empty_date=!1),state[state[state.tmp.area].root+"_sort"].keys.push(keystring),state.tmp.value=[]},end_key.execs.push(func),state.build.date_key&&("citation"===state.build.area&&"_sort"===state.build.extension&&(state[state.build.area].opt.sort_directions.push([-1,1]),func=function(state,Item){var year_suffix=state.registry.registry[Item.id].disambig.year_suffix;year_suffix||(year_suffix=0);var key=CSL.Util.padding(""+year_suffix);state[state.tmp.area].keys.push(key)},end_key.execs.push(func)),state.build.date_key=!1),func=function(state,Item){state.tmp["et-al-min"]=undefined,state.tmp["et-al-use-first"]=undefined,state.tmp["et-al-use-last"]=undefined,state.tmp.sort_key_flag=!1},end_key.execs.push(func),target.push(end_key)}},module.exports=CSL,CSL.Node.label={build:function(state,target){if(this.strings.term){this.strings.form;this.execs.push(function(state,Item,item){var termtxt=CSL.evaluateLabel(this,state,Item,item);item&&"locator"===this.strings.term&&(state.parallel.StartVariable("label"),state.parallel.AppendToVariable(item.label),item.section_form_override=this.strings.form),termtxt&&(state.tmp.group_context.tip.term_intended=!0),CSL.UPDATE_GROUP_CONTEXT_CONDITION(state,termtxt),-1===termtxt.indexOf("%s")&&state.output.append(termtxt,this),item&&"locator"===this.strings.term&&state.parallel.CloseVariable()})}else{var namevars=state.build.names_variables.slice(-1)[0];state.build.name_label||(state.build.name_label={});for(var i=0,ilen=namevars.length;i<ilen;i+=1)state.build.name_label[namevars[i]]||(state.build.name_label[namevars[i]]={});if(state.build.name_flag)for(i=0,ilen=namevars.length;i<ilen;i+=1)state.build.name_label[namevars[i]].after=this;else for(var i=0,ilen=namevars.length;i<ilen;i+=1)state.build.name_label[namevars[i]].before=this}target.push(this)}},module.exports=CSL,CSL.Node.layout={build:function(state,target){var func,prefix_token,suffix_token,tok,my_tok;function setSuffix(){"bibliography"===state.build.area&&(suffix_token=new CSL.Token("text",CSL.SINGLETON),func=function(state,Item,item){var suffix;state.tmp.cite_locales[state.tmp.cite_locales.length-1];suffix=state.tmp.cite_affixes[state.tmp.area][state.tmp.last_cite_locale]?state.tmp.cite_affixes[state.tmp.area][state.tmp.last_cite_locale].suffix:state.bibliography.opt.layout_suffix;var topblob=state.output.current.value();state.opt.using_display?topblob.blobs[topblob.blobs.length-1].strings.suffix=suffix:topblob.strings.suffix=suffix,state.bibliography.opt["second-field-align"]&&state.output.endTag("bib_other")},suffix_token.execs.push(func),target.push(suffix_token))}if(this.tokentype===CSL.START&&(this.locale_raw?state.build.current_default_locale=this.locale_raw:state.build.current_default_locale=state.opt["default-locale"],func=function(state,Item,item){state.opt.development_extensions.apply_citation_wrapper&&state.sys.wrapCitationEntry&&!state.tmp.just_looking&&Item.system_id&&"citation"===state.tmp.area&&(cite_entry=new CSL.Token("group",CSL.START),cite_entry.decorations=[["@cite","entry"]],state.output.startTag("cite_entry",cite_entry),state.output.current.value().item_id=Item.system_id,item&&(state.output.current.value().locator_txt=item.locator_txt,state.output.current.value().suffix_txt=item.suffix_txt))},this.execs.push(func)),this.tokentype!==CSL.START||state.tmp.cite_affixes[state.build.area]||(func=function(state,Item){state.tmp.done_vars=[],!state.tmp.just_looking&&state.registry.registry[Item.id]&&state.registry.registry[Item.id].parallel&&state.tmp.done_vars.push("first-reference-note-number"),state.tmp.rendered_name=!1},this.execs.push(func),func=function(state,Item){state.tmp.sort_key_flag=!1},this.execs.push(func),func=function(state,Item){state.tmp.nameset_counter=0},this.execs.push(func),func=function(state,Item){var tok=new CSL.Token;state.opt.development_extensions.rtl_support&&["ar","he","fa","ur","yi","ps","syr"].indexOf(Item.language)>-1&&((tok=new CSL.Token).strings.prefix="\u202b",tok.strings.suffix="\u202c"),state.output.openLevel(tok)},this.execs.push(func),target.push(this),state.opt.development_extensions.rtl_support,"citation"===state.build.area&&(prefix_token=new CSL.Token("text",CSL.SINGLETON),func=function(state,Item,item){var sp;if(item&&item.prefix){sp="";var test_prefix=item.prefix.replace(/<[^>]+>/g,"").replace(/["'\u201d\u2019\u00bb\u202f\u00a0 ]+$/g,""),test_char=test_prefix.slice(-1);test_prefix.match(CSL.ENDSWITH_ROMANESQUE_REGEXP)?sp=" ":CSL.TERMINAL_PUNCTUATION.slice(0,-1).indexOf(test_char)>-1?sp=" ":test_char.match(/[\)\],0-9]/)&&(sp=" ");var ignorePredecessor=!1;CSL.TERMINAL_PUNCTUATION.slice(0,-1).indexOf(test_char)>-1&&item.prefix.trim().indexOf(" ")>-1&&(state.tmp.term_predecessor=!1,ignorePredecessor=!0);var prefix=(item.prefix+sp).replace(/\s+/g," ");state.tmp.just_looking||(prefix=state.output.checkNestedBrace.update(prefix)),state.output.append(prefix,this,!1,ignorePredecessor)}},prefix_token.execs.push(func),target.push(prefix_token))),this.locale_raw&&((my_tok=new CSL.Token("dummy",CSL.START)).locale=this.locale_raw,my_tok.strings.delimiter=this.strings.delimiter,my_tok.strings.suffix=this.strings.suffix,state.tmp.cite_affixes[state.build.area]||(state.tmp.cite_affixes[state.build.area]={})),this.tokentype===CSL.START&&(state.build.layout_flag=!0,this.locale_raw||(state[state.tmp.area].opt.topdecor=[this.decorations],state[state.tmp.area+"_sort"].opt.topdecor=[this.decorations],state[state.build.area].opt.layout_prefix=this.strings.prefix,state[state.build.area].opt.layout_suffix=this.strings.suffix,state[state.build.area].opt.layout_delimiter=this.strings.delimiter,state[state.build.area].opt.layout_decorations=this.decorations,state.tmp.cite_affixes[state.build.area]&&(tok=new CSL.Token("else",CSL.START),CSL.Node["else"].build.call(tok,state,target))),this.locale_raw)){if(state.build.layout_locale_flag)my_tok.name="else-if",CSL.Attributes["@locale-internal"].call(my_tok,state,this.locale_raw),CSL.Node["else-if"].build.call(my_tok,state,target);else{var choose_tok=new CSL.Token("choose",CSL.START);CSL.Node.choose.build.call(choose_tok,state,target),my_tok.name="if",CSL.Attributes["@locale-internal"].call(my_tok,state,this.locale_raw),CSL.Node["if"].build.call(my_tok,state,target)}state.tmp.cite_affixes[state.build.area][my_tok.locale]={},state.tmp.cite_affixes[state.build.area][my_tok.locale].delimiter=this.strings.delimiter,state.tmp.cite_affixes[state.build.area][my_tok.locale].suffix=this.strings.suffix}this.tokentype===CSL.END&&(this.locale_raw&&(setSuffix(),state.build.layout_locale_flag?(my_tok.name="else-if",my_tok.tokentype=CSL.END,CSL.Attributes["@locale-internal"].call(my_tok,state,this.locale_raw),CSL.Node["else-if"].build.call(my_tok,state,target)):(my_tok.name="if",my_tok.tokentype=CSL.END,CSL.Attributes["@locale-internal"].call(my_tok,state,this.locale_raw),CSL.Node["if"].build.call(my_tok,state,target),state.build.layout_locale_flag=!0)),this.locale_raw||(setSuffix(),state.tmp.cite_affixes[state.build.area]&&state.build.layout_locale_flag&&(tok=new CSL.Token("else",CSL.END),CSL.Node["else"].build.call(tok,state,target),tok=new CSL.Token("choose",CSL.END),CSL.Node.choose.build.call(tok,state,target)),state.build_layout_locale_flag=!0,"citation"===state.build.area&&(suffix_token=new CSL.Token("text",CSL.SINGLETON),func=function(state,Item,item){var sp;if(item&&item.suffix){sp="",(item.suffix.match(CSL.STARTSWITH_ROMANESQUE_REGEXP)||["[","("].indexOf(item.suffix.slice(0,1))>-1)&&(sp=" ");var suffix=item.suffix;state.tmp.just_looking||(suffix=state.output.checkNestedBrace.update(suffix)),state.output.append(sp+suffix,this)}},suffix_token.execs.push(func),target.push(suffix_token)),func=function(state,Item){state.output.closeLevel()},this.execs.push(func),func=function(state,Item){state.opt.development_extensions.apply_citation_wrapper&&state.sys.wrapCitationEntry&&!state.tmp.just_looking&&Item.system_id&&"citation"===state.tmp.area&&state.output.endTag()},this.execs.push(func),target.push(this),state.build.layout_flag=!1,state.build.layout_locale_flag=!1))}},module.exports=CSL,CSL.Node.macro={build:function(state,target){}},module.exports=CSL,CSL.NameOutput=function(state,Item,item,variables){this.debug=!1,this.state=state,this.Item=Item,this.item=item,this.nameset_base=0,this.etal_spec={},this._first_creator_variable=!1,this._please_chop=!1},CSL.NameOutput.prototype.init=function(names){this.state.tmp.term_predecessor&&(this.state.tmp.subsequent_author_substitute_ok=!1),this.nameset_offset&&(this.nameset_base=this.nameset_base+this.nameset_offset),this.nameset_offset=0,this.names=names,this.variables=names.variables,this.state.tmp.value=[],this.state.tmp.rendered_name=[],this.state.tmp.label_blob=!1,this.state.tmp.etal_node=!1,this.state.tmp.etal_term=!1;for(var i=0,ilen=this.variables.length;i<ilen;i+=1)this.Item[this.variables[i]]&&this.Item[this.variables[i]].length&&(this.state.tmp.value=this.state.tmp.value.concat(this.Item[this.variables[i]]));this["et-al"]=undefined,this["with"]=undefined,this.name=undefined,this.institutionpart={},this.state.tmp.group_context.tip.variable_attempt=!0,this.labelVariable=this.variables[0],this.state.tmp.value.length},CSL.NameOutput.prototype.reinit=function(names,labelVariable){if(this.labelVariable=labelVariable,this.state.tmp.can_substitute.value()){this.nameset_offset=0,this.variables=names.variables;var oldval=this.state.tmp.value.slice();this.state.tmp.value=[];for(var i=0,ilen=this.variables.length;i<ilen;i+=1)this.Item[this.variables[i]]&&this.Item[this.variables[i]].length&&(this.state.tmp.value=this.state.tmp.value.concat(this.Item[this.variables[i]]));this.state.tmp.value.length&&this.state.tmp.can_substitute.replace(!1,CSL.LITERAL),this.state.tmp.value=oldval}},CSL.NameOutput.prototype.outputNames=function(){var variables=this.variables;if(this.institution.and&&(this.institution.and.single.blobs&&this.institution.and.single.blobs.length||(this.institution.and.single.blobs=this.name.and.single.blobs),this.institution.and.multiple.blobs&&this.institution.and.multiple.blobs.length||(this.institution.and.multiple.blobs=this.name.and.multiple.blobs)),this.variable_offset={},this.family)for(this.family_decor=CSL.Util.cloneToken(this.family),this.family_decor.strings.prefix="",this.family_decor.strings.suffix="",i=0,ilen=this.family.execs.length;i<ilen;i+=1)this.family.execs[i].call(this.family_decor,this.state,this.Item);else this.family_decor=!1;if(this.given)for(this.given_decor=CSL.Util.cloneToken(this.given),this.given_decor.strings.prefix="",this.given_decor.strings.suffix="",i=0,ilen=this.given.execs.length;i<ilen;i+=1)this.given.execs[i].call(this.given_decor,this.state,this.Item);else this.given_decor=!1;if(this.getEtAlConfig(),this.divideAndTransliterateNames(),this.truncatePersonalNameLists(),this.disambigNames(),this.constrainNames(),"count"!==this.name.strings.form){this.setEtAlParameters(),this.setCommonTerm(),this.state.tmp.name_node={},this.state.tmp.name_node.children=[],this.renderAllNames();var blob_list=[];for(i=0,ilen=variables.length;i<ilen;i+=1){var v=variables[i],institution_sets=[],institutions=!1,varblob=null;if(this.state.opt.development_extensions.spoof_institutional_affiliations){for(var j=0,jlen=this.institutions[v].length;j<jlen;j+=1)institution_sets.push(this.joinPersonsAndInstitutions([this.persons[v][j],this.institutions[v][j]]));if(this.institutions[v].length){var pos=this.nameset_base+this.variable_offset[v];this.freeters[v].length&&(pos+=1),institutions=this.joinInstitutionSets(institution_sets,pos)}varblob=this.joinFreetersAndInstitutionSets([this.freeters[v],institutions])}else varblob=this._join([this.freeters[v]],"");if(varblob&&(this.state.tmp.extension||(varblob=this._applyLabels(varblob,v)),blob_list.push(varblob)),this.common_term)break}for(this.state.output.openLevel("empty"),this.state.output.current.value().strings.delimiter=this.state.inheritOpt(this.names,"delimiter","names-delimiter"),i=0,ilen=blob_list.length;i<ilen;i+=1)this.state.output.append(blob_list[i],"literal",!0);this.state.output.closeLevel("empty");var blob=this.state.output.pop(),namesToken=CSL.Util.cloneToken(this.names);if(this.state.output.append(blob,namesToken),this.state.tmp.term_predecessor_name&&(this.state.tmp.term_predecessor=!0),this.state.tmp.name_node.top=this.state.output.current.value(),"authority"!==variables[0]){var name_node_string=[],nameobjs=this.Item[variables[0]];if(nameobjs)for(var i=0,ilen=nameobjs.length;i<ilen;i+=1){var substring=CSL.Util.Names.getRawName(nameobjs[i]);substring&&name_node_string.push(substring)}(name_node_string=name_node_string.join(", "))&&(this.state.tmp.name_node.string=name_node_string)}if(this.state.tmp.name_node.string&&!this.state.tmp.first_name_string&&(this.state.tmp.first_name_string=this.state.tmp.name_node.string),"classic"===this.Item.type){var author_title=[];this.state.tmp.first_name_string&&author_title.push(this.state.tmp.first_name_string),this.Item.title&&author_title.push(this.Item.title),(author_title=author_title.join(", "))&&this.state.sys.getAbbreviation&&(this.state.transform.loadAbbreviation("default","classic",author_title),this.state.transform.abbrevs["default"].classic[author_title]&&(this.state.tmp.done_vars.push("title"),this.state.output.append(this.state.transform.abbrevs["default"].classic[author_title],"empty",!0),blob=this.state.output.pop(),this.state.tmp.name_node.top.blobs.pop(),this.state.tmp.name_node.top.blobs.push(blob)))}this._collapseAuthor(),this.variables=[]}else(this.state.tmp.extension||0!=this.names_count)&&(this.state.output.append(this.names_count,"empty"),this.state.tmp.group_context.tip.variable_success=!0)},CSL.NameOutput.prototype._applyLabels=function(blob,v){var txt;if(!this.label||!this.label[this.labelVariable])return blob;var plural=0,num=this.freeters_count[v]+this.institutions_count[v];if(num>1)plural=1;else{for(var i=0,ilen=this.persons[v].length;i<ilen;i+=1)num+=this.persons_count[v][i];num>1&&(plural=1)}return this.label[this.labelVariable].before?("number"==typeof this.label[this.labelVariable].before.strings.plural&&(plural=this.label[this.labelVariable].before.strings.plural),txt=this._buildLabel(v,plural,"before",this.labelVariable),this.state.output.openLevel("empty"),this.state.output.append(txt,this.label[this.labelVariable].before,!0),this.state.output.append(blob,"literal",!0),this.state.output.closeLevel("empty"),blob=this.state.output.pop()):this.label[this.labelVariable].after&&("number"==typeof this.label[this.labelVariable].after.strings.plural&&(plural=this.label[this.labelVariable].after.strings.plural),txt=this._buildLabel(v,plural,"after",this.labelVariable),this.state.output.openLevel("empty"),this.state.output.append(blob,"literal",!0),this.state.output.append(txt,this.label[this.labelVariable].after,!0),this.state.tmp.label_blob=this.state.output.pop(),this.state.output.append(this.state.tmp.label_blob,"literal",!0),this.state.output.closeLevel("empty"),blob=this.state.output.pop()),blob},CSL.NameOutput.prototype._buildLabel=function(term,plural,position,v){this.common_term&&(term=this.common_term);var ret=!1,node=this.label[v][position];return node&&(ret=CSL.castLabel(this.state,node,term,plural,CSL.TOLERANT)),ret},CSL.NameOutput.prototype._collapseAuthor=function(){var myqueue,mystr,oldchars;0===this.nameset_base&&this.Item[this.variables[0]]&&!this._first_creator_variable&&(this._first_creator_variable=this.variables[0]),(this.item&&this.item["suppress-author"]&&this._first_creator_variable==this.variables[0]||this.state[this.state.tmp.area].opt.collapse&&this.state[this.state.tmp.area].opt.collapse.length||this.state[this.state.tmp.area].opt.cite_group_delimiter&&this.state[this.state.tmp.area].opt.cite_group_delimiter.length)&&(this.state.tmp.authorstring_request?(mystr="",myqueue=this.state.tmp.name_node.top.blobs.slice(-1)[0].blobs,oldchars=this.state.tmp.offset_characters,myqueue&&(mystr=this.state.output.string(this.state,myqueue,!1)),this.state.tmp.offset_characters=oldchars,this.state.registry.authorstrings[this.Item.id]=mystr):this.state.tmp.just_looking||this.state.tmp.suppress_decorations||!(this.item["suppress-author"]||this.state[this.state.tmp.area].opt.collapse&&this.state[this.state.tmp.area].opt.collapse.length||this.state[this.state.tmp.area].opt.cite_group_delimiter&&this.state[this.state.tmp.area].opt.cite_group_delimiter)||(mystr="",myqueue=this.state.tmp.name_node.top.blobs.slice(-1)[0].blobs,oldchars=this.state.tmp.offset_characters,myqueue&&(mystr=this.state.output.string(this.state,myqueue,!1)),mystr===this.state.tmp.last_primary_names_string?((this.item["suppress-author"]||this.state[this.state.tmp.area].opt.collapse&&this.state[this.state.tmp.area].opt.collapse.length)&&(this.state.tmp.name_node.top.blobs.pop(),this.state.tmp.name_node.children=[],this.state.tmp.offset_characters=oldchars),this.state[this.state.tmp.area].opt.cite_group_delimiter&&this.state[this.state.tmp.area].opt.cite_group_delimiter&&(this.state.tmp.use_cite_group_delimiter=!0)):(this.state.tmp.last_primary_names_string=mystr,this.variables.indexOf(this._first_creator_variable)>-1&&this.item&&this.item["suppress-author"]&&"legal_case"!==this.Item.type&&(this.state.tmp.name_node.top.blobs.pop(),this.state.tmp.name_node.children=[],this.state.tmp.offset_characters=oldchars,this.state.tmp.term_predecessor=!1),this.state.tmp.have_collapsed=!1,this.state[this.state.tmp.area].opt.cite_group_delimiter&&this.state[this.state.tmp.area].opt.cite_group_delimiter&&(this.state.tmp.use_cite_group_delimiter=!1))))},module.exports=CSL,CSL.NameOutput.prototype.isPerson=function(value){return!(value.literal||!value.given&&value.family&&value.isInstitution)},module.exports=CSL,CSL.NameOutput.prototype.truncatePersonalNameLists=function(){var v,i,ilen,chopvar;for(v in this.freeters_count={},this.persons_count={},this.institutions_count={},this.freeters)this.freeters.hasOwnProperty(v)&&(this.freeters_count[v]=this.freeters[v].length,this.freeters[v]=this._truncateNameList(this.freeters,v));for(v in this.persons)if(this.persons.hasOwnProperty(v))for(this.institutions_count[v]=this.institutions[v].length,this._truncateNameList(this.institutions,v),this.persons[v]=this.persons[v].slice(0,this.institutions[v].length),this.persons_count[v]=[],j=0,jlen=this.persons[v].length;j<jlen;j+=1)this.persons_count[v][j]=this.persons[v][j].length,this.persons[v][j]=this._truncateNameList(this.persons,v,j);if((chopvar=1===this.etal_min&&1===this.etal_use_first&&!this.state.tmp.extension&&!this.state.tmp.just_looking&&v)||this._please_chop)for(i=0,ilen=this.variables.length;i<ilen;i+=1){v=this.variables[i],this.freeters[v].length&&(this._please_chop===v?(this.freeters[v]=this.freeters[v].slice(1),this.freeters_count[v]+=-1,this._please_chop=!1):chopvar&&!this._please_chop&&(this.freeters[v]=this.freeters[v].slice(0,1),this.freeters_count[v]=1,this.institutions[v]=[],this.persons[v]=[],this._please_chop=chopvar));for(var j=0,jlen=this.persons[v].length;j<jlen;j++)if(this.persons[v][j].length){if(this._please_chop===v){this.persons[v][j]=this.persons[v][j].slice(1),this.persons_count[v][j]+=-1,this._please_chop=!1;break}if(chopvar&&!this._please_chop){this.freeters[v]=this.persons[v][j].slice(0,1),this.freeters_count[v]=1,this.institutions[v]=[],this.persons[v]=[],[],this._please_chop=chopvar;break}}this.institutions[v].length&&(this._please_chop===v?(this.institutions[v]=this.institutions[v].slice(1),this.institutions_count[v]+=-1,this._please_chop=!1):chopvar&&!this._please_chop&&(this.institutions[v]=this.institutions[v].slice(0,1),this.institutions_count[v]=1,[],this._please_chop=chopvar))}for(i=0,ilen=this.variables.length;i<ilen;i+=1){this.institutions[v].length&&(this.nameset_offset+=1);for(j=0,jlen=this.persons[v].length;j<jlen;j++)this.persons[v][j].length&&(this.nameset_offset+=1)}},CSL.NameOutput.prototype._truncateNameList=function(container,variable,index){var lst;if(lst=void 0===index?container[variable]:container[variable][index],this.state[this.state[this.state.tmp.area].root].opt.max_number_of_names&&lst.length>50&&lst.length>this.state[this.state[this.state.tmp.area].root].opt.max_number_of_names+2){var limit=this.state[this.state[this.state.tmp.area].root].opt.max_number_of_names;lst=lst.slice(0,limit+1).concat(lst.slice(-1))}return lst},module.exports=CSL,CSL.NameOutput.prototype.divideAndTransliterateNames=function(){var i,ilen,j,jlen,Item=this.Item,variables=this.variables;for(this.varnames=variables.slice(),this.freeters={},this.persons={},this.institutions={},i=0,ilen=variables.length;i<ilen;i+=1){var v=variables[i];this.variable_offset[v]=this.nameset_offset;var values=this._normalizeVariableValue(Item,v);if(this.name.strings["suppress-min"]&&values.length>=this.name.strings["suppress-min"]&&(values=[]),this.name.strings["suppress-max"]&&values.length<=this.name.strings["suppress-max"]&&(values=[]),this._getFreeters(v,values),this._getPersonsAndInstitutions(v,values),this.state.opt.development_extensions.spoof_institutional_affiliations)if(0===this.name.strings["suppress-min"])for(this.freeters[v]=[],j=0,jlen=this.persons[v].length;j<jlen;j+=1)this.persons[v][j]=[];else if(0===this.institution.strings["suppress-min"]){for(this.institutions[v]=[],this.freeters[v]=this.freeters[v].concat(this.persons[v]),j=0,jlen=this.persons[v].length;j<jlen;j+=1)for(var k=0,klen=this.persons[v][j].length;k<klen;k+=1)this.freeters[v].push(this.persons[v][j][k]);this.persons[v]=[]}}},CSL.NameOutput.prototype._normalizeVariableValue=function(Item,variable){var names;return"string"==typeof Item[variable]||"number"==typeof Item[variable]?(CSL.debug('name variable "'+variable+'" is string or number, not array. Attempting to fix.'),names=[{literal:Item[variable]+""}]):Item[variable]?"number"!=typeof Item[variable].length?(CSL.debug('name variable "'+variable+'" is object, not array. Attempting to fix.'),Item[variable]=[Item[variable]],names=Item[variable].slice()):names=Item[variable].slice():names=[],names},CSL.NameOutput.prototype._getFreeters=function(v,values){if(this.freeters[v]=[],this.state.opt.development_extensions.spoof_institutional_affiliations)for(var i=values.length-1;i>-1&&this.isPerson(values[i]);i--){(value=this._checkNickname(values.pop()))&&this.freeters[v].push(value)}else for(i=values.length-1;i>-1;i--){var value=values.pop();if(this.isPerson(value))value=this._checkNickname(value);this.freeters[v].push(value)}this.freeters[v].reverse(),this.freeters[v].length&&(this.nameset_offset+=1)},CSL.NameOutput.prototype._getPersonsAndInstitutions=function(v,values){if(this.persons[v]=[],this.institutions[v]=[],this.state.opt.development_extensions.spoof_institutional_affiliations){for(var persons=[],has_affiliates=!1,first=!0,i=values.length-1;i>-1;i+=-1)if(this.isPerson(values[i])){var value=this._checkNickname(values[i]);value&&persons.push(value)}else has_affiliates=!0,this.institutions[v].push(values[i]),first||(persons.reverse(),this.persons[v].push(persons),persons=[]),first=!1;has_affiliates&&(persons.reverse(),this.persons[v].push(persons),this.persons[v].reverse(),this.institutions[v].reverse())}},CSL.NameOutput.prototype._clearValues=function(values){for(var i=values.length-1;i>-1;i+=-1)values.pop()},CSL.NameOutput.prototype._checkNickname=function(name){if(["interview","personal_communication"].indexOf(this.Item.type)>-1){var author;if((author=CSL.Util.Names.getRawName(name))&&this.state.sys.getAbbreviation&&(!this.item||!this.item["suppress-author"])){var normalizedKey=author;this.state.sys.normalizeAbbrevsKey&&(normalizedKey=this.state.sys.normalizeAbbrevsKey(author)),this.state.transform.loadAbbreviation("default","nickname",normalizedKey);var myLocalName=this.state.transform.abbrevs["default"].nickname[normalizedKey];myLocalName&&(name="!here>>>"!==myLocalName&&{family:myLocalName,given:""})}}return name},module.exports=CSL,CSL.NameOutput.prototype.joinPersons=function(blobs,pos,j,tokenname){return tokenname||(tokenname="name"),void 0===j?1===this.etal_spec[pos].freeters?this._joinEtAl(blobs,tokenname):2===this.etal_spec[pos].freeters?this._joinEllipsis(blobs,tokenname):this.state.tmp.sort_key_flag?this._join(blobs," "):this._joinAnd(blobs,tokenname):1===this.etal_spec[pos].persons[j]?this._joinEtAl(blobs,tokenname):2===this.etal_spec[pos].persons[j]?this._joinEllipsis(blobs,tokenname):this.state.tmp.sort_key_flag?this._join(blobs," "):this._joinAnd(blobs,tokenname)},CSL.NameOutput.prototype.joinInstitutionSets=function(blobs,pos){return 1===this.etal_spec[pos].institutions?this._joinEtAl(blobs,"institution"):2===this.etal_spec[pos].institutions?this._joinEllipsis(blobs,"institution"):this._joinAnd(blobs,"institution")},CSL.NameOutput.prototype.joinPersonsAndInstitutions=function(blobs){return this._join(blobs,this.state.tmp.name_delimiter)},CSL.NameOutput.prototype.joinFreetersAndInstitutionSets=function(blobs){return this._join(blobs,"[never here]",this["with"].single,this["with"].multiple)},CSL.NameOutput.prototype._joinEtAl=function(blobs,tokenname){var blob=this._join(blobs,this.state.tmp.name_delimiter);return this.state.output.openLevel(this._getToken(tokenname)),this.state.output.current.value().strings.delimiter="",this.state.output.append(blob,"literal",!0),blobs.length>1?this.state.output.append(this["et-al"].multiple,"literal",!0):1===blobs.length&&this.state.output.append(this["et-al"].single,"literal",!0),this.state.output.closeLevel(),this.state.output.pop()},CSL.NameOutput.prototype._joinEllipsis=function(blobs,tokenname){return this._join(blobs,this.state.tmp.name_delimiter,this.name.ellipsis.single,this.name.ellipsis.multiple,tokenname)},CSL.NameOutput.prototype._joinAnd=function(blobs,tokenname){return this._join(blobs,this.state.inheritOpt(this[tokenname],"delimiter",tokenname+"-delimiter",", "),this[tokenname].and.single,this[tokenname].and.multiple,tokenname)},CSL.NameOutput.prototype._join=function(blobs,delimiter,single,multiple,tokenname){var i,ilen;if(!blobs)return!1;for(i=blobs.length-1;i>-1;i+=-1)blobs[i]&&0!==blobs[i].length&&blobs[i].blobs.length||(blobs=blobs.slice(0,i).concat(blobs.slice(i+1)));if(!blobs.length)return!1;if(single&&2===blobs.length)single&&(single=new CSL.Blob(single.blobs,single)),blobs=[blobs[0],single,blobs[1]];else{var delimiter_offset;for(delimiter_offset=multiple?2:1,i=0,ilen=blobs.length-delimiter_offset;i<ilen;i+=1)blobs[i].strings.suffix+=delimiter;if(blobs.length>1){var blob=blobs.pop();multiple?(multiple=new CSL.Blob(multiple.blobs,multiple),blobs.push(multiple)):(single&&(single=new CSL.Blob(single.blobs,single)),blobs.push(single)),blobs.push(blob)}}for(this.state.output.openLevel(),single&&multiple&&(this.state.output.current.value().strings.delimiter=""),i=0,ilen=blobs.length;i<ilen;i+=1)this.state.output.append(blobs[i],!1,!0);return this.state.output.closeLevel(),this.state.output.pop()},CSL.NameOutput.prototype._getToken=function(tokenname){var token=this[tokenname];return"institution"===tokenname?new CSL.Token:token},module.exports=CSL,CSL.NameOutput.prototype.setCommonTerm=function(){var varnames=this.variables.slice();if(varnames.sort(),this.common_term=varnames.join(""),!this.common_term)return!1;var has_term=!1;if(this.label&&this.label[this.variables[0]]&&(this.label[this.variables[0]].before?has_term=this.state.getTerm(this.common_term,this.label[this.variables[0]].before.strings.form,0):this.label[this.variables[0]].after&&(has_term=this.state.getTerm(this.common_term,this.label[this.variables[0]].after.strings.form,0))),!this.state.locale[this.state.opt.lang].terms[this.common_term]||!has_term||this.variables.length<2)this.common_term=!1;else for(var i=0,ilen=this.variables.length-1;i<ilen;i+=1){var v=this.variables[i],vv=this.variables[i+1];if(this.freeters[v].length||this.freeters[vv].length){if(this.etal_spec[v].freeters!==this.etal_spec[vv].freeters||!this._compareNamesets(this.freeters[v],this.freeters[vv]))return void(this.common_term=!1);1}if(this.persons[v].length!==this.persons[vv].length)return void(this.common_term=!1);for(var j=0,jlen=this.persons[v].length;j<jlen;j+=1)if(this.etal_spec[v].persons[j]!==this.etal_spec[vv].persons[j]||!this._compareNamesets(this.persons[v][j],this.persons[vv][j]))return void(this.common_term=!1)}},CSL.NameOutput.prototype._compareNamesets=function(base_nameset,nameset){if(base_nameset.length!==nameset.length)return!1;for(var i=0,ilen=nameset.length;i<ilen;i+=1){nameset[i];for(var j=0,jlen=CSL.NAME_PARTS.length;j<jlen;j+=1){var part=CSL.NAME_PARTS[j];if(!base_nameset[i]||base_nameset[i][part]!=nameset[i][part])return!1}}return!0},module.exports=CSL,CSL.NameOutput.prototype.constrainNames=function(){var pos;this.names_count=0;for(var i=0,ilen=this.variables.length;i<ilen;i+=1){var v=this.variables[i];pos=this.nameset_base+i,this.freeters[v].length&&(this.state.tmp.names_max.push(this.freeters[v].length,"literal"),this._imposeNameConstraints(this.freeters,this.freeters_count,v,pos),this.names_count+=this.freeters[v].length),this.institutions[v].length&&(this.state.tmp.names_max.push(this.institutions[v].length,"literal"),this._imposeNameConstraints(this.institutions,this.institutions_count,v,pos),this.persons[v]=this.persons[v].slice(0,this.institutions[v].length),this.names_count+=this.institutions[v].length);for(var j=0,jlen=this.persons[v].length;j<jlen;j+=1)this.persons[v][j].length&&(this.state.tmp.names_max.push(this.persons[v][j].length,"literal"),this._imposeNameConstraints(this.persons[v],this.persons_count[v],j,pos),this.names_count+=this.persons[v][j].length)}},CSL.NameOutput.prototype._imposeNameConstraints=function(lst,count,key,pos){var display_names=lst[key],discretionary_names_length=this.state.tmp["et-al-min"];this.state.tmp.suppress_decorations?this.state.tmp.disambig_request&&this.state.tmp.disambig_request.names[pos]?discretionary_names_length=this.state.tmp.disambig_request.names[pos]:count[key]>=this.etal_min&&(discretionary_names_length=this.etal_use_first):(this.state.tmp.disambig_request&&this.state.tmp.disambig_request.names[pos]>this.etal_use_first?discretionary_names_length=count[key]<this.etal_min?count[key]:this.state.tmp.disambig_request.names[pos]:count[key]>=this.etal_min&&(discretionary_names_length=this.etal_use_first),this.etal_use_last&&discretionary_names_length>this.etal_min-2&&(discretionary_names_length=this.etal_min-2));var sane=this.etal_min>=this.etal_use_first,overlength=count[key]>discretionary_names_length;discretionary_names_length>count[key]&&(discretionary_names_length=display_names.length),sane&&overlength&&(this.etal_use_last?lst[key]=display_names.slice(0,discretionary_names_length).concat(display_names.slice(-1)):lst[key]=display_names.slice(0,discretionary_names_length)),this.state.tmp.disambig_settings.names[pos]=lst[key].length,this.state.disambiguate.padBase(this.state.tmp.disambig_settings)},module.exports=CSL,CSL.NameOutput.prototype.disambigNames=function(){for(var pos,i=0,ilen=this.variables.length;i<ilen;i+=1){var v=this.variables[i];if(pos=this.nameset_base+i,this.freeters[v].length&&this._runDisambigNames(this.freeters[v],pos),this.institutions[v].length){"undefined"==typeof this.state.tmp.disambig_settings.givens[pos]&&(this.state.tmp.disambig_settings.givens[pos]=[]);for(var j=0,jlen=this.institutions[v].length;j<jlen;j+=1)"undefined"==typeof this.state.tmp.disambig_settings.givens[pos][j]&&this.state.tmp.disambig_settings.givens[pos].push(2)}for(j=0,jlen=this.persons[v].length;j<jlen;j+=1)this.persons[v][j].length&&this._runDisambigNames(this.persons[v][j],pos)}},CSL.NameOutput.prototype._runDisambigNames=function(lst,pos){var myform,myinitials,param,i,ilen,paramx;for(i=0,ilen=lst.length;i<ilen;i+=1)if(lst[i].given||lst[i].family){if(myinitials=this.state.inheritOpt(this.name,"initialize-with"),this.state.registry.namereg.addname(""+this.Item.id,lst[i],i),void 0===this.state.tmp.disambig_settings.givens[pos])for(var j=0,jlen=pos+1;j<jlen;j+=1)this.state.tmp.disambig_settings.givens[j]||(this.state.tmp.disambig_settings.givens[j]=[]);if(void 0===this.state.tmp.disambig_settings.givens[pos][i]&&(myform=this.state.inheritOpt(this.name,"form","name-form"),param=this.state.registry.namereg.evalname(""+this.Item.id,lst[i],i,0,myform,myinitials),this.state.tmp.disambig_settings.givens[pos].push(param)),myform=this.state.inheritOpt(this.name,"form","name-form"),paramx=this.state.registry.namereg.evalname(""+this.Item.id,lst[i],i,0,myform,myinitials),this.state.tmp.disambig_request){var val=this.state.tmp.disambig_settings.givens[pos][i];1!==val||"by-cite"!==this.state.citation.opt["givenname-disambiguation-rule"]||void 0!==this.state.inheritOpt(this.name,"initialize-with")&&"undefined"!=typeof lst[i].given||(val=2),param=val,this.state.opt["disambiguate-add-givenname"]&&lst[i].given&&(param=this.state.registry.namereg.evalname(""+this.Item.id,lst[i],i,param,this.state.inheritOpt(this.name,"form","name-form"),this.state.inheritOpt(this.name,"initialize-with")))}else param=paramx;!this.state.tmp.just_looking&&this.item&&this.item.position===CSL.POSITION_FIRST&&paramx>param&&(param=paramx),this.state.tmp.sort_key_flag||(this.state.tmp.disambig_settings.givens[pos][i]=param,"string"!=typeof myinitials||"undefined"!=typeof this.name.strings.initialize&&!0!==this.name.strings.initialize||(this.state.tmp.disambig_settings.use_initials=!0))}},module.exports=CSL,CSL.NameOutput.prototype.getEtAlConfig=function(){var item=this.item;this["et-al"]={},this.state.output.append(this.etal_term,this.etal_style,!0),this["et-al"].single=this.state.output.pop(),this["et-al"].single.strings.suffix=this.etal_suffix,this["et-al"].single.strings.prefix=this.etal_prefix_single,this.state.output.append(this.etal_term,this.etal_style,!0),this["et-al"].multiple=this.state.output.pop(),this["et-al"].multiple.strings.suffix=this.etal_suffix,this["et-al"].multiple.strings.prefix=this.etal_prefix_multiple,void 0===item&&(item={}),item.position?(this.state.inheritOpt(this.name,"et-al-subsequent-min")?this.etal_min=this.state.inheritOpt(this.name,"et-al-subsequent-min"):this.etal_min=this.state.inheritOpt(this.name,"et-al-min"),this.state.inheritOpt(this.name,"et-al-subsequent-use-first")?this.etal_use_first=this.state.inheritOpt(this.name,"et-al-subsequent-use-first"):this.etal_use_first=this.state.inheritOpt(this.name,"et-al-use-first")):(this.state.tmp["et-al-min"]?this.etal_min=this.state.tmp["et-al-min"]:this.etal_min=this.state.inheritOpt(this.name,"et-al-min"),this.state.tmp["et-al-use-first"]?this.etal_use_first=this.state.tmp["et-al-use-first"]:this.etal_use_first=this.state.inheritOpt(this.name,"et-al-use-first"),"boolean"==typeof this.state.tmp["et-al-use-last"]?this.etal_use_last=this.state.tmp["et-al-use-last"]:this.etal_use_last=this.state.inheritOpt(this.name,"et-al-use-last")),this.state.tmp["et-al-min"]||(this.state.tmp["et-al-min"]=this.etal_min)},module.exports=CSL,CSL.NameOutput.prototype.setEtAlParameters=function(){var i,ilen,j,jlen;for(i=0,ilen=this.variables.length;i<ilen;i+=1){var v=this.variables[i];for("undefined"==typeof this.etal_spec[v]&&(this.etal_spec[v]={freeters:0,institutions:0,persons:[]}),this.etal_spec[this.nameset_base+i]=this.etal_spec[v],this.freeters[v].length&&this._setEtAlParameter("freeters",v),j=0,jlen=this.persons[v].length;j<jlen;j+=1)"undefined"==typeof this.etal_spec[v][j]&&(this.etal_spec[v].persons[j]=0),this._setEtAlParameter("persons",v,j);this.institutions[v].length&&this._setEtAlParameter("institutions",v)}},CSL.NameOutput.prototype._setEtAlParameter=function(type,v,j){var lst,count;"persons"===type?(lst=this.persons[v][j],count=this.persons_count[v][j]):(lst=this[type][v],count=this[type+"_count"][v]),lst.length<count&&!this.state.tmp.sort_key_flag?this.etal_use_last?"persons"===type?this.etal_spec[v].persons[j]=2:this.etal_spec[v][type]=2:"persons"===type?this.etal_spec[v].persons[j]=1:this.etal_spec[v][type]=1:"persons"===type?this.etal_spec[v].persons[j]=0:this.etal_spec[v][type]=0},module.exports=CSL,CSL.NameOutput.prototype.renderAllNames=function(){for(var pos,i=0,ilen=this.variables.length;i<ilen;i+=1){var v=this.variables[i];(this.freeters[v].length||this.institutions[v].length)&&(this.state.tmp.group_context.tip.condition||(this.state.tmp.just_did_number=!1)),pos=this.nameset_base+i,this.freeters[v].length&&(this.freeters[v]=this._renderNames(v,this.freeters[v],pos));for(var j=0,jlen=this.institutions[v].length;j<jlen;j+=1)this.persons[v][j]=this._renderNames(v,this.persons[v][j],pos,j)}this.renderInstitutionNames()},CSL.NameOutput.prototype.renderInstitutionNames=function(){for(var i=0,ilen=this.variables.length;i<ilen;i+=1)for(var v=this.variables[i],j=0,jlen=this.institutions[v].length;j<jlen;j+=1){var localesets,name=this.institutions[v][j],slot={primary:"locale-orig",secondary:!1,tertiary:!1};if(localesets=this.state.tmp.extension?["sort"]:name.isInstitution||name.literal?this.state.opt["cite-lang-prefs"].institutions:this.state.opt["cite-lang-prefs"].persons)for(var slotnames=["primary","secondary","tertiary"],k=0,klen=slotnames.length;k<klen&&!(localesets.length-1<k);k+=1)localesets[k]&&(slot[slotnames[k]]="locale-"+localesets[k]);else slot.primary="locale-translat";"bibliography"===this.state.tmp.area||"citation"===this.state.tmp.area&&"note"===this.state.opt.xclass&&this.item&&!this.item.position||(slot.secondary=!1,slot.tertiary=!1),this.setRenderedName(name);var institution=this._renderInstitutionName(v,name,slot,j);this.institutions[v][j]=institution}},CSL.NameOutput.prototype._renderInstitutionName=function(v,name,slot,j){var tertiary,long_style,short_style,institution,institution_short,res=this.getName(name,slot.primary,!0),primary=res.name,usedOrig=res.usedOrig;if(primary&&(primary=this.fixupInstitution(primary,v,j)),secondary=!1,slot.secondary){var secondary=(res=this.getName(name,slot.secondary,!1,usedOrig)).name;usedOrig=res.usedOrig,secondary&&(secondary=this.fixupInstitution(secondary,v,j))}tertiary=!1,slot.tertiary&&(tertiary=(res=this.getName(name,slot.tertiary,!1,usedOrig)).name)&&(tertiary=this.fixupInstitution(tertiary,v,j));var n={l:{pri:!1,sec:!1,ter:!1},s:{pri:!1,sec:!1,ter:!1}};switch(primary&&(n.l.pri=primary.long,n.s.pri=primary.short.length?primary.short:primary.long),secondary&&(n.l.sec=secondary.long,n.s.sec=secondary.short.length?secondary.short:secondary.long),tertiary&&(n.l.ter=tertiary.long,n.s.ter=tertiary.short.length?tertiary.short:tertiary.long),this.institution.strings["institution-parts"]){case"short":primary.short.length?(short_style=this._getShortStyle(),institution=[this._composeOneInstitutionPart([n.s.pri,n.s.sec,n.s.ter],slot,short_style,v)]):(long_style=this._getLongStyle(primary,v,j),institution=[this._composeOneInstitutionPart([n.l.pri,n.l.sec,n.l.ter],slot,long_style,v)]);break;case"short-long":long_style=this._getLongStyle(primary,v,j),short_style=this._getShortStyle(),institution=[institution_short=this._renderOneInstitutionPart(primary.short,short_style),this._composeOneInstitutionPart([n.l.pri,n.l.sec,n.l.ter],slot,long_style,v)];break;case"long-short":long_style=this._getLongStyle(primary,v,j),short_style=this._getShortStyle(),institution_short=this._renderOneInstitutionPart(primary.short,short_style),institution=[this._composeOneInstitutionPart([n.l.pri,n.l.sec,n.l.ter],slot,long_style,v),institution_short];break;default:long_style=this._getLongStyle(primary,v,j),institution=[this._composeOneInstitutionPart([n.l.pri,n.l.sec,n.l.ter],slot,long_style,v)]}var blob=this._join(institution," ");return this.state.tmp.name_node.children.push(blob),blob},CSL.NameOutput.prototype._composeOneInstitutionPart=function(names,slot,style,v){var primary_tok,secondary_tok,tertiary_tok,institutionblob,primary=!1,secondary=!1,tertiary=!1;if(names[0]){if(primary_tok=CSL.Util.cloneToken(style),this.state.opt.citeAffixes[slot.primary]&&"<i>"===this.state.opt.citeAffixes.institutions[slot.primary].prefix){for(var hasItalic=!1,i=0,ilen=primary_tok.decorations.length;i<ilen;i+=1)"@font-style"===style.decorations[i][0]&&"italic"===primary_tok.decorations[i][1]&&(hasItalic=!0);hasItalic||primary_tok.decorations.push(["@font-style","italic"])}primary=this._renderOneInstitutionPart(names[0],primary_tok)}if(names[1]&&(secondary=this._renderOneInstitutionPart(names[1],style)),names[2]&&(tertiary=this._renderOneInstitutionPart(names[2],style)),secondary||tertiary){this.state.output.openLevel("empty"),this.state.output.append(primary),secondary_tok=CSL.Util.cloneToken(style),slot.secondary&&(secondary_tok.strings.prefix=this.state.opt.citeAffixes.institutions[slot.secondary].prefix,secondary_tok.strings.suffix=this.state.opt.citeAffixes.institutions[slot.secondary].suffix,secondary_tok.strings.prefix||(secondary_tok.strings.prefix=" "));var secondary_outer=new CSL.Token;secondary_outer.decorations.push(["@font-style","normal"]),secondary_outer.decorations.push(["@font-weight","normal"]),this.state.output.openLevel(secondary_outer),this.state.output.append(secondary,secondary_tok),this.state.output.closeLevel(),tertiary_tok=CSL.Util.cloneToken(style),slot.tertiary&&(tertiary_tok.strings.prefix=this.state.opt.citeAffixes.institutions[slot.tertiary].prefix,tertiary_tok.strings.suffix=this.state.opt.citeAffixes.institutions[slot.tertiary].suffix,tertiary_tok.strings.prefix||(tertiary_tok.strings.prefix=" "));var tertiary_outer=new CSL.Token;tertiary_outer.decorations.push(["@font-style","normal"]),tertiary_outer.decorations.push(["@font-weight","normal"]),this.state.output.openLevel(tertiary_outer),this.state.output.append(tertiary,tertiary_tok),this.state.output.closeLevel(),this.state.output.closeLevel(),institutionblob=this.state.output.pop()}else institutionblob=primary;return institutionblob},CSL.NameOutput.prototype._renderOneInstitutionPart=function(blobs,style){for(var i=0,ilen=blobs.length;i<ilen;i+=1)if(blobs[i]){var str=blobs[i];if(this.state.tmp.strip_periods)str=str.replace(/\./g,"");else for(var j=0,jlen=style.decorations.length;j<jlen;j+=1)if("@strip-periods"===style.decorations[j][0]&&"true"===style.decorations[j][1]){str=str.replace(/\./g,"");break}this.state.tmp.group_context.tip.variable_success=!0,this.state.tmp.can_substitute.replace(!1,CSL.LITERAL),"!here>>>"===str?blobs[i]=!1:(this.state.output.append(str,style,!0),blobs[i]=this.state.output.pop())}return"undefined"==typeof this.institution.strings["part-separator"]&&(this.institution.strings["part-separator"]=this.state.tmp.name_delimiter),this._join(blobs,this.institution.strings["part-separator"])},CSL.NameOutput.prototype._renderNames=function(v,values,pos,j){var ret=!1;if(values.length){for(var names=[],i=0,ilen=values.length;i<ilen;i+=1){var localesets,name=values[i],slot={primary:"locale-orig",secondary:!1,tertiary:!1};if(localesets=this.state.tmp.extension?["sort"]:name.isInstitution||name.literal?this.state.opt["cite-lang-prefs"].institutions:this.state.opt["cite-lang-prefs"].persons)for(var slotnames=["primary","secondary","tertiary"],k=0,klen=slotnames.length;k<klen&&!(localesets.length-1<k);k+=1)slot[slotnames[k]]="locale-"+localesets[k];else slot.primary="locale-translat";if((this.state.tmp.sort_key_flag||"bibliography"!==this.state.tmp.area&&("citation"!==this.state.tmp.area||"note"!==this.state.opt.xclass||!this.item||this.item.position))&&(slot.secondary=!1,slot.tertiary=!1),this.setRenderedName(name),name.literal||name.isInstitution)names.push(this._renderInstitutionName(v,name,slot,j));else{var nameBlob=this._renderPersonalName(v,name,slot,pos,i,j),nameToken=CSL.Util.cloneToken(this.name);this.state.output.append(nameBlob,nameToken,!0),names.push(this.state.output.pop())}}ret=this.joinPersons(names,pos,j)}return ret},CSL.NameOutput.prototype._renderPersonalName=function(v,name,slot,pos,i,j){var res=this.getName(name,slot.primary,!0),primary=this._renderOnePersonalName(res.name,pos,i,j),secondary=!1;slot.secondary&&(res=this.getName(name,slot.secondary,!1,res.usedOrig)).name&&(secondary=this._renderOnePersonalName(res.name,pos,i,j));var personblob,tertiary=!1;if(slot.tertiary&&(res=this.getName(name,slot.tertiary,!1,res.usedOrig)).name&&(tertiary=this._renderOnePersonalName(res.name,pos,i,j)),secondary||tertiary){this.state.output.openLevel("empty"),this.state.output.append(primary);var secondary_tok=new CSL.Token;slot.secondary&&(secondary_tok.strings.prefix=this.state.opt.citeAffixes.persons[slot.secondary].prefix,secondary_tok.strings.suffix=this.state.opt.citeAffixes.persons[slot.secondary].suffix,secondary_tok.strings.prefix||(secondary_tok.strings.prefix=" ")),this.state.output.append(secondary,secondary_tok);var tertiary_tok=new CSL.Token;slot.tertiary&&(tertiary_tok.strings.prefix=this.state.opt.citeAffixes.persons[slot.tertiary].prefix,tertiary_tok.strings.suffix=this.state.opt.citeAffixes.persons[slot.tertiary].suffix,tertiary_tok.strings.prefix||(tertiary_tok.strings.prefix=" ")),this.state.output.append(tertiary,tertiary_tok),this.state.output.closeLevel(),personblob=this.state.output.pop()}else personblob=primary;return personblob},CSL.NameOutput.prototype._isRomanesque=function(name){var ret=2;if(name.family.replace(/\"/g,"").match(CSL.ROMANESQUE_REGEXP)||(ret=0),!ret&&name.given&&name.given.match(CSL.STARTSWITH_ROMANESQUE_REGEXP)&&(ret=1),2==ret){if(name.multi&&name.multi.main)var top_locale=name.multi.main.slice(0,2);else this.Item.language&&(top_locale=this.Item.language.slice(0,2));["ja","zh"].indexOf(top_locale)>-1&&(ret=1)}return ret},CSL.NameOutput.prototype._renderOnePersonalName=function(value,pos,i,j){var name=value,dropping_particle=this._droppingParticle(name,pos,j),family=this._familyName(name),non_dropping_particle=this._nonDroppingParticle(name),given=this._givenName(name,pos,i),suffix=this._nameSuffix(name);this._isShort(pos,i)&&!name["full-form-always"]&&(dropping_particle=!1,given=!1,suffix=!1);var suffix_sep,sort_sep=this.state.inheritOpt(this.name,"sort-separator");sort_sep||(sort_sep=""),suffix_sep=name["comma-suffix"]?", ":" ";var romanesque=this._isRomanesque(name);var blob,merged,first,second,has_hyphenated_non_dropping_particle=function hasJoiningPunctuation(blob){return!!blob&&("string"==typeof blob.blobs?["\u2019","'","-"," "].indexOf(blob.blobs.slice(-1))>-1:hasJoiningPunctuation(blob.blobs[blob.blobs.length-1]))}(non_dropping_particle);if(0===romanesque)blob=this._join([non_dropping_particle,family,given],"");else if(1===romanesque||name["static-ordering"])blob=this._join([non_dropping_particle,family,given]," ");else if(name["reverse-ordering"])blob=this._join([given,non_dropping_particle,family]," ");else if(this.state.tmp.sort_key_flag)"never"===this.state.opt["demote-non-dropping-particle"]?(first=this._join([non_dropping_particle,family,dropping_particle]," "),merged=this._join([first,given],this.state.opt.sort_sep),blob=this._join([merged,suffix]," ")):(second=this._join([given,dropping_particle,non_dropping_particle]," "),merged=this._join([family,second],this.state.opt.sort_sep),blob=this._join([merged,suffix]," "));else if("all"===this.state.inheritOpt(this.name,"name-as-sort-order")||"first"===this.state.inheritOpt(this.name,"name-as-sort-order")&&0===i&&(0===j||void 0===j))["Lord","Lady"].indexOf(name.given)>-1&&(sort_sep=", "),["always","display-and-sort"].indexOf(this.state.opt["demote-non-dropping-particle"])>-1?(second=this._join([given,dropping_particle],name["comma-dropping-particle"]+" "),(second=this._join([second,non_dropping_particle]," "))&&this.given&&(second.strings.prefix=this.given.strings.prefix,second.strings.suffix=this.given.strings.suffix),family&&this.family&&(family.strings.prefix=this.family.strings.prefix,family.strings.suffix=this.family.strings.suffix),merged=this._join([family,second],sort_sep),blob=this._join([merged,suffix],sort_sep)):((first=has_hyphenated_non_dropping_particle?this._join([non_dropping_particle,family],""):this._join([non_dropping_particle,family]," "))&&this.family&&(first.strings.prefix=this.family.strings.prefix,first.strings.suffix=this.family.strings.suffix),(second=this._join([given,dropping_particle],name["comma-dropping-particle"]+" "))&&this.given&&(second.strings.prefix=this.given.strings.prefix,second.strings.suffix=this.given.strings.suffix),merged=this._join([first,second],sort_sep),blob=this._join([merged,suffix],sort_sep));else{name["dropping-particle"]&&name.family&&!name["non-dropping-particle"]&&["'","\u02bc","\u2019","-"].indexOf(name["dropping-particle"].slice(-1))>-1&&(family=this._join([dropping_particle,family],""),dropping_particle=!1),this.state.tmp.term_predecessor;var space=" ";this.state.inheritOpt(this.name,"initialize-with")&&this.state.inheritOpt(this.name,"initialize-with").match(/[\u00a0\ufeff]/)&&["fr","ru","cs"].indexOf(this.state.opt["default-locale"][0].slice(0,2))>-1&&(space="\xa0"),has_hyphenated_non_dropping_particle?(second=this._join([non_dropping_particle,family],""),second=this._join([dropping_particle,second],space)):second=this._join([dropping_particle,non_dropping_particle,family],space),(second=this._join([second,suffix],suffix_sep))&&this.family&&(second.strings.prefix=this.family.strings.prefix,second.strings.suffix=this.family.strings.suffix),given&&this.given&&(given.strings.prefix=this.given.strings.prefix,given.strings.suffix=this.given.strings.suffix),second.strings.prefix&&(name["comma-dropping-particle"]=""),blob=this._join([given,second],name["comma-dropping-particle"]+space)}return this.state.tmp.group_context.tip.variable_success=!0,this.state.tmp.can_substitute.replace(!1,CSL.LITERAL),this.state.tmp.term_predecessor=!0,this.state.tmp.name_node.children.push(blob),blob},CSL.NameOutput.prototype._isShort=function(pos,i){return 0===this.state.tmp.disambig_settings.givens[pos][i]},CSL.NameOutput.prototype._normalizeNameInput=function(value){var name={literal:value.literal,family:value.family,isInstitution:value.isInstitution,given:value.given,suffix:value.suffix,"comma-suffix":value["comma-suffix"],"non-dropping-particle":value["non-dropping-particle"],"dropping-particle":value["dropping-particle"],"static-ordering":value["static-ordering"],"static-particles":value["static-particles"],"reverse-ordering":value["reverse-ordering"],"full-form-always":value["full-form-always"],"parse-names":value["parse-names"],"comma-dropping-particle":"",block_initialize:value.block_initialize,multi:value.multi};return this._parseName(name),name},CSL.NameOutput.prototype._stripPeriods=function(tokname,str){var decor_tok=this[tokname+"_decor"];if(str)if(this.state.tmp.strip_periods)str=str.replace(/\./g,"");else if(decor_tok)for(var i=0,ilen=decor_tok.decorations.length;i<ilen;i+=1)if("@strip-periods"===decor_tok.decorations[i][0]&&"true"===decor_tok.decorations[i][1]){str=str.replace(/\./g,"");break}return str},CSL.NameOutput.prototype._nonDroppingParticle=function(name){var ndp=name["non-dropping-particle"];ndp&&this.state.tmp.sort_key_flag&&(ndp=ndp.replace(/[\'\u2019]/,""));var str=this._stripPeriods("family",ndp);return!!this.state.output.append(str,this.family_decor,!0)&&this.state.output.pop()},CSL.NameOutput.prototype._droppingParticle=function(name,pos,j){var dp=name["dropping-particle"];dp&&this.state.tmp.sort_key_flag&&(dp=dp.replace(/[\'\u2019]/,""));var str=this._stripPeriods("given",dp);if(name["dropping-particle"]&&name["dropping-particle"].match(/^et.?al[^a-z]$/))this.state.inheritOpt(this.name,"et-al-use-last")?void 0===j?this.etal_spec[pos].freeters=2:this.etal_spec[pos].persons=2:void 0===j?this.etal_spec[pos].freeters=1:this.etal_spec[pos].persons=1,name["comma-dropping-particle"]="";else if(this.state.output.append(str,this.given_decor,!0))return this.state.output.pop();return!1},CSL.NameOutput.prototype._familyName=function(name){var str=this._stripPeriods("family",name.family);return!!this.state.output.append(str,this.family_decor,!0)&&this.state.output.pop()},CSL.NameOutput.prototype._givenName=function(name,pos,i){if(!1===this.state.inheritOpt(this.name,"initialize"))name.family&&name.given&&!1===this.state.inheritOpt(this.name,"initialize")&&(name.given=CSL.Util.Names.initializeWith(this.state,name.given,this.state.inheritOpt(this.name,"initialize-with"),!0)),name.given=CSL.Util.Names.unInitialize(this.state,name.given);else if(name.family&&1===this.state.tmp.disambig_settings.givens[pos][i]&&!name.block_initialize){var initialize_with=this.state.inheritOpt(this.name,"initialize-with");name.given=CSL.Util.Names.initializeWith(this.state,name.given,initialize_with)}else name.given=CSL.Util.Names.unInitialize(this.state,name.given);var str=this._stripPeriods("given",name.given);return!!this.state.output.append(str,this.given_decor,!0)&&this.state.output.pop()},CSL.NameOutput.prototype._nameSuffix=function(name){var ret,str=name.suffix;"string"==typeof this.state.inheritOpt(this.name,"initialize-with")&&(str=CSL.Util.Names.initializeWith(this.state,name.suffix,this.state.inheritOpt(this.name,"initialize-with"),!0));var toSuffix="";return(str=this._stripPeriods("family",str))&&"."===str.slice(-1)&&(str=str.slice(0,-1),toSuffix="."),!!this.state.output.append(str,"empty",!0)&&((ret=this.state.output.pop()).strings.suffix=toSuffix+ret.strings.suffix,ret)},CSL.NameOutput.prototype._getLongStyle=function(name,v,i){var long_style;return(long_style=name.short.length&&this.institutionpart["long-with-short"]?this.institutionpart["long-with-short"]:this.institutionpart.long)||(long_style=new CSL.Token),long_style},CSL.NameOutput.prototype._getShortStyle=function(){return this.institutionpart.short?this.institutionpart.short:new CSL.Token},CSL.NameOutput.prototype._parseName=function(name){var noparse;if(!name["parse-names"]&&"undefined"!=typeof name["parse-names"])return name;name.family&&!name.given&&name.isInstitution&&(name.literal=name.family,name.family=undefined,name.isInstitution=undefined),name.family&&'"'===name.family.slice(0,1)&&'"'===name.family.slice(-1)||!name["parse-names"]&&"undefined"!=typeof name["parse-names"]?(name.family=name.family.slice(1,-1),noparse=!0,name["parse-names"]=0):noparse=!1,this.state.opt.development_extensions.parse_names&&!name["non-dropping-particle"]&&name.family&&!noparse&&name.given&&(name["static-particles"]||CSL.parseParticles(name,!0))},CSL.NameOutput.prototype.getName=function(name,slotLocaleset,fallback,stopOrig){if(stopOrig&&"locale-orig"===slotLocaleset)return{name:!1,usedOrig:stopOrig};name.family||(name.family=""),name.given||(name.given="");var name_params={};name_params["static-ordering"]=this.getStaticOrder(name);var foundTag=!0;if("locale-orig"!==slotLocaleset&&(foundTag=!1,name.multi))for(var langTags=this.state.opt[slotLocaleset],i=0,ilen=langTags.length;i<ilen;i+=1)if(langTag=langTags[i],name.multi._key[langTag]){foundTag=!0;var isInstitution=name.isInstitution;(name=name.multi._key[langTag]).isInstitution=isInstitution,(name_params=this.getNameParams(langTag)).transliterated=!0;break}if(!foundTag){var langTag=!1;name.multi&&name.multi.main?langTag=name.multi.main:this.Item.language&&(langTag=this.Item.language),langTag&&(name_params=this.getNameParams(langTag))}return fallback||foundTag?(name.family||(name.family=""),name.given||(name.given=""),!(name={family:name.family,given:name.given,"non-dropping-particle":name["non-dropping-particle"],"dropping-particle":name["dropping-particle"],suffix:name.suffix,"static-ordering":name_params["static-ordering"],"static-particles":name["static-particles"],"reverse-ordering":name_params["reverse-ordering"],"full-form-always":name_params["full-form-always"],"parse-names":name["parse-names"],"comma-suffix":name["comma-suffix"],"comma-dropping-particle":name["comma-dropping-particle"],transliterated:name_params.transliterated,block_initialize:name_params["block-initialize"],literal:name.literal,isInstitution:name.isInstitution,multi:name.multi}).literal&&!name.given&&name.family&&name.isInstitution&&(name.literal=name.family),name.literal&&(delete name.family,delete name.given),{name:name=this._normalizeNameInput(name),usedOrig:stopOrig||!foundTag}):{name:!1,usedOrig:stopOrig}},CSL.NameOutput.prototype.getNameParams=function(langTag){var ret={},langspec=CSL.localeResolve(this.Item.language,this.state.opt["default-locale"][0]),try_locale=this.state.locale[langspec.best]?langspec.best:this.state.opt["default-locale"][0],name_as_sort_order=this.state.locale[try_locale].opts["name-as-sort-order"],name_as_reverse_order=this.state.locale[try_locale].opts["name-as-reverse-order"],name_never_short=this.state.locale[try_locale].opts["name-never-short"],field_lang_bare=langTag.split("-")[0];return name_as_sort_order&&name_as_sort_order[field_lang_bare]&&(ret["static-ordering"]=!0,ret["reverse-ordering"]=!1),name_as_reverse_order&&name_as_reverse_order[field_lang_bare]&&(ret["reverse-ordering"]=!0,ret["static-ordering"]=!1),name_never_short&&name_never_short[field_lang_bare]&&(ret["full-form-always"]=!0),ret["static-ordering"]&&(ret["block-initialize"]=!0),ret},CSL.NameOutput.prototype.setRenderedName=function(name){if("bibliography"===this.state.tmp.area){for(var strname="",j=0,jlen=CSL.NAME_PARTS.length;j<jlen;j+=1)name[CSL.NAME_PARTS[j]]&&(strname+=name[CSL.NAME_PARTS[j]]);this.state.tmp.rendered_name.push(strname)}},CSL.NameOutput.prototype.fixupInstitution=function(name,varname,listpos){this.state.sys.getHumanForm&&"legal_case"===this.Item.type&&"authority"===varname&&(name.literal=this.state.sys.getHumanForm(this.Item.jurisdiction,name.literal,!0)),name=this._splitInstitution(name,varname,listpos),this.institution.strings["reverse-order"]&&name.long.reverse();var long_form=name.long,short_form=name.long.slice(),use_short_form=!1;if(this.state.sys.getAbbreviation)for(var jurisdiction=this.Item.jurisdiction,j=0,jlen=long_form.length;j<jlen;j+=1){var normalizedKey=long_form[j];this.state.sys.normalizeAbbrevsKey&&(normalizedKey=this.state.sys.normalizeAbbrevsKey(long_form[j])),jurisdiction=this.state.transform.loadAbbreviation(jurisdiction,"institution-part",normalizedKey),this.state.transform.abbrevs[jurisdiction]["institution-part"][normalizedKey]&&(short_form[j]=this.state.transform.abbrevs[jurisdiction]["institution-part"][normalizedKey],use_short_form=!0)}return name.short=use_short_form?short_form:[],name},CSL.NameOutput.prototype.getStaticOrder=function(name,refresh){var static_ordering_val=!1;return!refresh&&name["static-ordering"]?static_ordering_val=!0:0===this._isRomanesque(name)?static_ordering_val=!0:(!name.multi||!name.multi.main)&&this.Item.language&&["vi","hu"].indexOf(this.Item.language)>-1?static_ordering_val=!0:name.multi&&name.multi.main&&["vi","hu"].indexOf(name.multi.main.slice(0,2))>-1?static_ordering_val=!0:this.state.opt["auto-vietnamese-names"]&&CSL.VIETNAMESE_NAMES.exec(name.family+" "+name.given)&&CSL.VIETNAMESE_SPECIALS.exec(name.family+name.given)&&(static_ordering_val=!0),static_ordering_val},CSL.NameOutput.prototype._splitInstitution=function(value,v,i){var ret={};!value.literal&&value.family&&(value.literal=value.family,delete value.family);var splitInstitution=value.literal.replace(/\s*\|\s*/g,"|");if(splitInstitution=splitInstitution.split("|"),"short"===this.institution.strings.form&&this.state.sys.getAbbreviation)for(var jurisdiction=this.Item.jurisdiction,j=splitInstitution.length;j>0;j+=-1){var str=splitInstitution.slice(0,j).join("|"),normalizedKey=str;if(this.state.sys.normalizeAbbrevsKey&&(normalizedKey=this.state.sys.normalizeAbbrevsKey(str)),jurisdiction=this.state.transform.loadAbbreviation(jurisdiction,"institution-entire",normalizedKey),this.state.transform.abbrevs[jurisdiction]["institution-entire"][normalizedKey]){var splitLst=this.state.transform.abbrevs[jurisdiction]["institution-entire"][normalizedKey],splitSplitLst=(splitLst=this.state.transform.quashCheck(splitLst)).split(/>>[0-9]{4}>>/),m=splitLst.match(/>>([0-9]{4})>>/);if(splitLst=splitSplitLst.pop(),splitSplitLst.length>0&&this.Item["original-date"]&&this.Item["original-date"].year)for(var k=m.length-1;k>0&&!(parseInt(this.Item["original-date"].year,10)>=parseInt(m[k],10));k+=-1)splitLst=splitSplitLst.pop();splitInstitution=[splitLst=splitLst.replace(/\s*\|\s*/g,"|")];break}}return splitInstitution.reverse(),ret.long=this._trimInstitution(splitInstitution,v,i),ret},CSL.NameOutput.prototype._trimInstitution=function(subunits,v,i){var use_first=!1,append_last=!1,s=subunits.slice(),stop_last=!1;return this.institution&&("undefined"!=typeof this.institution.strings["use-first"]&&(use_first=this.institution.strings["use-first"]),"undefined"!=typeof this.institution.strings["stop-last"]?stop_last=this.institution.strings["stop-last"]:"authority"===v&&this.state.tmp.authority_stop_last&&(stop_last=this.state.tmp.authority_stop_last),stop_last&&(s=s.slice(0,stop_last),subunits=subunits.slice(0,stop_last)),"undefined"!=typeof this.institution.strings["use-last"]&&(append_last=this.institution.strings["use-last"]),"authority"===v&&(stop_last&&(this.state.tmp.authority_stop_last=stop_last),append_last&&(this.state.tmp.authority_stop_last+=-1*append_last))),!1===use_first&&(0===this.persons[v].length&&(use_first=this.institution.strings["substitute-use-first"]),use_first||(use_first=0)),!1===append_last&&(append_last=use_first?0:subunits.length),use_first>subunits.length-append_last&&(use_first=subunits.length-append_last),subunits=subunits.slice(0,use_first),s=s.slice(use_first),append_last&&(append_last>s.length&&(append_last=s.length),append_last&&(subunits=subunits.concat(s.slice(s.length-append_last)))),subunits},module.exports=CSL,CSL.PublisherOutput=function(state,group_tok){this.state=state,this.group_tok=group_tok,this.varlist=[]},CSL.PublisherOutput.prototype.render=function(){this.clearVars(),this.composeAndBlob(),this.composeElements(),this.composePublishers(),this.joinPublishers()},CSL.PublisherOutput.prototype.composeAndBlob=function(){this.and_blob={};var and_term=!1;"text"===this.group_tok.strings.and?and_term=this.state.getTerm("and"):"symbol"===this.group_tok.strings.and&&(and_term="&");var tok=new CSL.Token;tok.strings.suffix=" ",tok.strings.prefix=" ",this.state.output.append(and_term,tok,!0);var no_delim=this.state.output.pop();tok.strings.prefix=this.group_tok.strings["subgroup-delimiter"],this.state.output.append(and_term,tok,!0);var with_delim=this.state.output.pop();this.and_blob.single=!1,this.and_blob.multiple=!1,and_term&&("always"===this.group_tok.strings["subgroup-delimiter-precedes-last"]?this.and_blob.single=with_delim:"never"===this.group_tok.strings["subgroup-delimiter-precedes-last"]?(this.and_blob.single=no_delim,this.and_blob.multiple=no_delim):(this.and_blob.single=no_delim,this.and_blob.multiple=with_delim))},CSL.PublisherOutput.prototype.composeElements=function(){for(var i=0;i<2;i+=1)for(var varname=["publisher","publisher-place"][i],j=0,jlen=this["publisher-list"].length;j<jlen;j+=1){var str=this[varname+"-list"][j],tok=this[varname+"-token"];this.state.output.append(str,tok,!0),this[varname+"-list"][j]=this.state.output.pop()}},CSL.PublisherOutput.prototype.composePublishers=function(){for(var blobs,i=0,ilen=this["publisher-list"].length;i<ilen;i+=1){blobs=[this[this.varlist[0]+"-list"][i],this[this.varlist[1]+"-list"][i]],this["publisher-list"][i]=this._join(blobs,this.group_tok.strings.delimiter)}},CSL.PublisherOutput.prototype.joinPublishers=function(){var blobs=this["publisher-list"],publishers=(this.name_delimiter,this._join(blobs,this.group_tok.strings["subgroup-delimiter"],this.and_blob.single,this.and_blob.multiple,this.group_tok));this.state.output.append(publishers,"literal")},CSL.PublisherOutput.prototype._join=CSL.NameOutput.prototype._join,CSL.PublisherOutput.prototype._getToken=CSL.NameOutput.prototype._getToken,CSL.PublisherOutput.prototype.clearVars=function(){this.state.tmp["publisher-list"]=!1,this.state.tmp["publisher-place-list"]=!1,this.state.tmp["publisher-group-token"]=!1,this.state.tmp["publisher-token"]=!1,this.state.tmp["publisher-place-token"]=!1},module.exports=CSL,CSL.evaluateLabel=function(node,state,Item,item){var myterm;"locator"===node.strings.term?(item&&item.label&&(myterm="sub verbo"===item.label?"sub-verbo":item.label),myterm||(myterm="page")):myterm=node.strings.term;var plural=node.strings.plural;if("number"!=typeof plural){var theItem="locator"===node.strings.term?item:Item;state.processNumber(!1,theItem,node.strings.term,Item.type),plural=state.tmp.shadow_numbers[node.strings.term].plural,state.tmp.shadow_numbers[node.strings.term].labelForm||state.tmp.shadow_numbers[node.strings.term].labelDecorations||(state.tmp.shadow_numbers[node.strings.term].labelForm=node.strings.form,state.tmp.shadow_numbers[node.strings.term].labelDecorations=node.decorations.slice()),["locator","number","page"].indexOf(node.strings.term)>-1&&state.tmp.shadow_numbers[node.strings.term].label&&(myterm=state.tmp.shadow_numbers[node.strings.term].label),node.decorations&&(state.opt.development_extensions.csl_reverse_lookup_support||state.sys.csl_reverse_lookup_support)&&(node.decorations.reverse(),node.decorations.push(["@showid","true",node.cslid]),node.decorations.reverse())}return CSL.castLabel(state,node,myterm,plural,CSL.TOLERANT)},CSL.castLabel=function(state,node,term,plural,mode){var label_form=node.strings.form;state.tmp.group_context.tip.label_form&&"static"!==label_form&&(label_form=state.tmp.group_context.tip.label_form);var ret=state.getTerm(term,label_form,plural,!1,mode,node.default_locale);if(state.tmp.strip_periods)ret=ret.replace(/\./g,"");else for(var i=0,ilen=node.decorations.length;i<ilen;i+=1)if("@strip-periods"===node.decorations[i][0]&&"true"===node.decorations[i][1]){ret=ret.replace(/\./g,"");break}return ret},module.exports=CSL,CSL.Node.name={build:function(state,target){var func;if([CSL.SINGLETON,CSL.START].indexOf(this.tokentype)>-1){if("undefined"==typeof state.tmp.root){var oldTmpRoot=undefined;state.tmp.root="citation"}else oldTmpRoot=state.tmp.root;state.inheritOpt(this,"et-al-subsequent-min")&&state.inheritOpt(this,"et-al-subsequent-min")!==state.inheritOpt(this,"et-al-min")&&(state.opt.update_mode=CSL.POSITION),state.inheritOpt(this,"et-al-subsequent-use-first")&&state.inheritOpt(this,"et-al-subsequent-use-first")!==state.inheritOpt(this,"et-al-use-first")&&(state.opt.update_mode=CSL.POSITION),state.tmp.root=oldTmpRoot,func=function(state,Item){state.tmp.etal_term="et-al",state.tmp.name_delimiter=state.inheritOpt(this,"delimiter","name-delimiter",", "),state.tmp["delimiter-precedes-et-al"]=state.inheritOpt(this,"delimiter-precedes-et-al"),"text"===state.inheritOpt(this,"and")?this.and_term=state.getTerm("and","long",0):"symbol"===state.inheritOpt(this,"and")&&(state.opt.development_extensions.expect_and_symbol_form?this.and_term=state.getTerm("and","symbol",0):this.and_term="&"),state.tmp.and_term=this.and_term,CSL.STARTSWITH_ROMANESQUE_REGEXP.test(this.and_term)?(this.and_prefix_single=" ",this.and_prefix_multiple=", ","string"==typeof state.tmp.name_delimiter&&(this.and_prefix_multiple=state.tmp.name_delimiter),this.and_suffix=" "):(this.and_prefix_single="",this.and_prefix_multiple="",this.and_suffix=""),"always"===state.inheritOpt(this,"delimiter-precedes-last")?this.and_prefix_single=state.tmp.name_delimiter:"never"===state.inheritOpt(this,"delimiter-precedes-last")?this.and_prefix_multiple&&(this.and_prefix_multiple=" "):"after-inverted-name"===state.inheritOpt(this,"delimiter-precedes-last")&&(this.and_prefix_single&&(this.and_prefix_single=state.tmp.name_delimiter),this.and_prefix_multiple&&(this.and_prefix_multiple=" ")),this.and={},state.inheritOpt(this,"and")?(state.output.append(this.and_term,"empty",!0),this.and.single=state.output.pop(),this.and.single.strings.prefix=this.and_prefix_single,this.and.single.strings.suffix=this.and_suffix,state.output.append(this.and_term,"empty",!0),this.and.multiple=state.output.pop(),this.and.multiple.strings.prefix=this.and_prefix_multiple,this.and.multiple.strings.suffix=this.and_suffix):state.tmp.name_delimiter&&(this.and.single=new CSL.Blob(state.tmp.name_delimiter),this.and.single.strings.prefix="",this.and.single.strings.suffix="",this.and.multiple=new CSL.Blob(state.tmp.name_delimiter),this.and.multiple.strings.prefix="",this.and.multiple.strings.suffix=""),this.ellipsis={},state.inheritOpt(this,"et-al-use-last")&&(this.ellipsis_term="\u2026",this.ellipsis_prefix_single=" ",this.ellipsis_prefix_multiple=state.inheritOpt(this,"delimiter","name-delimiter",", "),this.ellipsis_suffix=" ",this.ellipsis.single=new CSL.Blob(this.ellipsis_term),this.ellipsis.single.strings.prefix=this.ellipsis_prefix_single,this.ellipsis.single.strings.suffix=this.ellipsis_suffix,this.ellipsis.multiple=new CSL.Blob(this.ellipsis_term),this.ellipsis.multiple.strings.prefix=this.ellipsis_prefix_multiple,this.ellipsis.multiple.strings.suffix=this.ellipsis_suffix),"undefined"==typeof state.tmp["et-al-min"]&&(state.tmp["et-al-min"]=state.inheritOpt(this,"et-al-min")),"undefined"==typeof state.tmp["et-al-use-first"]&&(state.tmp["et-al-use-first"]=state.inheritOpt(this,"et-al-use-first")),"undefined"==typeof state.tmp["et-al-use-last"]&&(state.tmp["et-al-use-last"]=state.inheritOpt(this,"et-al-use-last")),state.nameOutput.name=this},state.build.name_flag=!0,this.execs.push(func)}target.push(this)}},module.exports=CSL,CSL.Node["name-part"]={build:function(state,target){state.build[this.strings.name]=this}},module.exports=CSL,CSL.Node.names={build:function(state,target){var func;if(this.tokentype!==CSL.START&&this.tokentype!==CSL.SINGLETON||(CSL.Util.substituteStart.call(this,state,target),state.build.substitute_level.push(1)),this.tokentype===CSL.SINGLETON&&(state.build.names_variables.push(this.variables),func=function(state,Item,item){var labelVariable=state.nameOutput.labelVariable;state.nameOutput.reinit(this,labelVariable)},this.execs.push(func)),this.tokentype===CSL.START&&(state.build.names_flag=!0,state.build.names_level+=1,1===state.build.names_level&&(state.build.names_variables=[],state.build.name_label={}),state.build.names_variables.push(this.variables),func=function(state,Item,item){state.tmp.can_substitute.push(!0),state.parallel.StartVariable("names",this.variables[0]),state.nameOutput.init(this)},this.execs.push(func)),this.tokentype===CSL.END){for(var i=0;i<3;i+=1){var key=["family","given","et-al"][i];this[key]=state.build[key],1===state.build.names_level&&(state.build[key]=undefined)}this.label=state.build.name_label,1===state.build.names_level&&(state.build.name_label={}),state.build.names_level+=-1,state.build.names_variables.pop(),func=function(state,Item,item){state.tmp.etal_node?this.etal_style=state.tmp.etal_node:this.etal_style="empty",this.etal_term=state.getTerm(state.tmp.etal_term,"long",0),CSL.STARTSWITH_ROMANESQUE_REGEXP.test(this.etal_term)?(this.etal_prefix_single=" ",this.etal_prefix_multiple=state.tmp.name_delimiter,"always"===state.tmp["delimiter-precedes-et-al"]?this.etal_prefix_single=state.tmp.name_delimiter:"never"===state.tmp["delimiter-precedes-et-al"]?this.etal_prefix_multiple=" ":"after-inverted-name"===state.tmp["delimiter-precedes-et-al"]&&(this.etal_prefix_single=state.tmp.name_delimiter,this.etal_prefix_multiple=" "),this.etal_suffix=""):(this.etal_prefix_single="",this.etal_prefix_multiple="",this.etal_suffix="");for(var i=0;i<3;i+=1){var key=["family","given"][i];state.nameOutput[key]=this[key]}state.nameOutput["with"]=this["with"];var with_default_prefix="",with_suffix="";CSL.STARTSWITH_ROMANESQUE_REGEXP.test("with")&&(with_default_prefix=" ",with_suffix=" ");var thewith={};thewith.single=new CSL.Blob("with"),thewith.single.strings.suffix=with_suffix,thewith.multiple=new CSL.Blob("with"),thewith.multiple.strings.suffix=with_suffix,"always"===state.inheritOpt(state.nameOutput.name,"delimiter-precedes-last")?(thewith.single.strings.prefix=state.inheritOpt(this,"delimiter","names-delimiter"),thewith.multiple.strings.prefix=state.inheritOpt(this,"delimiter","names-delimiter")):"contextual"===state.inheritOpt(state.nameOutput.name,"delimiter-precedes-last")?(thewith.single.strings.prefix=with_default_prefix,thewith.multiple.strings.prefix=state.inheritOpt(this,"delimiter","names-delimiter")):"after-inverted-name"===state.inheritOpt(state.nameOutput.name,"delimiter-precedes-last")?(thewith.single.strings.prefix=state.inheritOpt(this,"delimiter","names-delimiter"),thewith.multiple.strings.prefix=with_default_prefix):(thewith.single.strings.prefix=with_default_prefix,thewith.multiple.strings.prefix=with_default_prefix),state.nameOutput["with"]=thewith,state.nameOutput.label=this.label,state.nameOutput.etal_style=this.etal_style,state.nameOutput.etal_term=this.etal_term,state.nameOutput.etal_prefix_single=this.etal_prefix_single,state.nameOutput.etal_prefix_multiple=this.etal_prefix_multiple,state.nameOutput.etal_suffix=this.etal_suffix,state.nameOutput.outputNames(),state.tmp["et-al-use-first"]=undefined,state.tmp["et-al-min"]=undefined,state.tmp["et-al-use-last"]=undefined},this.execs.push(func),func=function(state,Item){state.tmp.can_substitute.pop()||state.tmp.can_substitute.replace(!1,CSL.LITERAL),state.parallel.CloseVariable("names"),1===state.tmp.can_substitute.mystack.length&&(state.tmp.can_block_substitute=!1)},this.execs.push(func),state.build.name_flag=!1}target.push(this),this.tokentype!==CSL.END&&this.tokentype!==CSL.SINGLETON||(state.build.substitute_level.pop(),CSL.Util.substituteEnd.call(this,state,target))}},module.exports=CSL,CSL.Node.number={build:function(state,target){var func;CSL.Util.substituteStart.call(this,state,target),"roman"===this.strings.form?this.formatter=state.fun.romanizer:"ordinal"===this.strings.form?this.formatter=state.fun.ordinalizer:"long-ordinal"===this.strings.form&&(this.formatter=state.fun.long_ordinalizer),"undefined"==typeof this.successor_prefix&&(this.successor_prefix=state[state.build.area].opt.layout_delimiter),"undefined"==typeof this.splice_prefix&&(this.splice_prefix=state[state.build.area].opt.layout_delimiter),func=function(state,Item,item){if(0!==this.variables.length){if(void 0===item)item={};var varname;if("locator"!==(varname=this.variables[0])||!state.tmp.just_looking){state.parallel.StartVariable(this.variables[0]),"locator"===this.variables[0]?state.parallel.AppendToVariable(Item.section):state.parallel.AppendToVariable(Item[this.variables[0]]);new RegExp("(?:&|, | and |"+state.getTerm("page-range-delimiter")+")");"collection-number"===varname&&"legal_case"===Item.type&&(state.tmp.renders_collection_number=!0);Item[this.variables[0]];this.strings.label_form_override&&this.strings.label_form_override;if(state.tmp.group_context.tip.force_suppress)return!1;"locator"===varname?state.processNumber(this,item,varname,Item.type):(!state.tmp.group_context.tip.condition&&Item[varname]&&(state.tmp.just_did_number=!0),state.processNumber(this,Item,varname,Item.type)),CSL.Util.outputNumericField(state,varname,Item.id),state.parallel.CloseVariable("number"),["locator","locator-extra"].indexOf(this.variables_real[0])>-1&&!state.tmp.just_looking&&(state.tmp.done_vars.push(this.variables_real[0]),state.tmp.group_context.tip.done_vars.push(this.variables_real[0]))}}},this.execs.push(func),target.push(this),CSL.Util.substituteEnd.call(this,state,target)}},module.exports=CSL,CSL.Node.sort={build:function(state,target){if(target=state[state.build.root+"_sort"].tokens,this.tokentype===CSL.START){"citation"===state.build.area&&(state.parallel.use_parallels=!1,state.opt.sort_citations=!0),state.build.area=state.build.root+"_sort",state.build.extension="_sort";var func=function(state,Item){if(state.opt.has_layout_locale){for(var langForItem,langspec=CSL.localeResolve(Item.language,state.opt["default-locale"][0]),sort_locales=state[state.tmp.area.slice(0,-5)].opt.sort_locales,i=0,ilen=sort_locales.length;i<ilen&&((langForItem=sort_locales[i][langspec.bare])||(langForItem=sort_locales[i][langspec.best]),!langForItem);i+=1);langForItem||(langForItem=state.opt["default-locale"][0]),state.tmp.lang_sort_hold=state.opt.lang,state.opt.lang=langForItem}};this.execs.push(func)}if(this.tokentype===CSL.END){state.build.area=state.build.root,state.build.extension="";func=function(state,Item){state.opt.has_layout_locale&&(state.opt.lang=state.tmp.lang_sort_hold,delete state.tmp.lang_sort_hold)};this.execs.push(func)}target.push(this)}},module.exports=CSL,CSL.Node.substitute={build:function(state,target){var func;this.tokentype===CSL.START&&(func=function(state,Item){state.tmp.can_block_substitute=!0,state.tmp.value.length&&state.tmp.can_substitute.replace(!1,CSL.LITERAL)},this.execs.push(func)),target.push(this)}},module.exports=CSL,CSL.Node.text={build:function(state,target){var func,form,plural,id,num,number,formatter,firstoutput,specialdelimiter,label,suffix,term;if(this.postponed_macro){var group_start=CSL.Util.cloneToken(this);group_start.name="group",group_start.tokentype=CSL.START,CSL.Node.group.build.call(group_start,state,target),CSL.expandMacro.call(state,this,target);var group_end=CSL.Util.cloneToken(this);group_end.name="group",group_end.tokentype=CSL.END,"juris-locator-label"===this.postponed_macro&&(group_end.isJurisLocatorLabel=!0),CSL.Node.group.build.call(group_end,state,target)}else{if(CSL.Util.substituteStart.call(this,state,target),this.variables_real||(this.variables_real=[]),this.variables||(this.variables=[]),form="long",plural=0,this.strings.form&&(form=this.strings.form),this.strings.plural&&(plural=this.strings.plural),"citation-number"===this.variables_real[0]||"year-suffix"===this.variables_real[0]||"citation-label"===this.variables_real[0])"citation-number"===this.variables_real[0]?("citation"===state.build.root&&(state.opt.update_mode=CSL.NUMERIC),"bibliography"===state.build.root&&(state.opt.bib_mode=CSL.NUMERIC),"bibliography_sort"===state.build.area&&(state.opt.citation_number_sort_used=!0),"citation-number"===state[state.tmp.area].opt.collapse&&(this.range_prefix=state.getTerm("citation-range-delimiter")),this.successor_prefix=state[state.build.area].opt.layout_delimiter,this.splice_prefix=state[state.build.area].opt.layout_delimiter,func=function(state,Item,item){if(id=""+Item.id,!state.tmp.just_looking){if(item&&item["author-only"]){state.tmp.element_trace.replace("do-not-suppress-me");var reference_term=state.getTerm("reference","long","singular");void 0===reference_term&&(reference_term="reference"),term=CSL.Output.Formatters["capitalize-first"](state,reference_term),state.output.append(term+" "),state.tmp.last_element_trace=!0}item&&item["suppress-author"]&&(state.tmp.last_element_trace&&state.tmp.element_trace.replace("suppress-me"),state.tmp.last_element_trace=!1),num=state.registry.registry[id].seq,state.opt.citation_number_slug?state.output.append(state.opt.citation_number_slug,this):(number=new CSL.NumericBlob(!1,num,this,Item.id),state.tmp.in_cite_predecessor&&(state.tmp.just_looking,number.suppress_splice_prefix=!0),state.output.append(number,"literal"))}},this.execs.push(func)):"year-suffix"===this.variables_real[0]?(state.opt.has_year_suffix=!0,"year-suffix-ranged"===state[state.tmp.area].opt.collapse&&(this.range_prefix=state.getTerm("citation-range-delimiter")),this.successor_prefix=state[state.build.area].opt.layout_delimiter,state[state.tmp.area].opt["year-suffix-delimiter"]&&(this.successor_prefix=state[state.build.area].opt["year-suffix-delimiter"]),func=function(state,Item){if(state.registry.registry[Item.id]&&!1!==state.registry.registry[Item.id].disambig.year_suffix&&!state.tmp.just_looking){num=parseInt(state.registry.registry[Item.id].disambig.year_suffix,10),state[state.tmp.area].opt.cite_group_delimiter&&(this.successor_prefix=state[state.tmp.area].opt.cite_group_delimiter),number=new CSL.NumericBlob(!1,num,this,Item.id),formatter=new CSL.Util.Suffixator(CSL.SUFFIX_CHARS),number.setFormatter(formatter),state.output.append(number,"literal"),firstoutput=!1;for(var i=0,ilen=state.tmp.group_context.mystack.length;i<ilen;i++){var flags=state.tmp.group_context.mystack[i];if(!flags.variable_success&&(flags.variable_attempt||!flags.variable_attempt&&!flags.term_intended)){firstoutput=!0;break}}specialdelimiter=state[state.tmp.area].opt["year-suffix-delimiter"],firstoutput&&specialdelimiter&&!state.tmp.sort_key_flag&&(state.tmp.splice_delimiter=state[state.tmp.area].opt["year-suffix-delimiter"])}},this.execs.push(func)):"citation-label"===this.variables_real[0]&&(state.opt.has_year_suffix=!0,func=function(state,Item){(label=Item["citation-label"])||(label=state.getCitationLabel(Item)),state.tmp.just_looking||(suffix="",state.registry.registry[Item.id]&&!1!==state.registry.registry[Item.id].disambig.year_suffix&&(num=parseInt(state.registry.registry[Item.id].disambig.year_suffix,10),suffix=state.fun.suffixator.format(num)),label+=suffix),state.output.append(label,this)},this.execs.push(func));else if(this.strings.term)func=function(state,Item,item){var myterm,gender=state.opt.gender[Item.type],term=this.strings.term;if(""!==(term=state.getTerm(term,form,plural,gender,CSL.TOLERANT,this.default_locale))&&(state.tmp.group_context.tip.term_intended=!0),CSL.UPDATE_GROUP_CONTEXT_CONDITION(state,term),myterm=state.tmp.term_predecessor||"in-text"===state.opt["class"]&&"citation"===state.tmp.area?term:CSL.Output.Formatters["capitalize-first"](state,term),state.tmp.strip_periods)myterm=myterm.replace(/\./g,"");else for(var i=0,ilen=this.decorations.length;i<ilen;i+=1)if("@strip-periods"===this.decorations[i][0]&&"true"===this.decorations[i][1]){myterm=myterm.replace(/\./g,"");break}state.output.append(myterm,this)},this.execs.push(func),state.build.term=!1,state.build.form=!1,state.build.plural=!1;else if(this.variables_real.length){if(func=function(state,Item,item){"locator"!==this.variables_real[0]&&(state.tmp.have_collapsed=!1);var parallel_variable=this.variables[0];"title"!==parallel_variable||"short"!==form&&!Item["title-short"]||(parallel_variable="title-short"),state.parallel.StartVariable(parallel_variable),state.parallel.AppendToVariable(Item[parallel_variable],parallel_variable),!state.tmp.group_context.tip.condition&&Item[this.variables[0]]&&(state.tmp.just_did_number=!1)},this.execs.push(func),CSL.MULTI_FIELDS.indexOf(this.variables_real[0])>-1||["language-name","language-name-original"].indexOf(this.variables_real[0])>-1){var abbrevfam=this.variables[0],abbrfall=!1,altvar=!1,transfall=!1;"short"===form?"container-title"===this.variables_real[0]?altvar="journalAbbreviation":"title"===this.variables_real[0]&&(altvar="title-short"):abbrevfam=!1,state.build.extension?transfall=!0:(transfall=!0,abbrfall=!0),func=state.transform.getOutputFunction(this.variables,abbrevfam,abbrfall,altvar,transfall)}else func=CSL.CITE_FIELDS.indexOf(this.variables_real[0])>-1?function(state,Item,item){item&&item[this.variables[0]]&&(state.processNumber(this,item,this.variables[0],Item.type),CSL.Util.outputNumericField(state,this.variables[0],Item.id),state.output.append(void 0,this,!1,!1,!0),["locator","locator-extra"].indexOf(this.variables_real[0])>-1&&!state.tmp.just_looking&&state.tmp.done_vars.push(this.variables_real[0]))}:["page","page-first","chapter-number","collection-number","edition","issue","number","number-of-pages","number-of-volumes","volume"].indexOf(this.variables_real[0])>-1?function(state,Item){state.processNumber(this,Item,this.variables[0],Item.type),CSL.Util.outputNumericField(state,this.variables[0],Item.id)}:["URL","DOI"].indexOf(this.variables_real[0])>-1?function(state,Item){var value;if(this.variables[0]&&(value=state.getVariable(Item,this.variables[0],form)))if(state.opt.development_extensions.wrap_url_and_doi)if(this.decorations.length&&this.decorations[0][0]==="@"+this.variables[0])state.output.append(value,this,!1,!1,!0);else if("DOI"===this.variables_real[0]&&"https://doi.org/"===this.strings.prefix){var clonetoken=CSL.Util.cloneToken(this),groupblob=new CSL.Blob(null,null,"url-wrapper");if(groupblob.decorations.push(["@DOI","true"]),(value=value.replace(/^https?:\/\/doi\.org\//,"")).match(/^https?:\/\//))var prefix="";else prefix="https://doi.org/";var prefixblob=new CSL.Blob(prefix),valueblob=new CSL.Blob(value);clonetoken.strings.prefix="",groupblob.push(prefixblob),groupblob.push(valueblob),state.output.append(groupblob,clonetoken,!1,!1,!0)}else this.decorations=[["@"+this.variables[0],"true"]].concat(this.decorations),state.output.append(value,this,!1,!1,!0);else{if(this.decorations.length)for(var i=this.decorations.length-1;i>-1;i--)this.decorations[i][0]==="@"+this.variables[0]&&(this.decorations=this.decorations.slice(0,i).concat(this.decorations.slice(i+1)));state.output.append(value,this,!1,!1,!0)}}:"section"===this.variables_real[0]?function(state,Item){var value;(value=state.getVariable(Item,this.variables[0],form))&&state.output.append(value,this)}:"hereinafter"===this.variables_real[0]?function(state,Item){var value=state.transform.abbrevs["default"].hereinafter[Item.id];value&&(state.output.append(value,this),state.tmp.group_context.tip.variable_success=!0)}:function(state,Item){var value;this.variables[0]&&(value=state.getVariable(Item,this.variables[0],form))&&(value=(value=""+value).split("\\").join(""),state.output.append(value,this))};this.execs.push(func),func=function(state,Item){state.parallel.CloseVariable("text")},this.execs.push(func)}else this.strings.value&&(func=function(state,Item){state.tmp.group_context.tip.term_intended=!0,CSL.UPDATE_GROUP_CONTEXT_CONDITION(state,this.strings.value,!0),state.output.append(this.strings.value,this)},this.execs.push(func));target.push(this),CSL.Util.substituteEnd.call(this,state,target)}}},module.exports=CSL,CSL.Attributes={},CSL.Attributes["@genre"]=function(state,arg){arg=arg.replace("-"," ");this.tests.push(function(Item,item){return arg===Item.genre})},CSL.Attributes["@disambiguate"]=function(state,arg){if("true"===arg){state.opt.has_disambiguate=!0;var func=function(Item,item){return state.tmp.disambiguate_maxMax+=1,!!(state.tmp.disambig_settings.disambiguate&&state.tmp.disambiguate_count<state.tmp.disambig_settings.disambiguate)&&(state.tmp.disambiguate_count+=1,!0)};this.tests.push(func)}else if("check-ambiguity-and-backreference"===arg){func=function(Item,item){return!!(state.registry.registry[Item.id].disambig.disambiguate&&state.registry.registry[Item.id]["citation-count"]>1)};this.tests.push(func)}},CSL.Attributes["@is-numeric"]=function(state,arg,joiner){for(var variables=arg.split(/\s+/),maketest=function(variable){return function(Item,item){var myitem=Item;if(["locator","locator-extra"].indexOf(variable)>-1&&(myitem=item),void 0===myitem)return!1;if(CSL.NUMERIC_VARIABLES.indexOf(variable)>-1){if(state.tmp.shadow_numbers[variable]||state.processNumber(!1,myitem,variable,Item.type),myitem[variable]&&state.tmp.shadow_numbers[variable].numeric)return!0}else if(["title","locator-extra","version"].indexOf(variable)>-1&&myitem[variable]&&myitem[variable].slice(-1)===""+parseInt(myitem[variable].slice(-1),10))return!0;return!1}},i=0;i<variables.length;i+=1)this.tests.push(maketest(variables[i]))},CSL.Attributes["@is-uncertain-date"]=function(state,arg){for(var variables=arg.split(/\s+/),maketest=function(myvariable){return function(Item,item){return!(!Item[myvariable]||!Item[myvariable].circa)}},i=0,ilen=variables.length;i<ilen;i+=1)this.tests.push(maketest(variables[i]))},CSL.Attributes["@locator"]=function(state,arg){for(var trylabels=arg.replace("sub verbo","sub-verbo"),maketest=function(trylabel){return function(Item,item){var label;return state.processNumber(!1,item,"locator"),label=state.tmp.shadow_numbers.locator.label,trylabel===label}},i=0,ilen=(trylabels=trylabels.split(/\s+/)).length;i<ilen;i+=1)this.tests.push(maketest(trylabels[i]))},CSL.Attributes["@position"]=function(state,arg){state.opt.update_mode=CSL.POSITION,state.parallel.use_parallels=null;for(var trypositions=arg.split(/\s+/),maketest=function(tryposition){return function(Item,item){if("bibliography"===state.tmp.area)return!1;if(item&&"undefined"==typeof item.position&&(item.position=0),item&&"number"==typeof item.position){if(0===item.position&&0===tryposition)return!0;if(tryposition>0&&item.position>=tryposition)return!0}else if(0===tryposition)return!0;return!1}},i=0,ilen=trypositions.length;i<ilen;i+=1){var tryposition;"first"===(tryposition=trypositions[i])?tryposition=CSL.POSITION_FIRST:"subsequent"===tryposition?tryposition=CSL.POSITION_SUBSEQUENT:"ibid"===tryposition?tryposition=CSL.POSITION_IBID:"ibid-with-locator"===tryposition&&(tryposition=CSL.POSITION_IBID_WITH_LOCATOR),"near-note"===tryposition?this.tests.push(function(Item,item){return!!(item&&item.position>=CSL.POSITION_SUBSEQUENT&&item["near-note"])}):"far-note"===tryposition?this.tests.push(function(Item,item){return!(!item||item.position!=CSL.POSITION_SUBSEQUENT||item["near-note"])}):this.tests.push(maketest(tryposition))}},CSL.Attributes["@type"]=function(state,arg){for(var types=arg.split(/\s+/),maketest=function(mytype){return function(Item,item){return!!(Item.type===mytype)}},tests=[],i=0,ilen=types.length;i<ilen;i+=1)tests.push(maketest(types[i]));this.tests.push(state.fun.match.any(this,state,tests))},CSL.Attributes["@variable"]=function(state,arg){var func;if(this.variables=arg.split(/\s+/),this.variables_real=this.variables.slice(),"label"===this.name&&this.variables[0])this.strings.term=this.variables[0];else if(["names","date","text","number"].indexOf(this.name)>-1)func=function(state,Item,item){for(var i=this.variables.length-1;i>-1;i+=-1)this.variables.pop();i=0;for(var ilen=this.variables_real.length;i<ilen;i++)-1!==state.tmp.done_vars.indexOf(this.variables_real[i])||item&&"legal_case"===Item.type&&item["suppress-author"]&&"title"===this.variables_real[i]||this.variables.push(this.variables_real[i]),state.tmp.can_block_substitute&&state.tmp.done_vars.push(this.variables_real[i])},this.execs.push(func),func=function(state,Item,item){for(var output=!1,i=0,ilen=this.variables.length;i<ilen;i++){var variable=this.variables[i];if(["authority","committee"].indexOf(variable)>-1&&"string"==typeof Item[variable]&&"names"===this.name){var isValid=!0,rawNames=Item[variable].split(/\s*;\s*/),rawMultiNames={};if(Item.multi&&Item.multi._keys[variable])for(var langTag in Item.multi._keys[variable])if(rawMultiNames[langTag]=Item.multi._keys[variable][langTag].split(/\s*;\s*/),rawMultiNames[langTag].length!==rawNames.length){isValid=!1;break}isValid||(rawNames=[Item[variable]],rawMultiNames=Item.multi._keys[variable]);for(var j=0,jlen=rawNames.length;j<jlen;j++){var creatorParent={literal:rawNames[j],multi:{_key:{}}};for(var langTag in rawMultiNames){var creatorChild={literal:rawMultiNames[langTag][j]};creatorParent.multi._key[langTag]=creatorChild}rawNames[j]=creatorParent}Item[variable]=rawNames}if("short"!==this.strings.form||Item[variable]||("title"===variable?variable="title-short":"container-title"===variable&&(variable="journalAbbreviation")),"year-suffix"===variable){output=!0;break}if(CSL.DATE_VARIABLES.indexOf(variable)>-1){if(state.opt.development_extensions.locator_date_and_revision&&"locator-date"===variable){output=!0;break}if(Item[variable]){for(var key in Item[variable])if((-1!==this.dateparts.indexOf(key)||"literal"===key)&&Item[variable][key]){output=!0;break}if(output)break}}else{if("locator"===variable){item&&item.locator&&(output=!0);break}if("locator-extra"===variable){item&&item["locator-extra"]&&(output=!0);break}if(["citation-number","citation-label"].indexOf(variable)>-1){output=!0;break}if("first-reference-note-number"===variable){item&&item["first-reference-note-number"]&&(output=!0);break}if("hereinafter"===variable){state.transform.abbrevs["default"].hereinafter[Item.id]&&state.sys.getAbbreviation&&Item.id&&(output=!0);break}if("object"===_typeof(Item[variable])){Item[variable].length;break}if("string"==typeof Item[variable]&&Item[variable]){output=!0;break}if("number"==typeof Item[variable]){output=!0;break}}if(output)break}if(output){for(i=0,ilen=this.variables_real.length;i<ilen;i++){"citation-number"===(variable=this.variables_real[i])&&"bibliography"===state.tmp.area||(state.tmp.cite_renders_content=!0),state.tmp.group_context.tip.variable_success=!0,state.tmp.can_substitute.value()&&"bibliography"===state.tmp.area&&"string"==typeof Item[variable]&&(state.tmp.name_node.top=state.output.current.value(),state.tmp.rendered_name.push(Item[variable]))}state.tmp.can_substitute.replace(!1,CSL.LITERAL)}else state.tmp.group_context.tip.variable_attempt=!0},this.execs.push(func);else if(["if","else-if","condition"].indexOf(this.name)>-1)for(var maketest=function(variable){return function(Item,item){var myitem=Item;if(item&&["locator","locator-extra","first-reference-note-number","locator-date"].indexOf(variable)>-1&&(myitem=item),"hereinafter"===variable&&state.sys.getAbbreviation&&myitem.id){if(state.transform.abbrevs["default"].hereinafter[myitem.id])return!0}else if(myitem[variable]){if("number"==typeof myitem[variable]||"string"==typeof myitem[variable])return!0;if("object"===_typeof(myitem[variable]))for(var key in myitem[variable])if(myitem[variable][key])return!0}return!1}},i=0,ilen=this.variables.length;i<ilen;i+=1)this.tests.push(maketest(this.variables[i]))},CSL.Attributes["@page"]=function(state,arg){for(var trylabels=arg.replace("sub verbo","sub-verbo"),maketest=function(trylabel){return function(Item,item){var label;return state.processNumber(!1,Item,"page",Item.type),label=state.tmp.shadow_numbers.page.label?"sub verbo"===state.tmp.shadow_numbers.page.label?"sub-verbo":state.tmp.shadow_numbers.page.label:"page",trylabel===label}},i=0,ilen=(trylabels=trylabels.split(/\s+/)).length;i<ilen;i+=1)this.tests.push(maketest(trylabels[i]))},CSL.Attributes["@number"]=function(state,arg){for(var trylabels=arg.replace("sub verbo","sub-verbo"),maketest=function(trylabel){return function(Item,item){var label;return state.processNumber(!1,Item,"number",Item.type),label=state.tmp.shadow_numbers.number.label?"sub verbo"===state.tmp.shadow_numbers.number.label?"sub-verbo":state.tmp.shadow_numbers.number.label:"number",trylabel===label}},i=0,ilen=(trylabels=trylabels.split(/\s+/)).length;i<ilen;i+=1)this.tests.push(maketest(trylabels[i]))},CSL.Attributes["@jurisdiction"]=function(state,arg){for(var tryjurisdictions=arg.split(/\s+/),i=0,ilen=tryjurisdictions.length;i<ilen;i+=1)tryjurisdictions[i]=tryjurisdictions[i].split(":");var maketests=function(tryjurisdiction){return function(Item,item){if(!Item.jurisdiction)return!1;for(var jurisdictions=Item.jurisdiction.split(":"),i=0,ilen=jurisdictions.length;i<ilen;i+=1)jurisdictions[i]=jurisdictions[i].split(":");for(i=tryjurisdiction.length;i>0;i+=-1){if(tryjurisdiction.slice(0,i).join(":")!==jurisdictions.slice(0,i).join(":"))return!1}return!0}};for(i=0,ilen=tryjurisdictions.length;i<ilen;i+=1){var tryjurisdictionSlice=tryjurisdictions[i].slice();this.tests.push(maketests(tryjurisdictionSlice))}},CSL.Attributes["@context"]=function(state,arg){this.tests.push(function(Item,item){return state.tmp.area.slice(0,arg.length)===arg})},CSL.Attributes["@has-year-only"]=function(state,arg){for(var trydates=arg.split(/\s+/),maketest=function(trydate){return function(Item,item){var date=Item[trydate];return!(!date||date.month||date.season)}},i=0,ilen=trydates.length;i<ilen;i+=1)this.tests.push(maketest(trydates[i]))},CSL.Attributes["@has-to-month-or-season"]=function(state,arg){for(var trydates=arg.split(/\s+/),maketest=function(trydate){return function(Item,item){var date=Item[trydate];return!(!date||!date.month&&!date.season||date.day)}},i=0,ilen=trydates.length;i<ilen;i+=1)this.tests.push(maketest(trydates[i]))},CSL.Attributes["@has-day"]=function(state,arg){for(var trydates=arg.split(/\s+/),maketest=function(trydate){return function(Item,item){var date=Item[trydate];return!(!date||!date.day)}},i=0,ilen=trydates.length;i<ilen;i+=1)this.tests.push(maketest(trydates[i]))},CSL.Attributes["@subjurisdictions"]=function(state,arg){var trysubjurisdictions=parseInt(arg,10);this.tests.push(function(Item,item){var subjurisdictions=0;return Item.jurisdiction&&(subjurisdictions=Item.jurisdiction.split(":").length),subjurisdictions&&(subjurisdictions+=-1),subjurisdictions>=trysubjurisdictions})},CSL.Attributes["@is-plural"]=function(state,arg){this.tests.push(function(Item,item){var nameList=Item[arg];if(nameList&&nameList.length){for(var persons=0,institutions=0,last_is_person=!1,i=0,ilen=nameList.length;i<ilen;i+=1)state.opt.development_extensions.spoof_institutional_affiliations&&(nameList[i].literal||nameList[i].isInstitution&&nameList[i].family&&!nameList[i].given)?(institutions+=1,last_is_person=!1):(persons+=1,last_is_person=!0);if(persons>1)return!0;if(institutions>1)return!0;if(institutions&&last_is_person)return!0}return!1})},CSL.Attributes["@locale"]=function(state,arg){var langspec,lang,lst,locale_default=state.opt["default-locale"][0];if("layout"===this.name){if(this.locale_raw=arg,this.tokentype===CSL.START){var locales=arg.split(/\s+/),sort_locale={},localeMaster=CSL.localeResolve(locales[0],locale_default);localeMaster.generic?sort_locale[localeMaster.generic]=localeMaster.best:sort_locale[localeMaster.best]=localeMaster.best;for(var i=1,ilen=locales.length;i<ilen;i+=1){var localeServant=CSL.localeResolve(locales[i],locale_default);localeServant.generic?sort_locale[localeServant.generic]=localeMaster.best:sort_locale[localeServant.best]=localeMaster.best}state[state.build.area].opt.sort_locales.push(sort_locale)}state.opt.has_layout_locale=!0}else{lst=arg.split(/\s+/);var locale_bares=[];for(i=0,ilen=lst.length;i<ilen;i+=1)lang=lst[i],langspec=CSL.localeResolve(lang,locale_default),2===lst[i].length&&locale_bares.push(langspec.bare),state.localeConfigure(langspec,!0),lst[i]=langspec;var locale_list=lst.slice();this.tests.push(function(locale_list,locale_default,locale_bares){return function(Item,item){var res,langspec,lang;for([],res=!1,lang=Item.language?Item.language:locale_default,langspec=CSL.localeResolve(lang,locale_default),i=0,ilen=locale_list.length;i<ilen;i+=1)if(langspec.best===locale_list[i].best){res=!0;break}return!res&&locale_bares.indexOf(langspec.bare)>-1&&(res=!0),res}}(locale_list,locale_default,locale_bares))}},CSL.Attributes["@authority-residue"]=function(state,arg){var succeed;this.tests.push((succeed="true"===arg,function(Item,item){return Item.authority&&Item.authority[0]&&Item.authority[0].family&&Item.authority[0].family.split("|").length+state.tmp.authority_stop_last>0?succeed:!succeed}))},CSL.Attributes["@locale-internal"]=function(state,arg){var langspec,lang,lst,i,ilen;for(lst=arg.split(/\s+/),this.locale_bares=[],i=0,ilen=lst.length;i<ilen;i+=1)lang=lst[i],langspec=CSL.localeResolve(lang,state.opt["default-locale"][0]),2===lst[i].length&&this.locale_bares.push(langspec.bare),state.localeConfigure(langspec),lst[i]=langspec;this.locale_default=state.opt["default-locale"][0],this.locale=lst[0].best,this.locale_list=lst.slice();this.tests.push(function(me){return function(Item,item){var res;[],res=!1;var langspec=!1;if(Item.language&&(lang=Item.language,(langspec=CSL.localeResolve(lang,state.opt["default-locale"][0])).best===state.opt["default-locale"][0]&&(langspec=!1)),langspec){for(i=0,ilen=me.locale_list.length;i<ilen;i+=1)if(langspec.best===me.locale_list[i].best){state.opt.lang=me.locale,state.tmp.last_cite_locale=me.locale,state.output.openLevel("empty"),state.output.current.value().new_locale=me.locale,res=!0;break}!res&&me.locale_bares.indexOf(langspec.bare)>-1&&(state.opt.lang=me.locale,state.tmp.last_cite_locale=me.locale,state.output.openLevel("empty"),state.output.current.value().new_locale=me.locale,res=!0)}return res}}(this))},CSL.Attributes["@is-parallel"]=function(state,arg){for(var values=arg.split(" "),i=0,ilen=values.length;i<ilen;i+=1)"true"===values[i]?values[i]=!0:"false"===values[i]&&(values[i]=!1);this.strings.set_parallel_condition=values},CSL.Attributes["@jurisdiction-depth"]=function(state,arg){this.strings.jurisdiction_depth=parseInt(arg,10)},CSL.Attributes["@require"]=function(state,arg){this.strings.require=arg},CSL.Attributes["@reject"]=function(state,arg){this.strings.reject=arg},CSL.Attributes["@gender"]=function(state,arg){this.gender=arg},CSL.Attributes["@cslid"]=function(state,arg){this.cslid=parseInt(arg,10)},CSL.Attributes["@label-form"]=function(state,arg){this.strings.label_form_override=arg},CSL.Attributes["@part-separator"]=function(state,arg){this.strings["part-separator"]=arg},CSL.Attributes["@leading-noise-words"]=function(state,arg){this["leading-noise-words"]=arg},CSL.Attributes["@name-never-short"]=function(state,arg){this["name-never-short"]=arg},CSL.Attributes["@class"]=function(state,arg){state.opt["class"]=arg},CSL.Attributes["@version"]=function(state,arg){state.opt.version=arg},CSL.Attributes["@value"]=function(state,arg){this.strings.value=arg},CSL.Attributes["@name"]=function(state,arg){this.strings.name=arg},CSL.Attributes["@form"]=function(state,arg){this.strings.form=arg},CSL.Attributes["@date-parts"]=function(state,arg){this.strings["date-parts"]=arg},CSL.Attributes["@range-delimiter"]=function(state,arg){this.strings["range-delimiter"]=arg},CSL.Attributes["@macro"]=function(state,arg){this.postponed_macro=arg},CSL.Attributes["@term"]=function(state,arg){this.strings.term="sub verbo"===arg?"sub-verbo":arg},CSL.Attributes["@xmlns"]=function(state,arg){},CSL.Attributes["@lang"]=function(state,arg){arg&&(state.build.lang=arg)},CSL.Attributes["@lingo"]=function(state,arg){},CSL.Attributes["@macro-has-date"]=function(state,arg){this["macro-has-date"]=!0},CSL.Attributes["@suffix"]=function(state,arg){this.strings.suffix=arg},CSL.Attributes["@prefix"]=function(state,arg){this.strings.prefix=arg},CSL.Attributes["@delimiter"]=function(state,arg){this.strings.delimiter=arg},CSL.Attributes["@match"]=function(state,arg){this.match=arg},CSL.Attributes["@names-min"]=function(state,arg){var val=parseInt(arg,10);state[state.build.area].opt.max_number_of_names<val&&(state[state.build.area].opt.max_number_of_names=val),this.strings["et-al-min"]=val},CSL.Attributes["@names-use-first"]=function(state,arg){this.strings["et-al-use-first"]=parseInt(arg,10)},CSL.Attributes["@names-use-last"]=function(state,arg){this.strings["et-al-use-last"]="true"===arg},CSL.Attributes["@sort"]=function(state,arg){"descending"===arg&&(this.strings.sort_direction=CSL.DESCENDING)},CSL.Attributes["@plural"]=function(state,arg){"always"===arg||"true"===arg?this.strings.plural=1:"never"===arg||"false"===arg?this.strings.plural=0:"contextual"===arg&&(this.strings.plural=!1)},CSL.Attributes["@has-publisher-and-publisher-place"]=function(state,arg){this.strings["has-publisher-and-publisher-place"]=!0},CSL.Attributes["@publisher-delimiter-precedes-last"]=function(state,arg){this.strings["publisher-delimiter-precedes-last"]=arg},CSL.Attributes["@publisher-delimiter"]=function(state,arg){this.strings["publisher-delimiter"]=arg},CSL.Attributes["@publisher-and"]=function(state,arg){this.strings["publisher-and"]=arg},CSL.Attributes["@newdate"]=function(state,arg){},CSL.Attributes["@givenname-disambiguation-rule"]=function(state,arg){CSL.GIVENNAME_DISAMBIGUATION_RULES.indexOf(arg)>-1&&(state.citation.opt["givenname-disambiguation-rule"]=arg)},CSL.Attributes["@collapse"]=function(state,arg){arg&&(state[this.name].opt.collapse=arg)},CSL.Attributes["@cite-group-delimiter"]=function(state,arg){arg&&(state[state.tmp.area].opt.cite_group_delimiter=arg)},CSL.Attributes["@names-delimiter"]=function(state,arg){state.setOpt(this,"names-delimiter",arg)},CSL.Attributes["@name-form"]=function(state,arg){state.setOpt(this,"name-form",arg)},CSL.Attributes["@subgroup-delimiter"]=function(state,arg){this.strings["subgroup-delimiter"]=arg},CSL.Attributes["@subgroup-delimiter-precedes-last"]=function(state,arg){this.strings["subgroup-delimiter-precedes-last"]=arg},CSL.Attributes["@name-delimiter"]=function(state,arg){state.setOpt(this,"name-delimiter",arg)},CSL.Attributes["@et-al-min"]=function(state,arg){var val=parseInt(arg,10);state[state.build.area].opt.max_number_of_names<val&&(state[state.build.area].opt.max_number_of_names=val),state.setOpt(this,"et-al-min",val)},CSL.Attributes["@et-al-use-first"]=function(state,arg){state.setOpt(this,"et-al-use-first",parseInt(arg,10))},CSL.Attributes["@et-al-use-last"]=function(state,arg){"true"===arg?state.setOpt(this,"et-al-use-last",!0):state.setOpt(this,"et-al-use-last",!1)},CSL.Attributes["@et-al-subsequent-min"]=function(state,arg){var val=parseInt(arg,10);state[state.build.area].opt.max_number_of_names<val&&(state[state.build.area].opt.max_number_of_names=val),state.setOpt(this,"et-al-subsequent-min",val)},CSL.Attributes["@et-al-subsequent-use-first"]=function(state,arg){state.setOpt(this,"et-al-subsequent-use-first",parseInt(arg,10))},CSL.Attributes["@suppress-min"]=function(state,arg){this.strings["suppress-min"]=parseInt(arg,10)},CSL.Attributes["@suppress-max"]=function(state,arg){this.strings["suppress-max"]=parseInt(arg,10)},CSL.Attributes["@and"]=function(state,arg){state.setOpt(this,"and",arg)},CSL.Attributes["@delimiter-precedes-last"]=function(state,arg){state.setOpt(this,"delimiter-precedes-last",arg)},CSL.Attributes["@delimiter-precedes-et-al"]=function(state,arg){state.setOpt(this,"delimiter-precedes-et-al",arg)},CSL.Attributes["@initialize-with"]=function(state,arg){state.setOpt(this,"initialize-with",arg)},CSL.Attributes["@initialize"]=function(state,arg){"false"===arg&&state.setOpt(this,"initialize",!1)},CSL.Attributes["@name-as-reverse-order"]=function(state,arg){this["name-as-reverse-order"]=arg},CSL.Attributes["@name-as-sort-order"]=function(state,arg){"style-options"===this.name?this["name-as-sort-order"]=arg:state.setOpt(this,"name-as-sort-order",arg)},CSL.Attributes["@sort-separator"]=function(state,arg){state.setOpt(this,"sort-separator",arg)},CSL.Attributes["@year-suffix-delimiter"]=function(state,arg){state[this.name].opt["year-suffix-delimiter"]=arg},CSL.Attributes["@after-collapse-delimiter"]=function(state,arg){state[this.name].opt["after-collapse-delimiter"]=arg},CSL.Attributes["@subsequent-author-substitute"]=function(state,arg){state[this.name].opt["subsequent-author-substitute"]=arg},CSL.Attributes["@subsequent-author-substitute-rule"]=function(state,arg){state[this.name].opt["subsequent-author-substitute-rule"]=arg},CSL.Attributes["@disambiguate-add-names"]=function(state,arg){"true"===arg&&(state.opt["disambiguate-add-names"]=!0)},CSL.Attributes["@disambiguate-add-givenname"]=function(state,arg){"true"===arg&&(state.opt["disambiguate-add-givenname"]=!0)},CSL.Attributes["@disambiguate-add-year-suffix"]=function(state,arg){"true"===arg&&"numeric"!==state.opt.xclass&&(state.opt["disambiguate-add-year-suffix"]=!0)},CSL.Attributes["@second-field-align"]=function(state,arg){"flush"!==arg&&"margin"!==arg||(state[this.name].opt["second-field-align"]=arg)},CSL.Attributes["@hanging-indent"]=function(state,arg){"true"===arg&&(state[this.name].opt.hangingindent=2)},CSL.Attributes["@line-spacing"]=function(state,arg){arg&&arg.match(/^[.0-9]+$/)&&(state[this.name].opt["line-spacing"]=parseFloat(arg,10))},CSL.Attributes["@entry-spacing"]=function(state,arg){arg&&arg.match(/^[.0-9]+$/)&&(state[this.name].opt["entry-spacing"]=parseFloat(arg,10))},CSL.Attributes["@near-note-distance"]=function(state,arg){state[this.name].opt["near-note-distance"]=parseInt(arg,10)},CSL.Attributes["@text-case"]=function(state,arg){this.execs.push(function(state,Item){"normal"===arg?this.text_case_normal=!0:(this.strings["text-case"]=arg,"title"===arg&&(state.opt["default-locale"][0].slice(0,2),Item.jurisdiction&&(this.strings["text-case"]="passthrough")))})},CSL.Attributes["@page-range-format"]=function(state,arg){state.opt["page-range-format"]=arg},CSL.Attributes["@year-range-format"]=function(state,arg){state.opt["year-range-format"]=arg},CSL.Attributes["@default-locale"]=function(state,arg){if("style"===this.name){var lst,len,pos,ret,m;if(m=arg.match(/-x-(sort|translit|translat)-/g))for(pos=0,len=m.length;pos<len;pos+=1)m[pos]=m[pos].replace(/^-x-/,"").replace(/-$/,"");for(ret=[(lst=arg.split(/-x-(?:sort|translit|translat)-/))[0]],pos=1,len=lst.length;pos<len;pos+=1)ret.push(m[pos-1]),ret.push(lst[pos]);for(len=(lst=ret.slice()).length,pos=1;pos<len;pos+=2)state.opt["locale-"+lst[pos]].push(lst[pos+1].replace(/^\s*/g,"").replace(/\s*$/g,""));lst.length?state.opt["default-locale"]=lst.slice(0,1):state.opt["default-locale"]=["en"]}else"true"===arg&&(this.default_locale=!0)},CSL.Attributes["@default-locale-sort"]=function(state,arg){state.opt["default-locale-sort"]=arg},CSL.Attributes["@demote-non-dropping-particle"]=function(state,arg){state.opt["demote-non-dropping-particle"]=arg},CSL.Attributes["@initialize-with-hyphen"]=function(state,arg){"false"===arg&&(state.opt["initialize-with-hyphen"]=!1)},CSL.Attributes["@institution-parts"]=function(state,arg){this.strings["institution-parts"]=arg},CSL.Attributes["@if-short"]=function(state,arg){"true"===arg&&(this.strings["if-short"]=!0)},CSL.Attributes["@substitute-use-first"]=function(state,arg){this.strings["substitute-use-first"]=parseInt(arg,10)},CSL.Attributes["@use-first"]=function(state,arg){this.strings["use-first"]=parseInt(arg,10)},CSL.Attributes["@stop-last"]=function(state,arg){this.strings["stop-last"]=-1*parseInt(arg,10)},CSL.Attributes["@use-last"]=function(state,arg){this.strings["use-last"]=parseInt(arg,10)},CSL.Attributes["@reverse-order"]=function(state,arg){"true"===arg&&(this.strings["reverse-order"]=!0)},CSL.Attributes["@display"]=function(state,arg){2===state.bibliography.tokens.length&&(state.opt.using_display=!0),this.strings.cls=arg},module.exports=CSL,CSL.Stack=function(val,literal){this.mystack=[],(literal||val)&&this.mystack.push(val),this.tip=this.mystack[0]},CSL.Stack.prototype.push=function(val,literal){literal||val?this.mystack.push(val):this.mystack.push(""),this.tip=this.mystack[this.mystack.length-1]},CSL.Stack.prototype.clear=function(){this.mystack=[],this.tip={}},CSL.Stack.prototype.replace=function(val,literal){if(0===this.mystack.length)throw"Internal CSL processor error: attempt to replace nonexistent stack item with "+val;this.mystack[this.mystack.length-1]=literal||val?val:"",this.tip=this.mystack[this.mystack.length-1]},CSL.Stack.prototype.pop=function(){var ret=this.mystack.pop();return this.mystack.length?this.tip=this.mystack[this.mystack.length-1]:this.tip={},ret},CSL.Stack.prototype.value=function(){return this.mystack.slice(-1)[0]},CSL.Stack.prototype.length=function(){return this.mystack.length},module.exports=CSL,CSL.Parallel=function(state){this.state=state,this.sets=new CSL.Stack([]),this.try_cite=!0,this.use_parallels=!1,this.midVars=["section","volume","container-title","collection-number","issue","page-first","page","number"],this.ignoreVarsLawGeneral=["first-reference-note-number","locator","label","page-first","page","genre"],this.ignoreVarsLawProceduralHistory=["issued","first-reference-note-number","locator","label","page-first","page","genre","jurisdiction"],this.ignoreVarsOrders=["first-reference-note-number"],this.ignoreVarsOther=["first-reference-note-number","locator","label","section","page-first","page"]},CSL.Parallel.prototype.isMid=function(variable){return this.midVars.indexOf(variable)>-1},CSL.Parallel.prototype.StartCitation=function(sortedItems,out){this.parallel_conditional_blobs_list=[],this.use_parallels&&(this.sortedItems=sortedItems,this.sortedItemsPos=-1,this.sets.clear(),this.sets.push([]),this.in_series=!0,this.delim_counter=0,this.delim_pointers=[],this.out=out||this.state.output.queue,this.master_was_neutral_cite=!0)},CSL.Parallel.prototype.StartCite=function(Item,item,prevItemID){var position,pos,curr,last_id,prev_locator,curr_locator;if(this.use_parallels){this.sets.value().length&&this.sets.value()[0].itemId==Item.id&&this.ComposeSet(),this.sortedItemsPos+=1,item&&(position=item.position),this.try_cite=!0;for(var has_required_var=!1,i=0,ilen=CSL.PARALLEL_MATCH_VARS.length;i<ilen;i+=1)if(Item[CSL.PARALLEL_MATCH_VARS[i]]){has_required_var=!0;break}var basics_ok=!0,last_cite=this.sets.value().slice(-1)[0];if(last_cite&&last_cite.Item){var lastJuris=last_cite.Item.jurisdiction?last_cite.Item.jurisdiction.split(":")[0]:"",thisJuris=Item.jurisdiction?Item.jurisdiction.split(":")[0]:"";last_cite.Item.title!==Item.title?basics_ok=!1:lastJuris!==thisJuris?basics_ok=!1:last_cite.Item.type!==Item.type?basics_ok=!1:["article-journal","article-magazine"].indexOf(Item.type)>-1&&(this.state.opt.development_extensions.handle_parallel_articles&&last_cite.Item["container-title"]===Item["container-title"]||(basics_ok=!1))}if(basics_ok&&has_required_var&&-1!==CSL.PARALLEL_TYPES.indexOf(Item.type)||(this.try_cite=!0,this.in_series&&(this.in_series=!1)),this.cite={},this.cite.front=[],this.cite.mid=[],this.cite.back=[],this.cite.front_collapse={},this.cite.back_forceme=[],this.cite.position=position,this.cite.Item=Item,this.cite.itemId=""+Item.id,this.cite.prevItemID=""+prevItemID,this.target="front",["treaty"].indexOf(Item.type)>-1)this.ignoreVars=this.ignoreVarsOrders;else if(["article-journal","article-magazine"].indexOf(Item.type)>-1)this.ignoreVars=this.ignoreVarsOther;else if(item&&item.prefix){this.ignoreVars=this.ignoreVarsLawProceduralHistory,this.cite.useProceduralHistory=!0;var prev=this.sets.value()[this.sets.value().length-1];if(prev&&prev.back)for(i=prev.back.length-1;i>-1;i+=-1)prev.back[i]&&prev[prev.back[i]]&&delete prev[prev.back[i]]}else this.ignoreVars=this.ignoreVarsLawGeneral;if(this.sortedItems&&this.sortedItemsPos>0&&this.sortedItemsPos<this.sortedItems.length){if(curr=this.sortedItems[this.sortedItemsPos][1],last_id=""+this.sortedItems[this.sortedItemsPos-1][1].id,prev_locator=!1,this.state.registry.registry[last_id].parallel==curr.id){for(pos=this.sortedItemsPos-1;pos>-1;pos+=-1)if(this.sortedItems[pos][1].id==Item.id){prev_locator=this.sortedItems[pos][1].locator;break}curr_locator=this.sortedItems[this.sortedItemsPos][1].locator,curr.position=!prev_locator&&curr_locator?CSL.POSITION_IBID_WITH_LOCATOR:curr_locator===prev_locator?CSL.POSITION_IBID:CSL.POSITION_IBID_WITH_LOCATOR}}else{if(!this.state.registry.registry[Item.id])return this.try_cite=!1,void(this.force_collapse=!1);this.state.registry.registry[Item.id].parallel=!1}this.force_collapse=!1,this.state.registry.registry[Item.id].parallel&&(this.force_collapse=!0)}},CSL.Parallel.prototype.StartVariable=function(variable,real_variable){if(this.use_parallels&&(this.try_cite||this.force_collapse)){if(this.variable="names"===variable?variable+":"+this.target:variable,this.ignoreVars.indexOf(variable)>-1)return;"container-title"===variable&&0===this.sets.value().length&&(this.master_was_neutral_cite=!1),this.data={},this.data.value="",this.data.blobs=[];var is_mid=this.isMid(variable);if("authority"===real_variable&&"names:front"===this.variable&&this.sets.value().length){var prev=this.sets.value()[this.sets.value().length-1].Item,thisAuthority=!1;this.cite.Item.authority&&this.cite.Item.authority.length&&(thisAuthority=this.cite.Item.authority[0].literal);var thatAuthority=!1;prev.authority&&prev.authority.length&&(thatAuthority=prev.authority[0].literal),thisAuthority!==thatAuthority&&(this.try_cite=!0,this.in_series=!1)}else"front"===this.target&&is_mid?this.target="mid":"mid"===this.target&&!is_mid&&this.cite.Item.title&&"names"!==variable?this.target="back":"back"===this.target&&is_mid&&(this.try_cite=!0,this.in_series=!1);"number"===variable?this.cite.front.push(this.variable):CSL.PARALLEL_COLLAPSING_MID_VARSET.indexOf(variable)>-1?["article-journal","article-magazine"].indexOf(this.cite.Item.type)>-1?this.cite.mid.push(this.variable):this.cite.front.push(this.variable):this.cite[this.target].push(this.variable)}},CSL.Parallel.prototype.AppendBlobPointer=function(blob){if(this.use_parallels){if(this.ignoreVars.indexOf(this.variable)>-1)return;if(this.use_parallels&&(this.force_collapse||this.try_cite)){if(["article-journal","article-magazine"].indexOf(this.cite.Item.type)>-1){if(["volume","page","page-first","issue"].indexOf(this.variable)>-1)return;if("container-title"===this.variable&&this.cite.mid.length>1)return}this.variable&&(this.try_cite||this.force_collapse)&&blob&&blob.blobs&&(this.cite.useProceduralHistory&&"back"===this.target||this.data.blobs.push([blob,blob.blobs.length]))}}},CSL.Parallel.prototype.AppendToVariable=function(str,varname){if(this.use_parallels){if(this.ignoreVars.indexOf(this.variable)>-1)return;if(this.try_cite||this.force_collapse)this.target,this.data.value+="::"+str}},CSL.Parallel.prototype.CloseVariable=function(){if(this.use_parallels){if(this.ignoreVars.indexOf(this.variable)>-1)return;if((this.try_cite||this.force_collapse)&&(this.cite[this.variable]=this.data,this.sets.value().length>0)){var prev=this.sets.value()[this.sets.value().length-1];"front"===this.target&&"issued"===this.variable&&this.data.value&&this.master_was_neutral_cite&&(this.target="mid"),"front"===this.target?!prev[this.variable]&&!this.data.value||prev[this.variable]&&this.data.value===prev[this.variable].value||"issued"!==this.variable&&(this.in_series=!1):"mid"===this.target?CSL.PARALLEL_COLLAPSING_MID_VARSET.indexOf(this.variable)>-1&&(prev[this.variable]&&prev[this.variable].value===this.data.value?this.cite.front_collapse[this.variable]=!0:this.cite.front_collapse[this.variable]=!1):"back"===this.target&&prev[this.variable]&&this.data.value!==prev[this.variable].value&&-1===this.sets.value().slice(-1)[0].back_forceme.indexOf(this.variable)&&(this.in_series=!1)}this.variable=!1}},CSL.Parallel.prototype.CloseCite=function(){var pos,len,use_journal_info,volume_pos,container_title_pos,section_pos;if(this.use_parallels&&(this.force_collapse||this.try_cite)){if(use_journal_info=!1,this.cite.front_collapse["container-title"]||(use_journal_info=!0),!1===this.cite.front_collapse.volume&&(use_journal_info=!0),!1===this.cite.front_collapse["collection-number"]&&(use_journal_info=!0),!1===this.cite.front_collapse.section&&(use_journal_info=!0),use_journal_info){this.cite.use_journal_info=!0,(section_pos=this.cite.front.indexOf("section"))>-1&&(this.cite.front=this.cite.front.slice(0,section_pos).concat(this.cite.front.slice(section_pos+1))),(volume_pos=this.cite.front.indexOf("volume"))>-1&&(this.cite.front=this.cite.front.slice(0,volume_pos).concat(this.cite.front.slice(volume_pos+1))),(container_title_pos=this.cite.front.indexOf("container-title"))>-1&&(this.cite.front=this.cite.front.slice(0,container_title_pos).concat(this.cite.front.slice(container_title_pos+1)));var collection_number_pos=this.cite.front.indexOf("collection-number");collection_number_pos>-1&&(this.cite.front=this.cite.front.slice(0,collection_number_pos).concat(this.cite.front.slice(collection_number_pos+1)))}if(this.in_series||this.force_collapse||this.ComposeSet(!0),0===this.sets.value().length){var has_date=!1;for(pos=0,len=this.cite.back.length;pos<len;pos+=1)if("issued"===this.cite.back[pos]&&this.cite.issued&&this.cite.issued.value){has_date=!0;break}has_date||this.cite.back_forceme.push("issued")}else{var idx=this.cite.front.indexOf("issued");if((-1===idx||this.master_was_neutral_cite)&&(this.cite.back_forceme=this.sets.value().slice(-1)[0].back_forceme),idx>-1)this.sets.value()[this.sets.value().length-1].issued||(this.cite.front=this.cite.front.slice(0,idx).concat(this.cite.front.slice(idx+1)));this.master_was_neutral_cite&&this.cite.mid.indexOf("names:mid")>-1&&this.cite.front.push("names:mid")}this.sets.value().push(this.cite)}},CSL.Parallel.prototype.ComposeSet=function(next_output_in_progress){var cite,pos,len;if(this.use_parallels&&(this.force_collapse||this.try_cite)){var lengthCheck=this.sets.value().length;if(1===this.sets.value().length)this.in_series||(this.sets.value().pop(),this.delim_counter+=1);else{for(len=this.sets.value().length,pos=0;pos<len;pos+=1)cite=this.sets.value()[pos],0===pos?this.delim_counter+=1:(!cite.Item.title&&cite.use_journal_info?this.delim_pointers.push(!1):this.delim_pointers.push(this.delim_counter),this.delim_counter+=1),CSL.POSITION_FIRST===cite.position&&(0===pos?(this.state.registry.registry[cite.itemId].master=!0,this.state.registry.registry[cite.itemId].siblings=[],this.state.registry.registry[cite.itemId].parallel=!1):cite.prevItemID&&(this.state.registry.registry[cite.prevItemID].parallel?this.state.registry.registry[cite.itemId].parallel=this.state.registry.registry[cite.prevItemID].parallel:this.state.registry.registry[cite.itemId].parallel=cite.prevItemID,this.state.registry.registry[cite.itemId].siblings=this.state.registry.registry[cite.prevItemID].siblings,this.state.registry.registry[cite.itemId].siblings||(this.state.registry.registry[cite.itemId].siblings=[],CSL.debug("WARNING: adding missing siblings array to registry object")),this.state.registry.registry[cite.itemId].siblings.push(cite.itemId)));this.sets.push([])}lengthCheck<2?this.purgeGroupsIfParallel(!1):this.purgeGroupsIfParallel(!0),this.in_series=!0}},CSL.Parallel.prototype.PruneOutputQueue=function(){var len,pos,series,ppos,llen,cite;if(this.use_parallels)for(len=this.sets.mystack.length,pos=0;pos<len;pos+=1)if((series=this.sets.mystack[pos]).length>1)for(llen=series.length,ppos=0;ppos<llen;ppos+=1)cite=series[ppos],0===ppos?this.purgeVariableBlobs(cite,cite.back):ppos===series.length-1?this.purgeVariableBlobs(cite,cite.front.concat(cite.back_forceme)):this.purgeVariableBlobs(cite,cite.front.concat(cite.back))},CSL.Parallel.prototype.purgeVariableBlobs=function(cite,varnames){var len,pos,varname,b,ppos,out;if(this.use_parallels){for("undefined"==typeof(out=this.state.output.current.value()).length&&(out=out.blobs),pos=0,len=this.delim_pointers.length;pos<len;pos+=1)!1!==(ppos=this.delim_pointers[pos])&&(out[ppos].parallel_delimiter=", ");for(pos=len=varnames.length-1;pos>-1;pos+=-1)if(cite[varname=varnames[pos]])for(ppos=cite[varname].blobs.length-1;ppos>-1;ppos+=-1)(b=cite[varname].blobs[ppos])[0].blobs=b[0].blobs.slice(0,b[1]).concat(b[0].blobs.slice(b[1]+1)),this.state.tmp.has_purged_parallel=!0,b[0]&&b[0].strings&&"string"==typeof b[0].strings.oops&&b[0].parent&&b[0].parent&&(b[0].parent.parent.strings.delimiter=b[0].strings.oops)}},CSL.Parallel.prototype.purgeGroupsIfParallel=function(original_condition){for(var i=this.parallel_conditional_blobs_list.length-1;i>-1;i+=-1){for(var obj=this.parallel_conditional_blobs_list[i],purgeme=!0,j=0,jlen=obj.conditions.length;j<jlen;j+=1)if(!obj.conditions[j]!=!!original_condition&&("master"!==obj.conditions[j]||this.state.registry.registry[obj.id].master)&&("servant"!==obj.conditions[j]||this.state.registry.registry[obj.id].parallel)){purgeme=!1;break}if(purgeme){for(var buffer=[];obj.blobs.length>obj.pos;)buffer.push(obj.blobs.pop());for(buffer.length&&buffer.pop();buffer.length;)obj.blobs.push(buffer.pop())}this.parallel_conditional_blobs_list.pop()}},module.exports=CSL,CSL.Util={},CSL.Util.Match=function(){this.any=function(token,state,tests){return function(Item,item){for(var i=0,ilen=tests.length;i<ilen;i+=1){if(tests[i](Item,item))return!0}return!1}},this.none=function(token,state,tests){return function(Item,item){for(var i=0,ilen=tests.length;i<ilen;i+=1){if(tests[i](Item,item))return!1}return!0}},this.all=function(token,state,tests){return function(Item,item){for(var i=0,ilen=tests.length;i<ilen;i+=1){if(!tests[i](Item,item))return!1}return!0}},this[undefined]=this.all,this.nand=function(token,state,tests){return function(Item,item){for(var i=0,ilen=tests.length;i<ilen;i+=1){if(!tests[i](Item,item))return!0}return!1}}},module.exports=CSL,CSL.Transform=function(state){function abbreviate(state,Item,altvar,basevalue,myabbrev_family,use_field){var value;if(!(myabbrev_family=CSL.FIELD_CATEGORY_REMAP[myabbrev_family]))return basevalue;var variable=myabbrev_family;if(value="",state.sys.getAbbreviation){var normalizedKey=basevalue;state.sys.normalizeAbbrevsKey&&(normalizedKey=state.sys.normalizeAbbrevsKey(basevalue));var jurisdiction=state.transform.loadAbbreviation(Item.jurisdiction,myabbrev_family,normalizedKey,Item.type,!0);state.transform.abbrevs[jurisdiction][myabbrev_family]&&normalizedKey&&state.sys.getAbbreviation&&state.transform.abbrevs[jurisdiction][myabbrev_family][normalizedKey]&&(value=state.transform.abbrevs[jurisdiction][myabbrev_family][normalizedKey].replace("{stet}",basevalue))}return value||state.opt.development_extensions.require_explicit_legal_case_title_short&&"legal_case"===Item.type||!altvar||!Item[altvar]||!use_field||(value=Item[altvar]),value||(value=basevalue),value&&value.match(/^\!(?:[^>]+,)*here(?:,[^>]+)*>>>/)&&(value="jurisdiction"===variable&&["treaty","patent"].indexOf(Item.type)>-1&&value.replace(/^\![^>]*>>>\s*/,"")),value}function getFieldLocale(Item,field){var localeRex,ret=state.opt["default-locale"][0].slice(0,2);if(localeRex=state.opt.development_extensions.strict_text_case_locales?new RegExp("^([a-zA-Z]{2})(?:$|-.*| .*)"):new RegExp("^([a-zA-Z]{2})(?:$|-.*|.*)"),Item.language){var m=(""+Item.language).match(localeRex);ret=m?m[1]:"tlh"}return Item.multi&&Item.multi&&Item.multi.main&&Item.multi.main[field]&&(ret=Item.multi.main[field]),state.opt.development_extensions.strict_text_case_locales&&!state.opt.development_extensions.normalize_lang_keys_to_lowercase||(ret=ret.toLowerCase()),ret}function getTextSubField(Item,field,locale_type,use_default,stopOrig){var opt,o,opts,usedOrig=stopOrig,usingOrig=!1;if(!Item[field])return{name:"",usedOrig:stopOrig,token:CSL.Util.cloneToken(this)};ret={name:"",usedOrig:stopOrig,locale:getFieldLocale(Item,field)},opts=state.opt[locale_type];var hasVal=!1,jurisdictionName=!1;if("locale-orig"===locale_type)ret=stopOrig?{name:"",usedOrig:stopOrig}:{name:Item[field],usedOrig:!1,locale:getFieldLocale(Item,field)},hasVal=!0,usingOrig=!0;else if(use_default&&(void 0===opts||0===opts.length)){var ret={name:Item[field],usedOrig:!0,locale:getFieldLocale(Item,field)};hasVal=!0,usingOrig=!0}if(!hasVal){for(var i=0,ilen=opts.length;i<ilen;i+=1){if(o=(opt=opts[i]).split(/[\-_]/)[0],opt&&Item.multi&&Item.multi._keys[field]&&Item.multi._keys[field][opt]){ret.name=Item.multi._keys[field][opt],ret.locale=opt,"jurisdiction"===field&&(jurisdictionName=ret.name);break}if(o&&Item.multi&&Item.multi._keys[field]&&Item.multi._keys[field][o]){ret.name=Item.multi._keys[field][o],ret.locale=o,"jurisdiction"===field&&(jurisdictionName=ret.name);break}}!ret.name&&use_default&&(ret={name:Item[field],usedOrig:!0,locale:getFieldLocale(Item,field)},usingOrig=!0)}if(ret.token=CSL.Util.cloneToken(this),state.sys.getHumanForm&&ret.name&&"jurisdiction"===field)ret.name=CSL.getJurisdictionNameAndSuppress(state,Item[field],jurisdictionName,this.strings.jurisdiction_depth);else if(["title","container-title"].indexOf(field)>-1&&!(usedOrig||ret.token.strings["text-case"]&&"sentence"!==ret.token.strings["text-case"]&&"normal"!==ret.token.strings["text-case"])){var locale=!usingOrig&&ret.locale,seg=field.slice(0,-5),sentenceCase="sentence"===ret.token.strings["text-case"];ret.name=CSL.titlecaseSentenceOrNormal(state,Item,seg,locale,sentenceCase),delete ret.token.strings["text-case"]}return ret}function publisherCheck(tok,Item,primary,myabbrev_family){var varname=tok.variables[0];if(state.publisherOutput&&primary){if(-1===["publisher","publisher-place"].indexOf(varname))return!1;state.publisherOutput[varname+"-token"]=tok,state.publisherOutput.varlist.push(varname);var lst=primary.split(/;\s*/);lst.length===state.publisherOutput[varname+"-list"].length&&(state.publisherOutput[varname+"-list"]=lst);for(var i=0,ilen=lst.length;i<ilen;i+=1)lst[i]=abbreviate(state,Item,!1,lst[i],myabbrev_family,!0);return state.tmp[varname+"-token"]=tok,!0}return!1}function quashCheck(value){var m=value.match(/^!([-,_a-z]+)>>>/);if(m){var fields=m[1].split(",");value=value.slice(m[0].length);for(var i=0,ilen=fields.length;i<ilen;i+=1)-1===state.tmp.done_vars.indexOf(fields[i])&&state.tmp.done_vars.push(fields[i])}return value}this.abbrevs={},this.abbrevs["default"]=new state.sys.AbbreviationSegments,this.getTextSubField=getTextSubField,this.loadAbbreviation=function(jurisdiction,category,orig,itemType){return jurisdiction||(jurisdiction="default"),orig?(state.sys.getAbbreviation&&((jurisdiction=state.sys.getAbbreviation(state.opt.styleID,state.transform.abbrevs,jurisdiction,category,orig,itemType,!0))||(jurisdiction="default")),jurisdiction):(state.transform.abbrevs[jurisdiction]||(state.transform.abbrevs[jurisdiction]=new state.sys.AbbreviationSegments),state.transform.abbrevs[jurisdiction][category]||(state.transform.abbrevs[jurisdiction][category]={}),jurisdiction)},this.getOutputFunction=function(variables,myabbrev_family,abbreviation_fallback,alternative_varname,transform_fallback){var localesets,langPrefs=CSL.LangPrefsMap[variables[0]];return localesets=!!langPrefs&&state.opt["cite-lang-prefs"][langPrefs],function(state,Item,item,usedOrig){var primary,primary_locale,secondary,secondary_locale,tertiary,tertiary_locale;if(!variables[0]||!Item[variables[0]]&&!Item[alternative_varname])return null;var slot={primary:!1,secondary:!1,tertiary:!1};if("_sort"===state.tmp.area.slice(-5))slot.primary="locale-sort";else if(localesets)for(var slotnames=["primary","secondary","tertiary"],i=0,ilen=slotnames.length;i<ilen&&!(localesets.length-1<i);i+=1)localesets[i]&&(slot[slotnames[i]]="locale-"+localesets[i]);else slot.primary="locale-orig";if("title-short"!==variables[0]&&("bibliography"===state.tmp.area||"citation"===state.tmp.area&&"note"===state.opt.xclass&&item&&!item.position)||(slot.secondary=!1,slot.tertiary=!1),state.tmp["publisher-list"])return"publisher"===variables[0]?state.tmp["publisher-token"]=this:"publisher-place"===variables[0]&&(state.tmp["publisher-place-token"]=this),null;var res=getTextSubField.call(this,Item,variables[0],slot.primary,!0);primary=res.name,primary_locale=res.locale;var primaryPrefix,primary_tok=res.token,primaryUsedOrig=res.usedOrig;if(publisherCheck(this,Item,primary,myabbrev_family))return null;if(secondary=!1,tertiary=!1,slot.secondary){secondary=(res=getTextSubField.call(this,Item,variables[0],slot.secondary,!1,res.usedOrig)).name,secondary_locale=res.locale;var secondary_tok=res.token}if(slot.tertiary){tertiary=(res=getTextSubField.call(this,Item,variables[0],slot.tertiary,!1,res.usedOrig)).name,tertiary_locale=res.locale;var tertiary_tok=res.token}if(myabbrev_family&&((primary=abbreviate(state,Item,alternative_varname,primary,myabbrev_family,!0))&&(primary=quashCheck(primary)),secondary=abbreviate(state,Item,!1,secondary,myabbrev_family,!0),tertiary=abbreviate(state,Item,!1,tertiary,myabbrev_family,!0)),"locale-translit"===slot.primary&&(primaryPrefix=state.opt.citeAffixes[langPrefs][slot.primary].prefix),"<i>"===primaryPrefix&&"title"===variables[0]&&!primaryUsedOrig){var hasItalic=!1;for(i=0,ilen=primary_tok.decorations.length;i<ilen;i+=1)"@font-style"===primary_tok.decorations[i][0]&&"italic"===primary_tok.decorations[i][1]&&(hasItalic=!0);hasItalic||primary_tok.decorations.push(["@font-style","italic"])}if("en"!==primary_locale&&"title"===primary_tok.strings["text-case"]&&(primary_tok.strings["text-case"]="passthrough"),"title"===variables[0]&&(primary=CSL.demoteNoiseWords(state,primary,this["leading-noise-words"])),secondary||tertiary){if(state.output.openLevel("empty"),primary_tok.strings.suffix=primary_tok.strings.suffix.replace(/[ .,]+$/,""),state.output.append(primary,primary_tok),secondary){for(secondary_tok.strings.prefix=state.opt.citeAffixes[langPrefs][slot.secondary].prefix,secondary_tok.strings.suffix=state.opt.citeAffixes[langPrefs][slot.secondary].suffix,secondary_tok.strings.prefix||(secondary_tok.strings.prefix=" "),i=secondary_tok.decorations.length-1;i>-1;i+=-1)["@quotes/true","@font-style/italic","@font-style/oblique","@font-weight/bold"].indexOf(secondary_tok.decorations[i].join("/"))>-1&&(secondary_tok.decorations=secondary_tok.decorations.slice(0,i).concat(secondary_tok.decorations.slice(i+1)));"en"!==secondary_locale&&"title"===secondary_tok.strings["text-case"]&&(secondary_tok.strings["text-case"]="passthrough");var secondary_outer=new CSL.Token;secondary_outer.decorations.push(["@font-style","normal"]),secondary_outer.decorations.push(["@font-weight","normal"]),state.output.openLevel(secondary_outer),state.output.append(secondary,secondary_tok),state.output.closeLevel();var blob_obj=state.output.current.value(),blobs_pos=state.output.current.value().blobs.length-1;state.parallel.use_parallels&&(state.parallel.cite.front.push(variables[0]+":secondary"),state.parallel.cite[variables[0]+":secondary"]={blobs:[[blob_obj,blobs_pos]]})}if(tertiary){for(tertiary_tok.strings.prefix=state.opt.citeAffixes[langPrefs][slot.tertiary].prefix,tertiary_tok.strings.suffix=state.opt.citeAffixes[langPrefs][slot.tertiary].suffix,tertiary_tok.strings.prefix||(tertiary_tok.strings.prefix=" "),i=tertiary_tok.decorations.length-1;i>-1;i+=-1)["@quotes/true","@font-style/italic","@font-style/oblique","@font-weight/bold"].indexOf(tertiary_tok.decorations[i].join("/"))>-1&&(tertiary_tok.decorations=tertiary_tok.decorations.slice(0,i).concat(tertiary_tok.decorations.slice(i+1)));"en"!==tertiary_locale&&"title"===tertiary_tok.strings["text-case"]&&(tertiary_tok.strings["text-case"]="passthrough");var tertiary_outer=new CSL.Token;tertiary_outer.decorations.push(["@font-style","normal"]),tertiary_outer.decorations.push(["@font-weight","normal"]),state.output.openLevel(tertiary_outer),state.output.append(tertiary,tertiary_tok),state.output.closeLevel(),blob_obj=state.output.current.value(),blobs_pos=state.output.current.value().blobs.length-1,state.parallel.use_parallels&&(state.parallel.cite.front.push(variables[0]+":tertiary"),state.parallel.cite[variables[0]+":tertiary"]={blobs:[[blob_obj,blobs_pos]]})}state.output.closeLevel()}else state.output.append(primary,primary_tok);return null}},this.quashCheck=quashCheck},module.exports=CSL,CSL.Token=function(name,tokentype){this.name=name,this.strings={},this.strings.delimiter=undefined,this.strings.prefix="",this.strings.suffix="",this.decorations=[],this.variables=[],this.execs=[],this.tokentype=tokentype,this.evaluator=!1,this.tests=[],this.rawtests=[],this.succeed=!1,this.fail=!1,this.next=!1},CSL.Util.cloneToken=function(token){var newtok,pos,len;if("string"==typeof token)return token;for(var key in newtok=new CSL.Token(token.name,token.tokentype),token.strings)token.strings.hasOwnProperty(key)&&(newtok.strings[key]=token.strings[key]);if(token.decorations)for(newtok.decorations=[],pos=0,len=token.decorations.length;pos<len;pos+=1)newtok.decorations.push(token.decorations[pos].slice());return token.variables&&(newtok.variables=token.variables.slice()),token.execs&&(newtok.execs=token.execs.slice(),newtok.tests=token.tests.slice(),newtok.rawtests=token.tests.slice()),newtok},module.exports=CSL,CSL.AmbigConfig=function(){this.maxvals=[],this.minval=1,this.names=[],this.givens=[],this.year_suffix=!1,this.disambiguate=0},module.exports=CSL,CSL.Blob=function(str,token,levelname){var len,pos;if(this.levelname=levelname,token){for(var key in this.strings={prefix:"",suffix:""},token.strings)token.strings.hasOwnProperty(key)&&(this.strings[key]=token.strings[key]);for(this.decorations=[],len=token.decorations===undefined?0:token.decorations.length,pos=0;pos<len;pos+=1)this.decorations.push(token.decorations[pos].slice())}else this.strings={},this.strings.prefix="",this.strings.suffix="",this.strings.delimiter="",this.decorations=[];this.blobs="string"==typeof str?str:str?[str]:[],this.alldecor=[this.decorations]},CSL.Blob.prototype.push=function(blob){if("string"==typeof this.blobs)throw"Attempt to push blob onto string object";!1!==blob&&(blob.alldecor=blob.alldecor.concat(this.alldecor),this.blobs.push(blob))},module.exports=CSL,CSL.NumericBlob=function(particle,num,mother_token,id){this.id=id,this.alldecor=[],this.num=num,this.particle=particle,this.blobs=num.toString(),this.status=CSL.START,this.strings={},mother_token?(this.gender=mother_token.gender,this.decorations=mother_token.decorations,this.strings.prefix=mother_token.strings.prefix,this.strings.suffix=mother_token.strings.suffix,this.strings["text-case"]=mother_token.strings["text-case"],this.successor_prefix=mother_token.successor_prefix,this.range_prefix=mother_token.range_prefix,this.splice_prefix=mother_token.splice_prefix,this.formatter=mother_token.formatter,this.formatter||(this.formatter=new CSL.Output.DefaultFormatter),this.formatter&&(this.type=this.formatter.format(1))):(this.decorations=[],this.strings.prefix="",this.strings.suffix="",this.successor_prefix="",this.range_prefix="",this.splice_prefix="",this.formatter=new CSL.Output.DefaultFormatter)},CSL.NumericBlob.prototype.setFormatter=function(formatter){this.formatter=formatter,this.type=this.formatter.format(1)},CSL.Output.DefaultFormatter=function(){},CSL.Output.DefaultFormatter.prototype.format=function(num){return num.toString()},CSL.NumericBlob.prototype.checkNext=function(next,start){start?(this.status=CSL.START,"object"===_typeof(next)&&(next.num===this.num+1?next.status=CSL.SUCCESSOR:next.status=CSL.SEEN)):next&&next.num&&this.type===next.type&&next.num===this.num+1?this.status===CSL.START||this.status===CSL.SEEN?next.status=CSL.SUCCESSOR:this.status!==CSL.SUCCESSOR&&this.status!==CSL.SUCCESSOR_OF_SUCCESSOR||(this.range_prefix?(next.status=CSL.SUCCESSOR_OF_SUCCESSOR,this.status=CSL.SUPPRESS):next.status=CSL.SUCCESSOR):(this.status===CSL.SUCCESSOR_OF_SUCCESSOR&&(this.status=CSL.END),"object"===_typeof(next)&&(next.status=CSL.SEEN))},CSL.NumericBlob.prototype.checkLast=function(last){return(this.status===CSL.SEEN||last.num!==this.num-1&&this.status===CSL.SUCCESSOR)&&(this.status=CSL.SUCCESSOR,!0)},module.exports=CSL,CSL.Util.fixDateNode=function(parent,pos,node){var form,variable,datexml,subnode,partname,attr,val,prefix,suffix,children,subchildren,display,cslid,lingo=this.cslXml.getAttributeValue(node,"lingo"),default_locale=this.cslXml.getAttributeValue(node,"default-locale");if(this.build.date_key=!0,form=this.cslXml.getAttributeValue(node,"form"),lingo=default_locale?this.opt["default-locale"][0]:this.cslXml.getAttributeValue(node,"lingo"),!this.getDate(form,default_locale))return parent;var dateparts=this.cslXml.getAttributeValue(node,"date-parts");for(var key in variable=this.cslXml.getAttributeValue(node,"variable"),prefix=this.cslXml.getAttributeValue(node,"prefix"),suffix=this.cslXml.getAttributeValue(node,"suffix"),display=this.cslXml.getAttributeValue(node,"display"),cslid=this.cslXml.getAttributeValue(node,"cslid"),datexml=this.cslXml.nodeCopy(this.getDate(form,default_locale)),this.cslXml.setAttribute(datexml,"lingo",this.opt.lang),this.cslXml.setAttribute(datexml,"form",form),this.cslXml.setAttribute(datexml,"date-parts",dateparts),this.cslXml.setAttribute(datexml,"cslid",cslid),this.cslXml.setAttribute(datexml,"variable",variable),this.cslXml.setAttribute(datexml,"default-locale",default_locale),prefix&&this.cslXml.setAttribute(datexml,"prefix",prefix),suffix&&this.cslXml.setAttribute(datexml,"suffix",suffix),display&&this.cslXml.setAttribute(datexml,"display",display),children=this.cslXml.children(datexml))subnode=children[key],"date-part"===this.cslXml.nodename(subnode)&&(partname=this.cslXml.getAttributeValue(subnode,"name"),default_locale&&this.cslXml.setAttributeOnNodeIdentifiedByNameAttribute(datexml,"date-part",partname,"@default-locale","true"));for(var key in children=this.cslXml.children(node))if(subnode=children[key],"date-part"===this.cslXml.nodename(subnode))for(attr in partname=this.cslXml.getAttributeValue(subnode,"name"),subchildren=this.cslXml.attributes(subnode))"@name"!==attr&&(lingo&&lingo!==this.opt.lang&&["@suffix","@prefix","@form"].indexOf(attr)>-1||(val=subchildren[attr],this.cslXml.setAttributeOnNodeIdentifiedByNameAttribute(datexml,"date-part",partname,attr,val)));if("year"===this.cslXml.getAttributeValue(node,"date-parts"))this.cslXml.deleteNodeByNameAttribute(datexml,"month"),this.cslXml.deleteNodeByNameAttribute(datexml,"day");else if("year-month"===this.cslXml.getAttributeValue(node,"date-parts"))this.cslXml.deleteNodeByNameAttribute(datexml,"day");else if("month-day"===this.cslXml.getAttributeValue(node,"date-parts")){for(var childNodes=this.cslXml.children(datexml),i=1,ilen=this.cslXml.numberofnodes(childNodes);i<ilen;i++)if("year"===this.cslXml.getAttributeValue(childNodes[i],"name")){this.cslXml.setAttribute(childNodes[i-1],"suffix","");break}this.cslXml.deleteNodeByNameAttribute(datexml,"year")}return this.cslXml.insertChildNodeAfter(parent,node,pos,datexml)},module.exports=CSL,CSL.dateMacroAsSortKey=function(state,Item){CSL.dateAsSortKey.call(this,state,Item,!0)},CSL.dateAsSortKey=function(state,Item,isMacro){var dp,elem,value,e,yr,i,ilen,variable=this.variables[0],macroFlag="empty";for(isMacro&&state.tmp.extension&&(macroFlag="macro-with-date"),void 0===(dp=Item[variable])&&((dp={"date-parts":[[0]]}).year||(state.tmp.empty_date=!0)),"undefined"==typeof this.dateparts&&(this.dateparts=["year","month","day"]),dp.raw?dp=state.fun.dateparser.parseDateToArray(dp.raw):dp["date-parts"]&&(dp=state.dateParseArray(dp)),void 0===dp&&(dp={}),i=0,ilen=CSL.DATE_PARTS_INTERNAL.length;i<ilen;i+=1)if(value=0,"_end"===(e=elem=CSL.DATE_PARTS_INTERNAL[i]).slice(-4)&&(e=e.slice(0,-4)),dp[elem]&&this.dateparts.indexOf(e)>-1&&(value=dp[elem]),"year"===elem.slice(0,4)){var prefix="Y";"-"===(yr=CSL.Util.Dates[e].numeric(state,value))[0]&&(prefix="X",yr=yr.slice(1),yr=9999-parseInt(yr,10)),state.output.append(CSL.Util.Dates[elem.slice(0,4)].numeric(state,prefix+yr),macroFlag)}else(value=CSL.Util.Dates[e]["numeric-leading-zeros"](state,value))||(value="00"),state.output.append(value,macroFlag)},CSL.Engine.prototype.dateParseArray=function(date_obj){var ret,field,dp,exts;for(field in ret={},date_obj)if("date-parts"===field){(dp=date_obj["date-parts"]).length>1&&dp[0].length!==dp[1].length&&CSL.error("CSL data error: element mismatch in date range input."),exts=["","_end"];for(var i=0,ilen=dp.length;i<ilen;i+=1)for(var j=0,jlen=CSL.DATE_PARTS.length;j<jlen;j+=1)"undefined"==typeof dp[i][j]?ret[CSL.DATE_PARTS[j]+exts[i]]=dp[i][j]:ret[CSL.DATE_PARTS[j]+exts[i]]=parseInt(dp[i][j],10)}else date_obj.hasOwnProperty(field)&&("literal"===field&&"object"===_typeof(date_obj.literal)&&"string"==typeof date_obj.literal.part?(CSL.debug("Warning: fixing up weird literal date value"),ret.literal=date_obj.literal.part):ret[field]=date_obj[field]);return ret},module.exports=CSL,CSL.Util.Names={},CSL.Util.Names.compareNamesets=CSL.NameOutput.prototype._compareNamesets,CSL.Util.Names.unInitialize=function(state,name){var i,ilen,namelist,punctlist,ret;if(!name)return"";for(namelist=name.split(/(?:\-|\s+)/),punctlist=name.match(/(\-|\s+)/g),ret="",i=0,ilen=namelist.length;i<ilen;i+=1)ret+=namelist[i],i<ilen-1&&(ret+=punctlist[i]);return ret},CSL.Util.Names.initializeWith=function(state,name,terminator,normalizeOnly){var i,ilen,j,jlen,mm,lst;if(!name)return"";if(terminator||(terminator=""),["Lord","Lady"].indexOf(name)>-1||!name.match(CSL.STARTSWITH_ROMANESQUE_REGEXP)&&!terminator.match("%s"))return name;var namelist=name;if(!1===state.opt["initialize-with-hyphen"]&&(namelist=namelist.replace(/\-/g," ")),mm=(namelist=(namelist=namelist.replace(/\s*\-\s*/g,"-").replace(/\s+/g," ")).replace(/-([a-z])/g,"\u2013$1")).match(/[\-\s]+/g),0===(lst=namelist.split(/[\-\s]+/)).length)namelist=mm;else for(namelist=[lst[0]],i=1,ilen=lst.length;i<ilen;i+=1)namelist.push(mm[i-1]),namelist.push(lst[i]);for(i=(lst=namelist).length-1;i>-1;i+=-1)if(lst[i]&&lst[i].slice(0,-1).indexOf(".")>-1){var lstend=lst.slice(i+1),lstmid=lst[i].slice(0,-1).split(".");for(lst=lst.slice(0,i),j=0,jlen=lstmid.length;j<jlen;j+=1)lst.push(lstmid[j]+"."),j<lstmid.length-1&&lst.push(" ");lst=lst.concat(lstend)}return(normalizeOnly?CSL.Util.Names.doNormalize(state,lst,terminator):CSL.Util.Names.doInitialize(state,lst,terminator)).replace(/\u2013([a-z])/g,"-$1")},CSL.Util.Names.doNormalize=function(state,namelist,terminator,mode){var i,ilen;terminator=terminator||"";var isAbbrev=[];for(i=0,ilen=namelist.length;i<ilen;i+=1)namelist[i].length>1&&"."===namelist[i].slice(-1)?(namelist[i]=namelist[i].slice(0,-1),isAbbrev.push(!0)):1===namelist[i].length&&namelist[i].toUpperCase()===namelist[i]?isAbbrev.push(!0):isAbbrev.push(!1);for(i=0,ilen=namelist.length;i<ilen;i+=2)if(isAbbrev[i]){if(i<namelist.length-2)namelist[i+1]="",(terminator.match(/^[\u0009\u000a\u000b\u000c\u000d\u0020\u00a0]+$/)||(!terminator||terminator.slice(-1)&&!terminator.slice(-1).match(/[\u0009\u000a\u000b\u000c\u000d\u0020\u00a0]/))&&namelist[i].length&&namelist[i].match(CSL.ALL_ROMANESQUE_REGEXP)&&(namelist[i].length>1||namelist[i+2].length>1))&&(namelist[i+1]=" "),namelist[i+2].length>1?namelist[i]=namelist[i]+terminator.replace(/\ufeff$/,""):namelist[i]=namelist[i]+terminator;i===namelist.length-1&&(namelist[i]=namelist[i]+terminator)}return namelist.join("").replace(/[\u0009\u000a\u000b\u000c\u000d\u0020\ufeff\u00a0]+$/,"").replace(/\s*\-\s*/g,"-").replace(/[\u0009\u000a\u000b\u000c\u000d\u0020]+/g," ")},CSL.Util.Names.doInitialize=function(state,namelist,terminator,mode){var i,ilen,m,j,jlen,lst,n;for(i=0,ilen=namelist.length;i<ilen;i+=2)if(n=namelist[i])if(!(m=n.match(CSL.NAME_INITIAL_REGEXP))&&!n.match(CSL.STARTSWITH_ROMANESQUE_REGEXP)&&n.length>1&&terminator.match("%s")&&(m=n.match(/(.)(.*)/)),m&&m[1]===m[1].toUpperCase()){var extra="";if(m[2]){var s="";for(j=0,jlen=(lst=m[2].split("")).length;j<jlen;j+=1){var c=lst[j];if(c!==c.toUpperCase())break;s+=c}s.length<m[2].length&&(extra=s.toLocaleLowerCase())}namelist[i]=m[1].toLocaleUpperCase()+extra,i<ilen-1?terminator.match("%s")?namelist[i]=terminator.replace("%s",namelist[i]):namelist[i+1].indexOf("-")>-1?namelist[i+1]=terminator+namelist[i+1]:namelist[i+1]=terminator:terminator.match("%s")?namelist[i]=terminator.replace("%s",namelist[i]):namelist.push(terminator)}else n.match(CSL.ROMANESQUE_REGEXP)&&(namelist[i]=" "+n);var ret=namelist.join("");return ret=ret.replace(/[\u0009\u000a\u000b\u000c\u000d\u0020\ufeff\u00a0]+$/,"").replace(/\s*\-\s*/g,"-").replace(/[\u0009\u000a\u000b\u000c\u000d\u0020]+/g," ")},CSL.Util.Names.getRawName=function(name){var ret=[];return name.given&&ret.push(name.given),name.family&&ret.push(name.family),ret.join(" ")},module.exports=CSL,CSL.Util.Dates={},CSL.Util.Dates.year={},CSL.Util.Dates.year.long=function(state,num){return num||(num="boolean"==typeof num?"":0),num.toString()},CSL.Util.Dates.year.imperial=function(state,num,end,makeShort){var year="";num||(num="boolean"==typeof num?"":0),end=end?"_end":"";var month=state.tmp.date_object["month"+end];for(month=month?""+month:"1";month.length<2;)month="0"+month;var day=state.tmp.date_object["day"+end];for(day=day?""+day:"1";day.length<2;)day="0"+day;var label,offset,date=parseInt(num+month+day,10);if(date>=18680908&&date<19120730?(label="\u660e\u6cbb",offset=1867):date>=19120730&&date<19261225?(label="\u5927\u6b63",offset=1911):date>=19261225&&date<19890108?(label="\u662d\u548c",offset=1925):date>=19890108&&(label="\u5e73\u6210",offset=1988),label&&offset){var normalizedKey=label;state.sys.normalizeAbbrevsKey&&(normalizedKey=state.sys.normalizeAbbrevsKey(label)),state.transform.abbrevs["default"].number[normalizedKey]||state.transform.loadAbbreviation("default","number",normalizedKey),state.transform.abbrevs["default"].number[normalizedKey]&&(label=state.transform.abbrevs["default"].number[normalizedKey]),year=label+(num-offset)}return year},CSL.Util.Dates.year.short=function(state,num){if((num=num.toString())&&4===num.length)return num.substr(2)},CSL.Util.Dates.year.numeric=function(state,num){var pre,m;for((m=(num=""+num).match(/([0-9]*)$/))?(pre=num.slice(0,-1*m[1].length),num=m[1]):(pre=num,num="");num.length<4;)num="0"+num;return pre+num},CSL.Util.Dates.normalizeMonth=function(num,useSeason){var ret;if(num||(num=0),(num=""+num).match(/^[0-9]+$/)||(num=0),num=parseInt(num,10),useSeason){var res={stub:"month-",num:num};res.num<1||res.num>20?res.num=0:res.num>16?(res.stub="season-",res.num=res.num-16):res.num>12&&(res.stub="season-",res.num=res.num-12),ret=res}else(num<1||num>12)&&(num=0),ret=num;return ret},CSL.Util.Dates.month={},CSL.Util.Dates.month.numeric=function(state,num){return(num=CSL.Util.Dates.normalizeMonth(num))||(num=""),num},CSL.Util.Dates.month["numeric-leading-zeros"]=function(state,num){if(num=CSL.Util.Dates.normalizeMonth(num))for(num=""+num;num.length<2;)num="0"+num;else num="";return num},CSL.Util.Dates.month.long=function(state,num,gender,forceDefaultLocale){var res=CSL.Util.Dates.normalizeMonth(num,!0);if(num=res.num){for(num=""+num;num.length<2;)num="0"+num;num=state.getTerm(res.stub+num,"long",0,0,!1,forceDefaultLocale)}else num="";return num},CSL.Util.Dates.month.short=function(state,num,gender,forceDefaultLocale){var res=CSL.Util.Dates.normalizeMonth(num,!0);if(num=res.num){for(num=""+num;num.length<2;)num="0"+num;num=state.getTerm(res.stub+num,"short",0,0,!1,forceDefaultLocale)}else num="";return num},CSL.Util.Dates.day={},CSL.Util.Dates.day.numeric=function(state,num){return num.toString()},CSL.Util.Dates.day.long=CSL.Util.Dates.day.numeric,CSL.Util.Dates.day["numeric-leading-zeros"]=function(state,num){for(num||(num=0),num=num.toString();num.length<2;)num="0"+num;return num.toString()},CSL.Util.Dates.day.ordinal=function(state,num,gender){return state.fun.ordinalizer.format(num,gender)},module.exports=CSL,CSL.Util.Sort={},CSL.Util.Sort.strip_prepositions=function(str){var m;return"string"==typeof str&&(m=str.toLocaleLowerCase(),m=str.match(/^((a|an|the)\s+)/)),m&&(str=str.substr(m[1].length)),str},module.exports=CSL,CSL.Util.substituteStart=function(state,target){var element_trace,display,bib_first,func,choose_start,if_start,nodetypes;func=function(state,Item){for(var i=0,ilen=this.decorations.length;i<ilen;i+=1)if("@strip-periods"===this.decorations[i][0]&&"true"===this.decorations[i][1]){state.tmp.strip_periods+=1;break}},this.execs.push(func),this.decorations&&(state.opt.development_extensions.csl_reverse_lookup_support||state.sys.csl_reverse_lookup_support)&&(this.decorations.reverse(),this.decorations.push(["@showid","true",this.cslid]),this.decorations.reverse()),nodetypes=["number","date","names"],("text"===this.name&&!this.postponed_macro||nodetypes.indexOf(this.name)>-1)&&(element_trace=function(state,Item,item){"author"===state.tmp.element_trace.value()||"names"===this.name?item&&item["author-only"]?state.tmp.element_trace.push("do-not-suppress-me"):item&&item["suppress-author"]:item&&item["author-only"]?state.tmp.element_trace.push("suppress-me"):item&&item["suppress-author"]&&state.tmp.element_trace.push("do-not-suppress-me")},this.execs.push(element_trace)),display=this.strings.cls,this.strings.cls=!1,0===state.build.render_nesting_level&&("bibliography"===state.build.area&&state.bibliography.opt["second-field-align"]?((bib_first=new CSL.Token("group",CSL.START)).decorations=[["@display","left-margin"]],func=function(state,Item){state.tmp.render_seen||(bib_first.strings.first_blob=Item.id,state.output.startTag("bib_first",bib_first))},bib_first.execs.push(func),target.push(bib_first)):CSL.DISPLAY_CLASSES.indexOf(display)>-1&&((bib_first=new CSL.Token("group",CSL.START)).decorations=[["@display",display]],func=function(state,Item){bib_first.strings.first_blob=Item.id,state.output.startTag("bib_first",bib_first)},bib_first.execs.push(func),target.push(bib_first)),state.build.cls=display),state.build.render_nesting_level+=1,1===state.build.substitute_level.value()&&(choose_start=new CSL.Token("choose",CSL.START),CSL.Node.choose.build.call(choose_start,state,target),func=function(Item,item){return!!state.tmp.can_substitute.value()},(if_start=new CSL.Token("if",CSL.START)).tests.push(func),if_start.test=state.fun.match.any(this,state,if_start.tests),target.push(if_start)),state.sys.variableWrapper&&this.variables_real&&this.variables_real.length&&(func=function(state,Item,item){if(!state.tmp.just_looking&&!state.tmp.suppress_decorations){var variable_entry=new CSL.Token("text",CSL.START);variable_entry.decorations=[["@showid","true"]],state.output.startTag("variable_entry",variable_entry);var position=null;item&&(position=item.position),position||(position=0);var noteNumber=0;item&&item.noteIndex&&(noteNumber=item.noteIndex);var firstReferenceNoteNumber=0;item&&item["first-reference-note-number"]&&(firstReferenceNoteNumber=item["first-reference-note-number"]);var citationNumber=0;item&&item["citation-number"]&&(citationNumber=item["citation-number"]);var index=0;item&&item.index&&(index=item.index);var params={itemData:Item,variableNames:this.variables,context:state.tmp.area,xclass:state.opt.xclass,position:["first","subsequent","ibid","ibid-with-locator"][position],"note-number":noteNumber,"first-reference-note-number":firstReferenceNoteNumber,"citation-number":citationNumber,index:index,mode:state.opt.mode};state.output.current.value().params=params}},this.execs.push(func))},CSL.Util.substituteEnd=function(state,target){var func,bib_first_end,bib_other,if_end,choose_end,str;state.sys.variableWrapper&&(this.hasVariable||this.variables_real&&this.variables_real.length)&&(func=function(state,Item){state.tmp.just_looking||state.tmp.suppress_decorations||state.output.endTag("variable_entry")},this.execs.push(func)),func=function(state,Item){for(var i=0,ilen=this.decorations.length;i<ilen;i+=1)if("@strip-periods"===this.decorations[i][0]&&"true"===this.decorations[i][1]){state.tmp.strip_periods+=-1;break}},this.execs.push(func),state.build.render_nesting_level+=-1,0===state.build.render_nesting_level&&(state.build.cls?(func=function(state,Item){state.output.endTag("bib_first")},this.execs.push(func),state.build.cls=!1):"bibliography"===state.build.area&&state.bibliography.opt["second-field-align"]&&(func=function(state,Item){state.tmp.render_seen||state.output.endTag("bib_first")},(bib_first_end=new CSL.Token("group",CSL.END)).execs.push(func),target.push(bib_first_end),(bib_other=new CSL.Token("group",CSL.START)).decorations=[["@display","right-inline"]],func=function(state,Item){state.tmp.render_seen||(state.tmp.render_seen=!0,state.output.startTag("bib_other",bib_other))},bib_other.execs.push(func),target.push(bib_other))),1===state.build.substitute_level.value()&&(if_end=new CSL.Token("if",CSL.END),target.push(if_end),choose_end=new CSL.Token("choose",CSL.END),CSL.Node.choose.build.call(choose_end,state,target)),("names"===this.name||"text"===this.name&&"title"!==this.variables_real)&&(new CSL.Token("text",CSL.SINGLETON),func=function(state,Item){if("bibliography"===state.tmp.area&&"string"==typeof state.bibliography.opt["subsequent-author-substitute"]&&(!this.variables_real||Item[this.variables_real])&&state.tmp.substituted_variable===this.variables_real){var i,ilen,subrule=state.bibliography.opt["subsequent-author-substitute-rule"];if(!state.tmp.suppress_decorations&&state.tmp.subsequent_author_substitute_ok&&state.tmp.rendered_name){if("partial-each"===subrule||"partial-first"===subrule){var dosub=!0,rendered_name=[];for(i=0,ilen=state.tmp.name_node.children.length;i<ilen;i+=1){var name=state.tmp.rendered_name[i];dosub&&state.tmp.last_rendered_name&&state.tmp.last_rendered_name.length>i-1&&name&&!name.localeCompare(state.tmp.last_rendered_name[i])?(str=new CSL.Blob(state[state.tmp.area].opt["subsequent-author-substitute"]),state.tmp.name_node.children[i].blobs=[str],"partial-first"===subrule&&(dosub=!1)):dosub=!1,rendered_name.push(name)}state.tmp.last_rendered_name=rendered_name}else if("complete-each"===subrule){if(rendered_name=state.tmp.rendered_name.join(",")){if(state.tmp.last_rendered_name&&!rendered_name.localeCompare(state.tmp.last_rendered_name))for(i=0,ilen=state.tmp.name_node.children.length;i<ilen;i+=1)str=new CSL.Blob(state[state.tmp.area].opt["subsequent-author-substitute"]),state.tmp.name_node.children[i].blobs=[str];state.tmp.last_rendered_name=rendered_name}}else{(rendered_name=state.tmp.rendered_name.join(","))&&(state.tmp.last_rendered_name&&!rendered_name.localeCompare(state.tmp.last_rendered_name)&&(str=new CSL.Blob(state[state.tmp.area].opt["subsequent-author-substitute"]),state.tmp.label_blob?state.tmp.name_node.top.blobs=[str,state.tmp.label_blob]:state.tmp.name_node.top.blobs.length?state.tmp.name_node.top.blobs[0].blobs=[str]:state.tmp.name_node.top.blobs=[str],state.tmp.substituted_variable=this.variables_real),state.tmp.last_rendered_name=rendered_name)}state.tmp.subsequent_author_substitute_ok=!1}}},this.execs.push(func)),("text"===this.name&&!this.postponed_macro||["number","date","names"].indexOf(this.name)>-1)&&(func=function(state,Item){state.tmp.element_trace.pop()},this.execs.push(func))},module.exports=CSL,CSL.Util.padding=function(num){var m=num.match(/\s*(-{0,1}[0-9]+)/);if(m)for((num=parseInt(m[1],10))<0&&(num=1e20+num),num=""+num;num.length<20;)num="0"+num;return num},CSL.Util.LongOrdinalizer=function(){},CSL.Util.LongOrdinalizer.prototype.init=function(state){this.state=state},CSL.Util.LongOrdinalizer.prototype.format=function(num,gender){num<10&&(num="0"+num);var ret=CSL.Engine.getField(CSL.LOOSE,this.state.locale[this.state.opt.lang].terms,"long-ordinal-"+num,"long",0,gender);return ret||(ret=this.state.fun.ordinalizer.format(num,gender)),this.state.tmp.cite_renders_content=!0,ret},CSL.Util.Ordinalizer=function(state){this.state=state,this.suffixes={}},CSL.Util.Ordinalizer.prototype.init=function(){if(!this.suffixes[this.state.opt.lang]){this.suffixes[this.state.opt.lang]={};for(var i=0;i<3;i+=1){var gender=[undefined,"masculine","feminine"][i];this.suffixes[this.state.opt.lang][gender]=[];for(var j=1;j<5;j+=1){var ordinal=this.state.getTerm("ordinal-0"+j,"long",!1,gender);if(void 0===ordinal){delete this.suffixes[this.state.opt.lang][gender];break}this.suffixes[this.state.opt.lang][gender].push(ordinal)}}}},CSL.Util.Ordinalizer.prototype.format=function(num,gender){var str;str=""+(num=parseInt(num,10));var suffix="",trygenders=[];if(gender&&trygenders.push(gender),trygenders.push("neuter"),this.state.locale[this.state.opt.lang].ord["1.0.1"]){var trygender;suffix=this.state.getTerm("ordinal",!1,0,gender);for(var i=0,ilen=trygenders.length;i<ilen;i+=1){trygender=trygenders[i];var ordinfo=this.state.locale[this.state.opt.lang].ord["1.0.1"];if(ordinfo["whole-number"][str]&&ordinfo["whole-number"][str][trygender]?suffix=this.state.getTerm(this.state.locale[this.state.opt.lang].ord["1.0.1"]["whole-number"][str][trygender],!1,0,gender):ordinfo["last-two-digits"][str.slice(str.length-2)]&&ordinfo["last-two-digits"][str.slice(str.length-2)][trygender]?suffix=this.state.getTerm(this.state.locale[this.state.opt.lang].ord["1.0.1"]["last-two-digits"][str.slice(str.length-2)][trygender],!1,0,gender):ordinfo["last-digit"][str.slice(str.length-1)]&&ordinfo["last-digit"][str.slice(str.length-1)][trygender]&&(suffix=this.state.getTerm(this.state.locale[this.state.opt.lang].ord["1.0.1"]["last-digit"][str.slice(str.length-1)][trygender],!1,0,gender)),suffix)break}}else gender||(gender=undefined),this.state.fun.ordinalizer.init(),suffix=num/10%10==1||num>10&&num<20?this.suffixes[this.state.opt.lang][gender][3]:num%10==1&&num%100!=11?this.suffixes[this.state.opt.lang][gender][0]:num%10==2&&num%100!=12?this.suffixes[this.state.opt.lang][gender][1]:num%10==3&&num%100!=13?this.suffixes[this.state.opt.lang][gender][2]:this.suffixes[this.state.opt.lang][gender][3];return str=str+=suffix},CSL.Util.Romanizer=function(){},CSL.Util.Romanizer.prototype.format=function(num){var ret,pos,n,numstr,len;if(ret="",num<6e3)for((numstr=num.toString().split("")).reverse(),pos=0,n=0,len=numstr.length,pos=0;pos<len;pos+=1)n=parseInt(numstr[pos],10),ret=CSL.ROMAN_NUMERALS[pos][n]+ret;return ret},CSL.Util.Suffixator=function(slist){slist||(slist=CSL.SUFFIX_CHARS),this.slist=slist.split(",")},CSL.Util.Suffixator.prototype.format=function(N){var X;N+=1;var key="";do{X=N%26==0?26:N%26;key=this.slist[X-1]+key;N=(N-X)/26}while(0!==N);return key},CSL.Engine.prototype.processNumber=function(node,ItemObject,variable,type){var val,me=this;function composeNumberInfo(origLabel,label,val,joiningSuffix){joiningSuffix=joiningSuffix||"";var info={};if(label||CSL.STATUTE_SUBDIV_STRINGS_REVERSE[variable]||(label="var:"+variable),label){var m=label.match(/(\s*)([^\s]*)(\s*)/);info.label=m[2],info.origLabel=origLabel,info.labelSuffix=m[3]?m[3]:"",info.plural=0,info.labelVisibility=!1}return(m=val.match(/^([a-zA-Z0]*)([0-9]+(?:[a-zA-Z]*|[-,a-zA-Z]+))$/))?(info.particle=m[1],info.value=m[2]):(info.particle="",info.value=val),info.joiningSuffix=joiningSuffix.replace(/\s*-\s*/,"-"),info}function fixNumericAndCount(values,i,currentLabelInfo){var master=values[currentLabelInfo.pos],val=values[i].value,isEscapedHyphen="\\-"===master.joiningSuffix;val.particle&&val.particle!==master.particle&&(currentLabelInfo.collapsible=!1);var mVal=val.match(/^[0-9]+([-,:a-zA-Z]*)$/),mCurrentLabel=master.value.match(/^[0-9]+([-,:a-zA-Z]*)$/);val&&mVal&&mCurrentLabel&&!isEscapedHyphen||(currentLabelInfo.collapsible=!1,val&&mCurrentLabel||(currentLabelInfo.numeric=!1),isEscapedHyphen&&currentLabelInfo.count--),(mVal&&mVal[1]||mCurrentLabel&&mCurrentLabel[1])&&(currentLabelInfo.collapsible=!1);var isCollapsible=currentLabelInfo.collapsible;!isCollapsible&&i>0&&val.match(/^[ivxlcmIVXLCM]+$/)&&values[i-1].value.match(/^[ivxlcmIVXLCM]+$/)&&(isCollapsible=!0);for(var j=currentLabelInfo.pos,jlen=values.length;j<jlen;j++)currentLabelInfo.label===values[j].label&&currentLabelInfo.count>1&&isCollapsible&&(values[j].plural=1),values[j].numeric=currentLabelInfo.numeric,values[j].collapsible=currentLabelInfo.collapsible;currentLabelInfo.label=values[i].label,currentLabelInfo.count=1,currentLabelInfo.pos=i,currentLabelInfo.numeric=!0,currentLabelInfo.collapsible=!0}function setStyling(values){var masterNode=CSL.Util.cloneToken(node),masterStyling=new CSL.Token;if(!me.tmp.just_looking){for(var j=masterNode.decorations.length-1;j>-1;j--)"@quotes"===masterNode.decorations[j][0]&&(masterStyling.decorations=masterStyling.decorations.concat(masterNode.decorations.slice(j,j+1)),masterNode.decorations=masterNode.decorations.slice(0,j).concat(masterNode.decorations.slice(j+1)));masterStyling.strings.prefix=masterNode.strings.prefix,masterNode.strings.prefix="",masterStyling.strings.suffix=masterNode.strings.suffix,masterNode.strings.suffix=""}var masterLabel=values.length?values[0].label:null;if(values.length){for(var i=0,ilen=values.length;i<ilen;i++){var val=values[i],newnode=CSL.Util.cloneToken(masterNode);newnode.gender=node.gender,masterLabel===val.label&&(newnode.formatter=node.formatter),val.numeric&&(newnode.successor_prefix=val.successor_prefix),newnode.strings.suffix=newnode.strings.suffix+stripHyphenBackslash(val.joiningSuffix),val.styling=newnode}me.tmp.just_looking||'"'===values[0].value.slice(0,1)&&'"'===values[values.length-1].value.slice(-1)&&(values[0].value=values[0].value.slice(1),values[values.length-1].value=values[values.length-1].value.slice(0,-1),masterStyling.decorations.push(["@quotes",!0]))}return masterStyling}function stripHyphenBackslash(joiningSuffix){return joiningSuffix.replace("\\-","-")}function fixupRangeDelimiter(variable,val,rangeDelimiter,isNumeric){var isPage=checkPage(variable,val);return function(variable,val){var ret=!0;"locator"===variable&&(ret=!!me.getTerm(CSL.STATUTE_SUBDIV_STRINGS[val.label]));return ret}(variable,val)&&"-"===rangeDelimiter&&isNumeric&&((isPage||["locator","issue","volume","edition","number"].indexOf(variable)>-1)&&((rangeDelimiter=me.getTerm("page-range-delimiter"))||(rangeDelimiter="\u2013")),"collection-number"===variable&&((rangeDelimiter=me.getTerm("year-range-delimiter"))||(rangeDelimiter="\u2013"))),rangeDelimiter}function checkPage(variable,val){return"page"===variable||"locator"===variable&&["p."].indexOf(val.label)>-1}function manglePageNumbers(values,i,currentInfo){if(!(i<1)&&2===currentInfo.count&&values[i-1].particle===values[i].particle)if("-"===values[i-1].joiningSuffix)if(!me.opt["page-range-format"]&&parseInt(values[i-1].value,10)>parseInt(values[i].value,10))values[i-1].joiningSuffix=fixupRangeDelimiter(variable,values[i],values[i-1].joiningSuffix,!0);else{var val=values[i];if(checkPage(variable,val)){var str=values[i-1].particle+values[i-1].value+" - "+values[i].particle+values[i].value;str=me.fun.page_mangler(str)}else str=values[i-1].value+stripHyphenBackslash(values[i-1].joiningSuffix)+values[i].value;var m=str.match(/^([a-zA-Z]?0*)([0-9]+)(\s*[^0-9]+\s*)([-,a-zA-Z]?0*)([0-9]+)$/);if(m){var rangeDelimiter=m[3];rangeDelimiter=fixupRangeDelimiter(variable,val,rangeDelimiter,values[i].numeric),values[i-1].particle=m[1],values[i-1].value=m[2],values[i-1].joiningSuffix=rangeDelimiter,values[i].particle=m[4],values[i].value=m[5]}currentInfo.count=0}else currentInfo.count=1}function fixRanges(values){if(node&&-1!==["page","page-first","chapter-number","collection-number","edition","issue","number","number-of-pages","number-of-volumes","volume","locator"].indexOf(variable)){for(var currentInfo={count:0,label:null,lastHadRangeDelimiter:!1},i=0,ilen=values.length;i<ilen;i++){var val=values[i];if(val.collapsible)currentInfo.label===val.label&&"-"===val.joiningSuffix?currentInfo.count=1:currentInfo.label===val.label&&"-"!==val.joiningSuffix?(currentInfo.count++,2===currentInfo.count&&manglePageNumbers(values,i,currentInfo)):currentInfo.label!==val.label?(currentInfo.label=val.label,currentInfo.count=1):(currentInfo.count=1,currentInfo.label=val.label);else{currentInfo.count=0,currentInfo.label=null;var isNumeric=val.numeric;i<values.length-1&&!isNumeric&&val.value.match(/^[ivxlcmIVXLCM]+$/)&&values[i+1].value.match(/^[ivxlcmIVXLCM]+$/)&&(isNumeric=!0),val.joiningSuffix=fixupRangeDelimiter(variable,val,val.joiningSuffix,isNumeric)}}2===currentInfo.count&&manglePageNumbers(values,values.length-1,currentInfo)}}if(node&&this.tmp.shadow_numbers[variable]&&this.tmp.shadow_numbers[variable].values.length)return fixRanges(values=this.tmp.shadow_numbers[variable].values),void(this.tmp.shadow_numbers[variable].masterStyling=setStyling(values));if(this.tmp.shadow_numbers[variable]||(this.tmp.shadow_numbers[variable]={values:[]}),ItemObject){var languageRole=CSL.LangPrefsMap[variable];if(languageRole){var localeType=this.opt["cite-lang-prefs"][languageRole][0];val=(val=this.transform.getTextSubField(ItemObject,variable,"locale-"+localeType,!0)).name}else val=ItemObject[variable];if(val&&this.sys.getAbbreviation){var jurisdiction=this.transform.loadAbbreviation(ItemObject.jurisdiction,"number",val);this.transform.abbrevs[jurisdiction].number&&(this.transform.abbrevs[jurisdiction].number[val]?val=this.transform.abbrevs[jurisdiction].number[val]:"undefined"!=typeof this.transform.abbrevs[jurisdiction].number[val]&&delete this.transform.abbrevs[jurisdiction].number[val])}if(void 0!==val&&("string"==typeof val||"number"==typeof val)){"number"==typeof val&&(val=""+val);var values,defaultLabel=CSL.STATUTE_SUBDIV_STRINGS_REVERSE[variable];if(!this.tmp.shadow_numbers.values)!function(values){for(var i=0,ilen=values.length-1;i<ilen;i++)!values[i].joiningSuffix&&values[i+1].label&&(values[i].joiningSuffix=" ")}(values=function(str,defaultLabel){defaultLabel=defaultLabel||"";var elems=[];if(m=(str=function(str,defaultLabel){var m=(str=str.trim()).match(/^([^ ]+)/);if(m&&!CSL.STATUTE_SUBDIV_STRINGS[m[1]]){var embeddedLabel=null;(embeddedLabel="locator"===variable?ItemObject.label?CSL.STATUTE_SUBDIV_STRINGS_REVERSE[ItemObject.label]:"p.":CSL.STATUTE_SUBDIV_STRINGS_REVERSE[variable])&&(str=embeddedLabel+" "+str)}return str}(str)).match(/(,\s+|\s*\\*[\-\u2013]+\s*|\s*&\s*)/g)){for(var i=0,ilen=(lst=str.split(/(?:,\s+|\s*\\*[\-\u2013]+\s*|\s*&\s*)/)).length-1;i<ilen;i++)elems.push(lst[i]),elems.push(m[i]);elems.push(lst[lst.length-1]),elems=function(elems){for(var i=elems.length-2;i>-1;i-=2)"-"===elems[i]&&elems[i-1].match(/^(?:(?:[a-z]|[a-z][a-z]|[a-z][a-z][a-z]|[a-z][a-z][a-z][a-z])\.  *)*[0-9]+[,a-zA-Z]+$/)&&elems[i+1].match(/^[,a-zA-Z]+$/)&&(elems[i-1]=elems.slice(i-1,i+2).join(""),elems=elems.slice(0,i).concat(elems.slice(i+2)));return elems}(elems)}else elems=[str];var values=[],label=defaultLabel,origLabel="";for(i=0,ilen=elems.length;i<ilen;i+=2){var m;if(m=elems[i].match(/((?:^| )(?:[a-z]|[a-z][a-z]|[a-z][a-z][a-z]|[a-z][a-z][a-z][a-z])\. *)/g)){for(var lst,j=(lst=elems[i].split(/(?:(?:^| )(?:[a-z]|[a-z][a-z]|[a-z][a-z][a-z]|[a-z][a-z][a-z][a-z])\. *)/)).length-1;j>0;j--)!lst[j-1]||lst[j].match(/^[0-9]+([-,:a-zA-Z]*)$/)&&lst[j-1].match(/^[0-9]+([-,:a-zA-Z]*)$/)||(lst[j-1]=lst[j-1]+m[j-1]+lst[j],lst=lst.slice(0,j).concat(lst.slice(j+1)),m=m.slice(0,j-1).concat(m.slice(j)));if(m.length>0&&0===i){var slug=m[0].trim();CSL.STATUTE_SUBDIV_STRINGS[slug]&&me.getTerm(CSL.STATUTE_SUBDIV_STRINGS[slug])&&(-1!==["locator","number"].indexOf(variable)||CSL.STATUTE_SUBDIV_STRINGS[slug]===variable)||(m=m.slice(1),lst[0]=lst[0]+" "+slug+" "+lst[1],lst=lst.slice(0,1).concat(lst.slice(2)))}j=0;for(var jlen=lst.length;j<jlen;j++)(lst[j]||j===lst.length-1)&&(label=m[j-1]?m[j-1]:label,origLabel=j>1?m[j-1]:"",str=lst[j]?lst[j].trim():"",j===lst.length-1?values.push(composeNumberInfo(origLabel,label,str,elems[i+1])):values.push(composeNumberInfo(origLabel,label,str)))}else values.push(composeNumberInfo(origLabel,label,elems[i],elems[i+1]))}return values}(val,defaultLabel)),function(values){for(var currentLabelInfo={label:null,count:1,numeric:!0,collapsible:!0,pos:0},i=(values.length&&values[0].label,0),ilen=values.length;i<ilen;i++)values[i].label&&(values[i].label===currentLabelInfo.label?currentLabelInfo.count++:(fixNumericAndCount(values,i,currentLabelInfo),0===currentLabelInfo.pos?("locator"!==variable&&"number"!==variable||me.getTerm(CSL.STATUTE_SUBDIV_STRINGS[currentLabelInfo.label])||"var:"===currentLabelInfo.label.slice(0,4)||(values[currentLabelInfo.pos].labelVisibility=!0),-1===["locator","number"].indexOf(variable)&&CSL.STATUTE_SUBDIV_STRINGS[currentLabelInfo.label]!==variable&&"var:"!==currentLabelInfo.label.slice(0,4)&&(values[0].labelVisibility=!0)):values[i-1].label!==values[i].label&&"var:"!==currentLabelInfo.label.slice(0,4)&&(values[currentLabelInfo.pos].labelVisibility=!0)));for(fixNumericAndCount(values,values.length-1,currentLabelInfo),values.length&&values[0].numeric&&"number-of-"===variable.slice(0,10)&&parseInt(ItemObject[variable],10)>1&&(values[0].plural=1),i=0,ilen=values.length;i<ilen;i++)if(!values[i].numeric){var origLabel=values[i].origLabel?values[i].origLabel:"";values[i].value=(origLabel+values[i].value).trim(),values[i].label!==values[0].label&&(values[i].label="")}}(values),this.tmp.shadow_numbers[variable].values=values;node&&(fixRanges(values),this.tmp.shadow_numbers[variable].masterStyling=setStyling(values)),function(shadow_numbers,variable,values){var obj=shadow_numbers[variable];values.length&&(obj.numeric=values[0].numeric,obj.collapsible=values[0].collapsible,obj.plural=values[0].plural,obj.label=CSL.STATUTE_SUBDIV_STRINGS[values[0].label],"number"===variable&&"issue"===obj.label&&me.getTerm("number")&&(obj.label="number"))}(this.tmp.shadow_numbers,variable,values)}}},CSL.Util.outputNumericField=function(state,varname,itemID){state.output.openLevel(state.tmp.shadow_numbers[varname].masterStyling);var embeddedLabelForm,nums=state.tmp.shadow_numbers[varname].values,masterLabel=nums.length?nums[0].label:null,labelForm=state.tmp.shadow_numbers[varname].labelForm;embeddedLabelForm=labelForm||"short";for(var labelDecorations=state.tmp.shadow_numbers[varname].labelDecorations,lastLabelName=null,i=0,ilen=nums.length;i<ilen;i++){var labelName,num=nums[i],label="";if(num.label)(labelName="var:"===num.label.slice(0,4)?num.label.slice(4):CSL.STATUTE_SUBDIV_STRINGS[num.label])&&(label=num.label===masterLabel?state.getTerm(labelName,labelForm,num.plural):state.getTerm(labelName,embeddedLabelForm,num.plural));var labelPlaceholderPos=-1;label&&(labelPlaceholderPos=label.indexOf("%s"));var numStyling=CSL.Util.cloneToken(num.styling);if(numStyling.formatter=num.styling.formatter,numStyling.type=num.styling.type,numStyling.num=num.styling.num,numStyling.gender=num.styling.gender,labelPlaceholderPos>0&&labelPlaceholderPos<label.length-2)numStyling.strings.prefix+=label.slice(0,labelPlaceholderPos),numStyling.strings.suffix=label.slice(labelPlaceholderPos+2)+numStyling.strings.suffix;else if(num.labelVisibility)if(label||(label=num.label,labelName=num.label),labelPlaceholderPos>0){var prefixLabelStyling=new CSL.Token;prefixLabelStyling.decorations=labelDecorations,state.output.append(label.slice(0,labelPlaceholderPos),prefixLabelStyling)}else labelPlaceholderPos!==label.length-2&&-1!==labelPlaceholderPos||state.output.append(label+num.labelSuffix,"empty");if(num.collapsible){if(num.value.match(/^[0-9]+$/))var blob=new CSL.NumericBlob(num.particle,parseInt(num.value,10),numStyling,itemID);else blob=new CSL.NumericBlob(num.particle,num.value,numStyling,itemID);"undefined"==typeof blob.gender&&(blob.gender=state.locale[state.opt.lang]["noun-genders"][varname]),state.output.append(blob,"literal")}else state.output.append(num.particle+num.value,numStyling);if(0===labelPlaceholderPos&&labelPlaceholderPos<label.length-2&&(null===lastLabelName&&(lastLabelName=labelName),labelName!==lastLabelName||i===nums.length-1)){var suffixLabelStyling=new CSL.Token;suffixLabelStyling.decorations=labelDecorations,state.output.append(label.slice(labelPlaceholderPos+2),suffixLabelStyling)}}state.output.closeLevel()},module.exports=CSL,CSL.Util.PageRangeMangler={},CSL.Util.PageRangeMangler.getFunction=function(state,rangeType){var rangerex,pos,len,stringify,listify,expand,minimize,minimize_internal,chicago,lst,m,b,e,ret,begin,end,ret_func,range_delimiter=state.getTerm(rangeType+"-range-delimiter");rangerex=/([a-zA-Z]*)([0-9]+)\s*(?:\u2013|-)\s*([a-zA-Z]*)([0-9]+)/,stringify=function(lst){for(len=lst.length,pos=1;pos<len;pos+=2)"object"===_typeof(lst[pos])&&(lst[pos]=lst[pos].join(""));var ret=lst.join("");return ret=ret.replace(/([^\\])\-/g,"$1"+state.getTerm(rangeType+"-range-delimiter"))},listify=function(str){var m,lst,ret,delimRex=new RegExp("([^\\\\])[-"+("-"===range_delimiter?"":range_delimiter)+"\\u2013]","g");str=str.replace(delimRex,"$1 - ").replace(/\s+-\s+/g," - ");var rexm=new RegExp("([a-zA-Z]*[0-9]+\\s+\\-\\s+[a-zA-Z]*[0-9]+)","g"),rexlst=new RegExp("[a-zA-Z]*[0-9]+\\s+\\-\\s+[a-zA-Z]*[0-9]+");if(m=str.match(rexm),0===(lst=str.split(rexlst)).length)ret=m;else for(ret=[lst[0]],pos=1,len=lst.length;pos<len;pos+=1)ret.push(m[pos-1].replace(/\s*\-\s*/g,"-")),ret.push(lst[pos]);return ret},expand=function(str){for(lst=listify(str=""+str),len=lst.length,pos=1;pos<len;pos+=2)(m=lst[pos].match(rangerex))&&(m[3]&&m[1]!==m[3]||(m[4].length<m[2].length&&(m[4]=m[2].slice(0,m[2].length-m[4].length)+m[4]),parseInt(m[2],10)<parseInt(m[4],10)&&(m[3]=range_delimiter+m[1],lst[pos]=m.slice(1)))),"string"==typeof lst[pos]&&(lst[pos]=lst[pos].replace(/\-/g,range_delimiter));return lst},minimize=function(lst,minchars,isyear){len=lst.length;for(var i=1,ilen=lst.length;i<ilen;i+=2)lst[i][3]=minimize_internal(lst[i][1],lst[i][3],minchars,isyear),lst[i][2].slice(1)===lst[i][0]&&(lst[i][2]=range_delimiter);return stringify(lst)},minimize_internal=function(begin,end,minchars,isyear){if(minchars||(minchars=0),b=(""+begin).split(""),e=(""+end).split(""),(ret=e.slice()).reverse(),b.length===e.length)for(var i=0,ilen=b.length;i<ilen;i+=1){if(!(b[i]===e[i]&&ret.length>minchars)){if(minchars&&isyear&&3===ret.length){var front=b.slice(0,i);front.reverse(),ret=ret.concat(front)}break}ret.pop()}return ret.reverse(),ret.join("")},chicago=function(lst){for(len=lst.length,pos=1;pos<len;pos+=2)"object"===_typeof(lst[pos])&&(m=lst[pos],begin=parseInt(m[1],10),end=parseInt(m[3],10),begin>100&&begin%100&&parseInt(begin/100,10)===parseInt(end/100,10)?m[3]=""+end%100:begin>=1e4&&(m[3]=""+end%1e3)),m[2].slice(1)===m[0]&&(m[2]=range_delimiter);return stringify(lst)};var sniff=function(str,func,minchars,isyear){return func(expand(str=""+str),minchars,isyear)};return state.opt[rangeType+"-range-format"]?"expanded"===state.opt[rangeType+"-range-format"]?ret_func=function(str){return sniff(str,stringify)}:"minimal"===state.opt[rangeType+"-range-format"]?ret_func=function(str){return sniff(str,minimize)}:"minimal-two"===state.opt[rangeType+"-range-format"]?ret_func=function(str,isyear){return sniff(str,minimize,2,isyear)}:"chicago"===state.opt[rangeType+"-range-format"]&&(ret_func=function(str){return sniff(str,chicago)}):ret_func=function(str){return sniff(str,stringify)},ret_func},module.exports=CSL,CSL.Util.FlipFlopper=function(state){this.processTags=function(blob){var leadingSpace=!1;" "!==(str=blob.blobs).slice(0,1)||str.match(/^\s+[\'\"]/)||(leadingSpace=!0);var doppel=function(str){var forcedSpaces=[],match=(str=(str=str.replace(/(<span)\s+(style=\"font-variant:)\s*(small-caps);?\"[^>]*(>)/g,'$1 $2$3;"$4')).replace(/(<span)\s+(class=\"no(?:case|decor)\")[^>]*(>)/g,"$1 $2$3")).match(_tagRex.matchAll);if(!match)return{tags:[],strings:[str],forcedSpaces:[]};for(var split=str.split(_tagRex.splitAll),i=0,ilen=match.length-1;i<ilen;i++)_nestingData[match[i]]&&(""===split[i+1]&&['"',"'"].indexOf(match[i+1])>-1?(match[i+1]=" "+match[i+1],forcedSpaces.push(!0)):forcedSpaces.push(!1));return{tags:match,strings:split,forcedSpaces:forcedSpaces}}(str=" "+str);if(0===doppel.tags.length)return;for(var quoteFormSeen=!1,i=0,ilen=doppel.tags.length;i<ilen;i++){var tag=doppel.tags[i],str=doppel.strings[i+1];if(_apostropheForce(tag,str))doppel.strings[i+1]=" '"===tag?" \u2019"+doppel.strings[i+1]:"\u2019"+doppel.strings[i+1],doppel.tags[i]="";else{for(var tagInfo;tagInfo=_nestingFix(tag,i);){if(!(Object.keys(tagInfo).indexOf("fixtag")>-1)){if(tagInfo.nocase){doppel.tags[tagInfo.nocase.open]="",doppel.tags[tagInfo.nocase.close]="";break}break}if(tag.match(_tagRex.close)&&"'"===tag)doppel.strings[i+1]="\u2019"+doppel.strings[i+1],doppel.tags[i]="";else{var failedTag=doppel.tags[tagInfo.fixtag];doppel.forcedSpaces[tagInfo.fixtag-1]&&(failedTag=failedTag.slice(1)),doppel.strings[tagInfo.fixtag+1]=failedTag+doppel.strings[tagInfo.fixtag+1],doppel.tags[tagInfo.fixtag]=""}if(!(_nestingState.length>0))break;_nestingState.pop()}tagInfo&&(tagInfo.fixtag||0===tagInfo.fixtag)&&(doppel.strings[i+1]=doppel.tags[i]+doppel.strings[i+1],doppel.tags[i]="")}}for(var i=_nestingState.length-1;i>-1;i--){var tagPos=_nestingState[i].pos,tag=doppel.tags[tagPos];doppel.strings[tagPos+1]=" '"===tag||"'"===tag?" \u2019"+doppel.strings[tagPos+1]:doppel.tags[tagPos]+doppel.strings[tagPos+1],doppel.tags[tagPos]="",_nestingState.pop()}for(var i=doppel.tags.length-1;i>-1;i--)doppel.tags[i]||(doppel.tags=doppel.tags.slice(0,i).concat(doppel.tags.slice(i+1)),doppel.strings[i]=doppel.strings[i]+doppel.strings[i+1],doppel.strings=doppel.strings.slice(0,i+1).concat(doppel.strings.slice(i+2)));for(var i=0,ilen=doppel.tags.length;i<ilen;i++){var tag=doppel.tags[i],forcedSpace=doppel.forcedSpaces[i-1];[' "'," '",'("',"('"].indexOf(tag)>-1&&(quoteFormSeen||(_setOuterQuoteForm(tag),quoteFormSeen=!0),forcedSpace||(doppel.strings[i]+=tag.slice(0,1)))}!function(blob,doppel,leadingSpace){var firstString=!0,tagReg=new _TagReg(blob);blob.blobs=[];var stack=new function(blob){this.stack=[blob],this.latest=blob,this.addStyling=function(str,decor,forcedSpace){if(firstString&&(" "===str.slice(0,1)&&(str=str.slice(1))," "===str.slice(0,1)&&(str=str.slice(1)),firstString=!1),this.latest=this.stack[this.stack.length-1],decor){if("string"==typeof this.latest.blobs){var child=new CSL.Blob;child.blobs=this.latest.blobs,child.alldecor=this.latest.alldecor.slice(),this.latest.blobs=[child]}var tok=new CSL.Token,newblob=new CSL.Blob(null,tok);if(newblob.alldecor=this.latest.alldecor.slice(),"@class"===decor[0]&&"nodecor"===decor[1]){for(var newdecorset=[],seen={},allTheDecor=[state[state.tmp.area].opt.layout_decorations].concat(newblob.alldecor),i=allTheDecor.length-1;i>-1;i--){var _decorset=allTheDecor[i];if(_decorset)for(var j=_decorset.length-1;j>-1;j--){var _olddecor=_decorset[j];["@font-weight","@font-style","@font-variant"].indexOf(_olddecor[0])>-1&&!seen[_olddecor[0]]&&("normal"!==decor[1]&&(newblob.decorations.push([_olddecor[0],"normal"]),newdecorset.push([_olddecor[0],"normal"])),seen[_olddecor[0]]=!0)}}newblob.alldecor.push(newdecorset)}else newblob.decorations.push(decor),newblob.alldecor.push([decor]);if(this.latest.blobs.push(newblob),this.stack.push(newblob),this.latest=newblob,str){var tok=new CSL.Token,newblob=new CSL.Blob(null,tok);newblob.blobs=str,newblob.alldecor=this.latest.alldecor.slice(),this.latest.blobs.push(newblob)}}else if(str){var child=new CSL.Blob;child.blobs=str,child.alldecor=this.latest.alldecor.slice(),this.latest.blobs.push(child)}},this.popStyling=function(){this.stack.pop()}}(blob);if(doppel.strings.length){var str=doppel.strings[0];leadingSpace&&(str=" "+str),stack.addStyling(str)}for(var i=0,ilen=doppel.tags.length;i<ilen;i++){var tag=doppel.tags[i],str=doppel.strings[i+1];tag.match(_tagRex.open)?(tagReg.set(tag),stack.addStyling(str,tagReg.pair())):(tagReg.pop(),stack.popStyling(),stack.addStyling(str))}}(blob,doppel,leadingSpace)};var _nestingState=[],_nestingData={'<span class="nocase">':{type:"nocase",opener:'<span class="nocase">',closer:"</span>",attr:null,outer:null,flipflop:null},'<span class="nodecor">':{type:"nodecor",opener:'<span class="nodecor">',closer:"</span>",attr:"@class",outer:"nodecor",flipflop:{nodecor:"nodecor"}},'<span style="font-variant:small-caps;">':{type:"tag",opener:'<span style="font-variant:small-caps;">',closer:"</span>",attr:"@font-variant",outer:"small-caps",flipflop:{"small-caps":"normal",normal:"small-caps"}},"<sc>":{type:"tag",opener:"<sc>",closer:"</sc>",attr:"@font-variant",outer:"small-caps",flipflop:{"small-caps":"normal",normal:"small-caps"}},"<i>":{type:"tag",opener:"<i>",closer:"</i>",attr:"@font-style",outer:"italic",flipflop:{italic:"normal",normal:"italic"}},"<b>":{type:"tag",opener:"<b>",closer:"</b>",attr:"@font-weight",outer:"bold",flipflop:{bold:"normal",normal:"bold"}},"<sup>":{type:"tag",opener:"<sup>",closer:"</sup>",attr:"@vertical-align",outer:"sup",flipflop:{sub:"sup",sup:"sup"}},"<sub>":{type:"tag",opener:"<sub>",closer:"</sub>",attr:"@vertical-align",outer:"sub",flipflop:{sup:"sub",sub:"sub"}},' "':{type:"quote",opener:' "',closer:'"',attr:"@quotes",outer:"true",flipflop:{"true":"inner",inner:"true","false":"true"}}," '":{type:"quote",opener:" '",closer:"'",attr:"@quotes",outer:"inner",flipflop:{"true":"inner",inner:"true","false":"true"}}};_nestingData['("']=_nestingData[' "'],_nestingData["('"]=_nestingData[" '"];var localeOpenQuote=state.getTerm("open-quote"),localeCloseQuote=state.getTerm("close-quote"),localeOpenInnerQuote=state.getTerm("open-inner-quote"),localeCloseInnerQuote=state.getTerm("close-inner-quote");localeOpenQuote&&localeCloseQuote&&-1===[' "'," '",'"',"'"].indexOf(localeOpenQuote)&&(_nestingData[localeOpenQuote]=JSON.parse(JSON.stringify(_nestingData[' "'])),_nestingData[localeOpenQuote].opener=localeOpenQuote,_nestingData[localeOpenQuote].closer=localeCloseQuote),localeOpenInnerQuote&&localeCloseInnerQuote&&-1===[' "'," '",'"',"'"].indexOf(localeOpenInnerQuote)&&(_nestingData[localeOpenInnerQuote]=JSON.parse(JSON.stringify(_nestingData[" '"])),_nestingData[localeOpenInnerQuote].opener=localeOpenInnerQuote,_nestingData[localeOpenInnerQuote].closer=localeCloseInnerQuote);(function(){for(var ret={},keys=Object.keys(_nestingData),i=0,l=keys.length;i<l;i++){var key=keys[i];"quote"===_nestingData[key].type&&(ret[_nestingData[key].closer]=_nestingData[key])}})(),function(){for(var ret={},keys=Object.keys(_nestingData),i=0,l=keys.length;i<l;i++){var key=keys[i];if("nocase"!==_nestingData[key].type){var attr=_nestingData[key].attr,outer=_nestingData[key].outer,inner=_nestingData[key].flipflop[_nestingData[key].outer];ret[attr+"/"+outer]=_nestingData[key],ret[attr+"/"+inner]=_nestingData[key]}}}();function _setOuterQuoteForm(quot){_nestingData[quot].outer="true",_nestingData[{" '":' "',' "':" '",'("':"('","('":'("'}[quot]].outer="inner"}function _getNestingOpenerParams(opener){for(var openers=[],keys=Object.keys(_nestingData),i=0,l=keys.length;i<l;i++){var key=keys[i];"quote"===_nestingData[opener].type&&_nestingData[opener]||openers.push(key)}var ret=_nestingData[opener];return ret.opener=new RegExp("^(?:"+openers.map(function(str){return str.replace("(","\\(")}).join("|")+")"),ret}var _nestingParams=function(){for(var ret={},keys=Object.keys(_nestingData),i=0,l=keys.length;i<l;i++){var key=keys[i];ret[key]=_getNestingOpenerParams(key)}return ret}(),_tagRex=function(){var openers=[],closers=[],vals={};for(var opener in _nestingParams)openers.push(opener),vals[_nestingParams[opener].closer]=!0;for(var keys=Object.keys(vals),i=0,l=keys.length;i<l;i++){var closer=keys[i];closers.push(closer)}var all=openers.concat(closers).map(function(str){return str.replace("(","\\(")}).join("|");return{matchAll:new RegExp("((?:"+all+"))","g"),splitAll:new RegExp("(?:"+all+")","g"),open:new RegExp("(^(?:"+openers.map(function(str){return str.replace("(","\\(")}).join("|")+")$)"),close:new RegExp("(^(?:"+closers.join("|")+")$)")}}();function _nestingFix(tag,pos){return function(tag,pos){return tag.match(_tagRex.open)?function(tag,pos){var params=_nestingState[_nestingState.length-1];return!params||tag.match(params.opener)?(_nestingState.push({type:_nestingParams[tag].type,opener:_nestingParams[tag].opener,closer:_nestingParams[tag].closer,pos:pos}),!1):(_nestingState.pop(),_nestingState.push({type:_nestingParams[tag].type,opener:_nestingParams[tag].opener,closer:_nestingParams[tag].closer,pos:pos}),{fixtag:params.pos})}(tag,pos):function(tag,pos){var params=_nestingState[_nestingState.length-1];return params&&tag===params.closer?(_nestingState.pop(),"nocase"===params.type&&{nocase:{open:params.pos,close:pos}}):params?{fixtag:params.pos}:{fixtag:pos}}(tag,pos)}(tag,pos)}var _TagReg=function(blob){this.set=function(tag){for(var attr=_nestingData[tag].attr,decor=null,i=_stack.length-1;i>-1;i--){var _decor=_stack[i];if(_decor[0]===attr){decor=_decor;break}}if(!decor){var allTheDecor=[state[state.tmp.area].opt.layout_decorations].concat(blob.alldecor);outer:for(var i=allTheDecor.length-1;i>-1;i--){var decorset=allTheDecor[i];if(decorset)for(var j=decorset.length-1;j>-1;j--){var _decor=decorset[j];if(_decor[0]===attr){decor=_decor;break outer}}}}decor=decor?[attr,_nestingData[tag].flipflop[decor[1]]]:[attr,_nestingData[tag].outer];_stack.push(decor)},this.pair=function(){return _stack[_stack.length-1]},this.pop=function(){_stack.pop()};var _stack=[]};function _apostropheForce(tag,str){if("'"===tag){if(str&&str.match(/^[^\,\.\?\:\;\ ]/))return!0}else if(" '"===tag&&str&&str.match(/^[\ ]/))return!0;return!1}},module.exports=CSL,CSL.Output.Formatters=new function(){this.passthrough=function(state,str){return str},this.lowercase=function(state,string){return _textcaseEngine({quoteState:null,capitaliseWords:function(str){for(var words=str.split(" "),i=0,ilen=words.length;i<ilen;i++){var word=words[i];word&&(words[i]=word.toLowerCase())}return words.join(" ")},skipWordsRex:null,tagState:[],afterPunct:null,isFirst:null},string)},this.uppercase=function(state,string){return _textcaseEngine({quoteState:null,capitaliseWords:function(str){for(var words=str.split(" "),i=0,ilen=words.length;i<ilen;i++){var word=words[i];word&&(words[i]=word.toUpperCase())}return words.join(" ")},skipWordsRex:null,tagState:[],afterPunct:null,isFirst:null},string)},this.sentence=function(state,string){var config={quoteState:[],capitaliseWords:function(str){for(var words=str.split(" "),i=0,ilen=words.length;i<ilen;i++){var word=words[i];word&&(config.isFirst?(words[i]=_capitalise(word),config.isFirst=!1):words[i]=word.toLowerCase())}return words.join(" ")},skipWordsRex:null,tagState:[],afterPunct:null,isFirst:!0};return _textcaseEngine(config,string)},this.title=function(state,string){var config={quoteState:[],capitaliseWords:function(str,i,followingTag){if(str.trim()){for(var words=str.split(/[ \u00A0]+/),wordle=wordDoppel.split(str),words=wordle.strings,j=0,jlen=words.length;j<jlen;j++){var word=words[j];word&&(word.length>1&&!word.toLowerCase().match(config.skipWordsRex)?words[j]=_capitalise(words[j]):j===words.length-1&&"-"===followingTag?words[j]=_capitalise(words[j]):config.isFirst?words[j]=_capitalise(words[j]):config.afterPunct&&(words[j]=_capitalise(words[j])),config.afterPunct=!1,config.isFirst=!1,config.lastWordPos={strings:i,words:j})}str=wordDoppel.join(wordle)}return str},skipWordsRex:state.locale[state.opt.lang].opts["skip-words-regexp"],tagState:[],afterPunct:!1,isFirst:!0};return _textcaseEngine(config,string)},this["capitalize-first"]=function(state,string){var config={quoteState:[],capitaliseWords:function(str){for(var words=str.split(" "),i=0,ilen=words.length;i<ilen;i++){var word=words[i];if(word&&config.isFirst){words[i]=_capitalise(word),config.isFirst=!1;break}}return words.join(" ")},skipWordsRex:null,tagState:[],afterPunct:null,isFirst:!0};return _textcaseEngine(config,string)},this["capitalize-all"]=function(state,string){return _textcaseEngine({quoteState:[],capitaliseWords:function(str){for(var words=str.split(" "),i=0,ilen=words.length;i<ilen;i++){var word=words[i];word&&(words[i]=_capitalise(word))}return words.join(" ")},skipWordsRex:null,tagState:[],afterPunct:null,isFirst:null},string)};var tagDoppel=new CSL.Doppeler('(?:\u2018|\u2019|\u201c|\u201d| "| \'|"|\'|[-\u2013\u2014/.,;?!:]|\\[|\\]|\\(|\\)|<span style="font-variant: small-caps;">|<span class="no(?:case|decor)">|</span>|</?(?:i|sc|b|sub|sup)>)',function(str){return str.replace(/(<span)\s+(class=\"no(?:case|decor)\")[^>]*(>)/g,"$1 $2$3").replace(/(<span)\s+(style=\"font-variant:)\s*(small-caps);?(\")[^>]*(>)/g,"$1 $2 $3;$4$5")}),wordDoppel=new CSL.Doppeler("(?:[ \xa0\u2000-\u200b\u205f\u3000]+)"),_tagParams={'<span style="font-variant: small-caps;">':"</span>",'<span class="nocase">':"</span>",'<span class="nodecor">':"</span>"};function _capitalise(word,force){var m=word.match(/(^\s*)((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]))(.*)/);return!m||m[2].match(/^[\u0370-\u03FF]$/)&&!m[3]?word:m[1]+m[2].toUpperCase()+m[3]}function _textcaseEngine(config,string){if(!string)return"";config.doppel=tagDoppel.split(string);var quoteParams={' "':{opener:" '",closer:'"'}," '":{opener:' "',closer:"'"},"\u2018":{opener:"\u2018",closer:"\u2019"},"\u201c":{opener:"\u201c",closer:"\u201d"}};function quoteFix(tag,positions){var m=tag.match(/(^(?:\u2018|\u2019|\u201C|\u201D|\"|\')|(?: \"| \')$)/);if(m)return function(tag,pos){return["\u201c","\u2018",' "'," '"].indexOf(tag)>-1?function(tag,pos){if(0===config.quoteState.length||tag===config.quoteState[config.quoteState.length-1].opener)return config.quoteState.push({opener:quoteParams[tag].opener,closer:quoteParams[tag].closer,pos:pos}),!1;var prevPos=config.quoteState[config.quoteState.length-1].pos;return config.quoteState.pop(),config.quoteState.push({opener:quoteParams[tag].opener,closer:quoteParams[tag].closer,positions:pos}),prevPos}(tag,pos):function(tag,pos){if(!(config.quoteState.length>0&&tag===config.quoteState[config.quoteState.length-1].closer))return pos;config.quoteState.pop()}(tag,pos)}(m[1],positions)}config.doppel.strings.length&&config.doppel.strings[0].trim()&&(config.doppel.strings[0]=config.capitaliseWords(config.doppel.strings[0],0,config.doppel.tags[0]));for(var i=0,ilen=config.doppel.tags.length;i<ilen;i++){var tag=config.doppel.tags[i],str=config.doppel.strings[i+1];if(null!==config.tagState&&(_tagParams[tag]?config.tagState.push(_tagParams[tag]):config.tagState.length&&tag===config.tagState[config.tagState.length-1]&&config.tagState.pop()),null!==config.afterPunct&&tag.match(/[\!\?\:]$/)&&(config.afterPunct=!0),0===config.tagState.length?config.doppel.strings[i+1]=config.capitaliseWords(str,i+1,config.doppel,config.doppel.tags[i+1]):config.doppel.strings[i+1].trim()&&(config.lastWordPos=null),null!==config.quoteState)if((quotePos=quoteFix(tag,i))||0===quotePos){var origChar=config.doppel.origStrings[quotePos+1].slice(0,1);config.doppel.strings[quotePos+1]=origChar+config.doppel.strings[quotePos+1].slice(1),config.lastWordPos=null}config.isFirst&&str.trim()&&(config.isFirst=!1),config.afterPunct&&str.trim()&&(config.afterPunct=!1)}if(config.quoteState)for(i=0,ilen=config.quoteState.length;i<ilen;i++){var quotePos;if(void 0!==(quotePos=config.quoteState[i].pos)){origChar=config.doppel.origStrings[quotePos+1].slice(0,1);config.doppel.strings[quotePos+1]=origChar+config.doppel.strings[quotePos+1].slice(1)}}if(config.lastWordPos){var lastWords=wordDoppel.split(config.doppel.strings[config.lastWordPos.strings]),lastWord=_capitalise(lastWords.strings[config.lastWordPos.words]);lastWords.strings[config.lastWordPos.words]=lastWord,config.doppel.strings[config.lastWordPos.strings]=wordDoppel.join(lastWords)}return tagDoppel.join(config.doppel)}},module.exports=CSL,CSL.Output.Formats=function(){},CSL.Output.Formats.prototype.html={text_escape:function(text){return text||(text=""),text.replace(/&/g,"&#38;").replace(/</g,"&#60;").replace(/>/g,"&#62;").replace(/\s\s/g,"\xa0 ").replace(CSL.SUPERSCRIPTS_REGEXP,function(aChar){return"<sup>"+CSL.SUPERSCRIPTS[aChar]+"</sup>"})},bibstart:'<div class="csl-bib-body">\n',bibend:"</div>","@font-style/italic":"<i>%%STRING%%</i>","@font-style/oblique":"<em>%%STRING%%</em>","@font-style/normal":'<span style="font-style:normal;">%%STRING%%</span>',"@font-variant/small-caps":'<span style="font-variant:small-caps;">%%STRING%%</span>',"@passthrough/true":CSL.Output.Formatters.passthrough,"@font-variant/normal":'<span style="font-variant:normal;">%%STRING%%</span>',"@font-weight/bold":"<b>%%STRING%%</b>","@font-weight/normal":'<span style="font-weight:normal;">%%STRING%%</span>',"@font-weight/light":!1,"@text-decoration/none":'<span style="text-decoration:none;">%%STRING%%</span>',"@text-decoration/underline":'<span style="text-decoration:underline;">%%STRING%%</span>',"@vertical-align/sup":"<sup>%%STRING%%</sup>","@vertical-align/sub":"<sub>%%STRING%%</sub>","@vertical-align/baseline":'<span style="baseline">%%STRING%%</span>',"@strip-periods/true":CSL.Output.Formatters.passthrough,"@strip-periods/false":CSL.Output.Formatters.passthrough,"@quotes/true":function(state,str){return void 0===str?state.getTerm("open-quote"):state.getTerm("open-quote")+str+state.getTerm("close-quote")},"@quotes/inner":function(state,str){return void 0===str?"\u2019":state.getTerm("open-inner-quote")+str+state.getTerm("close-inner-quote")},"@quotes/false":!1,"@cite/entry":function(state,str){return state.sys.wrapCitationEntry(str,this.item_id,this.locator_txt,this.suffix_txt)},"@bibliography/entry":function(state,str){var insert="";return state.sys.embedBibliographyEntry&&(insert=state.sys.embedBibliographyEntry(this.item_id)+"\n"),'  <div class="csl-entry">'+str+"</div>\n"+insert},"@display/block":function(state,str){return'\n\n    <div class="csl-block">'+str+"</div>\n"},"@display/left-margin":function(state,str){return'\n    <div class="csl-left-margin">'+str+"</div>"},"@display/right-inline":function(state,str){return'<div class="csl-right-inline">'+str+"</div>\n  "},"@display/indent":function(state,str){return'<div class="csl-indent">'+str+"</div>\n  "},"@showid/true":function(state,str,cslid){if(state.tmp.just_looking||state.tmp.suppress_decorations)return str;if(cslid)return'<span class="'+state.opt.nodenames[cslid]+'" cslid="'+cslid+'">'+str+"</span>";if(this.params&&"string"==typeof str){var prePunct="";if(str){var m=str.match(CSL.VARIABLE_WRAPPER_PREPUNCT_REX);prePunct=m[1],str=m[2]}var postPunct="";return str&&CSL.SWAPPING_PUNCTUATION.indexOf(str.slice(-1))>-1&&(postPunct=str.slice(-1),str=str.slice(0,-1)),state.sys.variableWrapper(this.params,prePunct,str,postPunct)}return str},"@URL/true":function(state,str){return'<a href="'+str+'">'+str+"</a>"},"@DOI/true":function(state,str){var doiurl=str;return str.match(/^https?:\/\//)||(doiurl="https://doi.org/"+str),'<a href="'+doiurl+'">'+str+"</a>"}},CSL.Output.Formats.prototype.text={text_escape:function(text){return text||(text=""),text},bibstart:"",bibend:"","@font-style/italic":!1,"@font-style/oblique":!1,"@font-style/normal":!1,"@font-variant/small-caps":!1,"@passthrough/true":CSL.Output.Formatters.passthrough,"@font-variant/normal":!1,"@font-weight/bold":!1,"@font-weight/normal":!1,"@font-weight/light":!1,"@text-decoration/none":!1,"@text-decoration/underline":!1,"@vertical-align/baseline":!1,"@vertical-align/sup":!1,"@vertical-align/sub":!1,"@strip-periods/true":CSL.Output.Formatters.passthrough,"@strip-periods/false":CSL.Output.Formatters.passthrough,"@quotes/true":function(state,str){return void 0===str?state.getTerm("open-quote"):state.getTerm("open-quote")+str+state.getTerm("close-quote")},"@quotes/inner":function(state,str){return void 0===str?"\u2019":state.getTerm("open-inner-quote")+str+state.getTerm("close-inner-quote")},"@quotes/false":!1,"@cite/entry":function(state,str){return state.sys.wrapCitationEntry(str,this.item_id,this.locator_txt,this.suffix_txt)},"@bibliography/entry":function(state,str){return str+"\n"},"@display/block":function(state,str){return"\n"+str},"@display/left-margin":function(state,str){return str},"@display/right-inline":function(state,str){return str},"@display/indent":function(state,str){return"\n    "+str},"@showid/true":function(state,str,cslid){return str},"@URL/true":function(state,str){return str},"@DOI/true":function(state,str){return str}},CSL.Output.Formats.prototype.rtf={text_escape:function(text){return text||(text=""),text.replace(/([\\{}])/g,"\\$1").replace(CSL.SUPERSCRIPTS_REGEXP,function(aChar){return"\\super "+CSL.SUPERSCRIPTS[aChar]+"\\nosupersub{}"}).replace(/[\u007F-\uFFFF]/g,function(aChar){return"\\uc0\\u"+aChar.charCodeAt(0).toString()+"{}"}).split("\t").join("\\tab{}")},"@passthrough/true":CSL.Output.Formatters.passthrough,"@font-style/italic":"{\\i{}%%STRING%%}","@font-style/normal":"{\\i0{}%%STRING%%}","@font-style/oblique":"{\\i{}%%STRING%%}","@font-variant/small-caps":"{\\scaps %%STRING%%}","@font-variant/normal":"{\\scaps0{}%%STRING%%}","@font-weight/bold":"{\\b{}%%STRING%%}","@font-weight/normal":"{\\b0{}%%STRING%%}","@font-weight/light":!1,"@text-decoration/none":!1,"@text-decoration/underline":"{\\ul{}%%STRING%%}","@vertical-align/baseline":!1,"@vertical-align/sup":"\\super %%STRING%%\\nosupersub{}","@vertical-align/sub":"\\sub %%STRING%%\\nosupersub{}","@strip-periods/true":CSL.Output.Formatters.passthrough,"@strip-periods/false":CSL.Output.Formatters.passthrough,"@quotes/true":function(state,str){return void 0===str?CSL.Output.Formats.rtf.text_escape(state.getTerm("open-quote")):CSL.Output.Formats.rtf.text_escape(state.getTerm("open-quote"))+str+CSL.Output.Formats.rtf.text_escape(state.getTerm("close-quote"))},"@quotes/inner":function(state,str){return void 0===str?CSL.Output.Formats.rtf.text_escape("\u2019"):CSL.Output.Formats.rtf.text_escape(state.getTerm("open-inner-quote"))+str+CSL.Output.Formats.rtf.text_escape(state.getTerm("close-inner-quote"))},"@quotes/false":!1,bibstart:"{\\rtf ",bibend:"}","@display/block":"\\line{}%%STRING%%\\line\r\n","@cite/entry":function(state,str){return state.sys.wrapCitationEntry(str,this.item_id,this.locator_txt,this.suffix_txt)},"@bibliography/entry":function(state,str){return str},"@display/left-margin":function(state,str){return str+"\\tab "},"@display/right-inline":function(state,str){return str+"\r\n"},"@display/indent":function(state,str){return"\n\\tab "+str+"\\line\r\n"},"@showid/true":function(state,str,cslid){if(state.tmp.just_looking||state.tmp.suppress_decorations)return str;var prePunct="";if(str){var m=str.match(CSL.VARIABLE_WRAPPER_PREPUNCT_REX);prePunct=m[1],str=m[2]}var postPunct="";return str&&CSL.SWAPPING_PUNCTUATION.indexOf(str.slice(-1))>-1&&(postPunct=str.slice(-1),str=str.slice(0,-1)),state.sys.variableWrapper(this.params,prePunct,str,postPunct)},"@URL/true":function(state,str){return str},"@DOI/true":function(state,str){return str}},CSL.Output.Formats=new CSL.Output.Formats,module.exports=CSL,CSL.Registry=function(state){this.debug=!1,this.state=state,this.registry={},this.reflist=[],this.refhash={},this.namereg=new CSL.Registry.NameReg(state),this.citationreg=new CSL.Registry.CitationReg(state),this.authorstrings={},this.mylist=[],this.myhash={},this.deletes=[],this.inserts=[],this.uncited={},this.refreshes={},this.akeys={},this.oldseq={},this.return_data={},this.ambigcites={},this.ambigresets={},this.sorter=new CSL.Registry.Comparifier(state,"bibliography_sort"),this.getSortedIds=function(){for(var ret=[],i=0,ilen=this.reflist.length;i<ilen;i+=1)ret.push(""+this.reflist[i].id);return ret},this.getSortedRegistryItems=function(){for(var ret=[],i=0,ilen=this.reflist.length;i<ilen;i+=1)ret.push(this.reflist[i]);return ret}},CSL.Registry.prototype.init=function(itemIDs,uncited_flag){if(this.oldseq={},uncited_flag){this.uncited={};for(var i=0,ilen=itemIDs.length;i<ilen;i+=1)this.myhash[itemIDs[i]]||this.mylist.push(""+itemIDs[i]),this.uncited[itemIDs[i]]=!0,this.myhash[itemIDs[i]]=!0}else{for(var key in this.uncited)itemIDs.push(key);var myhash={};for(i=itemIDs.length-1;i>-1;i+=-1)myhash[itemIDs[i]]?itemIDs=itemIDs.slice(0,i).concat(itemIDs.slice(i+1)):myhash[itemIDs[i]]=!0;this.mylist=[];for(i=0,ilen=itemIDs.length;i<ilen;i+=1)this.mylist.push(""+itemIDs[i]);this.myhash=myhash}this.refreshes={},this.touched={},this.ambigsTouched={},this.ambigresets={}},CSL.Registry.prototype.dopurge=function(myhash){for(var i=this.mylist.length-1;i>-1;i+=-1)this.citationreg.citationsByItemId&&(this.citationreg.citationsByItemId[this.mylist[i]]||myhash[this.mylist[i]]||(delete this.myhash[this.mylist[i]],this.mylist=this.mylist.slice(0,i).concat(this.mylist.slice(i+1))));this.dodeletes(this.myhash)},CSL.Registry.prototype.dodeletes=function(myhash){var ambig,pos,len,items,kkey,mypos,id;for(var key in"string"==typeof myhash&&((myhash={})[myhash]=!0),this.registry)if(!myhash[key]){if(this.uncited[key])continue;for(kkey in this.namereg.delitems(key))this.refreshes[kkey]=!0;for(ambig=this.registry[key].ambig,(mypos=this.ambigcites[ambig].indexOf(key))>-1&&(items=this.ambigcites[ambig].slice(),this.ambigcites[ambig]=items.slice(0,mypos).concat(items.slice(mypos+1,items.length)),this.ambigresets[ambig]=this.ambigcites[ambig].length),len=this.ambigcites[ambig].length,pos=0;pos<len;pos+=1)id=""+this.ambigcites[ambig][pos],this.refreshes[id]=!0;if(this.registry[key].siblings)if(1==this.registry[key].siblings.length){var loneSiblingID=this.registry[key].siblings[0];this.registry[loneSiblingID].master=!0,this.registry[loneSiblingID].siblings.pop(),this.registry[loneSiblingID].parallel=!1}else if(this.registry[key].siblings.length>1){var removeIDs=[key];if(this.registry[key].master){var newmasterID=this.registry[key].siblings[0],newmaster=this.registry[newmasterID];newmaster.master=!0,newmaster.parallel=!1,removeIDs.push(newmasterID);for(var k=0,klen=this.registry[key].siblings.length;k<klen;k+=1)this.registry[this.registry[key].siblings[k]].parallel=newmasterID}var buffer=[];for(k=this.registry[key].siblings.length-1;k>-1;k+=-1){var siblingID=this.registry[key].siblings.pop();-1===removeIDs.indexOf(siblingID)&&buffer.push(siblingID)}for(k=buffer.length-1;k>-1;k+=-1)this.registry[key].siblings.push(buffer[k])}delete this.registry[key],delete this.refhash[key],this.return_data.bibchange=!0}},CSL.Registry.prototype.doinserts=function(mylist){var item,Item,akey,newitem,abase;"string"==typeof mylist&&(mylist=[mylist]);for(var i=0,ilen=mylist.length;i<ilen;i+=1)item=mylist[i],this.registry[item]||(Item=this.state.retrieveItem(item),akey=CSL.getAmbiguousCite.call(this.state,Item),this.ambigsTouched[akey]=!0,Item.legislation_id||(this.akeys[akey]=!0),newitem={id:""+item,seq:0,offset:0,sortkeys:!1,ambig:!1,rendered:!1,disambig:!1,ref:Item},this.registry[item]=newitem,this.citationreg.citationsByItemId&&this.citationreg.citationsByItemId[item]&&(this.registry[item]["first-reference-note-number"]=this.citationreg.citationsByItemId[item][0].properties.noteIndex),abase=CSL.getAmbigConfig.call(this.state),this.registerAmbigToken(akey,item,abase),this.touched[item]=!0,this.return_data.bibchange=!0)},CSL.Registry.prototype.rebuildlist=function(){var len,pos,item;for(this.reflist=[],this.state.opt.citation_number_sort_direction===CSL.DESCENDING&&this.state.opt.citation_number_sort_used,len=this.mylist.length,pos=0;pos<len;pos+=1)item=this.mylist[pos],this.reflist.push(this.registry[item]),this.oldseq[item]=this.registry[item].seq,this.registry[item].seq=pos+1;this.state.opt.citation_number_sort_direction===CSL.DESCENDING&&this.state.opt.citation_number_sort_used},CSL.Registry.prototype.dorefreshes=function(){var regtoken;for(var key in this.refreshes)if(regtoken=this.registry[key]){regtoken.sortkeys=undefined,Item=this.state.retrieveItem(key);var akey=regtoken.ambig;for(var akkey in void 0===akey&&(this.state.tmp.disambig_settings=!1,akey=CSL.getAmbiguousCite.call(this.state,Item),abase=CSL.getAmbigConfig.call(this.state),this.registerAmbigToken(akey,key,abase)),this.ambigresets)if(1===this.ambigresets[akkey]){var loneKey=this.ambigcites[akey][0],Item=this.state.retrieveItem(loneKey);this.registry[loneKey].disambig=new CSL.AmbigConfig,this.state.tmp.disambig_settings=!1;akey=CSL.getAmbiguousCite.call(this.state,Item);var abase=CSL.getAmbigConfig.call(this.state);this.registerAmbigToken(akey,loneKey,abase)}this.state.tmp.taintedItemIDs[key]=!0,this.ambigsTouched[akey]=!0,Item.legislation_id||(this.akeys[akey]=!0),this.touched[key]=!0}},CSL.Registry.prototype.setdisambigs=function(){var akey;for(akey in this.leftovers=[],this.ambigsTouched)this.state.disambiguate.run(akey);this.ambigsTouched={},this.akeys={}},CSL.Registry.prototype.renumber=function(){var len,pos,item;for(this.state.opt.citation_number_sort_direction===CSL.DESCENDING&&this.state.opt.citation_number_sort_used,len=this.reflist.length,pos=0;pos<len;pos+=1)(item=this.reflist[pos]).seq=pos+1,this.state.opt.update_mode===CSL.NUMERIC&&item.seq!=this.oldseq[item.id]&&(this.state.tmp.taintedItemIDs[item.id]=!0),this.state.opt.bib_mode===CSL.NUMERIC&&item.seq!=this.oldseq[item.id]&&(this.return_data.bibchange=!0);this.state.opt.citation_number_sort_direction===CSL.DESCENDING&&this.state.opt.citation_number_sort_used&&this.reflist.reverse()},CSL.Registry.prototype.setsortkeys=function(){for(var i=0,ilen=this.mylist.length;i<ilen;i+=1){var key=this.mylist[i];(this.touched[key]||this.state.tmp.taintedItemIDs[key]||!this.registry[key].sortkeys)&&(this.registry[key].sortkeys=CSL.getSortKeys.call(this.state,this.state.retrieveItem(key),"bibliography_sort"))}},CSL.Registry.prototype.sorttokens=function(){this.reflist.sort(this.sorter.compareKeys)},CSL.Registry.Comparifier=function(state,keyset){var sort_directions,len,pos,compareKeys,sortCompare=CSL.getSortCompare(state.opt["default-locale-sort"]);sort_directions=state[keyset].opt.sort_directions,this.compareKeys=function(a,b){for(len=a.sortkeys?a.sortkeys.length:0,pos=0;pos<len;pos+=1){var cmp=0;if(0<(cmp=a.sortkeys[pos]===b.sortkeys[pos]?0:"undefined"==typeof a.sortkeys[pos]?sort_directions[pos][1]:"undefined"==typeof b.sortkeys[pos]?sort_directions[pos][0]:sortCompare(a.sortkeys[pos],b.sortkeys[pos])))return sort_directions[pos][1];if(0>cmp)return sort_directions[pos][0]}return a.seq>b.seq?1:a.seq<b.seq?-1:0},compareKeys=this.compareKeys,this.compareCompositeKeys=function(a,b){return compareKeys(a[1],b[1])}},CSL.Registry.prototype.compareRegistryTokens=function(a,b){return a.seq>b.seq?1:a.seq<b.seq?-1:0},CSL.Registry.prototype.registerAmbigToken=function(akey,id,ambig_config){if(this.registry[id]&&this.registry[id].disambig&&this.registry[id].disambig.names)for(var i=0,ilen=ambig_config.names.length;i<ilen;i+=1){if(ambig_config.names[i]!==this.registry[id].disambig.names[i])this.state.tmp.taintedItemIDs[id]=!0;else if(ambig_config.givens[i])for(var j=0,jlen=ambig_config.givens[i].length;j<jlen;j+=1){ambig_config.givens[i][j]!==this.registry[id].disambig.givens[i][j]&&(this.state.tmp.taintedItemIDs[id]=!0)}}this.ambigcites[akey]||(this.ambigcites[akey]=[]),-1===this.ambigcites[akey].indexOf(""+id)&&this.ambigcites[akey].push(""+id),this.registry[id].ambig=akey;this.registry[id].disambig=CSL.cloneAmbigConfig(ambig_config)},CSL.getSortKeys=function(Item,key_type){var area,root,extension,strip_prepositions,len,pos;for(area=this.tmp.area,root=this.tmp.root,extension=this.tmp.extension,strip_prepositions=CSL.Util.Sort.strip_prepositions,this.tmp.area=key_type,this.tmp.root=key_type.indexOf("_")>-1?key_type.slice(0,-5):key_type,this.tmp.extension="_sort",this.tmp.disambig_override=!0,this.tmp.disambig_request=!1,this.parallel.use_parallels=(!0===this.parallel.use_parallels||null===this.parallel.use_parallels)&&null,this.tmp.suppress_decorations=!0,CSL.getCite.call(this,Item),this.tmp.suppress_decorations=!1,this.parallel.use_parallels=null===this.parallel.use_parallels,this.tmp.disambig_override=!1,len=this[key_type].keys.length,pos=0;pos<len;pos+=1)this[key_type].keys[pos]=strip_prepositions(this[key_type].keys[pos]);return this.tmp.area=area,this.tmp.root=root,this.tmp.extension=extension,this[key_type].keys},module.exports=CSL,CSL.Registry.NameReg=function(state){var pkey,ikey,skey,dagopt,gdropt,items,strip_periods,set_keys,evalname,delitems,addname,myitems;this.state=state,this.namereg={},this.nameind={},this.nameindpkeys={},this.itemkeyreg={},strip_periods=function(str){return str||(str=""),str.replace(/\./g," ").replace(/\s+/g," ").replace(/\s+$/,"")},set_keys=function(state,itemid,nameobj){pkey=strip_periods(nameobj.family);var m=(skey=strip_periods(nameobj.given)).match(/[,\!]* ([^,]+)$/);m&&m[1]===m[1].toLowerCase()&&(skey=skey.replace(/[,\!]* [^,]+$/,"")),ikey=CSL.Util.Names.initializeWith(state,skey,"%s"),"by-cite"===state.citation.opt["givenname-disambiguation-rule"]&&(pkey=""+itemid+pkey)},evalname=function(item_id,nameobj,namenum,request_base,form,initials){var param;if("bibliography"===state.tmp.area.slice(0,12)&&!form)return"string"==typeof initials?1:2;nameobj=state.nameOutput.getName(nameobj,"locale-translit",!0).name,set_keys(this.state,""+item_id,nameobj),param=2,dagopt=state.opt["disambiguate-add-givenname"];var gdropt_orig=gdropt=state.citation.opt["givenname-disambiguation-rule"];return"by-cite"===gdropt&&(gdropt="all-names"),"short"===form?param=0:"string"==typeof initials&&(param=1),"undefined"==typeof this.namereg[pkey]||"undefined"==typeof this.namereg[pkey].ikey[ikey]?param:"by-cite"===gdropt_orig&&param<=request_base?request_base:dagopt?"string"==typeof gdropt&&"primary-name"===gdropt.slice(0,12)&&namenum>0?param:(gdropt&&"all-names"!==gdropt&&"primary-name"!==gdropt?"all-names-with-initials"!==gdropt&&"primary-name-with-initials"!==gdropt||(param=this.namereg[pkey].count>1?1:0):(this.namereg[pkey].count>1&&(param=1),(this.namereg[pkey].ikey&&this.namereg[pkey].ikey[ikey].count>1||this.namereg[pkey].count>1&&"string"!=typeof initials)&&(param=2)),state.registry.registry[item_id]?param:"short"==form?0:"string"==typeof initials?1:void 0):param},delitems=function(ids){var pos,len,posB,id,fullkey;"string"!=typeof ids&&"number"!=typeof ids||(ids=[""+ids]);for(len=ids.length,pos=0;pos<len;pos+=1)if(id=""+ids[pos],this.nameind[id]){for(fullkey in this.nameind[id])if(this.nameind[id].hasOwnProperty(fullkey)){var key=fullkey.split("::");if(pkey=key[0],ikey=key[1],skey=key[2],"undefined"==typeof this.namereg[pkey])continue;if(items=this.namereg[pkey].items,skey&&this.namereg[pkey].ikey[ikey]&&this.namereg[pkey].ikey[ikey].skey[skey]&&((posB=(myitems=this.namereg[pkey].ikey[ikey].skey[skey].items).indexOf(""+id))>-1&&(this.namereg[pkey].ikey[ikey].skey[skey].items=myitems.slice(0,posB).concat(myitems.slice([posB+1]))),0===this.namereg[pkey].ikey[ikey].skey[skey].items.length&&(delete this.namereg[pkey].ikey[ikey].skey[skey],this.namereg[pkey].ikey[ikey].count+=-1,this.namereg[pkey].ikey[ikey].count<2)))for(var i=0,ilen=this.namereg[pkey].ikey[ikey].items.length;i<ilen;i+=1)state.tmp.taintedItemIDs[this.namereg[pkey].ikey[ikey].items[i]]=!0;if(ikey&&this.namereg[pkey].ikey[ikey]&&((posB=this.namereg[pkey].ikey[ikey].items.indexOf(""+id))>-1&&(items=this.namereg[pkey].ikey[ikey].items.slice(),this.namereg[pkey].ikey[ikey].items=items.slice(0,posB).concat(items.slice([posB+1]))),0===this.namereg[pkey].ikey[ikey].items.length&&(delete this.namereg[pkey].ikey[ikey],this.namereg[pkey].count+=-1,this.namereg[pkey].count<2)))for(i=0,ilen=this.namereg[pkey].items.length;i<ilen;i+=1)state.tmp.taintedItemIDs[this.namereg[pkey].items[i]]=!0;pkey&&((posB=this.namereg[pkey].items.indexOf(""+id))>-1&&(items=this.namereg[pkey].items.slice(),this.namereg[pkey].items=items.slice(0,posB).concat(items.slice([posB+1],items.length))),this.namereg[pkey].items.length<2&&delete this.namereg[pkey]),delete this.nameind[id][fullkey]}delete this.nameind[id],delete this.nameindpkeys[id]}return{}},addname=function(item_id,nameobj,pos){if(nameobj=state.nameOutput.getName(nameobj,"locale-translit",!0).name,!state.citation.opt["givenname-disambiguation-rule"]||"primary-"!==state.citation.opt["givenname-disambiguation-rule"].slice(0,8)||0===pos){if(set_keys(this.state,""+item_id,nameobj),pkey&&("undefined"==typeof this.namereg[pkey]?(this.namereg[pkey]={},this.namereg[pkey].count=0,this.namereg[pkey].ikey={},this.namereg[pkey].items=[item_id]):-1===this.namereg[pkey].items.indexOf(item_id)&&this.namereg[pkey].items.push(item_id)),pkey&&ikey)if("undefined"==typeof this.namereg[pkey].ikey[ikey]){if(this.namereg[pkey].ikey[ikey]={},this.namereg[pkey].ikey[ikey].count=0,this.namereg[pkey].ikey[ikey].skey={},this.namereg[pkey].ikey[ikey].items=[item_id],this.namereg[pkey].count+=1,2===this.namereg[pkey].count)for(var i=0,ilen=this.namereg[pkey].items.length;i<ilen;i+=1)state.tmp.taintedItemIDs[this.namereg[pkey].items[i]]=!0}else-1===this.namereg[pkey].ikey[ikey].items.indexOf(item_id)&&this.namereg[pkey].ikey[ikey].items.push(item_id);if(pkey&&ikey&&skey)if("undefined"==typeof this.namereg[pkey].ikey[ikey].skey[skey]){if(this.namereg[pkey].ikey[ikey].skey[skey]={},this.namereg[pkey].ikey[ikey].skey[skey].items=[item_id],this.namereg[pkey].ikey[ikey].count+=1,2===this.namereg[pkey].ikey[ikey].count)for(i=0,ilen=this.namereg[pkey].ikey[ikey].items.length;i<ilen;i+=1)state.tmp.taintedItemIDs[this.namereg[pkey].ikey[ikey].items[i]]=!0}else-1===this.namereg[pkey].ikey[ikey].skey[skey].items.indexOf(item_id)&&this.namereg[pkey].ikey[ikey].skey[skey].items.push(item_id);"undefined"==typeof this.nameind[item_id]&&(this.nameind[item_id]={},this.nameindpkeys[item_id]={}),pkey&&(this.nameind[item_id][pkey+"::"+ikey+"::"+skey]=!0,this.nameindpkeys[item_id][pkey]=this.namereg[pkey])}},this.addname=addname,this.delitems=delitems,this.evalname=evalname},module.exports=CSL,CSL.Registry.CitationReg=function(state){this.citationById={},this.citationByIndex=[]},module.exports=CSL,CSL.Disambiguation=function(state){this.state=state,this.sys=this.state.sys,this.registry=state.registry.registry,this.ambigcites=state.registry.ambigcites,this.configModes(),this.debug=!1},CSL.Disambiguation.prototype.run=function(akey){this.modes.length&&(this.akey=akey,this.initVars(akey)&&this.runDisambig())},CSL.Disambiguation.prototype.runDisambig=function(){var ismax;for(this.initGivens=!0;this.lists.length;){for(this.gnameset=0,this.gname=0,this.clashes=[1,0];this.lists[0][1].length;){this.listpos=0,this.base||(this.base=this.lists[0][0]);ismax=this.incrementDisambig(),this.scanItems(this.lists[0]),this.evalScan(ismax)}this.lists=this.lists.slice(1)}},CSL.Disambiguation.prototype.scanItems=function(list){var otherItem;this.Item=list[1][0],this.ItemCite=CSL.getAmbiguousCite.call(this.state,this.Item,this.base,!0),this.scanlist=list[1],this.partners=[],this.partners.push(this.Item),this.nonpartners=[];for(var clashes=0,pos=1,len=list[1].length;pos<len;pos+=1){otherItem=list[1][pos];var otherItemCite=CSL.getAmbiguousCite.call(this.state,otherItem,this.base,!0);this.ItemCite===otherItemCite?(clashes+=1,this.partners.push(otherItem)):this.nonpartners.push(otherItem)}this.clashes[0]=this.clashes[1],this.clashes[1]=clashes},CSL.Disambiguation.prototype.evalScan=function(maxed){this[this.modes[this.modeindex]](maxed),maxed&&(this.modeindex<this.modes.length-1?this.modeindex+=1:this.lists[this.listpos+1]=[this.base,[]])},CSL.Disambiguation.prototype.disNames=function(ismax){if(0===this.clashes[1]&&1===this.nonpartners.length)this.captureStepToBase(),this.state.registry.registerAmbigToken(this.akey,""+this.nonpartners[0].id,this.betterbase),this.state.registry.registerAmbigToken(this.akey,""+this.partners[0].id,this.betterbase),this.lists[this.listpos]=[this.betterbase,[]];else if(0===this.clashes[1])this.captureStepToBase(),this.state.registry.registerAmbigToken(this.akey,""+this.partners[0].id,this.betterbase),this.lists[this.listpos]=[this.betterbase,this.nonpartners],this.nonpartners.length&&(this.initGivens=!0);else if(1===this.nonpartners.length)this.captureStepToBase(),this.state.registry.registerAmbigToken(this.akey,""+this.nonpartners[0].id,this.betterbase),this.lists[this.listpos]=[this.betterbase,this.partners];else if(this.clashes[1]<this.clashes[0])this.captureStepToBase(),this.lists[this.listpos]=[this.betterbase,this.partners],this.lists.push([this.betterbase,this.nonpartners]);else if(ismax&&(this.lists[this.listpos]=[this.betterbase,this.nonpartners],this.lists.push([this.betterbase,this.partners]),this.modeindex===this.modes.length-1)){for(var i=0,ilen=this.partners.length;i<ilen;i+=1)this.state.registry.registerAmbigToken(this.akey,""+this.partners[i].id,this.betterbase);this.lists[this.listpos]=[this.betterbase,[]]}},CSL.Disambiguation.prototype.disExtraText=function(){var done=!1;if(0===this.clashes[1]&&this.nonpartners.length<2&&(done=!0),done||this.base.disambiguate&&this.state.tmp.disambiguate_count===this.state.tmp.disambiguate_maxMax){if(done||this.state.tmp.disambiguate_count===this.state.tmp.disambiguate_maxMax)if(done||this.modeindex===this.modes.length-1){var base=this.lists[this.listpos][0];for(i=0,ilen=this.lists[this.listpos][1].length;i<ilen;i+=1)this.state.tmp.taintedItemIDs[this.lists[this.listpos][1][i].id]=!0,this.state.registry.registerAmbigToken(this.akey,""+this.lists[this.listpos][1][i].id,base);this.lists[this.listpos]=[this.betterbase,[]]}else{this.modeindex=this.modes.length-1,(base=this.lists[this.listpos][0]).disambiguate=!0;for(i=0,ilen=this.lists[this.listpos][1].length;i<ilen;i+=1)this.state.tmp.taintedItemIDs[this.lists[this.listpos][1][i].id]=!0,this.state.registry.registerAmbigToken(this.akey,""+this.lists[this.listpos][1][i].id,base)}}else if(this.modeindex=0,this.base.disambiguate=this.state.tmp.disambiguate_count,this.betterbase.disambiguate=this.state.tmp.disambiguate_count,this.base.disambiguate)this.disNames();else{this.initGivens=!0,this.base.disambiguate=1;for(var i=0,ilen=this.lists[this.listpos][1].length;i<ilen;i+=1)this.state.tmp.taintedItemIDs[this.lists[this.listpos][1][i].id]=!0}},CSL.Disambiguation.prototype.disYears=function(){var tokens;tokens=[];var base=this.lists[this.listpos][0];if(this.clashes[1])for(var i=0,ilen=this.state.registry.mylist.length;i<ilen;i+=1)for(var origid=this.state.registry.mylist[i],j=0,jlen=this.lists[this.listpos][1].length;j<jlen;j+=1){var token;if((token=this.lists[this.listpos][1][j]).id==origid){tokens.push(this.registry[token.id]);break}}tokens.sort(this.state.registry.sorter.compareKeys);for(var pos=0,len=tokens.length;pos<len;pos+=1){base.year_suffix=""+pos;var oldBase=this.state.registry.registry[tokens[pos].id].disambig;this.state.registry.registerAmbigToken(this.akey,""+tokens[pos].id,base),CSL.ambigConfigDiff(oldBase,base)&&(this.state.tmp.taintedItemIDs[tokens[pos].id]=!0)}this.lists[this.listpos]=[this.betterbase,[]]},CSL.Disambiguation.prototype.incrementDisambig=function(){if(this.initGivens)return this.initGivens=!1,!1;var maxed=!1,increment_names=!0;if("disNames"===this.modes[this.modeindex]){increment_names=!1,"number"!=typeof this.givensMax&&(increment_names=!0);var increment_namesets=!1;if("number"!=typeof this.namesMax&&(increment_namesets=!0),"number"==typeof this.givensMax&&(this.base.givens.length&&this.base.givens[this.gnameset][this.gname]<this.givensMax?this.base.givens[this.gnameset][this.gname]+=1:increment_names=!0),"number"==typeof this.namesMax&&increment_names&&(this.state.opt["disambiguate-add-names"]?(increment_namesets=!1,this.gname<this.namesMax?(this.base.names[this.gnameset]+=1,this.gname+=1):increment_namesets=!0):increment_namesets=!0),"number"==typeof this.namesetsMax&&increment_namesets)if(this.gnameset<this.namesetsMax)this.gnameset+=1,this.base.names[this.gnameset]=1,this.gname=0;else;"number"==typeof this.namesetsMax&&-1!==this.namesetsMax&&this.gnameset!==this.namesetsMax||this.state.opt["disambiguate-add-names"]&&"number"==typeof this.namesMax&&this.gname!==this.namesMax||"number"==typeof this.givensMax&&"undefined"!=typeof this.base.givens[this.gnameset]&&"undefined"!=typeof this.base.givens[this.gnameset][this.gname]&&this.base.givens[this.gnameset][this.gname]!==this.givensMax||(maxed=!0)}else"disExtraText"===this.modes[this.modeindex]&&(this.base.disambiguate+=1,this.betterbase.disambiguate+=1);return maxed},CSL.Disambiguation.prototype.initVars=function(akey){var myIds,myItemBundles,myItems;if(this.lists=[],this.base=!1,this.betterbase=!1,this.akey=akey,this.maxNamesByItemId={},myItemBundles=[],!(myIds=this.ambigcites[akey])||!myIds.length)return!1;var myItem=this.state.retrieveItem(""+myIds[0]);if(this.getCiteData(myItem),this.base=CSL.getAmbigConfig.call(this.state),myIds&&myIds.length>1){myItemBundles.push([this.maxNamesByItemId[myItem.id],myItem]);for(var i=1,ilen=myIds.length;i<ilen;i+=1)myItem=this.state.retrieveItem(""+myIds[i]),this.getCiteData(myItem,this.base),myItemBundles.push([this.maxNamesByItemId[myItem.id],myItem]);myItemBundles.sort(function(a,b){return a[0]>b[0]?1:a[0]<b[0]?-1:a[1].id>b[1].id?1:a[1].id<b[1].id?-1:0}),myItems=[];for(var i=0,ilen=myItemBundles.length;i<ilen;i+=1)myItems.push(myItemBundles[i][1]);this.lists.push([this.base,myItems]),this.Item=this.lists[0][1][0]}else this.Item=this.state.retrieveItem(""+myIds[0]);return this.modeindex=0,this.state.citation.opt["disambiguate-add-names"],this.namesMax=this.maxNamesByItemId[this.Item.id][0],this.padBase(this.base),this.padBase(this.betterbase),this.base.year_suffix=!1,this.base.disambiguate=!1,this.betterbase.year_suffix=!1,this.betterbase.disambiguate=!1,"by-cite"===this.state.citation.opt["givenname-disambiguation-rule"]&&this.state.opt["disambiguate-add-givenname"]&&(this.givensMax=2),!0},CSL.Disambiguation.prototype.padBase=function(base){for(var i=0,ilen=base.names.length;i<ilen;i+=1){base.givens[i]||(base.givens[i]=[]);for(var j=0,jlen=base.names[i];j<jlen;j+=1)base.givens[i][j]||(base.givens[i][j]=0)}},CSL.Disambiguation.prototype.configModes=function(){var dagopt,gdropt;this.modes=[],dagopt=this.state.opt["disambiguate-add-givenname"],gdropt=this.state.citation.opt["givenname-disambiguation-rule"],(this.state.opt["disambiguate-add-names"]||dagopt&&"by-cite"===gdropt)&&this.modes.push("disNames"),this.state.opt.has_disambiguate&&this.modes.push("disExtraText"),this.state.opt["disambiguate-add-year-suffix"]&&this.modes.push("disYears")},CSL.Disambiguation.prototype.getCiteData=function(Item,base){if(!this.maxNamesByItemId[Item.id]){CSL.getAmbiguousCite.call(this.state,Item,base),base=CSL.getAmbigConfig.call(this.state),this.maxNamesByItemId[Item.id]=CSL.getMaxVals.call(this.state),this.state.registry.registry[Item.id].disambig.givens=this.state.tmp.disambig_settings.givens.slice();for(var i=0,ilen=this.state.registry.registry[Item.id].disambig.givens.length;i<ilen;i+=1)this.state.registry.registry[Item.id].disambig.givens[i]=this.state.tmp.disambig_settings.givens[i].slice();this.namesetsMax=this.state.registry.registry[Item.id].disambig.names.length-1,this.base||(this.base=base,this.betterbase=CSL.cloneAmbigConfig(base)),base.names.length<this.base.names.length&&(this.base=base);for(i=0,ilen=base.names.length;i<ilen;i+=1)base.names[i]>this.base.names[i]&&(this.base.givens[i]=base.givens[i].slice(),this.base.names[i]=base.names[i],this.betterbase.names=this.base.names.slice(),this.betterbase.givens=this.base.givens.slice(),this.padBase(this.base),this.padBase(this.betterbase));this.betterbase.givens=this.base.givens.slice();for(var j=0,jlen=this.base.givens.length;j<jlen;j+=1)this.betterbase.givens[j]=this.base.givens[j].slice()}},CSL.Disambiguation.prototype.captureStepToBase=function(){"by-cite"===this.state.citation.opt["givenname-disambiguation-rule"]&&this.base.givens&&this.base.givens.length&&"undefined"!=typeof this.base.givens[this.gnameset][this.gname]&&(this.betterbase.givens[this.gnameset][this.gname]=this.base.givens[this.gnameset][this.gname]),this.betterbase.names[this.gnameset]=this.base.names[this.gnameset]},module.exports=CSL,CSL.Engine.prototype.getJurisdictionList=function(jurisdiction){for(var jurisdictionList=[],jurisdictionElems=jurisdiction.split(":"),j=jurisdictionElems.length;j>0;j--)jurisdictionList.push(jurisdictionElems.slice(0,j).join(":"));return-1===jurisdictionList.indexOf("us")&&jurisdictionList.push("us"),jurisdictionList},CSL.Engine.prototype.retrieveAllStyleModules=function(jurisdictionList){for(var ret={},preferences=this.locale[this.opt.lang].opts["jurisdiction-preference"],i=(preferences=[""].concat(preferences=preferences||[])).length-1;i>-1;i--)for(var preference=preferences[i],j=0,jlen=jurisdictionList.length;j<jlen;j++){var jurisdiction=jurisdictionList[j];if(!this.opt.jurisdictions_seen[jurisdiction]){var res=this.sys.retrieveStyleModule(jurisdiction,preference);(!res&&!preference||res)&&(this.opt.jurisdictions_seen[jurisdiction]=!0),res&&(ret[jurisdiction]=res)}}return ret},module.exports=CSL,CSL.ParticleList=[["'s",always_non_dropping_1=[[null,[0,1]]]],["'s-",always_non_dropping_1],["'t",always_non_dropping_1],["a",always_non_dropping_1],["aan 't",always_non_dropping_2=[[null,[0,2]]]],["aan de",always_non_dropping_2],["aan den",always_non_dropping_2],["aan der",always_non_dropping_2],["aan het",always_non_dropping_2],["aan t",always_non_dropping_2],["aan",always_non_dropping_1],["ad-",either_1=[[null,[0,1]],[[0,1],null]]],["adh-",either_1],["af",either_1],["al",either_1],["al-",either_1],["am de",always_non_dropping_2],["am",always_non_dropping_1],["an-",either_1],["ar-",either_1],["as-",either_1],["ash-",either_1],["at-",either_1],["ath-",either_1],["auf dem",either_2_dropping_best=[[[0,2],null],[null,[0,2]]]],["auf den",either_2_dropping_best],["auf der",either_2_dropping_best],["auf ter",always_non_dropping_2],["auf",either_1_dropping_best=[[[0,1],null],[null,[0,1]]]],["aus 'm",either_2_dropping_best],["aus dem",either_2_dropping_best],["aus den",either_2_dropping_best],["aus der",either_2_dropping_best],["aus m",either_2_dropping_best],["aus",either_1_dropping_best],["aus'm",either_2_dropping_best],["az-",either_1],["a\u0161-",either_1],["a\u1e0d-",either_1],["a\u1e0f-",either_1],["a\u1e63-",either_1],["a\u1e6d-",either_1],["a\u1e6f-",either_1],["a\u1e93-",either_1],["ben",always_non_dropping_1],["bij 't",always_non_dropping_2],["bij de",always_non_dropping_2],["bij den",always_non_dropping_2],["bij het",always_non_dropping_2],["bij t",always_non_dropping_2],["bij",always_non_dropping_1],["bin",always_non_dropping_1],["boven d",always_non_dropping_2],["boven d'",always_non_dropping_2],["d",always_non_dropping_1],["d'",either_1],["da",either_1],["dal",always_non_dropping_1],["dal'",always_non_dropping_1],["dall'",always_non_dropping_1],["dalla",always_non_dropping_1],["das",either_1],["de die le",always_non_dropping_3=[[null,[0,3]]]],["de die",always_non_dropping_2],["de l",always_non_dropping_2],["de l'",always_non_dropping_2],["de la",non_dropping_2_alt_dropping_1_non_dropping_1=[[null,[0,2]],[[0,1],[1,2]]]],["de las",non_dropping_2_alt_dropping_1_non_dropping_1],["de le",always_non_dropping_2],["de li",either_2=[[null,[0,2]],[[0,2],null]]],["de van der",always_non_dropping_3],["de",either_1],["de'",either_1],["deca",always_non_dropping_1],["degli",either_1],["dei",either_1],["del",either_1],["dela",always_dropping_1=[[[0,1],null]]],["dell'",either_1],["della",either_1],["delle",either_1],["dello",either_1],["den",either_1],["der",either_1],["des",either_1],["di",either_1],["die le",always_non_dropping_2],["do",always_non_dropping_1],["don",always_non_dropping_1],["dos",either_1],["du",either_1],["ed-",either_1],["edh-",either_1],["el",either_1],["el-",either_1],["en-",either_1],["er-",either_1],["es-",either_1],["esh-",either_1],["et-",either_1],["eth-",either_1],["ez-",either_1],["e\u0161-",either_1],["e\u1e0d-",either_1],["e\u1e0f-",either_1],["e\u1e63-",either_1],["e\u1e6d-",either_1],["e\u1e6f-",either_1],["e\u1e93-",either_1],["het",always_non_dropping_1],["i",always_non_dropping_1],["il",always_dropping_1],["im",always_non_dropping_1],["in 't",always_non_dropping_2],["in de",always_non_dropping_2],["in den",always_non_dropping_2],["in der",either_2],["in het",always_non_dropping_2],["in t",always_non_dropping_2],["in",always_non_dropping_1],["l",always_non_dropping_1],["l'",always_non_dropping_1],["la",always_non_dropping_1],["las",always_non_dropping_1],["le",always_non_dropping_1],["les",either_1],["lo",either_1],["los",always_non_dropping_1],["lou",always_non_dropping_1],["of",always_non_dropping_1],["onder 't",always_non_dropping_2],["onder de",always_non_dropping_2],["onder den",always_non_dropping_2],["onder het",always_non_dropping_2],["onder t",always_non_dropping_2],["onder",always_non_dropping_1],["op 't",always_non_dropping_2],["op de",either_2],["op den",always_non_dropping_2],["op der",always_non_dropping_2],["op gen",always_non_dropping_2],["op het",always_non_dropping_2],["op t",always_non_dropping_2],["op ten",always_non_dropping_2],["op",always_non_dropping_1],["over 't",always_non_dropping_2],["over de",always_non_dropping_2],["over den",always_non_dropping_2],["over het",always_non_dropping_2],["over t",always_non_dropping_2],["over",always_non_dropping_1],["s",always_non_dropping_1],["s'",always_non_dropping_1],["sen",always_dropping_1],["t",always_non_dropping_1],["te",always_non_dropping_1],["ten",always_non_dropping_1],["ter",always_non_dropping_1],["tho",always_non_dropping_1],["thoe",always_non_dropping_1],["thor",always_non_dropping_1],["to",always_non_dropping_1],["toe",always_non_dropping_1],["tot",always_non_dropping_1],["uijt 't",always_non_dropping_2],["uijt de",always_non_dropping_2],["uijt den",always_non_dropping_2],["uijt te de",always_non_dropping_3],["uijt ten",always_non_dropping_2],["uijt",always_non_dropping_1],["uit 't",always_non_dropping_2],["uit de",always_non_dropping_2],["uit den",always_non_dropping_2],["uit het",always_non_dropping_2],["uit t",always_non_dropping_2],["uit te de",always_non_dropping_3],["uit ten",always_non_dropping_2],["uit",always_non_dropping_1],["unter",always_non_dropping_1],["v",always_non_dropping_1],["v.",always_non_dropping_1],["v.d.",always_non_dropping_1],["van 't",always_non_dropping_2],["van de l",always_non_dropping_3],["van de l'",always_non_dropping_3],["van de",always_non_dropping_2],["van de",always_non_dropping_2],["van den",always_non_dropping_2],["van der",always_non_dropping_2],["van gen",always_non_dropping_2],["van het",always_non_dropping_2],["van la",always_non_dropping_2],["van t",always_non_dropping_2],["van ter",always_non_dropping_2],["van van de",always_non_dropping_3],["van",either_1],["vander",always_non_dropping_1],["vd",always_non_dropping_1],["ver",always_non_dropping_1],["vom und zum",[[[0,3],null]]],["vom",either_1],["von 't",always_non_dropping_2],["von dem",either_2_dropping_best],["von den",either_2_dropping_best],["von der",either_2_dropping_best],["von t",always_non_dropping_2],["von und zu",[[[0,3],null],[null,[0,3]]]],["von zu",either_2_dropping_best],["von",either_1_dropping_best],["voor 't",always_non_dropping_2],["voor de",always_non_dropping_2],["voor den",always_non_dropping_2],["voor in 't",always_non_dropping_3],["voor in t",always_non_dropping_3],["voor",always_non_dropping_1],["vor der",either_2_dropping_best],["vor",either_1_dropping_best],["z",always_dropping_1],["ze",always_dropping_1],["zu",either_1_dropping_best],["zum",either_1],["zur",either_1]],CSL.parseParticles=function(){function splitParticles(nameValue,firstNameFlag,caseOverride){var origNameValue=nameValue;nameValue=caseOverride?nameValue.toLowerCase():nameValue;var rex,particleList=[];firstNameFlag?(nameValue=nameValue.split("").reverse().join(""),rex=CSL.PARTICLE_GIVEN_REGEXP):rex=CSL.PARTICLE_FAMILY_REGEXP;for(var m=nameValue.match(rex);m;){var firstChar,m1=firstNameFlag?m[1].split("").reverse().join(""):m[1],hasParticle=!!(firstChar=!!(firstChar=!!m&&m1)&&m1.replace(/^[-\'\u02bb\u2019\s]*(.).*$/,"$1"))&&firstChar.toUpperCase()!==firstChar;if(!hasParticle)break;firstNameFlag?(particleList.push(origNameValue.slice(-1*m1.length)),origNameValue=origNameValue.slice(0,-1*m1.length)):(particleList.push(origNameValue.slice(0,m1.length)),origNameValue=origNameValue.slice(m1.length)),m=(nameValue=m[2]).match(rex)}if(firstNameFlag){nameValue=nameValue.split("").reverse().join(""),particleList.reverse();for(var i=1,ilen=particleList.length;i<ilen;i++)" "==particleList[i].slice(0,1)&&(particleList[i-1]+=" ");for(i=0,ilen=particleList.length;i<ilen;i++)" "==particleList[i].slice(0,1)&&(particleList[i]=particleList[i].slice(1));nameValue=origNameValue.slice(0,nameValue.length)}else nameValue=origNameValue.slice(-1*nameValue.length);return[hasParticle,nameValue,particleList]}return function(nameObj){(res=splitParticles(nameObj.family))[0];var lastNameValue=res[1],lastParticleList=res[2];nameObj.family=lastNameValue;var str,lastChar,nonDroppingParticle=(str=lastParticleList.join(""),lastChar=str.slice(-1),str=str.trim()," "===lastChar&&["'","\u2019"].indexOf(str.slice(-1))>-1&&(str+=" "),str);nonDroppingParticle&&(nameObj["non-dropping-particle"]=nonDroppingParticle),function(nameObj){if(!nameObj.suffix&&nameObj.given){var m=nameObj.given.match(/(\s*,!*\s*)/);if(m){var idx=nameObj.given.indexOf(m[1]),possible_suffix=nameObj.given.slice(idx+m[1].length),possible_comma=nameObj.given.slice(idx,idx+m[1].length).replace(/\s*/g,"");"et al"!==possible_suffix.replace(/\./g,"")||nameObj["dropping-particle"]?(2===possible_comma.length&&(nameObj["comma-suffix"]=!0),nameObj.suffix=possible_suffix):(nameObj["dropping-particle"]=possible_suffix,nameObj["comma-dropping-particle"]=","),nameObj.given=nameObj.given.slice(0,idx)}}}(nameObj);(res=splitParticles(nameObj.given,!0))[0];var res,firstNameValue=res[1],firstParticleList=res[2];nameObj.given=firstNameValue;var droppingParticle=firstParticleList.join("").trim();droppingParticle&&(nameObj["dropping-particle"]=droppingParticle)}}(),module.exports=CSL},{}],325:[function(require,module,exports){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}var Response=function(){function Response(statusCode,headers,body,url){if("number"!=typeof statusCode)throw new TypeError("statusCode must be a number but was "+_typeof(statusCode));if(null===headers)throw new TypeError("headers cannot be null");if("object"!==_typeof(headers))throw new TypeError("headers must be an object but was "+_typeof(headers));this.statusCode=statusCode;var headersToLowerCase={};for(var key in headers)headersToLowerCase[key.toLowerCase()]=headers[key];this.headers=headersToLowerCase,this.body=body,this.url=url}return Response.prototype.isError=function(){return 0===this.statusCode||this.statusCode>=400},Response.prototype.getBody=function(encoding){var err;if(0===this.statusCode)throw(err=new Error("This request to "+this.url+" resulted in a status code of 0. This usually indicates some kind of network error in a browser (e.g. CORS not being set up or the DNS failing to resolve):\n"+this.body.toString())).statusCode=this.statusCode,err.headers=this.headers,err.body=this.body,err.url=this.url,err;if(this.statusCode>=300)throw(err=new Error("Server responded to "+this.url+" with status code "+this.statusCode+":\n"+this.body.toString())).statusCode=this.statusCode,err.headers=this.headers,err.body=this.body,err.url=this.url,err;return encoding&&"string"!=typeof this.body?this.body.toString(encoding):this.body},Response}();module.exports=Response},{}],326:[function(require,module,exports){require("whatwg-fetch"),module.exports=self.fetch.bind(self)},{"whatwg-fetch":327}],327:[function(require,module,exports){!function(self){"use strict";if(!self.fetch){var support={searchParams:"URLSearchParams"in self,iterable:"Symbol"in self&&"iterator"in Symbol,blob:"FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in self,arrayBuffer:"ArrayBuffer"in self};if(support.arrayBuffer)var viewClasses=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],isDataView=function(obj){return obj&&DataView.prototype.isPrototypeOf(obj)},isArrayBufferView=ArrayBuffer.isView||function(obj){return obj&&viewClasses.indexOf(Object.prototype.toString.call(obj))>-1};Headers.prototype.append=function(name,value){name=normalizeName(name),value=normalizeValue(value);var oldValue=this.map[name];this.map[name]=oldValue?oldValue+","+value:value},Headers.prototype["delete"]=function(name){delete this.map[normalizeName(name)]},Headers.prototype.get=function(name){return name=normalizeName(name),this.has(name)?this.map[name]:null},Headers.prototype.has=function(name){return this.map.hasOwnProperty(normalizeName(name))},Headers.prototype.set=function(name,value){this.map[normalizeName(name)]=normalizeValue(value)},Headers.prototype.forEach=function(callback,thisArg){for(var name in this.map)this.map.hasOwnProperty(name)&&callback.call(thisArg,this.map[name],name,this)},Headers.prototype.keys=function(){var items=[];return this.forEach(function(value,name){items.push(name)}),iteratorFor(items)},Headers.prototype.values=function(){var items=[];return this.forEach(function(value){items.push(value)}),iteratorFor(items)},Headers.prototype.entries=function(){var items=[];return this.forEach(function(value,name){items.push([name,value])}),iteratorFor(items)},support.iterable&&(Headers.prototype[Symbol.iterator]=Headers.prototype.entries);var methods=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];Request.prototype.clone=function(){return new Request(this,{body:this._bodyInit})},Body.call(Request.prototype),Body.call(Response.prototype),Response.prototype.clone=function(){return new Response(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new Headers(this.headers),url:this.url})},Response.error=function(){var response=new Response(null,{status:0,statusText:""});return response.type="error",response};var redirectStatuses=[301,302,303,307,308];Response.redirect=function(url,status){if(-1===redirectStatuses.indexOf(status))throw new RangeError("Invalid status code");return new Response(null,{status:status,headers:{location:url}})},self.Headers=Headers,self.Request=Request,self.Response=Response,self.fetch=function(input,init){return new Promise(function(resolve,reject){var request=new Request(input,init),xhr=new XMLHttpRequest;xhr.onload=function(){var rawHeaders,headers,options={status:xhr.status,statusText:xhr.statusText,headers:(rawHeaders=xhr.getAllResponseHeaders()||"",headers=new Headers,rawHeaders.split(/\r?\n/).forEach(function(line){var parts=line.split(":"),key=parts.shift().trim();if(key){var value=parts.join(":").trim();headers.append(key,value)}}),headers)};options.url="responseURL"in xhr?xhr.responseURL:options.headers.get("X-Request-URL");var body="response"in xhr?xhr.response:xhr.responseText;resolve(new Response(body,options))},xhr.onerror=function(){reject(new TypeError("Network request failed"))},xhr.ontimeout=function(){reject(new TypeError("Network request failed"))},xhr.open(request.method,request.url,!0),"include"===request.credentials&&(xhr.withCredentials=!0),"responseType"in xhr&&support.blob&&(xhr.responseType="blob"),request.headers.forEach(function(value,name){xhr.setRequestHeader(name,value)}),xhr.send("undefined"==typeof request._bodyInit?null:request._bodyInit)})},self.fetch.polyfill=!0}function normalizeName(name){if("string"!=typeof name&&(name=String(name)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(name))throw new TypeError("Invalid character in header field name");return name.toLowerCase()}function normalizeValue(value){return"string"!=typeof value&&(value=String(value)),value}function iteratorFor(items){var iterator={next:function(){var value=items.shift();return{done:value===undefined,value:value}}};return support.iterable&&(iterator[Symbol.iterator]=function(){return iterator}),iterator}function Headers(headers){this.map={},headers instanceof Headers?headers.forEach(function(value,name){this.append(name,value)},this):Array.isArray(headers)?headers.forEach(function(header){this.append(header[0],header[1])},this):headers&&Object.getOwnPropertyNames(headers).forEach(function(name){this.append(name,headers[name])},this)}function consumed(body){if(body.bodyUsed)return Promise.reject(new TypeError("Already read"));body.bodyUsed=!0}function fileReaderReady(reader){return new Promise(function(resolve,reject){reader.onload=function(){resolve(reader.result)},reader.onerror=function(){reject(reader.error)}})}function readBlobAsArrayBuffer(blob){var reader=new FileReader,promise=fileReaderReady(reader);return reader.readAsArrayBuffer(blob),promise}function bufferClone(buf){if(buf.slice)return buf.slice(0);var view=new Uint8Array(buf.byteLength);return view.set(new Uint8Array(buf)),view.buffer}function Body(){return this.bodyUsed=!1,this._initBody=function(body){if(this._bodyInit=body,body)if("string"==typeof body)this._bodyText=body;else if(support.blob&&Blob.prototype.isPrototypeOf(body))this._bodyBlob=body;else if(support.formData&&FormData.prototype.isPrototypeOf(body))this._bodyFormData=body;else if(support.searchParams&&URLSearchParams.prototype.isPrototypeOf(body))this._bodyText=body.toString();else if(support.arrayBuffer&&support.blob&&isDataView(body))this._bodyArrayBuffer=bufferClone(body.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!support.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(body)&&!isArrayBufferView(body))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=bufferClone(body)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof body?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):support.searchParams&&URLSearchParams.prototype.isPrototypeOf(body)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},support.blob&&(this.blob=function(){var rejected=consumed(this);if(rejected)return rejected;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?consumed(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(readBlobAsArrayBuffer)}),this.text=function(){var blob,reader,promise,rejected=consumed(this);if(rejected)return rejected;if(this._bodyBlob)return blob=this._bodyBlob,reader=new FileReader,promise=fileReaderReady(reader),reader.readAsText(blob),promise;if(this._bodyArrayBuffer)return Promise.resolve(function(buf){for(var view=new Uint8Array(buf),chars=new Array(view.length),i=0;i<view.length;i++)chars[i]=String.fromCharCode(view[i]);return chars.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},support.formData&&(this.formData=function(){return this.text().then(decode)}),this.json=function(){return this.text().then(JSON.parse)},this}function Request(input,options){var method,upcased,body=(options=options||{}).body;if(input instanceof Request){if(input.bodyUsed)throw new TypeError("Already read");this.url=input.url,this.credentials=input.credentials,options.headers||(this.headers=new Headers(input.headers)),this.method=input.method,this.mode=input.mode,body||null==input._bodyInit||(body=input._bodyInit,input.bodyUsed=!0)}else this.url=String(input);if(this.credentials=options.credentials||this.credentials||"omit",!options.headers&&this.headers||(this.headers=new Headers(options.headers)),this.method=(method=options.method||this.method||"GET",upcased=method.toUpperCase(),methods.indexOf(upcased)>-1?upcased:method),this.mode=options.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&body)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(body)}function decode(body){var form=new FormData;return body.trim().split("&").forEach(function(bytes){if(bytes){var split=bytes.split("="),name=split.shift().replace(/\+/g," "),value=split.join("=").replace(/\+/g," ");form.append(decodeURIComponent(name),decodeURIComponent(value))}}),form}function Response(bodyInit,options){options||(options={}),this.type="default",this.status="status"in options?options.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in options?options.statusText:"OK",this.headers=new Headers(options.headers),this.url=options.url||"",this._initBody(bodyInit)}}("undefined"!=typeof self?self:this)},{}],328:[function(require,module,exports){"use strict";function hasOwnProperty(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)}module.exports=function(qs,sep,eq,options){sep=sep||"&",eq=eq||"=";var obj={};if("string"!=typeof qs||0===qs.length)return obj;var regexp=/\+/g;qs=qs.split(sep);var maxKeys=1e3;options&&"number"==typeof options.maxKeys&&(maxKeys=options.maxKeys);var len=qs.length;maxKeys>0&&len>maxKeys&&(len=maxKeys);for(var i=0;i<len;++i){var kstr,vstr,k,v,x=qs[i].replace(regexp,"%20"),idx=x.indexOf(eq);idx>=0?(kstr=x.substr(0,idx),vstr=x.substr(idx+1)):(kstr=x,vstr=""),k=decodeURIComponent(kstr),v=decodeURIComponent(vstr),hasOwnProperty(obj,k)?isArray(obj[k])?obj[k].push(v):obj[k]=[obj[k],v]:obj[k]=v}return obj};var isArray=Array.isArray||function(xs){return"[object Array]"===Object.prototype.toString.call(xs)}},{}],329:[function(require,module,exports){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}var stringifyPrimitive=function(v){switch(_typeof(v)){case"string":return v;case"boolean":return v?"true":"false";case"number":return isFinite(v)?v:"";default:return""}};module.exports=function(obj,sep,eq,name){return sep=sep||"&",eq=eq||"=",null===obj&&(obj=undefined),"object"===_typeof(obj)?map(objectKeys(obj),function(k){var ks=encodeURIComponent(stringifyPrimitive(k))+eq;return isArray(obj[k])?map(obj[k],function(v){return ks+encodeURIComponent(stringifyPrimitive(v))}).join(sep):ks+encodeURIComponent(stringifyPrimitive(obj[k]))}).join(sep):name?encodeURIComponent(stringifyPrimitive(name))+eq+encodeURIComponent(stringifyPrimitive(obj)):""};var isArray=Array.isArray||function(xs){return"[object Array]"===Object.prototype.toString.call(xs)};function map(xs,f){if(xs.map)return xs.map(f);for(var res=[],i=0;i<xs.length;i++)res.push(f(xs[i],i));return res}var objectKeys=Object.keys||function(obj){var res=[];for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&res.push(key);return res}},{}],330:[function(require,module,exports){"use strict";exports.decode=exports.parse=require("./decode"),exports.encode=exports.stringify=require("./encode")},{"./decode":328,"./encode":329}],331:[function(require,module,exports){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}exports.__esModule=!0;var handle_qs_js_1=require("then-request/lib/handle-qs.js"),GenericResponse=require("http-response-object"),fd=FormData;function doRequest(method,url,options){var match,xhr=new XMLHttpRequest;if("string"!=typeof method)throw new TypeError("The method must be a string.");if(url&&"object"===_typeof(url)&&(url=url.href),"string"!=typeof url)throw new TypeError("The URL/path must be a string.");if(null!==options&&options!==undefined||(options={}),"object"!==_typeof(options))throw new TypeError("Options must be an object (or null).");method=method.toUpperCase(),options.headers=options.headers||{};var crossDomain=!(!(match=/^([\w-]+:)?\/\/([^\/]+)/.exec(url))||match[2]==location.host);for(var name in crossDomain||(options.headers["X-Requested-With"]="XMLHttpRequest"),options.qs&&(url=handle_qs_js_1["default"](url,options.qs)),options.json&&(options.body=JSON.stringify(options.json),options.headers["content-type"]="application/json"),options.form&&(options.body=options.form),xhr.open(method,url,!1),options.headers)xhr.setRequestHeader(name.toLowerCase(),""+options.headers[name]);xhr.send(options.body?options.body:null);var headers={};return xhr.getAllResponseHeaders().split("\r\n").forEach(function(header){var h=header.split(":");h.length>1&&(headers[h[0].toLowerCase()]=h.slice(1).join(":").trim())}),new GenericResponse(xhr.status,headers,xhr.responseText,url)}exports.FormData=fd,exports["default"]=doRequest,module.exports=doRequest,module.exports["default"]=doRequest,module.exports.FormData=fd},{"http-response-object":325,"then-request/lib/handle-qs.js":332}],332:[function(require,module,exports){"use strict";exports.__esModule=!0;var qs_1=require("qs");exports["default"]=function(url,query){var _a=url.split("?"),start=_a[0],part2=_a[1],qs=(part2||"").split("#")[0],end=part2&&part2.split("#").length>1?"#"+part2.split("#")[1]:"",baseQs=qs_1.parse(qs);for(var i in query)baseQs[i]=query[i];return""!==(qs=qs_1.stringify(baseQs))&&(qs="?"+qs),start+qs+end}},{qs:334}],333:[function(require,module,exports){"use strict";var replace=String.prototype.replace,percentTwenties=/%20/g;module.exports={"default":"RFC3986",formatters:{RFC1738:function(value){return replace.call(value,percentTwenties,"+")},RFC3986:function(value){return value}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},{}],334:[function(require,module,exports){"use strict";var stringify=require("./stringify"),parse=require("./parse"),formats=require("./formats");module.exports={formats:formats,parse:parse,stringify:stringify}},{"./formats":333,"./parse":335,"./stringify":336}],335:[function(require,module,exports){"use strict";var utils=require("./utils"),has=Object.prototype.hasOwnProperty,defaults={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:utils.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},parseKeys=function(givenKey,val,options){if(givenKey){var key=options.allowDots?givenKey.replace(/\.([^.[]+)/g,"[$1]"):givenKey,child=/(\[[^[\]]*])/g,segment=/(\[[^[\]]*])/.exec(key),parent=segment?key.slice(0,segment.index):key,keys=[];if(parent){if(!options.plainObjects&&has.call(Object.prototype,parent)&&!options.allowPrototypes)return;keys.push(parent)}for(var i=0;null!==(segment=child.exec(key))&&i<options.depth;){if(i+=1,!options.plainObjects&&has.call(Object.prototype,segment[1].slice(1,-1))&&!options.allowPrototypes)return;keys.push(segment[1])}return segment&&keys.push("["+key.slice(segment.index)+"]"),function(chain,val,options){for(var leaf=val,i=chain.length-1;i>=0;--i){var obj,root=chain[i];if("[]"===root)obj=(obj=[]).concat(leaf);else{obj=options.plainObjects?Object.create(null):{};var cleanRoot="["===root.charAt(0)&&"]"===root.charAt(root.length-1)?root.slice(1,-1):root,index=parseInt(cleanRoot,10);!isNaN(index)&&root!==cleanRoot&&String(index)===cleanRoot&&index>=0&&options.parseArrays&&index<=options.arrayLimit?(obj=[])[index]=leaf:obj[cleanRoot]=leaf}leaf=obj}return leaf}(keys,val,options)}};module.exports=function(str,opts){var options=opts?utils.assign({},opts):{};if(null!==options.decoder&&options.decoder!==undefined&&"function"!=typeof options.decoder)throw new TypeError("Decoder has to be a function.");if(options.ignoreQueryPrefix=!0===options.ignoreQueryPrefix,options.delimiter="string"==typeof options.delimiter||utils.isRegExp(options.delimiter)?options.delimiter:defaults.delimiter,options.depth="number"==typeof options.depth?options.depth:defaults.depth,options.arrayLimit="number"==typeof options.arrayLimit?options.arrayLimit:defaults.arrayLimit,options.parseArrays=!1!==options.parseArrays,options.decoder="function"==typeof options.decoder?options.decoder:defaults.decoder,options.allowDots="boolean"==typeof options.allowDots?options.allowDots:defaults.allowDots,options.plainObjects="boolean"==typeof options.plainObjects?options.plainObjects:defaults.plainObjects,options.allowPrototypes="boolean"==typeof options.allowPrototypes?options.allowPrototypes:defaults.allowPrototypes,options.parameterLimit="number"==typeof options.parameterLimit?options.parameterLimit:defaults.parameterLimit,options.strictNullHandling="boolean"==typeof options.strictNullHandling?options.strictNullHandling:defaults.strictNullHandling,""===str||null===str||void 0===str)return options.plainObjects?Object.create(null):{};for(var tempObj="string"==typeof str?function(str,options){for(var obj={},cleanStr=options.ignoreQueryPrefix?str.replace(/^\?/,""):str,limit=options.parameterLimit===Infinity?undefined:options.parameterLimit,parts=cleanStr.split(options.delimiter,limit),i=0;i<parts.length;++i){var key,val,part=parts[i],bracketEqualsPos=part.indexOf("]="),pos=-1===bracketEqualsPos?part.indexOf("="):bracketEqualsPos+1;-1===pos?(key=options.decoder(part,defaults.decoder),val=options.strictNullHandling?null:""):(key=options.decoder(part.slice(0,pos),defaults.decoder),val=options.decoder(part.slice(pos+1),defaults.decoder)),has.call(obj,key)?obj[key]=[].concat(obj[key]).concat(val):obj[key]=val}return obj}(str,options):str,obj=options.plainObjects?Object.create(null):{},keys=Object.keys(tempObj),i=0;i<keys.length;++i){var key=keys[i],newObj=parseKeys(key,tempObj[key],options);obj=utils.merge(obj,newObj,options)}return utils.compact(obj)}},{"./utils":337}],336:[function(require,module,exports){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}var utils=require("./utils"),formats=require("./formats"),arrayPrefixGenerators={brackets:function(prefix){return prefix+"[]"},indices:function(prefix,key){return prefix+"["+key+"]"},repeat:function(prefix){return prefix}},toISO=Date.prototype.toISOString,defaults={delimiter:"&",encode:!0,encoder:utils.encode,encodeValuesOnly:!1,serializeDate:function(date){return toISO.call(date)},skipNulls:!1,strictNullHandling:!1},stringify=function stringify(object,prefix,generateArrayPrefix,strictNullHandling,skipNulls,encoder,filter,sort,allowDots,serializeDate,formatter,encodeValuesOnly){var obj=object;if("function"==typeof filter)obj=filter(prefix,obj);else if(obj instanceof Date)obj=serializeDate(obj);else if(null===obj){if(strictNullHandling)return encoder&&!encodeValuesOnly?encoder(prefix,defaults.encoder):prefix;obj=""}if("string"==typeof obj||"number"==typeof obj||"boolean"==typeof obj||utils.isBuffer(obj))return encoder?[formatter(encodeValuesOnly?prefix:encoder(prefix,defaults.encoder))+"="+formatter(encoder(obj,defaults.encoder))]:[formatter(prefix)+"="+formatter(String(obj))];var objKeys,values=[];if(void 0===obj)return values;if(Array.isArray(filter))objKeys=filter;else{var keys=Object.keys(obj);objKeys=sort?keys.sort(sort):keys}for(var i=0;i<objKeys.length;++i){var key=objKeys[i];skipNulls&&null===obj[key]||(values=Array.isArray(obj)?values.concat(stringify(obj[key],generateArrayPrefix(prefix,key),generateArrayPrefix,strictNullHandling,skipNulls,encoder,filter,sort,allowDots,serializeDate,formatter,encodeValuesOnly)):values.concat(stringify(obj[key],prefix+(allowDots?"."+key:"["+key+"]"),generateArrayPrefix,strictNullHandling,skipNulls,encoder,filter,sort,allowDots,serializeDate,formatter,encodeValuesOnly)))}return values};module.exports=function(object,opts){var obj=object,options=opts?utils.assign({},opts):{};if(null!==options.encoder&&options.encoder!==undefined&&"function"!=typeof options.encoder)throw new TypeError("Encoder has to be a function.");var delimiter="undefined"==typeof options.delimiter?defaults.delimiter:options.delimiter,strictNullHandling="boolean"==typeof options.strictNullHandling?options.strictNullHandling:defaults.strictNullHandling,skipNulls="boolean"==typeof options.skipNulls?options.skipNulls:defaults.skipNulls,encode="boolean"==typeof options.encode?options.encode:defaults.encode,encoder="function"==typeof options.encoder?options.encoder:defaults.encoder,sort="function"==typeof options.sort?options.sort:null,allowDots="undefined"!=typeof options.allowDots&&options.allowDots,serializeDate="function"==typeof options.serializeDate?options.serializeDate:defaults.serializeDate,encodeValuesOnly="boolean"==typeof options.encodeValuesOnly?options.encodeValuesOnly:defaults.encodeValuesOnly;if("undefined"==typeof options.format)options.format=formats["default"];else if(!Object.prototype.hasOwnProperty.call(formats.formatters,options.format))throw new TypeError("Unknown format option provided.");var objKeys,filter,formatter=formats.formatters[options.format];"function"==typeof options.filter?obj=(filter=options.filter)("",obj):Array.isArray(options.filter)&&(objKeys=filter=options.filter);var arrayFormat,keys=[];if("object"!==_typeof(obj)||null===obj)return"";arrayFormat=options.arrayFormat in arrayPrefixGenerators?options.arrayFormat:"indices"in options?options.indices?"indices":"repeat":"indices";var generateArrayPrefix=arrayPrefixGenerators[arrayFormat];objKeys||(objKeys=Object.keys(obj)),sort&&objKeys.sort(sort);for(var i=0;i<objKeys.length;++i){var key=objKeys[i];skipNulls&&null===obj[key]||(keys=keys.concat(stringify(obj[key],key,generateArrayPrefix,strictNullHandling,skipNulls,encode?encoder:null,filter,sort,allowDots,serializeDate,formatter,encodeValuesOnly)))}var joined=keys.join(delimiter),prefix=!0===options.addQueryPrefix?"?":"";return joined.length>0?prefix+joined:""}},{"./formats":333,"./utils":337}],337:[function(require,module,exports){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}var has=Object.prototype.hasOwnProperty,hexTable=function(){for(var array=[],i=0;i<256;++i)array.push("%"+((i<16?"0":"")+i.toString(16)).toUpperCase());return array}();exports.arrayToObject=function(source,options){for(var obj=options&&options.plainObjects?Object.create(null):{},i=0;i<source.length;++i)"undefined"!=typeof source[i]&&(obj[i]=source[i]);return obj},exports.merge=function(target,source,options){if(!source)return target;if("object"!==_typeof(source)){if(Array.isArray(target))target.push(source);else{if("object"!==_typeof(target))return[target,source];(options.plainObjects||options.allowPrototypes||!has.call(Object.prototype,source))&&(target[source]=!0)}return target}if("object"!==_typeof(target))return[target].concat(source);var mergeTarget=target;return Array.isArray(target)&&!Array.isArray(source)&&(mergeTarget=exports.arrayToObject(target,options)),Array.isArray(target)&&Array.isArray(source)?(source.forEach(function(item,i){has.call(target,i)?target[i]&&"object"===_typeof(target[i])?target[i]=exports.merge(target[i],item,options):target.push(item):target[i]=item}),target):Object.keys(source).reduce(function(acc,key){var value=source[key];return has.call(acc,key)?acc[key]=exports.merge(acc[key],value,options):acc[key]=value,acc},mergeTarget)},exports.assign=function(target,source){return Object.keys(source).reduce(function(acc,key){return acc[key]=source[key],acc},target)},exports.decode=function(str){try{return decodeURIComponent(str.replace(/\+/g," "))}catch(e){return str}},exports.encode=function(str){if(0===str.length)return str;for(var string="string"==typeof str?str:String(str),out="",i=0;i<string.length;++i){var c=string.charCodeAt(i);45===c||46===c||95===c||126===c||c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122?out+=string.charAt(i):c<128?out+=hexTable[c]:c<2048?out+=hexTable[192|c>>6]+hexTable[128|63&c]:c<55296||c>=57344?out+=hexTable[224|c>>12]+hexTable[128|c>>6&63]+hexTable[128|63&c]:(i+=1,c=65536+((1023&c)<<10|1023&string.charCodeAt(i)),out+=hexTable[240|c>>18]+hexTable[128|c>>12&63]+hexTable[128|c>>6&63]+hexTable[128|63&c])}return out},exports.compact=function(value){for(var queue=[{obj:{o:value},prop:"o"}],refs=[],i=0;i<queue.length;++i)for(var item=queue[i],obj=item.obj[item.prop],keys=Object.keys(obj),j=0;j<keys.length;++j){var key=keys[j],val=obj[key];"object"===_typeof(val)&&null!==val&&-1===refs.indexOf(val)&&(queue.push({obj:obj,prop:key}),refs.push(val))}return function(queue){for(var obj;queue.length;){var item=queue.pop();if(obj=item.obj[item.prop],Array.isArray(obj)){for(var compacted=[],j=0;j<obj.length;++j)"undefined"!=typeof obj[j]&&compacted.push(obj[j]);item.obj[item.prop]=compacted}}return obj}(queue)},exports.isRegExp=function(obj){return"[object RegExp]"===Object.prototype.toString.call(obj)},exports.isBuffer=function(obj){return null!==obj&&void 0!==obj&&!!(obj.constructor&&obj.constructor.isBuffer&&obj.constructor.isBuffer(obj))}},{}],338:[function(require,module,exports){var toDateObject=require("./wikidata_time_to_date_object"),helpers={isNumericId:function(id){return/^[0-9]+$/.test(id)},isEntityId:function(id){return/^(Q|P)[0-9]+$/.test(id)},isItemId:function(id){return/^Q[0-9]+$/.test(id)},isPropertyId:function(id){return/^P[0-9]+$/.test(id)},getNumericId:function(id){if(!helpers.isEntityId(id))throw new Error("invalid wikidata id: ".concat(id));return id.replace(/Q|P/,"")}};helpers.wikidataTimeToDateObject=toDateObject;var bestEffort=function(fn){return function(value){try{return fn(value)}catch(err){return console.error("wikidata-sdk time conversion error:",err),value}}};helpers.wikidataTimeToEpochTime=bestEffort(function(wikidataTime){return toDateObject(wikidataTime).getTime()}),helpers.wikidataTimeToISOString=bestEffort(function(wikidataTime){return toDateObject(wikidataTime).toISOString()}),helpers.wikidataTimeToSimpleDay=bestEffort(function(wikidataTime){return wikidataTime.split("T")[0].replace(/^\+/,"").replace(/^(-?)0+/,"$1").replace(/-00$/,"").replace(/-00$/,"")}),module.exports=helpers},{"./wikidata_time_to_date_object":348}],339:[function(require,module,exports){var _require=require("./helpers"),simple=function(datavalue){return datavalue.value},entityLetter={item:"Q",property:"P"},prefixedId=function(datavalue,prefix){var value=datavalue.value,id=value.id||entityLetter[value["entity-type"]]+value["numeric-id"];return"string"==typeof prefix?"".concat(prefix,":").concat(id):id},getTimeConverter=function(){var key=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"iso";return timeConverters[key]},timeConverters={iso:_require.wikidataTimeToISOString,epoch:_require.wikidataTimeToEpochTime,"simple-day":_require.wikidataTimeToSimpleDay,none:function(arg){return arg}},claimParsers={string:simple,commonsMedia:simple,url:simple,"external-id":simple,math:simple,monolingualtext:function(datavalue,options){return options.keepRichValues?datavalue.value:datavalue.value.text},"wikibase-item":function(datavalue,options){return prefixedId(datavalue,options.entityPrefix)},"wikibase-property":function(datavalue,options){return prefixedId(datavalue,options.propertyPrefix)},time:function(datavalue,options){return getTimeConverter(options.timeConverter)(datavalue.value.time)},quantity:function(datavalue,options){var value=datavalue.value,amount=parseFloat(value.amount);return options.keepRichValues?{amount:parseFloat(value.amount),unit:value.unit.replace("http://www.wikidata.org/entity/",""),upperBound:parseFloat(value.upperBound),lowerBound:parseFloat(value.lowerBound)}:amount},"globe-coordinate":function(datavalue){return[datavalue.value.latitude,datavalue.value.longitude]},"geo-shape":simple,"tabular-data":simple};module.exports=function(datatype,datavalue,options){return claimParsers[datatype](datavalue,options)}},{"./helpers":338}],340:[function(require,module,exports){var simplifyEntity=require("./simplify_entity");module.exports={wd:{entities:function(res){var entities=(res=res.body||res).entities;return Object.keys(entities).forEach(function(entityId){entities[entityId]=simplifyEntity(entities[entityId])}),entities}}}},{"./simplify_entity":342}],341:[function(require,module,exports){function _slicedToArray(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return function(arr,i){var _arr=[],_n=!0,_d=!1,_e=undefined;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i["return"]||_i["return"]()}finally{if(_d)throw _e}}return _arr}(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}var parseClaim=require("./parse_claim"),uniq=require("../utils/utils").uniq,simplifyClaims=function(claims){for(var _len=arguments.length,options=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)options[_key-1]=arguments[_key];var propertyPrefix=parseOptions(options).propertyPrefix,simpleClaims={};for(var id in claims){var propClaims=claims[id];propertyPrefix&&(id=propertyPrefix+":"+id),simpleClaims[id]=simplifyPropertyClaims.apply(void 0,[propClaims].concat(options))}return simpleClaims},simplifyPropertyClaims=function(propClaims){for(var _len2=arguments.length,options=new Array(_len2>1?_len2-1:0),_key2=1;_key2<_len2;_key2++)options[_key2-1]=arguments[_key2];if(null==propClaims||0===propClaims.length)return[];var _parseOptions2=parseOptions(options),keepNonTruthy=_parseOptions2.keepNonTruthy,areSubSnaks=_parseOptions2.areSubSnaks;return keepNonTruthy||areSubSnaks||(propClaims=filterOutNonTruthyClaims(propClaims)),(propClaims=propClaims.map(function(claim){return simplifyClaim.apply(void 0,[claim].concat(options))}).filter(nonNull))[0]&&"object"!==_typeof(propClaims[0])?uniq(propClaims):propClaims},aggregatePerRank=function(aggregate,claim){var rank=claim.rank;return aggregate[rank]||(aggregate[rank]=[]),aggregate[rank].push(claim),aggregate},filterOutNonTruthyClaims=function(claims){var aggregate=claims.reduce(aggregatePerRank,{});return aggregate.preferred||aggregate.normal||[]},nonNull=function(obj){return null!=obj},simplifyClaim=function(claim){for(var _len3=arguments.length,options=new Array(_len3>1?_len3-1:0),_key3=1;_key3<_len3;_key3++)options[_key3-1]=arguments[_key3];var datatype,datavalue,isQualifierSnak,isReferenceSnak,_options=options=parseOptions(options),keepQualifiers=_options.keepQualifiers,keepReferences=_options.keepReferences,keepIds=_options.keepIds,keepHashes=_options.keepHashes,mainsnak=claim.mainsnak;if(mainsnak){if(datatype=mainsnak.datatype,!(datavalue=mainsnak.datavalue))return null}else{if(!claim||!claim.datavalue)return null;datavalue=claim.datavalue,datatype=claim.datatype,claim.hash?isQualifierSnak=!0:isReferenceSnak=!0}var value=parseClaim(datatype,datavalue,options);if(isQualifierSnak)return keepHashes?{value:value,hash:claim.hash}:value;if(isReferenceSnak)return value;if(!(keepQualifiers||keepReferences||keepIds))return value;var richValue={value:value},subSnaksOptions=Object.assign({},options,{areSubSnaks:!0,keepHashes:keepHashes});return keepQualifiers&&(richValue.qualifiers=simplifyClaims(claim.qualifiers,subSnaksOptions)),keepReferences&&(claim.references=claim.references||[],richValue.references=claim.references.map(function(refRecord){var snaks=simplifyClaims(refRecord.snaks,subSnaksOptions);return keepHashes?{snaks:snaks,hash:refRecord.hash}:snaks})),keepIds&&(richValue.id=claim.id),richValue},parseOptions=function(options){if(null==options)return{};if(options[0]&&"object"===_typeof(options[0]))return options[0];var _options2=_slicedToArray(options,3);return{entityPrefix:_options2[0],propertyPrefix:_options2[1],keepQualifiers:_options2[2]}};module.exports={simplifyClaims:simplifyClaims,simplifyPropertyClaims:simplifyPropertyClaims,simplifyClaim:simplifyClaim}},{"../utils/utils":359,"./parse_claim":339}],342:[function(require,module,exports){var simplifyClaims=require("./simplify_claims").simplifyClaims,simplify=require("./simplify_text_attributes"),simplifySitelinks=require("./simplify_sitelinks");module.exports=function(entity,options){var simplified={id:entity.id,type:entity.type,modified:entity.modified};return simplifyIfDefined(entity,simplified,"labels"),simplifyIfDefined(entity,simplified,"descriptions"),simplifyIfDefined(entity,simplified,"aliases"),null!=entity.claims&&(simplified.claims=simplifyClaims(entity.claims,options)),null!=entity.sitelinks&&(simplified.sitelinks=simplifySitelinks(entity.sitelinks,options)),simplified};var simplifyIfDefined=function(entity,simplified,attribute){null!=entity[attribute]&&(simplified[attribute]=simplify[attribute](entity[attribute]))}},{"./simplify_claims":341,"./simplify_sitelinks":343,"./simplify_text_attributes":345}],343:[function(require,module,exports){var getSitelinkUrl=require("./sitelinks_helpers").getSitelinkUrl;module.exports=function(sitelinks){var addUrl=(arguments.length>1&&arguments[1]!==undefined?arguments[1]:{}).addUrl;return Object.keys(sitelinks).reduce(aggregateValues(sitelinks,addUrl),{})};var aggregateValues=function(sitelinks,addUrl){return function(index,key){var title=sitelinks[key].title;return index[key]=addUrl?{title:title,url:getSitelinkUrl(key,title)}:title,index}}},{"./sitelinks_helpers":346}],344:[function(require,module,exports){function _slicedToArray(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return function(arr,i){var _arr=[],_n=!0,_d=!1,_e=undefined;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i["return"]||_i["return"]()}finally{if(_d)throw _e}}return _arr}(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}module.exports=function(input){"string"==typeof input&&(input=JSON.parse(input));var vars=input.head.vars,results=input.results.bindings;if(1===vars.length){var varName=vars[0];return results.map(function(result){return parseValue(result[varName])}).filter(function(result){return null!=result})}var _identifyVars2=_slicedToArray(identifyVars(vars),2),varsWithLabel=_identifyVars2[0],varsWithout=_identifyVars2[1];return results.map(getSimplifiedResult(varsWithLabel,varsWithout))};var parseValue=function(valueObj){if(valueObj){var datatype=valueObj.datatype;return datatype=datatype&&datatype.replace("http://www.w3.org/2001/XMLSchema#",""),(parsers[valueObj.type]||getDatatypesParsers(datatype))(valueObj)}},parsers={uri:function(valueObj){return parseUri(valueObj.value)},bnode:function(){return null}},numberParser=function(valueObj){return parseFloat(valueObj.value)},getDatatypesParsers=function(datatype){return datatype=datatype&&datatype.replace("http://www.w3.org/2001/XMLSchema#",""),datatypesParsers[datatype]||passValue},datatypesParsers={decimal:numberParser,integer:numberParser,float:numberParser,double:numberParser,boolean:function(valueObj){return"true"===valueObj.value}},passValue=function(valueObj){return valueObj.value},parseUri=function(uri){return uri.replace("http://www.wikidata.org/entity/","").replace("http://www.wikidata.org/prop/direct/","")},identifyVars=function(vars){var varsWithLabel=[],varsWithoutLabel=[],_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=undefined;try{for(var _step,_iterator=vars[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var _varName=_step.value;vars.indexOf("".concat(_varName,"Label"))>-1?varsWithLabel.push(_varName):/^\w+Label$/.test(_varName)||varsWithoutLabel.push(_varName)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator["return"]||_iterator["return"]()}finally{if(_didIteratorError)throw _iteratorError}}return[varsWithLabel,varsWithoutLabel]},getSimplifiedResult=function(varsWithLabel,varsWithout){return function(result){var simplifiedResult={},_iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=undefined;try{for(var _step2,_iterator2=varsWithLabel[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var _varName3=_step2.value,value=parseValue(result[_varName3]);if(null!=value){var label=result["".concat(_varName3,"Label")]&&result["".concat(_varName3,"Label")].value;simplifiedResult[_varName3]={value:value,label:label}}}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2["return"]||_iterator2["return"]()}finally{if(_didIteratorError2)throw _iteratorError2}}var _iteratorNormalCompletion3=!0,_didIteratorError3=!1,_iteratorError3=undefined;try{for(var _step3,_iterator3=varsWithout[Symbol.iterator]();!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=!0){var _varName4=_step3.value;simplifiedResult[_varName4]=parseValue(result[_varName4])}}catch(err){_didIteratorError3=!0,_iteratorError3=err}finally{try{_iteratorNormalCompletion3||null==_iterator3["return"]||_iterator3["return"]()}finally{if(_didIteratorError3)throw _iteratorError3}}return simplifiedResult}}},{}],345:[function(require,module,exports){var simplifyTextAttributes=function(multivalue){return function(data){return Object.keys(data).reduce(aggregateValues(data,multivalue),{})}},aggregateValues=function(data,multivalue){return function(index,lang){var obj=data[lang];return index[lang]=multivalue?obj.map(getValue):obj.value,index}},getValue=function(obj){return obj.value},singleValue=simplifyTextAttributes(!1);module.exports={labels:singleValue,descriptions:singleValue,aliases:simplifyTextAttributes(!0)}},{}],346:[function(require,module,exports){function _slicedToArray(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return function(arr,i){var _arr=[],_n=!0,_d=!1,_e=undefined;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i["return"]||_i["return"]()}finally{if(_d)throw _e}}return _arr}(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}var _require=require("../utils/utils"),fixedEncodeURIComponent=_require.fixedEncodeURIComponent,replaceSpaceByUnderscores=_require.replaceSpaceByUnderscores,isPlainObject=_require.isPlainObject,isPropertyId=require("./helpers").isPropertyId,languages=require("./sitelinks_languages"),getSitelinkData=function(site){if("commons"===site)return{lang:"en",project:"commons"};if("wikidata"===site)return{lang:"en",project:"wikidata"};var _site$split2=_slicedToArray(site.split("wik"),3),lang=_site$split2[0],projectSuffix=_site$split2[1];if(null!=_site$split2[2])throw new Error("invalid sitelink: ".concat(site));if(-1===languages.indexOf(lang))throw new Error("sitelink lang not found: ".concat(lang));var project=projectsBySuffix[projectSuffix];if(!project)throw new Error("sitelink project not found: ".concat(project));return{lang:lang,project:project}},projectsBySuffix={i:"wikipedia",isource:"wikisource",iquote:"wikiquote",tionary:"wiktionary",ibooks:"wikibooks",iversity:"wikiversity",ivoyage:"wikivoyage",inews:"wikinews"};module.exports={getSitelinkUrl:function(site,title){if(isPlainObject(site)&&(title=site.title,site=site.site),!site)throw new Error("missing a site");if(!title)throw new Error("missing a title");if("commons"===site)return"https://commons.wikimedia.org/wiki/".concat(title);if("wikidata"===site)return isPropertyId(title)?"".concat("https://www.wikidata.org/wiki/","Property:").concat(title):"".concat("https://www.wikidata.org/wiki/").concat(title);var _getSitelinkData=getSitelinkData(site),lang=_getSitelinkData.lang,project=_getSitelinkData.project;return title=fixedEncodeURIComponent(replaceSpaceByUnderscores(title)),"https://".concat(lang,".").concat(project,".org/wiki/").concat(title)},getSitelinkData:getSitelinkData,isSitelinkKey:function(site){try{return getSitelinkData(site),!0}catch(err){return!1}}}},{"../utils/utils":359,"./helpers":338,"./sitelinks_languages":347}],347:[function(require,module,exports){module.exports=["aa","ab","ace","ady","af","ak","als","am","an","ang","ar","arc","arz","as","ast","atj","av","ay","az","azb","ba","bar","bat_smg","bcl","be","be_x_old","bg","bh","bi","bjn","bm","bn","bo","bpy","br","bs","bug","bxr","ca","cbk_zam","cdo","ce","ceb","ch","cho","chr","chy","ckb","co","commons","cr","crh","cs","csb","cu","cv","cy","da","de","din","diq","dsb","dty","dv","dz","ee","el","eml","en","eo","es","et","eu","ext","fa","ff","fi","fiu_vro","fj","fo","fr","frp","frr","fur","fy","ga","gag","gan","gd","gl","glk","gn","gom","got","gu","gv","ha","hak","haw","he","hi","hif","ho","hr","hsb","ht","hu","hy","hz","ia","id","ie","ig","ii","ik","ilo","io","is","it","iu","ja","jam","jbo","jv","ka","kaa","kab","kbd","kbp","kg","ki","kj","kk","kl","km","kn","ko","koi","kr","krc","ks","ksh","ku","kv","kw","ky","la","lad","lb","lbe","lez","lg","li","lij","lmo","ln","lo","lrc","lt","ltg","lv","mai","map_bms","mdf","mediawiki","meta","mg","mh","mhr","mi","min","mk","ml","mn","mo","mr","mrj","ms","mt","mus","mwl","my","myv","mzn","na","nah","nap","nds","nds_nl","ne","new","ng","nl","nn","no","nov","nrm","nso","nv","ny","oc","olo","om","or","os","pa","pag","pam","pap","pcd","pdc","pfl","pi","pih","pl","pms","pnb","pnt","ps","pt","qu","rm","rmy","rn","ro","roa_rup","roa_tara","ru","rue","rw","sa","sah","sc","scn","sco","sd","se","sg","sh","si","simple","sk","sl","sm","sn","so","species","sq","sr","srn","ss","st","stq","su","sv","sw","szl","ta","tcy","te","tet","tg","th","ti","tk","tl","tn","to","tpi","tr","ts","tt","tum","tw","ty","tyv","udm","ug","uk","ur","uz","ve","vec","vep","vi","vls","vo","wa","war","wo","wuu","xal","xh","xmf","yi","yo","za","zea","zh","zh_classical","zh_min_nan","zh_yue","zu"]},{}],348:[function(require,module,exports){module.exports=function(wikidataTime){var sign=wikidataTime[0],rest=wikidataTime.slice(1),date=fullDateData(sign,rest);return"Invalid Date"===date.toString()?parseInvalideDate(sign,rest):date};var fullDateData=function(sign,rest){return"-"===sign?negativeDate(rest):positiveDate(rest)},positiveDate=function(rest){return new Date(rest)},negativeDate=function(rest){var date="-00".concat(rest);return new Date(date)},parseInvalideDate=function(sign,rest){var year=rest.split("T")[0].split("-")[0];return fullDateData(sign,year)}},{}],349:[function(require,module,exports){var wdk=module.exports={};wdk.searchEntities=require("./queries/search_entities"),wdk.getEntities=require("./queries/get_entities"),wdk.getManyEntities=require("./queries/get_many_entities"),wdk.getWikidataIdsFromSitelinks=require("./queries/get_wikidata_ids_from_sitelinks"),wdk.sparqlQuery=require("./queries/sparql_query"),wdk.getReverseClaims=require("./queries/get_reverse_claims"),wdk.getRevisions=require("./queries/get_revisions"),wdk.parse=require("./helpers/parse_responses");var claimsSimplifiers=require("./helpers/simplify_claims"),simplifySparqlResults=require("./helpers/simplify_sparql_results");wdk.simplify=require("../lib/helpers/simplify_text_attributes"),wdk.simplify.entity=require("../lib/helpers/simplify_entity"),wdk.simplify.claim=claimsSimplifiers.simplifyClaim,wdk.simplify.propertyClaims=claimsSimplifiers.simplifyPropertyClaims,wdk.simplify.claims=claimsSimplifiers.simplifyClaims,wdk.simplify.sitelinks=require("../lib/helpers/simplify_sitelinks"),wdk.simplify.sparqlResults=simplifySparqlResults,wdk.simplifySparqlResults=require("./helpers/simplify_sparql_results"),Object.assign(wdk,claimsSimplifiers),wdk.getWikidataIdsFromWikipediaTitles=wdk.getWikidataIdsFromSitelinks;var helpers=require("../lib/helpers/helpers"),sitelinksHelpers=require("../lib/helpers/sitelinks_helpers");Object.assign(wdk,helpers,sitelinksHelpers)},{"../lib/helpers/helpers":338,"../lib/helpers/simplify_entity":342,"../lib/helpers/simplify_sitelinks":343,"../lib/helpers/simplify_text_attributes":345,"../lib/helpers/sitelinks_helpers":346,"./helpers/parse_responses":340,"./helpers/simplify_claims":341,"./helpers/simplify_sparql_results":344,"./queries/get_entities":350,"./queries/get_many_entities":351,"./queries/get_reverse_claims":352,"./queries/get_revisions":353,"./queries/get_wikidata_ids_from_sitelinks":354,"./queries/search_entities":355,"./queries/sparql_query":356}],350:[function(require,module,exports){var buildUrl=require("../utils/build_url"),_require=require("../utils/utils"),isPlainObject=_require.isPlainObject,forceArray=_require.forceArray,shortLang=_require.shortLang;module.exports=function(ids,languages,props,format){if(isPlainObject(ids)){var _ids=ids;ids=_ids.ids,languages=_ids.languages,props=_ids.props,format=_ids.format}if(format=format||"json",!(ids&&ids.length>0))throw new Error("no id provided");(ids=forceArray(ids)).length>50&&console.warn("getEntities accepts 50 ids max to match Wikidata API limitations:\n      this request won't get all the desired entities.\n      You can use getManyEntities instead to generate several request urls\n      to work around this limitation");var query={action:"wbgetentities",ids:ids.join("|"),format:format};return languages&&(languages=forceArray(languages).map(shortLang),query.languages=languages.join("|")),props&&props.length>0&&(query.props=forceArray(props).join("|")),buildUrl(query)}},{"../utils/build_url":357,"../utils/utils":359}],351:[function(require,module,exports){var getEntities=require("./get_entities"),isPlainObject=require("../utils/utils").isPlainObject;module.exports=function(ids,languages,props,format){if(isPlainObject(ids)){var _ids=ids;ids=_ids.ids,languages=_ids.languages,props=_ids.props,format=_ids.format}if(!(ids instanceof Array))throw new Error("getManyEntities expects an array of ids");return getIdsGroups(ids).map(function(idsGroup){return getEntities(idsGroup,languages,props,format)})};var getIdsGroups=function(ids){for(var groups=[];ids.length>0;){var group=ids.slice(0,50);ids=ids.slice(50),groups.push(group)}return groups}},{"../utils/utils":359,"./get_entities":350}],352:[function(require,module,exports){var helpers=require("../helpers/helpers"),sparqlQuery=require("./sparql_query");function directValueQuery(property,value,filter,limit){return"SELECT DISTINCT ?subject WHERE {\n    ?subject ".concat(property," ").concat(value," .\n    ").concat(filter,"\n  }\n  LIMIT ").concat(limit)}function caseInsensitiveValueQuery(property,value,filter,limit){return"SELECT DISTINCT ?subject WHERE {\n    ?subject ".concat(property," ?value .\n    FILTER (lcase(?value) = ").concat(value.toLowerCase(),")\n    ").concat(filter,"\n  }\n  LIMIT ").concat(limit)}module.exports=function(property,value){var options=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{},limit=options.limit,caseInsensitive=options.caseInsensitive,keepProperties=options.keepProperties;limit=limit||1e3;var sparqlFn=caseInsensitive?caseInsensitiveValueQuery:directValueQuery,valueString=function(value){helpers.isItemId(value)?value="wd:".concat(value):"string"==typeof value&&(value="'".concat(value,"'"));return value}(value),filter=keepProperties?"":"FILTER NOT EXISTS { ?subject rdf:type wikibase:Property . } ",sparql=sparqlFn(property=property instanceof Array?property.map(prefixifyProperty).join("|"):prefixifyProperty(property),valueString,filter,limit);return sparqlQuery(sparql)};var prefixifyProperty=function(property){return"wdt:"+property}},{"../helpers/helpers":338,"./sparql_query":356}],353:[function(require,module,exports){var buildUrl=require("../utils/build_url"),forceArray=require("../utils/utils").forceArray;module.exports=function(ids){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},uniqueId=1===(ids=forceArray(ids)).length,query={action:"query",prop:"revisions"};return query.titles=ids.join("|"),query.format=options.format||"json",uniqueId&&(query.rvlimit=options.limit||"max"),uniqueId&&options.start&&(query.rvstart=getEpochSeconds(options.start)),uniqueId&&options.end&&(query.rvend=getEpochSeconds(options.end)),buildUrl(query)};var getEpochSeconds=function(date){return"number"==typeof date&&date<earliestPointInMs?date:Math.trunc(new Date(date).getTime()/1e3)},earliestPointInMs=new Date("2000-01-01").getTime()},{"../utils/build_url":357,"../utils/utils":359}],354:[function(require,module,exports){var buildUrl=require("../utils/build_url"),_require=require("../utils/utils"),isPlainObject=_require.isPlainObject,forceArray=_require.forceArray,shortLang=_require.shortLang;module.exports=function(titles,sites,languages,props,format){if(isPlainObject(titles)){var params=titles;titles=params.titles,sites=params.sites,languages=params.languages,props=params.props,format=params.format}if(format=format||"json",!(titles&&titles.length>0))throw new Error("no title provided");sites&&sites.length>0||(sites=["enwiki"]),titles=forceArray(titles),sites=forceArray(sites).map(parseSite),props=forceArray(props);var query={action:"wbgetentities",titles:titles.join("|"),sites:sites.join("|"),format:format};return 1===sites.length&&1===titles.length&&(query.normalize=!0),languages&&(languages=forceArray(languages).map(shortLang),query.languages=languages.join("|")),props&&props.length>0&&(query.props=props.join("|")),buildUrl(query)};var parseSite=function(site){return 2===site.length?"".concat(site,"wiki"):site}},{"../utils/build_url":357,"../utils/utils":359}],355:[function(require,module,exports){var buildUrl=require("../utils/build_url"),isPlainObject=require("../utils/utils").isPlainObject;module.exports=function(search,language,limit,format,uselang){if(isPlainObject(search)){var params=search;search=params.search,language=params.language,limit=params.limit,format=params.format,uselang=params.uselang}if(!(search&&search.length>0))throw new Error("search can't be empty");return language=language||"en",uselang=uselang||language,buildUrl({action:"wbsearchentities",search:search,language:language,limit:limit=limit||"20",format:format=format||"json",uselang:uselang})}},{"../utils/build_url":357,"../utils/utils":359}],356:[function(require,module,exports){var fixedEncodeURIComponent=require("../utils/utils").fixedEncodeURIComponent;module.exports=function(sparql){var query=fixedEncodeURIComponent(sparql);return"https://query.wikidata.org/sparql?format=json&query=".concat(query)}},{"../utils/utils":359}],357:[function(require,module,exports){var isBrowser="undefined"!=typeof location&&"undefined"!=typeof document,qs=require(isBrowser?"./querystring_lite":"querystring");module.exports=function(queryObj){return isBrowser&&(queryObj.origin="*"),"https://www.wikidata.org/w/api.php?"+qs.stringify(queryObj)}},{"./querystring_lite":358,querystring:330}],358:[function(require,module,exports){module.exports={stringify:function(queryObj){var qstring="";for(var key in queryObj){var value=queryObj[key];value&&(qstring+="&".concat(key,"=").concat(value))}return qstring=qstring.slice(1),encodeURI?encodeURI(qstring):qstring}}},{}],359:[function(require,module,exports){function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}module.exports={shortLang:function(language){return language.toLowerCase().split(/[^a-z]/)[0]},forceArray:function(array){return"string"==typeof array&&(array=[array]),array||[]},isPlainObject:function(obj){return!(!obj||"object"!==_typeof(obj)||obj instanceof Array)},fixedEncodeURIComponent:function(str){return encodeURIComponent(str).replace(/[!'()*]/g,encodeCharacter)},replaceSpaceByUnderscores:function(str){return str.replace(/\s/g,"_")},uniq:function(array){return Array.from(new Set(array))}};var encodeCharacter=function(char){return"%"+char.charCodeAt(0).toString(16)}},{}],360:[function(require,module,exports){module.exports={name:"citation-js",version:"0.4.0-1",description:"Citation.js converts formats like BibTeX, Wikidata JSON and ContentMine JSON to CSL-JSON to convert to other formats like APA, Vancouver and back to BibTeX.",main:"lib/index.js",directories:{doc:"docs/api/",test:"test/",lib:"src/"},homepage:"https://citation.js.org/",repository:{type:"git",url:"git+https://github.com/larsgw/citation.js.git"},keywords:["citation","bibtex","wikidata","contentmine","quickscrape","csl","citeproc"],dependencies:{"@babel/polyfill":"^7.0.0-beta.39",citeproc:"^2.1.183",commander:"^2.13.0","isomorphic-fetch":"^2.2.1","sync-request":"^5.0.0","wikidata-sdk":"^5.2.2"},devDependencies:{"@babel/cli":"^7.0.0-beta.39","@babel/core":"^7.0.0-beta.39","@babel/plugin-proposal-unicode-property-regex":"^7.0.0-beta.39","@babel/preset-env":"^7.0.0-beta.39","@babel/register":"^7.0.0-beta.39","babel-eslint":"^7.2.3","babel-plugin-istanbul":"^4.1.4",babelify:"github:ylemkimon/babelify#a369126",browserify:"^15.2.0","cross-env":"^5.0.1",disc:"^1.3.2","expect.js":"^0.3.1",jsdoc:"^3.5.5","markdown-toc":"^1.2.0",minami:"^1.2.3",mocha:"^5.0.0",nock:"^9.0.14","npm-run-all":"^4.0.2",nyc:"^11.0.3",standard:"^11.0.0-beta.0","uglify-es":"^3.0.4"},nyc:{require:["@babel/register"],sourceMap:!1,instrument:!1},standard:{parser:"babel-eslint",globals:["logger"]},browser:{"./src/logger.js":"./src/logger-browser.js","./test/citation.js":"./test/citation-browser.js","./test/api.js":"./test/api-browser.js"},scripts:{"--1--":"lint","lint:src":'standard "src/**/*.js"',"lint:test":'standard "test/**/*.js"',"lint:tools":'standard "tools/**/*.js"',"lint:bin":'standard "bin/**/*.js"',lint:"npm-run-all lint:*","--2--":"test",test:"cross-env MOCHA=1 mocha --check-leaks -r @babel/register -R dot test/*.spec.js","coverage:test":"cross-env NODE_ENV=test nyc npm test","coverage:report":"nyc report --reporter=lcov > coverage.lcov",coverage:"npm-run-all coverage:*","--3--":"compile","compile:test":"babel src/test -d lib/test --copy-files",compile:"babel src -d lib --copy-files","--4--":"distributions","dist:regular-main":"browserify -r ./src/index.js:citation-js -o build/citation.js -g [ babelify ]","dist:regular-test":"browserify -r expect.js -e test/wrapper.js -x expect.js -x citation-js -o build/test.citation.js -g [ babelify ]","dist:minify-main":"uglifyjs build/citation.js --ie8 -c -b ascii_only -o build/citation.min.js","dist:minify-test":"uglifyjs build/test.citation.js --ie8 -c -b ascii_only -o build/test.citation.min.js","dist:regular":"npm-run-all dist:regular-*","dist:minify":"npm-run-all dist:minify-*","dist:main":"npm-run-all dist:*-main","dist:test":"npm-run-all dist:*-test","--5--":"generate","generate:files":"npm-run-all dist:*-*","generate:docs":"markdown-toc -i README.md && jsdoc -c .jsdoc.json","generate:disc":"browserify -e ./src/index.js -o build/tmp.js --full-paths -t [ babelify ] && node tools/disc.js",generate:"npm-run-all generate:*","--6--":"dev","dev:test":"npm run compile && npm run test","dev:test-browser":"npm run compile && npm run dist:regular",dev:"npm-run-all dev:*"},author:"Lars Willighagen (https://larsgw.github.io)",license:"MIT",bin:"bin/cmd.js",man:"bin/man/citation-js.1",bugs:{url:"https://github.com/larsgw/citation.js/issues"},engines:{node:">=6.0.0"}}},{}],361:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.get=exports.getIds=exports.format=void 0;var obj,_static=require("./static"),_registrar=require("../get/registrar"),_csl=(obj=require("../parse/csl"))&&obj.__esModule?obj:{"default":obj};function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _slicedToArray(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return function(arr,i){var _arr=[],_n=!0,_d=!1,_e=undefined;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i["return"]||_i["return"]()}finally{if(_d)throw _e}}return _arr}(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}exports.getIds=function(){return this.data.map(function(entry){return entry.id})};exports.format=function(_format){for(var _len=arguments.length,options=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)options[_key-1]=arguments[_key];return _registrar.format.apply(void 0,[_format,(0,_csl["default"])(this.data)].concat(options))};exports.get=function(){var options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};try{(0,_static.validateOutputOptions)(options)}catch(_ref){var message=_ref.message;logger.error("[get]",message)}var formatOptions,parsedOptions=Object.assign({},this.defaultOptions,this._options.output,options),type=parsedOptions.type,_style$split2=_slicedToArray(parsedOptions.style.split("-"),2),styleType=_style$split2[0],styleFormat=_style$split2[1],newStyle="citation"===styleType?"bibliography":"csl"===styleType?"data":styleType,newType="string"===type?"text":"json"===type?"object":type;switch(newStyle){case"bibliography":formatOptions={template:styleFormat,lang:parsedOptions.lang,format:newType,append:parsedOptions.append,prepend:parsedOptions.prepend};break;case"data":case"bibtex":case"bibtxt":formatOptions={type:newType};break;default:logger.error("[get]","Invalid options")}var result=this.format(newStyle,formatOptions),format=parsedOptions.format;if("real"===format&&"html"===newType&&"undefined"!=typeof document&&"function"==typeof document.createElement){var tmp=document.createElement("div");return tmp.innerHTML=result,tmp.firstChild}return"string"===format&&"object"===_typeof(result)?JSON.stringify(result):result}},{"../get/registrar":393,"../parse/csl":395,"./static":367}],362:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=void 0;var log=_interopRequireWildcard(require("./log")),options=_interopRequireWildcard(require("./options")),set=_interopRequireWildcard(require("./set")),sort=_interopRequireWildcard(require("./sort")),get=_interopRequireWildcard(require("./get"));function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};desc.get||desc.set?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj["default"]=obj,newObj}function Cite(data){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return this instanceof Cite?(this._options=options||{},this.log=[],this.data=[],this.set(data,options),this.options(options),this.save(),this):new Cite(data,options)}Object.assign(Cite.prototype,log,options,set,sort,get),Cite.prototype[Symbol.iterator]=regeneratorRuntime.mark(function _callee(){return regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.delegateYield(this.data,"t0",1);case 1:case"end":return _context.stop()}},_callee,this)});var _default=Cite;exports["default"]=_default},{"./get":361,"./log":363,"./options":364,"./set":365,"./sort":366}],363:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.save=exports.undo=exports.retrieveLastVersion=exports.retrieveVersion=exports.currentVersion=void 0;var obj,_index=(obj=require("./index"))&&obj.__esModule?obj:{"default":obj};function _slicedToArray(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return function(arr,i){var _arr=[],_n=!0,_d=!1,_e=undefined;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i["return"]||_i["return"]()}finally{if(_d)throw _e}}return _arr}(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}exports.currentVersion=function(){return this.log.length};exports.retrieveVersion=function(){var versnum=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;if(versnum<=0||versnum>this.currentVersion())return null;var _log=_slicedToArray(this.log[versnum-1],2),data=_log[0],options=_log[1],image=new _index["default"](JSON.parse(data),JSON.parse(options));return image.log=this.log.slice(0,versnum),image};exports.undo=function(){var number=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;return this.retrieveVersion(this.currentVersion()-number)};exports.retrieveLastVersion=function(){return this.retrieveVersion(this.currentVersion())};exports.save=function(){return this.log.push([JSON.stringify(this.data),JSON.stringify(this._options)]),this}},{"./index":362}],364:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.defaultOptions=exports.options=void 0;var _static=require("./static");exports.defaultOptions={format:"real",type:"json",style:"csl",lang:"en-US"};exports.options=function(_options,log){log&&this.save();try{(0,_static.validateOptions)(_options),Object.assign(this._options,_options)}catch(_ref){var message=_ref.message;logger.warn("[options]",message)}return this}},{"./static":367}],365:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.reset=exports.setAsync=exports.set=exports.addAsync=exports.add=void 0;var _chain=_interopRequireDefault(require("../parse/input/chain")),_chain2=_interopRequireDefault(require("../parse/input/async/chain")),_fetchId=_interopRequireDefault(require("../util/fetchId"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function step(key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _next(value){step("next",value)}function _throw(err){step("throw",err)}_next()})}}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}exports.add=function(data){var _data,_this=this,options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},log=arguments.length>2&&arguments[2]!==undefined&&arguments[2];return!0!==options&&!0!==log||this.save(),(_data=this.data).push.apply(_data,_toConsumableArray((0,_chain["default"])(data,options))),this.data.filter(function(entry){return!entry.hasOwnProperty("id")}).forEach(function(entry){entry.id=(0,_fetchId["default"])(_this.getIds(),"temp_id_")}),this};var _ref,addAsync=(_ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(data){var _data2,options,log,_this2=this,_args=arguments;return regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return options=_args.length>1&&_args[1]!==undefined?_args[1]:{},log=_args.length>2&&_args[2]!==undefined&&_args[2],!0!==options&&!0!==log||this.save(),_context.t0=(_data2=this.data).push,_context.t1=_data2,_context.t2=_toConsumableArray,_context.next=8,(0,_chain2["default"])(data,options);case 8:return _context.t3=_context.sent,_context.t4=(0,_context.t2)(_context.t3),_context.t0.apply.call(_context.t0,_context.t1,_context.t4),this.data.filter(function(entry){return!entry.hasOwnProperty("id")}).forEach(function(entry){entry.id=(0,_fetchId["default"])(_this2.getIds(),"temp_id_")}),_context.abrupt("return",this);case 13:case"end":return _context.stop()}},_callee,this)})),function(_x){return _ref.apply(this,arguments)});exports.addAsync=addAsync;exports.set=function(data){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},log=arguments.length>2&&arguments[2]!==undefined&&arguments[2];return!0!==options&&!0!==log||this.save(),this.data=[],"boolean"!=typeof options?this.add(data,options):this.add(data)};var _ref2,setAsync=(_ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(data){var options,log,_args2=arguments;return regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return options=_args2.length>1&&_args2[1]!==undefined?_args2[1]:{},log=_args2.length>2&&_args2[2]!==undefined&&_args2[2],!0!==options&&!0!==log||this.save(),this.data=[],_context2.abrupt("return","boolean"!=typeof options?this.addAsync(data,options):this.addAsync(data));case 5:case"end":return _context2.stop()}},_callee2,this)})),function(_x2){return _ref2.apply(this,arguments)});exports.setAsync=setAsync;exports.reset=function(log){return log&&this.save(),this.data=[],this._options={},this}},{"../parse/input/async/chain":398,"../parse/input/chain":402,"../util/fetchId":447}],366:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sort=void 0;var obj,_label=require("../get/modules/label"),_name=(obj=require("../get/name"))&&obj.__esModule?obj:{"default":obj};var getComparisonValue=function(obj,prop){var value=(arguments.length>2&&arguments[2]!==undefined?arguments[2]:"label"===prop)?(0,_label.getLabel)(obj):obj[prop];switch(prop){case"author":case"editor":return value.map(function(name){return name.literal||name.family||(0,_name["default"])(name)});case"accessed":case"issued":return value["date-parts"][0];case"page":return value.split("-").map(function(num){return parseInt(num)});case"edition":case"issue":case"volume":return value=parseInt(value),isNaN(value)?-Infinity:value;default:return value||-Infinity}},compareProp=function(a,b,prop){var flip=arguments.length>3&&arguments[3]!==undefined?arguments[3]:/^!/.test(prop);prop=prop.replace(/^!/,"");var valueA=getComparisonValue(a,prop),valueB=getComparisonValue(b,prop);return valueA===valueB?0:flip!==valueA>valueB?1:-1};exports.sort=function(){var method=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];return(arguments.length>1?arguments[1]:undefined)&&this.save(),this.data.sort("function"==typeof method?method:function(){for(var _len=arguments.length,props=new Array(_len),_key=0;_key<_len;_key++)props[_key]=arguments[_key];return function(a,b){for(var keys=props.slice(),output=0;!output&&keys.length;)output=compareProp(a,b,keys.shift());return output}}.apply(void 0,function(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}(method).concat(["label"]))),this}},{"../get/modules/label":389,"../get/name":392}],367:[function(require,module,exports){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.validateOutputOptions=exports.validateOptions=void 0;var formats=["real","string"],types=["json","html","string","rtf"],styles=["csl","bibtex","bibtxt","citation-*"],wrapperTypes=["string","function"],validateOutputOptions=function(options){if("object"!==_typeof(options))throw new TypeError("Options not an object!");var format=options.format,type=options.type,style=options.style,lang=options.lang,append=options.append,prepend=options.prepend;if(format&&!formats.includes(format))throw new TypeError('Option format ("'.concat(format,'") should be one of: ').concat(formats));if(type&&!types.includes(type))throw new TypeError('Option type ("'.concat(type,'") should be one of: ').concat(types));if(style&&!styles.includes(style)&&!/^citation/.test(style))throw new TypeError('Option style ("'.concat(style,'") should be one of: ').concat(styles));if(lang&&"string"!=typeof lang)throw new TypeError("Option lang should be a string, but is a ".concat(_typeof(lang)));if(prepend&&!wrapperTypes.includes(_typeof(prepend)))throw new TypeError("Option prepend should be a string or a function, but is a ".concat(_typeof(prepend)));if(append&&!wrapperTypes.includes(_typeof(append)))throw new TypeError("Option append should be a string or a function, but is a ".concat(_typeof(append)));if(/^citation/.test(style)&&"json"===type)throw new Error("Combination type/style of json/citation-* is not valid: ".concat(type,"/").concat(style));return!0};exports.validateOutputOptions=validateOutputOptions;exports.validateOptions=function(options){if("object"!==_typeof(options))throw new TypeError("Options not an object!");if(options.output)validateOutputOptions(options.output);else{if(options.maxChainLength&&"number"!=typeof options.maxChainLength)throw new TypeError("Option maxChainLength should be a number");if(options.forceType&&"string"!=typeof options.forceType)throw new TypeError("Option forceType should be a string")}return!0}},{}],368:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=void 0;var _chain=_interopRequireDefault(require("../parse/input/async/chain")),_index=_interopRequireDefault(require("../Cite/index"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var fn,_ref,asyncCite=(fn=regeneratorRuntime.mark(function _callee(data,options){return regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.t0=_index["default"],_context.next=3,data;case 3:return _context.t1=_context.sent,_context.t2=options,_context.abrupt("return",new _context.t0(_context.t1,_context.t2));case 6:case"end":return _context.stop()}},_callee,this)}),_ref=function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function step(key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _next(value){step("next",value)}function _throw(err){step("throw",err)}_next()})},function(_x,_x2){return _ref.apply(this,arguments)}),_default=function(data,options,callback){var promise=(0,_chain["default"])(data);return"function"!=typeof options||callback||(callback=options,options=undefined),"function"==typeof callback?(promise.then(function(data){return callback(new _index["default"](data,options))}),undefined):asyncCite(promise,options)};exports["default"]=_default},{"../Cite/index":362,"../parse/input/async/chain":398}],369:[function(require,module,exports){"use strict";function _slicedToArray(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return function(arr,i){var _arr=[],_n=!0,_d=!1,_e=undefined;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i["return"]||_i["return"]()}finally{if(_d)throw _e}}return _arr}(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=void 0;var _default=function(_ref){var date=_slicedToArray(_ref["date-parts"],1)[0],delimiter=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"-";if(3!==date.length)return"";var _date$map2=_slicedToArray(date.map(function(part){return part.toString()}),3),year=_date$map2[0],month=_date$map2[1],day=_date$map2[2];return[year.padStart(4,"0"),month.padStart(2,"0"),day.padStart(2,"0")].join(delimiter)};exports["default"]=_default},{}],370:[function(require,module,exports){"use strict";var obj;function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.textDict=exports.htmlDict=exports.get=exports.list=exports.has=exports.remove=exports.add=exports.register=void 0;var register=new(((obj=require("../util/register"))&&obj.__esModule?obj:{"default":obj})["default"])({html:{bibliographyContainer:['<div class="csl-bib-body>',"</div>"],entry:['<div class="csl-entry>',"</div>"],list:['<ul style="list-style-type:none">',"</ul>"],listItem:["<li>","</li>"]},text:{bibliographyContainer:["","\n"],entry:["","\n"],list:["\n",""],listItem:["\t","\n"]}});exports.register=register;exports.add=function(name,dict){!function(name,dict){if("string"!=typeof name)throw new TypeError("Invalid dict name, expected string, got ".concat(_typeof(name)));if("object"!==_typeof(dict))throw new TypeError("Invalid dict, expected object, got ".concat(_typeof(dict)));for(var entryName in dict){var entry=dict[entryName];if(!Array.isArray(entry)||entry.some(function(part){return"string"!=typeof part}))throw new TypeError('Invalid dict entry "'.concat(entryName,'", expected array of strings'))}}(name,dict),register.set(name,dict)};exports.remove=function(name){register.remove(name)};exports.has=function(name){return register.has(name)};exports.list=function(){return register.list()};exports.get=function(name){return register.has(name)?register.get(name):(logger.error("[get]",'Dict "'.concat(name,'" unavailable')),undefined)};exports.htmlDict={wr_start:'<div class="csl-bib-body">',wr_end:"</div>",en_start:'<div class="csl-entry">',en_end:"</div>",ul_start:'<ul style="list-style-type:none">',ul_end:"</ul>",li_start:"<li>",li_end:"</li>"};exports.textDict={wr_start:"",wr_end:"\n",en_start:"",en_end:"\n",ul_start:"\n",ul_end:"",li_start:"\t",li_end:"\n"}},{"../util/register":449}],371:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _exportNames={bibtex:!0,dict:!0,date:!0,name:!0,bibtxt:!0,json:!0,label:!0};Object.defineProperty(exports,"date",{enumerable:!0,get:function(){return _date["default"]}}),Object.defineProperty(exports,"name",{enumerable:!0,get:function(){return _name["default"]}}),Object.defineProperty(exports,"bibtxt",{enumerable:!0,get:function(){return _bibtxt["default"]}}),Object.defineProperty(exports,"json",{enumerable:!0,get:function(){return _json2.getJsonWrapper}}),Object.defineProperty(exports,"label",{enumerable:!0,get:function(){return _label2.getLabel}}),exports.dict=exports.bibtex=void 0;var dict=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};desc.get||desc.set?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj["default"]=obj,newObj}(require("./dict"));exports.dict=dict;var _date=_interopRequireDefault(require("./date")),_name=_interopRequireDefault(require("./name"));require("./modules/");var _json=_interopRequireDefault(require("./modules/bibtex/json")),_label=_interopRequireDefault(require("./modules/bibtex/label")),_text=_interopRequireDefault(require("./modules/bibtex/text")),_type=_interopRequireDefault(require("./modules/bibtex/type")),_bibtxt=_interopRequireDefault(require("./modules/bibtex/bibtxt")),_json2=require("./modules/json"),_label2=require("./modules/label"),_registrar=require("./registrar");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.keys(_registrar).forEach(function(key){"default"!==key&&"__esModule"!==key&&(Object.prototype.hasOwnProperty.call(_exportNames,key)||Object.defineProperty(exports,key,{enumerable:!0,get:function(){return _registrar[key]}}))});var bibtex={json:_json["default"],label:_label["default"],text:_text["default"],type:_type["default"]};exports.bibtex=bibtex},{"./date":369,"./dict":370,"./modules/":387,"./modules/bibtex/bibtxt":372,"./modules/bibtex/json":374,"./modules/bibtex/label":375,"./modules/bibtex/text":376,"./modules/bibtex/type":377,"./modules/json":388,"./modules/label":389,"./name":392,"./registrar":393}],372:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=exports.getBibtxt=void 0;var obj,_json=(obj=require("./json"))&&obj.__esModule?obj:{"default":obj},_dict=require("../../dict");function _slicedToArray(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return function(arr,i){var _arr=[],_n=!0,_d=!1,_e=undefined;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i["return"]||_i["return"]()}finally{if(_d)throw _e}}return _arr}(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}var getBibtxt=function(src,dict){var entries=src.map(function(entry){var bib=(0,_json["default"])(entry);bib.properties.type=bib.type;var properties=Object.entries(bib.properties).map(function(_ref){var _ref2=_slicedToArray(_ref,2),prop=_ref2[0],value=_ref2[1];return dict.listItem.join("".concat(prop,": ").concat(value))}).join("");return dict.entry.join("[".concat(bib.label,"]").concat(dict.list.join(properties)))}).join("\n");return dict.bibliographyContainer.join(entries)};exports.getBibtxt=getBibtxt;var _default=function(src,html){var dict=(0,_dict.get)(html?"html":"text");return getBibtxt(src,dict)};exports["default"]=_default},{"../../dict":370,"./json":374}],373:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=void 0;var obj,_dict=require("../../dict"),_json=(obj=require("./json"))&&obj.__esModule?obj:{"default":obj},_text=require("./text"),_bibtxt=require("./bibtxt");var factory=function(formatter){return function(data){var _ref$type=(arguments.length>1&&arguments[1]!==undefined?arguments[1]:{}).type,type=void 0===_ref$type?"text":_ref$type;return"object"===type?data.map(_json["default"]):(0,_dict.has)(type)?formatter(data,(0,_dict.get)(type)):""}},_default=[{name:"bibtex",formatter:factory(_text.getBibtex)},{name:"bibtxt",formatter:factory(_bibtxt.getBibtxt)}];exports["default"]=_default},{"../../dict":370,"./bibtxt":372,"./json":374,"./text":376}],374:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=void 0;var _type=_interopRequireDefault(require("./type")),_label=_interopRequireDefault(require("./label")),_name=_interopRequireDefault(require("../../name")),_date=_interopRequireDefault(require("../../date"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _default=function(src){var res={label:(0,_label["default"])(src),type:(0,_type["default"])(src.type)},props={},simple={"collection-title":"series","container-title":"chapter"===src.type?"booktitle":"journal",edition:"edition",event:"organization",DOI:"doi",ISBN:"isbn",ISSN:"issn",issue:"number",language:"language",note:"note","number-of-pages":"numpages",PMID:"pmid",PMCID:"pmcid",publisher:"publisher","publisher-place":"address",title:"title",url:"url",volume:"volume"};for(var prop in simple)src.hasOwnProperty(prop)&&(props[simple[prop]]=src[prop]+"");return src.author&&(props.author=src.author.map(function(name){return(0,_name["default"])(name,!0)}).join(" and ")),src.editor&&(props.editor=src.editor.map(function(name){return(0,_name["default"])(name,!0)}).join(" and ")),!src.note&&src.accessed&&(props.note="[Online; accessed ".concat((0,_date["default"])(src.accessed),"]")),src.page&&(props.pages=src.page.replace("-","--")),src.issued&&3===src.issued["date-parts"][0].length&&(props.date=(0,_date["default"])(src.issued),props.year=src.issued["date-parts"][0][0].toString(),props.month=src.issued["date-parts"][0][1].toString(),props.day=src.issued["date-parts"][0][2].toString()),res.properties=props,res};exports["default"]=_default},{"../../date":369,"../../name":392,"./label":375,"./type":377}],375:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=void 0;var _default=function(){var entry=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};if(entry["citation-label"])return entry["citation-label"];var res="";return entry.author&&(res+=entry.author[0].family||entry.author[0].literal),entry.issued&&entry.issued["date-parts"]&&entry.issued["date-parts"][0]&&(res+=entry.issued["date-parts"][0][0]),entry["year-suffix"]?res+=entry["year-suffix"]:entry.title&&(res+=entry.title.match(/^(?:(?:the|a|an)\s+)?(\S+)/i)[1]),res};exports["default"]=_default},{}],376:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=exports.getBibtex=void 0;var obj,_json=(obj=require("./json"))&&obj.__esModule?obj:{"default":obj},_dict=require("../../dict");function _slicedToArray(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return function(arr,i){var _arr=[],_n=!0,_d=!1,_e=undefined;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i["return"]||_i["return"]()}finally{if(_d)throw _e}}return _arr}(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}var syntaxTokens={"|":"{\\textbar}","<":"{\\textless}",">":"{\\textgreater}","~":"{\\textasciitilde}","^":"{\\textasciicircum}","\\":"{\\textbackslash}","{":"\\{\\vphantom{\\}}","}":"\\vphantom{\\{}\\}"},caseSensitive=["title"],bracketMappings={"":"","{":"}","{{":"}}"},getBibtex=function(src,dict){var entries=src.map(function(sourceEntry){var entry=(0,_json["default"])(sourceEntry),properties=Object.entries(entry.properties).map(function(_ref){var _ref2=_slicedToArray(_ref,2),prop=_ref2[0],value=_ref2[1];return value=value.replace(/[|<>~^\\{}]/g,function(match){return syntaxTokens[match]}),dict.listItem.join("".concat(prop,"=").concat(function(prop,value){var delStart=isNaN(+value)?caseSensitive.includes(prop)?"{{":"{":"";return delStart+value+bracketMappings[delStart]}(prop,value),","))}).join("");return dict.entry.join("@".concat(entry.type,"{").concat(entry.label,",").concat(dict.list.join(properties),"}"))}).join("");return dict.bibliographyContainer.join(entries)};exports.getBibtex=getBibtex;var _default=function(src,html){var dict=(0,_dict.get)(html?"html":"text");return getBibtex(src,dict)};exports["default"]=_default},{"../../dict":370,"./json":374}],377:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=void 0;var _default=function(pubType){switch(pubType){case"article":case"article-journal":case"article-magazine":case"article-newspaper":return"article";case"book":return"book";case"chapter":return"incollection";case"manuscript":return"unpublished";case"paper-conference":return"inproceedings";case"patent":return"patent";case"report":return"techreport";case"thesis":return"phdthesis";case"graphic":case"interview":case"motion_picture":case"personal_communication":case"webpage":return"misc";default:return logger.warn("CSL publication type not recognized: ".concat(pubType,'}. Interpreting as "misc".')),"misc"}};exports["default"]=_default},{}],378:[function(require,module,exports){"use strict";function _slicedToArray(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return function(arr,i){var _arr=[],_n=!0,_d=!1,_e=undefined;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i["return"]||_i["return"]()}finally{if(_d)throw _e}}return _arr}(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getWrappedEntry=void 0;var getAffix=function(source,affix){return"function"==typeof affix?affix(source):"string"==typeof affix?affix:""},htmlRegex=/^(\s*<[a-z0-9:-]+(?:\s*[a-z0-9:-]+=(?:"(?:\\\\|\\"|[^"])*"|'(?:\\\\|\\'|[^'])*'|\w+))*\s*>)([\s\S]+)(<\/[a-z:]+>\s*)$/i;exports.getWrappedEntry=function(value,source,_ref){var prepend=_ref.prepend,append=_ref.append,_ref3=_slicedToArray(value.match(htmlRegex)||[],4),_ref3$=_ref3[1],start=void 0===_ref3$?"":_ref3$,_ref3$2=_ref3[2],content=void 0===_ref3$2?value:_ref3$2,_ref3$3=_ref3[3],end=void 0===_ref3$3?"":_ref3$3;return start+getAffix(source,prepend)+content+getAffix(source,append)+end}},{}],379:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getPrefixedEntry=exports.getAttributedEntry=void 0;var getAttributedEntry=function(string,name,value){return string.replace(/^\s*<[a-z]+/i,"$& data-".concat(name,'="').concat(value,'"'))};exports.getAttributedEntry=getAttributedEntry;exports.getPrefixedEntry=function(value,id){return getAttributedEntry(value,"csl-entry-id",id)}},{}],380:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=function(data){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},_options$template=options.template,template=void 0===_options$template?"apa":_options$template,_options$lang=options.lang,lang=void 0===_options$lang?"en-US":_options$lang,_options$format=options.format,format=void 0===_options$format?"text":_options$format,citeproc=(0,_engines["default"])(data,template,lang,format),sortedIds=citeproc.updateItems(data.map(function(entry){return entry.id})),_bibliography=function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return function(arr,i){var _arr=[],_n=!0,_d=!1,_e=undefined;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i["return"]||_i["return"]()}finally{if(_d)throw _e}}return _arr}(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}(citeproc.makeBibliography(),2),_bibliography$=_bibliography[0],bibstart=_bibliography$.bibstart,bibend=_bibliography$.bibend,entries=_bibliography[1].map(function(element,index){return(0,_attr.getPrefixedEntry)(element,sortedIds[index])});if(options.append||options.prepend){var append=options.append,prepend=options.prepend,items=data.reduce(function(items,entry){return items[entry.id]=entry,items},{}),sortedItems=sortedIds.map(function(id){return items[id]});entries.forEach(function(entry,index){entries[index]=(0,_affix.getWrappedEntry)(entry,sortedItems[index],{append:append,prepend:prepend})})}return bibstart+entries.join("")+bibend};var obj,_engines=(obj=require("./engines"))&&obj.__esModule?obj:{"default":obj},_attr=require("./attr.js"),_affix=require("./affix")},{"./affix":378,"./attr.js":379,"./engines":381}],381:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fetchEngine=exports["default"]=void 0;var _citeproc=_interopRequireDefault(require("citeproc")),_styles=_interopRequireDefault(require("./styles")),_locales=require("./locales");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var engines={},fetchEngine=function(style,lang,template,retrieveItem,retrieveLocale){var engine,engineHash="".concat(style,"|").concat(lang);return engines.hasOwnProperty(engineHash)?(engine=engines[engineHash]).sys.retrieveItem=retrieveItem:engine=engines[engineHash]=new _citeproc["default"].Engine({retrieveLocale:retrieveLocale,retrieveItem:retrieveItem},template,lang,!0),engine};exports.fetchEngine=fetchEngine;var _default=function(data,templateName,language,format){var items=data.reduce(function(store,entry){return store[entry.id]=entry,store},{}),template=(0,_styles["default"])(templateName);language=_locales.locales.has(language)?language:"en-US";var engine=fetchEngine(templateName,language,template,function(key){return items[key]},_locales.locales.get.bind(_locales.locales));return engine.setOutputFormat(format),engine};exports["default"]=_default},{"./locales":384,"./styles":386,citeproc:324}],382:[function(require,module,exports){"use strict";var obj;Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=void 0,require("./locales"),require("./styles");var _default=[{name:"bibliography",formatter:((obj=require("./bibliography"))&&obj.__esModule?obj:{"default":obj})["default"]}];exports["default"]=_default},{"./bibliography":380,"./locales":384,"./styles":386}],383:[function(require,module,exports){module.exports={"en-US":'<?xml version="1.0" encoding="utf-8"?><locale xmlns="http://purl.org/net/xbiblio/csl" version="1.0" xml:lang="en-US"><info><rights license="http://creativecommons.org/licenses/by-sa/3.0/">This work is licensed under a Creative Commons Attribution-ShareAlike 3.0 License</rights><updated>2015-10-10T23:31:02+00:00</updated></info><style-options punctuation-in-quote="true"/><date form="text"><date-part name="month" suffix=" "/><date-part name="day" suffix=", "/><date-part name="year"/></date><date form="numeric"><date-part name="month" form="numeric-leading-zeros" suffix="/"/><date-part name="day" form="numeric-leading-zeros" suffix="/"/><date-part name="year"/></date><terms><term name="accessed">accessed</term><term name="and">and</term><term name="and others">and others</term><term name="anonymous">anonymous</term><term name="anonymous" form="short">anon.</term><term name="at">at</term><term name="available at">available at</term><term name="by">by</term><term name="circa">circa</term><term name="circa" form="short">c.</term><term name="cited">cited</term><term name="edition"><single>edition</single><multiple>editions</multiple></term><term name="edition" form="short">ed.</term><term name="et-al">et al.</term><term name="forthcoming">forthcoming</term><term name="from">from</term><term name="ibid">ibid.</term><term name="in">in</term><term name="in press">in press</term><term name="internet">internet</term><term name="interview">interview</term><term name="letter">letter</term><term name="no date">no date</term><term name="no date" form="short">n.d.</term><term name="online">online</term><term name="presented at">presented at the</term><term name="reference"><single>reference</single><multiple>references</multiple></term><term name="reference" form="short"><single>ref.</single><multiple>refs.</multiple></term><term name="retrieved">retrieved</term><term name="scale">scale</term><term name="version">version</term><term name="ad">AD</term><term name="bc">BC</term><term name="open-quote">\u201c</term><term name="close-quote">\u201d</term><term name="open-inner-quote">\u2018</term><term name="close-inner-quote">\u2019</term><term name="page-range-delimiter">\u2013</term><term name="ordinal">th</term><term name="ordinal-01">st</term><term name="ordinal-02">nd</term><term name="ordinal-03">rd</term><term name="ordinal-11">th</term><term name="ordinal-12">th</term><term name="ordinal-13">th</term><term name="long-ordinal-01">first</term><term name="long-ordinal-02">second</term><term name="long-ordinal-03">third</term><term name="long-ordinal-04">fourth</term><term name="long-ordinal-05">fifth</term><term name="long-ordinal-06">sixth</term><term name="long-ordinal-07">seventh</term><term name="long-ordinal-08">eighth</term><term name="long-ordinal-09">ninth</term><term name="long-ordinal-10">tenth</term><term name="book"><single>book</single><multiple>books</multiple></term><term name="chapter"><single>chapter</single><multiple>chapters</multiple></term><term name="column"><single>column</single><multiple>columns</multiple></term><term name="figure"><single>figure</single><multiple>figures</multiple></term><term name="folio"><single>folio</single><multiple>folios</multiple></term><term name="issue"><single>number</single><multiple>numbers</multiple></term><term name="line"><single>line</single><multiple>lines</multiple></term><term name="note"><single>note</single><multiple>notes</multiple></term><term name="opus"><single>opus</single><multiple>opera</multiple></term><term name="page"><single>page</single><multiple>pages</multiple></term><term name="number-of-pages"><single>page</single><multiple>pages</multiple></term><term name="paragraph"><single>paragraph</single><multiple>paragraphs</multiple></term><term name="part"><single>part</single><multiple>parts</multiple></term><term name="section"><single>section</single><multiple>sections</multiple></term><term name="sub verbo"><single>sub verbo</single><multiple>sub verbis</multiple></term><term name="verse"><single>verse</single><multiple>verses</multiple>\n</term><term name="volume"><single>volume</single><multiple>volumes</multiple></term><term name="book" form="short"><single>bk.</single><multiple>bks.</multiple></term><term name="chapter" form="short"><single>chap.</single><multiple>chaps.</multiple></term><term name="column" form="short"><single>col.</single><multiple>cols.</multiple></term><term name="figure" form="short"><single>fig.</single><multiple>figs.</multiple></term><term name="folio" form="short"><single>fol.</single><multiple>fols.</multiple></term><term name="issue" form="short"><single>no.</single><multiple>nos.</multiple></term><term name="line" form="short"><single>l.</single><multiple>ll.</multiple></term><term name="note" form="short"><single>n.</single><multiple>nn.</multiple></term><term name="opus" form="short"><single>op.</single><multiple>opp.</multiple></term><term name="page" form="short"><single>p.</single><multiple>pp.</multiple></term><term name="number-of-pages" form="short"><single>p.</single><multiple>pp.</multiple></term><term name="paragraph" form="short"><single>para.</single><multiple>paras.</multiple></term><term name="part" form="short"><single>pt.</single><multiple>pts.</multiple></term><term name="section" form="short"><single>sec.</single><multiple>secs.</multiple></term><term name="sub verbo" form="short"><single>s.v.</single><multiple>s.vv.</multiple></term><term name="verse" form="short"><single>v.</single><multiple>vv.</multiple></term><term name="volume" form="short"><single>vol.</single><multiple>vols.</multiple></term><term name="paragraph" form="symbol"><single>\xb6</single><multiple>\xb6\xb6</multiple></term><term name="section" form="symbol"><single>\xa7</single><multiple>\xa7\xa7</multiple></term><term name="director"><single>director</single><multiple>directors</multiple></term><term name="editor"><single>editor</single><multiple>editors</multiple></term><term name="editorial-director"><single>editor</single><multiple>editors</multiple></term><term name="illustrator"><single>illustrator</single><multiple>illustrators</multiple></term><term name="translator"><single>translator</single><multiple>translators</multiple></term><term name="editortranslator"><single>editor &amp; translator</single><multiple>editors &amp; translators</multiple></term><term name="director" form="short"><single>dir.</single><multiple>dirs.</multiple></term><term name="editor" form="short"><single>ed.</single><multiple>eds.</multiple></term><term name="editorial-director" form="short"><single>ed.</single><multiple>eds.</multiple></term><term name="illustrator" form="short"><single>ill.</single><multiple>ills.</multiple></term><term name="translator" form="short"><single>tran.</single><multiple>trans.</multiple></term><term name="editortranslator" form="short"><single>ed. &amp; tran.</single><multiple>eds. &amp; trans.</multiple></term><term name="container-author" form="verb">by</term><term name="director" form="verb">directed by</term><term name="editor" form="verb">edited by</term><term name="editorial-director" form="verb">edited by</term><term name="illustrator" form="verb">illustrated by</term><term name="interviewer" form="verb">interview by</term><term name="recipient" form="verb">to</term><term name="reviewed-author" form="verb">by</term><term name="translator" form="verb">translated by</term><term name="editortranslator" form="verb">edited &amp; translated by</term><term name="director" form="verb-short">dir. by</term><term name="editor" form="verb-short">ed. by</term><term name="editorial-director" form="verb-short">ed. by</term><term name="illustrator" form="verb-short">illus. by</term><term name="translator" form="verb-short">trans. by</term><term name="editortranslator" form="verb-short">ed. &amp; trans. by</term><term name="month-01">January</term><term name="month-02">February</term><term name="month-03">March</term><term name="month-04">April</term><term name="month-05">May</term><term name="month-06">June</term><term name="month-07">July</term><term name="month-08">August</term><term name="month-09">September</term>\n<term name="month-10">October</term><term name="month-11">November</term><term name="month-12">December</term><term name="month-01" form="short">Jan.</term><term name="month-02" form="short">Feb.</term><term name="month-03" form="short">Mar.</term><term name="month-04" form="short">Apr.</term><term name="month-05" form="short">May</term><term name="month-06" form="short">Jun.</term><term name="month-07" form="short">Jul.</term><term name="month-08" form="short">Aug.</term><term name="month-09" form="short">Sep.</term><term name="month-10" form="short">Oct.</term><term name="month-11" form="short">Nov.</term><term name="month-12" form="short">Dec.</term><term name="season-01">Spring</term><term name="season-02">Summer</term><term name="season-03">Autumn</term><term name="season-04">Winter</term></terms></locale>',"nl-NL":'<?xml version="1.0" encoding="utf-8"?><locale xmlns="http://purl.org/net/xbiblio/csl" version="1.0" xml:lang="nl-NL"><info><translator><name>Rintze Zelle</name><uri>http://twitter.com/rintzezelle</uri></translator><rights license="http://creativecommons.org/licenses/by-sa/3.0/">This work is licensed under a Creative Commons Attribution-ShareAlike 3.0 License</rights><updated>2012-07-04T23:31:02+00:00</updated></info><style-options punctuation-in-quote="false"/><date form="text"><date-part name="day" suffix=" "/><date-part name="month" suffix=" "/><date-part name="year"/></date><date form="numeric"><date-part name="day" suffix="-" range-delimiter="/"/><date-part name="month" form="numeric" suffix="-" range-delimiter="/"/><date-part name="year"/></date><terms><term name="accessed">geraadpleegd</term><term name="and">en</term><term name="and others">en anderen</term><term name="anonymous">anoniem</term><term name="anonymous" form="short">anon.</term><term name="at">bij</term><term name="available at">beschikbaar op</term><term name="by">door</term><term name="circa">circa</term><term name="circa" form="short">c.</term><term name="cited">geciteerd</term><term name="edition"><single>editie</single><multiple>edities</multiple></term><term name="edition" form="short">ed.</term><term name="et-al">e.a.</term><term name="forthcoming">in voorbereiding</term><term name="from">van</term><term name="ibid">ibid.</term><term name="in">in</term><term name="in press">in druk</term><term name="internet">internet</term><term name="interview">interview</term><term name="letter">brief</term><term name="no date">zonder datum</term><term name="no date" form="short">z.d.</term><term name="online">online</term><term name="presented at">gepresenteerd bij</term><term name="reference"><single>referentie</single><multiple>referenties</multiple></term><term name="reference" form="short"><single>ref.</single><multiple>refs.</multiple></term><term name="retrieved">geraadpleegd</term><term name="scale">schaal</term><term name="version">versie</term><term name="ad">AD</term><term name="bc">BC</term><term name="open-quote">\u201c</term><term name="close-quote">\u201d</term><term name="open-inner-quote">\u2018</term><term name="close-inner-quote">\u2019</term><term name="page-range-delimiter">\u2013</term><term name="ordinal">ste</term><term name="ordinal-00" match="whole-number">de</term><term name="ordinal-02" match="last-two-digits">de</term><term name="ordinal-03" match="last-two-digits">de</term><term name="ordinal-04" match="last-two-digits">de</term><term name="ordinal-05" match="last-two-digits">de</term><term name="ordinal-06" match="last-two-digits">de</term><term name="ordinal-07" match="last-two-digits">de</term><term name="ordinal-09" match="last-two-digits">de</term><term name="ordinal-10">de</term><term name="ordinal-11">de</term><term name="ordinal-12">de</term><term name="ordinal-13">de</term><term name="ordinal-14">de</term><term name="ordinal-15">de</term><term name="ordinal-16">de</term><term name="ordinal-17">de</term><term name="ordinal-18">de</term><term name="ordinal-19">de</term><term name="long-ordinal-01">eerste</term><term name="long-ordinal-02">tweede</term><term name="long-ordinal-03">derde</term><term name="long-ordinal-04">vierde</term><term name="long-ordinal-05">vijfde</term><term name="long-ordinal-06">zesde</term><term name="long-ordinal-07">zevende</term><term name="long-ordinal-08">achtste</term><term name="long-ordinal-09">negende</term><term name="long-ordinal-10">tiende</term><term name="book"><single>boek</single><multiple>boeken</multiple></term><term name="chapter"><single>hoofdstuk</single><multiple>hoofdstukken</multiple></term><term name="column"><single>column</single><multiple>columns</multiple></term><term name="figure"><single>figuur</single><multiple>figuren</multiple></term><term name="folio"><single>folio</single><multiple>folio\'s</multiple></term><term name="issue"><single>nummer</single><multiple>nummers</multiple></term><term name="line"><single>regel</single><multiple>regels</multiple>\n</term><term name="note"><single>aantekening</single><multiple>aantekeningen</multiple></term><term name="opus"><single>opus</single><multiple>opera</multiple></term><term name="page"><single>pagina</single><multiple>pagina\'s</multiple></term><term name="number-of-pages"><single>pagina</single><multiple>pagina\'s</multiple></term><term name="paragraph"><single>paragraaf</single><multiple>paragrafen</multiple></term><term name="part"><single>deel</single><multiple>delen</multiple></term><term name="section"><single>sectie</single><multiple>secties</multiple></term><term name="sub verbo"><single>sub verbo</single><multiple>sub verbis</multiple></term><term name="verse"><single>vers</single><multiple>versen</multiple></term><term name="volume"><single>volume</single><multiple>volumes</multiple></term><term name="book" form="short">bk.</term><term name="chapter" form="short">hfdst.</term><term name="column" form="short">col.</term><term name="figure" form="short">fig.</term><term name="folio" form="short">f.</term><term name="issue" form="short">nr.</term><term name="line" form="short">l.</term><term name="note" form="short">n.</term><term name="opus" form="short">op.</term><term name="page" form="short"><single>p.</single><multiple>pp.</multiple></term><term name="number-of-pages" form="short"><single>p.</single><multiple>pp.</multiple></term><term name="paragraph" form="short">par.</term><term name="part" form="short">deel</term><term name="section" form="short">sec.</term><term name="sub verbo" form="short"><single>s.v.</single><multiple>s.vv.</multiple></term><term name="verse" form="short"><single>v.</single><multiple>vv.</multiple></term><term name="volume" form="short"><single>vol.</single><multiple>vols.</multiple></term><term name="paragraph" form="symbol"><single>\xb6</single><multiple>\xb6\xb6</multiple></term><term name="section" form="symbol"><single>\xa7</single><multiple>\xa7\xa7</multiple></term><term name="director"><single>regisseur</single><multiple>regisseurs</multiple></term><term name="editor"><single>redacteur</single><multiple>redacteuren</multiple></term><term name="editorial-director"><single>redacteur</single><multiple>redacteuren</multiple></term><term name="illustrator"><single>illustrator</single><multiple>illustrators</multiple></term><term name="translator"><single>vertaler</single><multiple>vertalers</multiple></term><term name="editortranslator"><single>redacteur &amp; vertaler</single><multiple>redacteuren &amp; vertalers</multiple></term><term name="director" form="short"><single>reg.</single><multiple>reg.</multiple></term><term name="editor" form="short"><single>red.</single><multiple>red.</multiple></term><term name="editorial-director" form="short"><single>red.</single><multiple>red.</multiple></term><term name="illustrator" form="short"><single>ill.</single><multiple>ill.</multiple></term><term name="translator" form="short"><single>vert.</single><multiple>vert.</multiple></term><term name="editortranslator" form="short"><single>red. &amp; vert.</single><multiple>red. &amp; vert.</multiple></term><term name="container-author" form="verb">door</term><term name="director" form="verb">geregisseerd door</term><term name="editor" form="verb">bewerkt door</term><term name="editorial-director" form="verb">bewerkt door</term><term name="illustrator" form="verb">ge\xefllustreerd door</term><term name="interviewer" form="verb">ge\xefnterviewd door</term><term name="recipient" form="verb">ontvangen door</term><term name="reviewed-author" form="verb">door</term><term name="translator" form="verb">vertaald door</term><term name="editortranslator" form="verb">bewerkt &amp; vertaald door</term><term name="director" form="verb-short">geregisseerd door</term><term name="editor" form="verb-short">bewerkt door</term><term name="editorial-director" form="verb-short">bewerkt door</term><term name="illustrator" form="verb-short">ge\xefllustreerd door</term><term name="translator" form="verb-short">vertaald door</term><term name="editortranslator" form="verb-short">bewerkt &amp; vertaald door</term>\n<term name="month-01">januari</term><term name="month-02">februari</term><term name="month-03">maart</term><term name="month-04">april</term><term name="month-05">mei</term><term name="month-06">juni</term><term name="month-07">juli</term><term name="month-08">augustus</term><term name="month-09">september</term><term name="month-10">oktober</term><term name="month-11">november</term><term name="month-12">december</term><term name="month-01" form="short">jan.</term><term name="month-02" form="short">feb.</term><term name="month-03" form="short">mrt.</term><term name="month-04" form="short">apr.</term><term name="month-05" form="short">mei</term><term name="month-06" form="short">jun.</term><term name="month-07" form="short">jul.</term><term name="month-08" form="short">aug.</term><term name="month-09" form="short">sep.</term><term name="month-10" form="short">okt.</term><term name="month-11" form="short">nov.</term><term name="month-12" form="short">dec.</term><term name="season-01">lente</term><term name="season-02">zomer</term><term name="season-03">herst</term><term name="season-04">winter</term></terms></locale>',"fr-FR":'<?xml version="1.0" encoding="utf-8"?><locale xmlns="http://purl.org/net/xbiblio/csl" version="1.0" xml:lang="fr-FR"><info><translator><name>Gr\xe9goire Colly</name></translator><rights license="http://creativecommons.org/licenses/by-sa/3.0/">This work is licensed under a Creative Commons Attribution-ShareAlike 3.0 License</rights><updated>2012-07-04T23:31:02+00:00</updated></info><style-options punctuation-in-quote="false" limit-day-ordinals-to-day-1="true"/><date form="text"><date-part name="day" suffix=" "/><date-part name="month" suffix=" "/><date-part name="year"/></date><date form="numeric"><date-part name="day" form="numeric-leading-zeros" suffix="/"/><date-part name="month" form="numeric-leading-zeros" suffix="/"/><date-part name="year"/></date><terms><term name="accessed">consult\xe9 le</term><term name="and">et</term><term name="and others">et autres</term><term name="anonymous">anonyme</term><term name="anonymous" form="short">anon.</term><term name="at">sur</term><term name="available at">disponible sur</term><term name="by">par</term><term name="circa">vers</term><term name="circa" form="short">v.</term><term name="cited">cit\xe9</term><term name="edition" gender="feminine"><single>\xe9dition</single><multiple>\xe9ditions</multiple></term><term name="edition" form="short">\xe9d.</term><term name="et-al">et al.</term><term name="forthcoming">\xe0 para\xeetre</term><term name="from">\xe0 l\'adresse</term><term name="ibid">ibid.</term><term name="in">in</term><term name="in press">sous presse</term><term name="internet">Internet</term><term name="interview">entretien</term><term name="letter">lettre</term><term name="no date">sans date</term><term name="no date" form="short">s.&#160;d.</term><term name="online">en ligne</term><term name="presented at">pr\xe9sent\xe9 \xe0</term><term name="reference"><single>r\xe9f\xe9rence</single><multiple>r\xe9f\xe9rences</multiple></term><term name="reference" form="short"><single>r\xe9f.</single><multiple>r\xe9f.</multiple></term><term name="retrieved">consult\xe9</term><term name="scale">\xe9chelle</term><term name="version">version</term><term name="ad">apr. J.-C.</term><term name="bc">av. J.-C.</term><term name="open-quote">\xab&#160;</term><term name="close-quote">&#160;\xbb</term><term name="open-inner-quote">\u201c</term><term name="close-inner-quote">\u201d</term><term name="page-range-delimiter">&#8209;</term><term name="ordinal">\u1d49</term><term name="ordinal-01" gender-form="feminine" match="whole-number">\u02b3\u1d49</term><term name="ordinal-01" gender-form="masculine" match="whole-number">\u1d49\u02b3</term><term name="long-ordinal-01">premier</term><term name="long-ordinal-02">deuxi\xe8me</term><term name="long-ordinal-03">troisi\xe8me</term><term name="long-ordinal-04">quatri\xe8me</term><term name="long-ordinal-05">cinqui\xe8me</term><term name="long-ordinal-06">sixi\xe8me</term><term name="long-ordinal-07">septi\xe8me</term><term name="long-ordinal-08">huiti\xe8me</term><term name="long-ordinal-09">neuvi\xe8me</term><term name="long-ordinal-10">dixi\xe8me</term><term name="book"><single>livre</single><multiple>livres</multiple></term><term name="chapter"><single>chapitre</single><multiple>chapitres</multiple></term><term name="column"><single>colonne</single><multiple>colonnes</multiple></term><term name="figure"><single>figure</single><multiple>figures</multiple></term><term name="folio"><single>folio</single><multiple>folios</multiple></term><term name="issue" gender="masculine"><single>num\xe9ro</single><multiple>num\xe9ros</multiple></term><term name="line"><single>ligne</single><multiple>lignes</multiple></term><term name="note"><single>note</single><multiple>notes</multiple></term><term name="opus"><single>opus</single><multiple>opus</multiple></term><term name="page"><single>page</single><multiple>pages</multiple></term><term name="number-of-pages"><single>page</single><multiple>pages</multiple></term><term name="paragraph"><single>paragraphe</single><multiple>paragraphes</multiple></term><term name="part"><single>partie</single><multiple>parties</multiple></term><term name="section"><single>section</single><multiple>sections</multiple>\n</term><term name="sub verbo"><single>sub verbo</single><multiple>sub verbis</multiple></term><term name="verse"><single>verset</single><multiple>versets</multiple></term><term name="volume" gender="masculine"><single>volume</single><multiple>volumes</multiple></term><term name="book" form="short">liv.</term><term name="chapter" form="short">chap.</term><term name="column" form="short">col.</term><term name="figure" form="short">fig.</term><term name="folio" form="short"><single>f\u1d52</single><multiple>f\u1d52\u02e2</multiple></term><term name="issue" form="short"><single>n\u1d52</single><multiple>n\u1d52\u02e2</multiple></term><term name="line" form="short">l.</term><term name="note" form="short">n.</term><term name="opus" form="short">op.</term><term name="page" form="short"><single>p.</single><multiple>p.</multiple></term><term name="number-of-pages" form="short"><single>p.</single><multiple>p.</multiple></term><term name="paragraph" form="short">paragr.</term><term name="part" form="short">part.</term><term name="section" form="short">sect.</term><term name="sub verbo" form="short"><single>s.&#160;v.</single><multiple>s.&#160;vv.</multiple></term><term name="verse" form="short"><single>v.</single><multiple>v.</multiple></term><term name="volume" form="short"><single>vol.</single><multiple>vol.</multiple></term><term name="paragraph" form="symbol"><single>\xa7</single><multiple>\xa7</multiple></term><term name="section" form="symbol"><single>\xa7</single><multiple>\xa7</multiple></term><term name="director"><single>r\xe9alisateur</single><multiple>r\xe9alisateurs</multiple></term><term name="editor"><single>\xe9diteur</single><multiple>\xe9diteurs</multiple></term><term name="editorial-director"><single>directeur</single><multiple>directeurs</multiple></term><term name="illustrator"><single>illustrateur</single><multiple>illustrateurs</multiple></term><term name="translator"><single>traducteur</single><multiple>traducteurs</multiple></term><term name="editortranslator"><single>\xe9diteur et traducteur</single><multiple>\xe9diteurs et traducteurs</multiple></term><term name="director" form="short"><single>r\xe9al.</single><multiple>r\xe9al.</multiple></term><term name="editor" form="short"><single>\xe9d.</single><multiple>\xe9d.</multiple></term><term name="editorial-director" form="short"><single>dir.</single><multiple>dir.</multiple></term><term name="illustrator" form="short"><single>ill.</single><multiple>ill.</multiple></term><term name="translator" form="short"><single>trad.</single><multiple>trad.</multiple></term><term name="editortranslator" form="short"><single>\xe9d. et trad.</single><multiple>\xe9d. et trad.</multiple></term><term name="container-author" form="verb">par</term><term name="director" form="verb">r\xe9alis\xe9 par</term><term name="editor" form="verb">\xe9dit\xe9 par</term><term name="editorial-director" form="verb">sous la direction de</term><term name="illustrator" form="verb">illustr\xe9 par</term><term name="interviewer" form="verb">entretien r\xe9alis\xe9 par</term><term name="recipient" form="verb">\xe0</term><term name="reviewed-author" form="verb">par</term><term name="translator" form="verb">traduit par</term><term name="editortranslator" form="verb">\xe9dit\xe9 et traduit par</term><term name="director" form="verb-short">r\xe9al. par</term><term name="editor" form="verb-short">\xe9d. par</term><term name="editorial-director" form="verb-short">ss la dir. de</term><term name="illustrator" form="verb-short">ill. par</term><term name="translator" form="verb-short">trad. par</term><term name="editortranslator" form="verb-short">\xe9d. et trad. par</term><term name="month-01" gender="masculine">janvier</term><term name="month-02" gender="masculine">f\xe9vrier</term><term name="month-03" gender="masculine">mars</term><term name="month-04" gender="masculine">avril</term><term name="month-05" gender="masculine">mai</term><term name="month-06" gender="masculine">juin</term><term name="month-07" gender="masculine">juillet</term><term name="month-08" gender="masculine">ao\xfbt</term><term name="month-09" gender="masculine">septembre</term><term name="month-10" gender="masculine">\noctobre</term><term name="month-11" gender="masculine">novembre</term><term name="month-12" gender="masculine">d\xe9cembre</term><term name="month-01" form="short">janv.</term><term name="month-02" form="short">f\xe9vr.</term><term name="month-03" form="short">mars</term><term name="month-04" form="short">avr.</term><term name="month-05" form="short">mai</term><term name="month-06" form="short">juin</term><term name="month-07" form="short">juill.</term><term name="month-08" form="short">ao\xfbt</term><term name="month-09" form="short">sept.</term><term name="month-10" form="short">oct.</term><term name="month-11" form="short">nov.</term><term name="month-12" form="short">d\xe9c.</term><term name="season-01">printemps</term><term name="season-02">\xe9t\xe9</term><term name="season-03">automne</term><term name="season-04">hiver</term></terms></locale>',"de-DE":'<?xml version="1.0" encoding="utf-8"?><locale xmlns="http://purl.org/net/xbiblio/csl" version="1.0" xml:lang="de-DE"><info><rights license="http://creativecommons.org/licenses/by-sa/3.0/">This work is licensed under a Creative Commons Attribution-ShareAlike 3.0 License</rights><updated>2012-07-04T23:31:02+00:00</updated></info><style-options punctuation-in-quote="false"/><date form="text"><date-part name="day" form="ordinal" suffix=" "/><date-part name="month" suffix=" "/><date-part name="year"/></date><date form="numeric"><date-part name="day" form="numeric-leading-zeros" suffix="."/><date-part name="month" form="numeric-leading-zeros" suffix="."/><date-part name="year"/></date><terms><term name="accessed">zugegriffen</term><term name="and">und</term><term name="and others">und andere</term><term name="anonymous">ohne Autor</term><term name="anonymous" form="short">o.&#160;A.</term><term name="at">auf</term><term name="available at">verf\xfcgbar unter</term><term name="by">von</term><term name="circa">circa</term><term name="circa" form="short">ca.</term><term name="cited">zitiert</term><term name="edition"><single>Auflage</single><multiple>Auflagen</multiple></term><term name="edition" form="short">Aufl.</term><term name="et-al">u.&#160;a.</term><term name="forthcoming">i.&#160;E.</term><term name="from">von</term><term name="ibid">ebd.</term><term name="in">in</term><term name="in press">im Druck</term><term name="internet">Internet</term><term name="interview">Interview</term><term name="letter">Brief</term><term name="no date">ohne Datum</term><term name="no date" form="short">o.&#160;J.</term><term name="online">online</term><term name="presented at">gehalten auf der</term><term name="reference"><single>Referenz</single><multiple>Referenzen</multiple></term><term name="reference" form="short"><single>Ref.</single><multiple>Ref.</multiple></term><term name="retrieved">abgerufen</term><term name="scale">Ma\xdfstab</term><term name="version">Version</term><term name="ad">n.&#160;Chr.</term><term name="bc">v.&#160;Chr.</term><term name="open-quote">\u201e</term><term name="close-quote">\u201c</term><term name="open-inner-quote">\u201a</term><term name="close-inner-quote">\u2018</term><term name="page-range-delimiter">\u2013</term><term name="ordinal">.</term><term name="long-ordinal-01">erster</term><term name="long-ordinal-02">zweiter</term><term name="long-ordinal-03">dritter</term><term name="long-ordinal-04">vierter</term><term name="long-ordinal-05">f\xfcnfter</term><term name="long-ordinal-06">sechster</term><term name="long-ordinal-07">siebter</term><term name="long-ordinal-08">achter</term><term name="long-ordinal-09">neunter</term><term name="long-ordinal-10">zehnter</term><term name="book"><single>Buch</single><multiple>B\xfccher</multiple></term><term name="chapter"><single>Kapitel</single><multiple>Kapitel</multiple></term><term name="column"><single>Spalte</single><multiple>Spalten</multiple></term><term name="figure"><single>Abbildung</single><multiple>Abbildungen</multiple></term><term name="folio"><single>Blatt</single><multiple>Bl\xe4tter</multiple></term><term name="issue"><single>Nummer</single><multiple>Nummern</multiple></term><term name="line"><single>Zeile</single><multiple>Zeilen</multiple></term><term name="note"><single>Note</single><multiple>Noten</multiple></term><term name="opus"><single>Opus</single><multiple>Opera</multiple></term><term name="page"><single>Seite</single><multiple>Seiten</multiple></term><term name="number-of-pages"><single>Seite</single><multiple>Seiten</multiple></term><term name="paragraph"><single>Absatz</single><multiple>Abs\xe4tze</multiple></term><term name="part"><single>Teil</single><multiple>Teile</multiple></term><term name="section"><single>Abschnitt</single><multiple>Abschnitte</multiple></term><term name="sub verbo"><single>sub verbo</single><multiple>sub verbis</multiple></term><term name="verse"><single>Vers</single><multiple>Verse</multiple></term><term name="volume"><single>Band</single><multiple>B\xe4nde</multiple></term><term name="book" form="short">B.</term>\n<term name="chapter" form="short">Kap.</term><term name="column" form="short">Sp.</term><term name="figure" form="short">Abb.</term><term name="folio" form="short">Fol.</term><term name="issue" form="short">Nr.</term><term name="line" form="short">Z.</term><term name="note" form="short">N.</term><term name="opus" form="short">op.</term><term name="page" form="short"><single>S.</single><multiple>S.</multiple></term><term name="number-of-pages" form="short"><single>S.</single><multiple>S.</multiple></term><term name="paragraph" form="short">Abs.</term><term name="part" form="short">Teil</term><term name="section" form="short">Abschn.</term><term name="sub verbo" form="short"><single>s.&#160;v.</single><multiple>s.&#160;vv.</multiple></term><term name="verse" form="short"><single>V.</single><multiple>V.</multiple></term><term name="volume" form="short"><single>Bd.</single><multiple>Bde.</multiple></term><term name="paragraph" form="symbol"><single>\xb6</single><multiple>\xb6\xb6</multiple></term><term name="section" form="symbol"><single>\xa7</single><multiple>\xa7\xa7</multiple></term><term name="director"><single>Regisseur</single><multiple>Regisseure</multiple></term><term name="editor"><single>Herausgeber</single><multiple>Herausgeber</multiple></term><term name="collection-editor"><single>Reihenherausgeber</single><multiple>Reihenherausgeber</multiple></term><term name="editorial-director"><single>Herausgeber</single><multiple>Herausgeber</multiple></term><term name="illustrator"><single>Illustrator</single><multiple>Illustratoren</multiple></term><term name="translator"><single>\xdcbersetzer</single><multiple>\xdcbersetzer</multiple></term><term name="editortranslator"><single>Herausgeber&#160;&amp; \xdcbersetzer</single><multiple>Herausgeber&#160;&amp; \xdcbersetzer</multiple></term><term name="director" form="short"><single>Reg.</single><multiple>Reg.</multiple></term><term name="editor" form="short"><single>Hrsg.</single><multiple>Hrsg.</multiple></term><term name="collection-editor" form="short"><single>Hrsg.</single><multiple>Hrsg.</multiple></term><term name="editorial-director" form="short"><single>Hrsg.</single><multiple>Hrsg.</multiple></term><term name="illustrator" form="short"><single>Ill.</single><multiple>Ill.</multiple></term><term name="translator" form="short"><single>\xdcbers.</single><multiple>\xdcbers.</multiple></term><term name="editortranslator" form="short"><single>Hrsg.&#160;&amp; \xdcbers.</single><multiple>Hrsg.&#160;&amp; \xdcbers</multiple></term><term name="container-author" form="verb">von</term><term name="director" form="verb">Regie von</term><term name="editor" form="verb">herausgegeben von</term><term name="collection-editor" form="verb">herausgegeben von</term><term name="editorial-director" form="verb">herausgegeben von</term><term name="illustrator" form="verb">illustriert von</term><term name="interviewer" form="verb">interviewt von</term><term name="recipient" form="verb">an</term><term name="reviewed-author" form="verb">von</term><term name="translator" form="verb">\xfcbersetzt von</term><term name="editortranslator" form="verb">herausgegeben und \xfcbersetzt von</term><term name="director" form="verb-short">Reg.</term><term name="editor" form="verb-short">hg. von</term><term name="collection-editor" form="verb-short">hg. von</term><term name="editorial-director" form="verb-short">hg. von</term><term name="illustrator" form="verb-short">illus. von</term><term name="translator" form="verb-short">\xfcbers. von</term><term name="editortranslator" form="verb-short">hg.&#160;&amp; \xfcbers. von</term><term name="month-01">Januar</term><term name="month-02">Februar</term><term name="month-03">M\xe4rz</term><term name="month-04">April</term><term name="month-05">Mai</term><term name="month-06">Juni</term><term name="month-07">Juli</term><term name="month-08">August</term><term name="month-09">September</term><term name="month-10">Oktober</term><term name="month-11">November</term><term name="month-12">Dezember</term><term name="month-01" form="short">Jan.</term><term name="month-02" form="short">Feb.</term>\n<term name="month-03" form="short">M\xe4rz</term><term name="month-04" form="short">Apr.</term><term name="month-05" form="short">Mai</term><term name="month-06" form="short">Juni</term><term name="month-07" form="short">Juli</term><term name="month-08" form="short">Aug.</term><term name="month-09" form="short">Sep.</term><term name="month-10" form="short">Okt.</term><term name="month-11" form="short">Nov.</term><term name="month-12" form="short">Dez.</term><term name="season-01">Fr\xfchjahr</term><term name="season-02">Sommer</term><term name="season-03">Herbst</term><term name="season-04">Winter</term></terms></locale>',"es-ES":'<?xml version="1.0" encoding="utf-8"?><locale xmlns="http://purl.org/net/xbiblio/csl" version="1.0" xml:lang="es-ES"><info><rights license="http://creativecommons.org/licenses/by-sa/3.0/">This work is licensed under a Creative Commons Attribution-ShareAlike 3.0 License</rights><updated>2012-07-04T23:31:02+00:00</updated></info><style-options punctuation-in-quote="false"/><date form="text"><date-part name="day" suffix=" de "/><date-part name="month" suffix=" de "/><date-part name="year"/></date><date form="numeric"><date-part name="day" form="numeric-leading-zeros" suffix="/"/><date-part name="month" form="numeric-leading-zeros" suffix="/"/><date-part name="year"/></date><terms><term name="accessed">accedido</term><term name="and">y</term><term name="and others">y otros</term><term name="anonymous">an\xf3nimo</term><term name="anonymous" form="short">an\xf3n.</term><term name="at">en</term><term name="available at">disponible en</term><term name="by">de</term><term name="circa">circa</term><term name="circa" form="short">c.</term><term name="cited">citado</term><term name="edition"><single>edici\xf3n</single><multiple>ediciones</multiple></term><term name="edition" form="short">ed.</term><term name="et-al">et&#160;al.</term><term name="forthcoming">previsto</term><term name="from">a partir de</term><term name="ibid">ibid.</term><term name="in">en</term><term name="in press">en imprenta</term><term name="internet">internet</term><term name="interview">entrevista</term><term name="letter">carta</term><term name="no date">sin fecha</term><term name="no date" form="short">s.&#160;f.</term><term name="online">en l\xednea</term><term name="presented at">presentado en</term><term name="reference"><single>referencia</single><multiple>referencias</multiple></term><term name="reference" form="short"><single>ref.</single><multiple>refs.</multiple></term><term name="retrieved">recuperado</term><term name="scale">escala</term><term name="version">versi\xf3n</term><term name="ad">d.&#160;C.</term><term name="bc">a.&#160;C.</term><term name="open-quote">\xab</term><term name="close-quote">\xbb</term><term name="open-inner-quote">\u201c</term><term name="close-inner-quote">\u201d</term><term name="page-range-delimiter">-</term><term name="ordinal">.\xaa</term><term name="long-ordinal-01">primera</term><term name="long-ordinal-02">segunda</term><term name="long-ordinal-03">tercera</term><term name="long-ordinal-04">cuarta</term><term name="long-ordinal-05">quinta</term><term name="long-ordinal-06">sexta</term><term name="long-ordinal-07">s\xe9ptima</term><term name="long-ordinal-08">octava</term><term name="long-ordinal-09">novena</term><term name="long-ordinal-10">d\xe9cima</term><term name="book"><single>libro</single><multiple>libros</multiple></term><term name="chapter"><single>cap\xedtulo</single><multiple>cap\xedtulos</multiple></term><term name="column"><single>columna</single><multiple>columnas</multiple></term><term name="figure"><single>figura</single><multiple>figuras</multiple></term><term name="folio"><single>folio</single><multiple>folios</multiple></term><term name="issue"><single>n\xfamero</single><multiple>n\xfameros</multiple></term><term name="line"><single>l\xednea</single><multiple>l\xedneas</multiple></term><term name="note"><single>nota</single><multiple>notas</multiple></term><term name="opus"><single>opus</single><multiple>opera</multiple></term><term name="page"><single>p\xe1gina</single><multiple>p\xe1ginas</multiple></term><term name="number-of-pages"><single>p\xe1gina</single><multiple>p\xe1ginas</multiple></term><term name="paragraph"><single>p\xe1rrafo</single><multiple>p\xe1rrafos</multiple></term><term name="part"><single>parte</single><multiple>partes</multiple></term><term name="section"><single>secci\xf3n</single><multiple>secciones</multiple></term><term name="sub verbo"><single>sub voce</single><multiple>sub vocibus</multiple></term><term name="verse"><single>verso</single><multiple>versos</multiple></term><term name="volume"><single>volumen</single><multiple>vol\xfamenes</multiple></term><term name="book" form="short">lib.</term>\n<term name="chapter" form="short">cap.</term><term name="column" form="short">col.</term><term name="figure" form="short">fig.</term><term name="folio" form="short">f.</term><term name="issue" form="short">n.\xba</term><term name="line" form="short">l.</term><term name="note" form="short">n.</term><term name="opus" form="short">op.</term><term name="page" form="short"><single>p.</single><multiple>pp.</multiple></term><term name="number-of-pages" form="short"><single>p.</single><multiple>pp.</multiple></term><term name="paragraph" form="short">p\xe1rr.</term><term name="part" form="short">pt.</term><term name="section" form="short">sec.</term><term name="sub verbo" form="short"><single>s.&#160;v.</single><multiple>s.&#160;vv.</multiple></term><term name="verse" form="short"><single>v.</single><multiple>vv.</multiple></term><term name="volume" form="short"><single>vol.</single><multiple>vols.</multiple></term><term name="paragraph" form="symbol"><single>\xa7</single><multiple>\xa7</multiple></term><term name="section" form="symbol"><single>\xa7</single><multiple>\xa7</multiple></term><term name="director"><single>director</single><multiple>directores</multiple></term><term name="editor"><single>editor</single><multiple>editores</multiple></term><term name="editorial-director"><single>editor</single><multiple>editores</multiple></term><term name="illustrator"><single>ilustrador</single><multiple>ilustradores</multiple></term><term name="translator"><single>traductor</single><multiple>traductores</multiple></term><term name="editortranslator"><single>editor y traductor</single><multiple>editores y traductores</multiple></term><term name="director" form="short"><single>dir.</single><multiple>dirs.</multiple></term><term name="editor" form="short"><single>ed.</single><multiple>eds.</multiple></term><term name="editorial-director" form="short"><single>ed.</single><multiple>eds.</multiple></term><term name="illustrator" form="short"><single>ilust.</single><multiple>ilusts.</multiple></term><term name="translator" form="short"><single>trad.</single><multiple>trads.</multiple></term><term name="editortranslator" form="short"><single>ed. y trad.</single><multiple>eds. y trads.</multiple></term><term name="container-author" form="verb">de</term><term name="director" form="verb">dirigido por</term><term name="editor" form="verb">editado por</term><term name="editorial-director" form="verb">editado por</term><term name="illustrator" form="verb">ilustrado por</term><term name="interviewer" form="verb">entrevistado por</term><term name="recipient" form="verb">a</term><term name="reviewed-author" form="verb">por</term><term name="translator" form="verb">traducido por</term><term name="editortranslator" form="verb">editado y traducido por</term><term name="director" form="verb-short">dir.</term><term name="editor" form="verb-short">ed.</term><term name="editorial-director" form="verb-short">ed.</term><term name="illustrator" form="verb-short">ilust.</term><term name="translator" form="verb-short">trad.</term><term name="editortranslator" form="verb-short">ed. y trad.</term><term name="month-01">enero</term><term name="month-02">febrero</term><term name="month-03">marzo</term><term name="month-04">abril</term><term name="month-05">mayo</term><term name="month-06">junio</term><term name="month-07">julio</term><term name="month-08">agosto</term><term name="month-09">septiembre</term><term name="month-10">octubre</term><term name="month-11">noviembre</term><term name="month-12">diciembre</term><term name="month-01" form="short">ene.</term><term name="month-02" form="short">feb.</term><term name="month-03" form="short">mar.</term><term name="month-04" form="short">abr.</term><term name="month-05" form="short">may</term><term name="month-06" form="short">jun.</term><term name="month-07" form="short">jul.</term><term name="month-08" form="short">ago.</term><term name="month-09" form="short">sep.</term><term name="month-10" form="short">oct.</term><term name="month-11" form="short">nov.</term><term name="month-12" form="short">\ndic.</term><term name="season-01">primavera</term><term name="season-02">verano</term><term name="season-03">oto\xf1o</term><term name="season-04">invierno</term></terms></locale>'}},{}],384:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.locales=exports["default"]=void 0;var _register=_interopRequireDefault(require("../../../util/register")),_locales=_interopRequireDefault(require("./locales.json"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var locales=new _register["default"](_locales["default"]);exports.locales=locales;var _default=function(lang){return locales.has(lang)?locales.get(lang):locales.get("en-US")};exports["default"]=_default},{"../../../util/register":449,"./locales.json":383}],385:[function(require,module,exports){module.exports={apa:'<?xml version="1.0" encoding="utf-8"?><style xmlns="http://purl.org/net/xbiblio/csl" class="in-text" version="1.0" demote-non-dropping-particle="never"><info><title>American Psychological Association 6th edition</title><title-short>APA</title-short><id>http://www.zotero.org/styles/apa</id><link href="http://www.zotero.org/styles/apa" rel="self"/><link href="http://owl.english.purdue.edu/owl/resource/560/01/" rel="documentation"/><author><name>Simon Kornblith</name><email>simon@simonster.com</email></author><contributor><name>Bruce D\'Arcus</name></contributor><contributor><name>Curtis M. Humphrey</name></contributor><contributor><name>Richard Karnesky</name><email>karnesky+zotero@gmail.com</email><uri>http://arc.nucapt.northwestern.edu/Richard_Karnesky</uri></contributor><contributor><name>Sebastian Karcher</name></contributor><contributor><name> Brenton M. Wiernik</name><email>zotero@wiernik.org</email></contributor><category citation-format="author-date"/><category field="psychology"/><category field="generic-base"/><updated>2016-05-25T09:01:49+00:00</updated><rights license="http://creativecommons.org/licenses/by-sa/3.0/">This work is licensed under a Creative Commons Attribution-ShareAlike 3.0 License</rights></info><locale xml:lang="en"><terms><term name="editortranslator" form="short"><single>ed. &amp; trans.</single><multiple>eds. &amp; trans.</multiple></term><term name="translator" form="short"><single>trans.</single><multiple>trans.</multiple></term></terms></locale><macro name="container-contributors"><choose><if type="chapter paper-conference entry-dictionary entry-encyclopedia" match="any"><group delimiter=", "><names variable="container-author" delimiter=", "><name and="symbol" initialize-with=". " delimiter=", "/><label form="short" prefix=" (" text-case="title" suffix=")"/></names><names variable="editor translator" delimiter=", "><name and="symbol" initialize-with=". " delimiter=", "/><label form="short" prefix=" (" text-case="title" suffix=")"/></names></group></if></choose></macro><macro name="secondary-contributors"><choose><if type="article-journal chapter paper-conference entry-dictionary entry-encyclopedia" match="none"><group delimiter=", " prefix=" (" suffix=")"><names variable="container-author" delimiter=", "><name and="symbol" initialize-with=". " delimiter=", "/><label form="short" prefix=", " text-case="title"/></names><names variable="editor translator" delimiter=", "><name and="symbol" initialize-with=". " delimiter=", "/><label form="short" prefix=", " text-case="title"/></names></group></if></choose></macro><macro name="author"><names variable="author"><name name-as-sort-order="all" and="symbol" sort-separator=", " initialize-with=". " delimiter=", " delimiter-precedes-last="always"/><label form="short" prefix=" (" suffix=")" text-case="capitalize-first"/><substitute><names variable="editor"/><names variable="translator"/><choose><if type="report"><text variable="publisher"/><text macro="title"/></if><else><text macro="title"/></else></choose></substitute></names></macro><macro name="author-short"><names variable="author"><name form="short" and="symbol" delimiter=", " initialize-with=". "/><substitute><names variable="editor"/><names variable="translator"/><choose><if type="report"><text variable="publisher"/><text variable="title" form="short" font-style="italic"/></if><else-if type="legal_case"><text variable="title" font-style="italic"/></else-if><else-if type="bill book graphic legislation motion_picture song" match="any"><text variable="title" form="short" font-style="italic"/></else-if><else-if variable="reviewed-author"><choose><if variable="reviewed-title" match="none"><text variable="title" form="short" font-style="italic" prefix="Review of "/></if><else><text variable="title" form="short" quotes="true"/></else></choose></else-if><else><text variable="title" form="short" quotes="true"/></else></choose></substitute></names></macro><macro name="access"><choose><if type="thesis report" match="any"><choose><if variable="DOI" match="any">\n<text variable="DOI" prefix="https://doi.org/"/></if><else-if variable="archive" match="any"><group><text term="retrieved" text-case="capitalize-first" suffix=" "/><text term="from" suffix=" "/><text variable="archive" suffix="."/><text variable="archive_location" prefix=" (" suffix=")"/></group></else-if><else><group><text term="retrieved" text-case="capitalize-first" suffix=" "/><text term="from" suffix=" "/><text variable="URL"/></group></else></choose></if><else><choose><if variable="DOI"><text variable="DOI" prefix="https://doi.org/"/></if><else><choose><if type="webpage"><group delimiter=" "><text term="retrieved" text-case="capitalize-first" suffix=" "/><group><date variable="accessed" form="text" suffix=", "/></group><text term="from"/><text variable="URL"/></group></if><else><group><text term="retrieved" text-case="capitalize-first" suffix=" "/><text term="from" suffix=" "/><text variable="URL"/></group></else></choose></else></choose></else></choose></macro><macro name="title"><choose><if type="book graphic manuscript motion_picture report song speech thesis" match="any"><choose><if variable="version" type="book" match="all"><text variable="title"/></if><else><text variable="title" font-style="italic"/></else></choose></if><else-if variable="reviewed-author"><choose><if variable="reviewed-title"><group delimiter=" "><text variable="title"/><group delimiter=", " prefix="[" suffix="]"><text variable="reviewed-title" font-style="italic" prefix="Review of "/><names variable="reviewed-author" delimiter=", "><label form="verb-short" suffix=" "/><name and="symbol" initialize-with=". " delimiter=", "/></names></group></group></if><else><group delimiter=", " prefix="[" suffix="]"><text variable="title" font-style="italic" prefix="Review of "/><names variable="reviewed-author" delimiter=", "><label form="verb-short" suffix=" "/><name and="symbol" initialize-with=". " delimiter=", "/></names></group></else></choose></else-if><else><text variable="title"/></else></choose></macro><macro name="title-plus-extra"><text macro="title"/><choose><if type="report thesis" match="any"><group prefix=" (" suffix=")" delimiter=", "><group delimiter=" "><choose><if variable="genre" match="any"><text variable="genre"/></if><else><text variable="collection-title"/></else></choose><text variable="number" prefix="No. "/></group><group delimiter=" "><text term="version" text-case="capitalize-first"/><text variable="version"/></group><text macro="edition"/></group></if><else-if type="post-weblog webpage" match="any"><text variable="genre" prefix=" [" suffix="]"/></else-if><else-if variable="version"><group delimiter=" " prefix=" (" suffix=")"><text term="version" text-case="capitalize-first"/><text variable="version"/></group></else-if></choose><text macro="format" prefix=" [" suffix="]"/></macro><macro name="format"><choose><if match="any" variable="medium"><text variable="medium" text-case="capitalize-first"/></if><else-if type="dataset" match="any"><text value="Data set"/></else-if></choose></macro><macro name="publisher"><choose><if type="report" match="any"><group delimiter=": "><text variable="publisher-place"/><text variable="publisher"/></group></if><else-if type="thesis" match="any"><group delimiter=", "><text variable="publisher"/><text variable="publisher-place"/></group></else-if><else-if type="post-weblog webpage" match="none"><group delimiter=", "><choose><if variable="event version" type="speech motion_picture" match="none"><text variable="genre"/></if></choose><choose><if type="article-journal article-magazine" match="none"><group delimiter=": "><choose><if variable="publisher-place"><text variable="publisher-place"/></if><else><text variable="event-place"/></else></choose><text variable="publisher"/></group></if></choose></group></else-if></choose></macro><macro name="event"><choose><if variable="container-title" match="none"><choose><if variable="event"><choose><if variable="genre" match="none"><text term="presented at" text-case="capitalize-first" suffix=" "/><text variable="event"/></if><else>\n<group delimiter=" "><text variable="genre" text-case="capitalize-first"/><text term="presented at"/><text variable="event"/></group></else></choose></if><else-if type="speech"><text variable="genre" text-case="capitalize-first"/></else-if></choose></if></choose></macro><macro name="issued"><choose><if type="bill legal_case legislation" match="none"><choose><if variable="issued"><group prefix=" (" suffix=")"><date variable="issued"><date-part name="year"/></date><text variable="year-suffix"/><choose><if type="speech" match="any"><date variable="issued"><date-part prefix=", " name="month"/></date></if><else-if type="article-journal bill book chapter graphic legal_case legislation motion_picture paper-conference report song dataset" match="none"><date variable="issued"><date-part prefix=", " name="month"/><date-part prefix=" " name="day"/></date></else-if></choose></group></if><else-if variable="status"><group prefix=" (" suffix=")"><text variable="status"/><text variable="year-suffix" prefix="-"/></group></else-if><else><group prefix=" (" suffix=")"><text term="no date" form="short"/><text variable="year-suffix" prefix="-"/></group></else></choose></if></choose></macro><macro name="issued-sort"><choose><if type="article-journal bill book chapter graphic legal_case legislation motion_picture paper-conference report song dataset" match="none"><date variable="issued"><date-part name="year"/><date-part name="month"/><date-part name="day"/></date></if><else><date variable="issued"><date-part name="year"/></date></else></choose></macro><macro name="issued-year"><choose><if variable="issued"><group delimiter="/"><date variable="original-date" form="text"/><group><date variable="issued"><date-part name="year"/></date><text variable="year-suffix"/></group></group></if><else-if variable="status"><text variable="status"/><text variable="year-suffix" prefix="-"/></else-if><else><text term="no date" form="short"/><text variable="year-suffix" prefix="-"/></else></choose></macro><macro name="edition"><choose><if is-numeric="edition"><group delimiter=" "><number variable="edition" form="ordinal"/><text term="edition" form="short"/></group></if><else><text variable="edition"/></else></choose></macro><macro name="locators"><choose><if type="article-journal article-magazine" match="any"><group prefix=", " delimiter=", "><group><text variable="volume" font-style="italic"/><text variable="issue" prefix="(" suffix=")"/></group><text variable="page"/></group><choose><if variable="issued"><choose><if variable="page issue" match="none"><text variable="status" prefix=". "/></if></choose></if></choose></if><else-if type="article-newspaper"><group delimiter=" " prefix=", "><label variable="page" form="short"/><text variable="page"/></group></else-if><else-if type="book graphic motion_picture report song chapter paper-conference entry-encyclopedia entry-dictionary" match="any"><group prefix=" (" suffix=")" delimiter=", "><choose><if type="report" match="none"><text macro="edition"/></if></choose><choose><if variable="volume" match="any"><group><text term="volume" form="short" text-case="capitalize-first" suffix=" "/><number variable="volume" form="numeric"/></group></if><else><group><text term="volume" form="short" plural="true" text-case="capitalize-first" suffix=" "/><number variable="number-of-volumes" form="numeric" prefix="1&#8211;"/></group></else></choose><group><label variable="page" form="short" suffix=" "/><text variable="page"/></group></group></else-if><else-if type="legal_case"><group prefix=" (" suffix=")" delimiter=" "><text variable="authority"/><date variable="issued" form="text"/></group></else-if><else-if type="bill legislation" match="any"><date variable="issued" prefix=" (" suffix=")"><date-part name="year"/></date></else-if></choose></macro><macro name="citation-locator"><group><choose><if locator="chapter"><label variable="locator" form="long" text-case="capitalize-first"/></if><else><label variable="locator" form="short"/></else></choose><text variable="locator" prefix=" "/></group></macro>\n<macro name="container"><choose><if type="post-weblog webpage" match="none"><group><choose><if type="chapter paper-conference entry-encyclopedia" match="any"><text term="in" text-case="capitalize-first" suffix=" "/></if></choose><group delimiter=", "><text macro="container-contributors"/><text macro="secondary-contributors"/><text macro="container-title"/></group></group></if></choose></macro><macro name="container-title"><choose><if type="article article-journal article-magazine article-newspaper" match="any"><text variable="container-title" font-style="italic" text-case="title"/></if><else-if type="bill legal_case legislation" match="none"><text variable="container-title" font-style="italic"/></else-if></choose></macro><macro name="legal-cites"><choose><if type="bill legal_case legislation" match="any"><group delimiter=" " prefix=", "><choose><if variable="container-title"><text variable="volume"/><text variable="container-title"/><group delimiter=" "><text term="section" form="symbol"/><text variable="section"/></group><text variable="page"/></if><else><choose><if type="legal_case"><text variable="number" prefix="No. "/></if><else><text variable="number" prefix="Pub. L. No. "/><group delimiter=" "><text term="section" form="symbol"/><text variable="section"/></group></else></choose></else></choose></group></if></choose></macro><macro name="original-date"><choose><if variable="original-date"><group prefix="(" suffix=")" delimiter=" "><text value="Original work published"/><date variable="original-date" form="text"/></group></if></choose></macro><citation et-al-min="6" et-al-use-first="1" et-al-subsequent-min="3" et-al-subsequent-use-first="1" disambiguate-add-year-suffix="true" disambiguate-add-names="true" disambiguate-add-givenname="true" collapse="year" givenname-disambiguation-rule="primary-name"><sort><key macro="author"/><key macro="issued-sort"/></sort><layout prefix="(" suffix=")" delimiter="; "><group delimiter=", "><text macro="author-short"/><text macro="issued-year"/><text macro="citation-locator"/></group></layout></citation><bibliography hanging-indent="true" et-al-min="8" et-al-use-first="6" et-al-use-last="true" entry-spacing="0" line-spacing="2"><sort><key macro="author"/><key macro="issued-sort" sort="ascending"/><key macro="title"/></sort><layout><group suffix="."><group delimiter=". "><text macro="author"/><text macro="issued"/><text macro="title-plus-extra"/><text macro="container"/></group><text macro="legal-cites"/><text macro="locators"/><group delimiter=", " prefix=". "><text macro="event"/><text macro="publisher"/></group></group><text macro="access" prefix=" "/><text macro="original-date" prefix=" "/></layout></bibliography></style>',vancouver:'<?xml version="1.0" encoding="utf-8"?><style xmlns="http://purl.org/net/xbiblio/csl" class="in-text" version="1.0" demote-non-dropping-particle="sort-only" page-range-format="minimal"><info><title>Vancouver</title><id>http://www.zotero.org/styles/vancouver</id><link href="http://www.zotero.org/styles/vancouver" rel="self"/><link href="http://www.nlm.nih.gov/bsd/uniform_requirements.html" rel="documentation"/><author><name>Michael Berkowitz</name><email>mberkowi@gmu.edu</email></author><contributor><name>Sean Takats</name><email>stakats@gmu.edu</email></contributor><contributor><name>Sebastian Karcher</name></contributor><category citation-format="numeric"/><category field="medicine"/><summary>Vancouver style as outlined by International Committee of Medical Journal Editors Uniform Requirements for Manuscripts Submitted to Biomedical Journals: Sample References</summary><updated>2014-09-06T16:03:01+00:00</updated><rights license="http://creativecommons.org/licenses/by-sa/3.0/">This work is licensed under a Creative Commons Attribution-ShareAlike 3.0 License</rights></info><locale xml:lang="en"><date form="text" delimiter=" "><date-part name="year"/><date-part name="month" form="short" strip-periods="true"/><date-part name="day"/></date><terms><term name="collection-editor" form="long"><single>editor</single><multiple>editors</multiple></term><term name="presented at">presented at</term><term name="available at">available from</term><term name="section" form="short">sect.</term></terms></locale><locale xml:lang="fr"><date form="text" delimiter=" "><date-part name="day"/><date-part name="month" form="short" strip-periods="true"/><date-part name="year"/></date></locale><macro name="author"><names variable="author"><name sort-separator=" " initialize-with="" name-as-sort-order="all" delimiter=", " delimiter-precedes-last="always"/><label form="long" prefix=", "/><substitute><names variable="editor"/></substitute></names></macro><macro name="editor"><names variable="editor" suffix="."><name sort-separator=" " initialize-with="" name-as-sort-order="all" delimiter=", " delimiter-precedes-last="always"/><label form="long" prefix=", "/></names></macro><macro name="chapter-marker"><choose><if type="chapter paper-conference entry-dictionary entry-encyclopedia" match="any"><text term="in" text-case="capitalize-first"/></if></choose></macro><macro name="publisher"><choose><if type="article-journal article-magazine article-newspaper" match="none"><group delimiter=": " suffix=";"><choose><if type="thesis"><text variable="publisher-place" prefix="[" suffix="]"/></if><else-if type="speech"/><else><text variable="publisher-place"/></else></choose><text variable="publisher"/></group></if></choose></macro><macro name="access"><choose><if variable="URL"><group delimiter=": "><text term="available at" text-case="capitalize-first"/><text variable="URL"/></group></if></choose></macro><macro name="accessed-date"><choose><if variable="URL"><group prefix="[" suffix="]" delimiter=" "><text term="cited" text-case="lowercase"/><date variable="accessed" form="text"/></group></if></choose></macro><macro name="container-title"><choose><if type="article-journal article-magazine chapter paper-conference article-newspaper review review-book entry-dictionary entry-encyclopedia" match="any"><group suffix="." delimiter=" "><choose><if type="article-journal review review-book" match="any"><text variable="container-title" form="short" strip-periods="true"/></if><else><text variable="container-title" strip-periods="true"/></else></choose><choose><if variable="URL"><text term="internet" prefix="[" suffix="]" text-case="capitalize-first"/></if></choose></group><text macro="edition" prefix=" "/></if><else-if type="bill legislation" match="any"><group delimiter=", "><group delimiter=". "><text variable="container-title"/><group delimiter=" "><text term="section" form="short" text-case="capitalize-first"/><text variable="section"/></group></group><text variable="number"/></group></else-if><else-if type="speech">\n<group delimiter=": " suffix=";"><group delimiter=" "><text variable="genre" text-case="capitalize-first"/><text term="presented at"/></group><text variable="event"/></group></else-if><else><group delimiter=", " suffix="."><choose><if variable="collection-title" match="none"><group delimiter=" "><label variable="volume" form="short" text-case="capitalize-first"/><text variable="volume"/></group></if></choose><text variable="container-title"/></group></else></choose></macro><macro name="title"><text variable="title"/><choose><if type="article-journal article-magazine chapter paper-conference article-newspaper review review-book entry-dictionary entry-encyclopedia" match="none"><choose><if variable="URL"><text term="internet" prefix=" [" suffix="]" text-case="capitalize-first"/></if></choose><text macro="edition" prefix=". "/></if></choose><choose><if type="thesis"><text variable="genre" prefix=" [" suffix="]"/></if></choose></macro><macro name="edition"><choose><if is-numeric="edition"><group delimiter=" "><number variable="edition" form="ordinal"/><text term="edition" form="short"/></group></if><else><text variable="edition" suffix="."/></else></choose></macro><macro name="date"><choose><if type="article-journal article-magazine article-newspaper review review-book" match="any"><group suffix=";" delimiter=" "><date variable="issued" form="text"/><text macro="accessed-date"/></group></if><else-if type="bill legislation" match="any"><group delimiter=", "><date variable="issued" delimiter=" "><date-part name="month" form="short" strip-periods="true"/><date-part name="day"/></date><date variable="issued"><date-part name="year"/></date></group></else-if><else-if type="report"><date variable="issued" delimiter=" "><date-part name="year"/><date-part name="month" form="short" strip-periods="true"/></date><text macro="accessed-date" prefix=" "/></else-if><else-if type="patent"><group suffix="."><group delimiter=", "><text variable="number"/><date variable="issued"><date-part name="year"/></date></group><text macro="accessed-date" prefix=" "/></group></else-if><else-if type="speech"><group delimiter="; "><group delimiter=" "><date variable="issued" delimiter=" "><date-part name="year"/><date-part name="month" form="short" strip-periods="true"/><date-part name="day"/></date><text macro="accessed-date"/></group><text variable="event-place"/></group></else-if><else><group suffix="."><date variable="issued"><date-part name="year"/></date><text macro="accessed-date" prefix=" "/></group></else></choose></macro><macro name="pages"><choose><if type="article-journal article-magazine article-newspaper review review-book" match="any"><text variable="page" prefix=":"/></if><else-if type="book" match="any"><text variable="number-of-pages" prefix=" "/><choose><if is-numeric="number-of-pages"><label variable="number-of-pages" form="short" prefix=" " plural="never"/></if></choose></else-if><else><group prefix=" " delimiter=" "><label variable="page" form="short" plural="never"/><text variable="page"/></group></else></choose></macro><macro name="journal-location"><choose><if type="article-journal article-magazine review review-book" match="any"><text variable="volume"/><text variable="issue" prefix="(" suffix=")"/></if></choose></macro><macro name="collection-details"><choose><if type="article-journal article-magazine article-newspaper review review-book" match="none"><choose><if variable="collection-title"><group delimiter=" " prefix="(" suffix=")"><names variable="collection-editor" suffix="."><name sort-separator=" " initialize-with="" name-as-sort-order="all" delimiter=", " delimiter-precedes-last="always"/><label form="long" prefix=", "/></names><group delimiter="; "><text variable="collection-title"/><group delimiter=" "><label variable="volume" form="short"/><text variable="volume"/></group></group></group></if></choose></if></choose></macro><macro name="report-details"><choose><if type="report"><text variable="number" prefix="Report No.: "/></if></choose></macro><citation collapse="citation-number">\n<sort><key variable="citation-number"/></sort><layout prefix="(" suffix=")" delimiter=","><text variable="citation-number"/></layout></citation><bibliography et-al-min="7" et-al-use-first="6" second-field-align="flush"><layout><text variable="citation-number" suffix=". "/><group delimiter=". " suffix=". "><text macro="author"/><text macro="title"/></group><group delimiter=" " suffix=". "><group delimiter=": "><text macro="chapter-marker"/><group delimiter=" "><text macro="editor"/><text macro="container-title"/></group></group><text macro="publisher"/><group><text macro="date"/><text macro="journal-location"/><text macro="pages"/></group></group><text macro="collection-details" suffix=". "/><text macro="report-details" suffix=". "/><text macro="access"/></layout></bibliography></style>',harvard1:'<?xml version="1.0" encoding="utf-8"?><style xmlns="http://purl.org/net/xbiblio/csl" class="in-text" version="1.0" demote-non-dropping-particle="sort-only"><info><title>Harvard Reference format 1 (author-date)</title><id>http://www.zotero.org/styles/harvard1</id><link href="http://www.zotero.org/styles/harvard1" rel="self"/><link href="http://libweb.anglia.ac.uk/referencing/harvard.htm" rel="documentation"/><author><name>Julian Onions</name><email>julian.onions@gmail.com</email></author><category citation-format="author-date"/><category field="generic-base"/><summary>The Harvard author-date style</summary><updated>2012-09-27T22:06:38+00:00</updated><rights license="http://creativecommons.org/licenses/by-sa/3.0/">This work is licensed under a Creative Commons Attribution-ShareAlike 3.0 License</rights></info><macro name="editor"><names variable="editor" delimiter=", "><name and="symbol" initialize-with=". " delimiter=", "/><label form="short" prefix=", " text-case="lowercase"/></names></macro><macro name="anon"><text term="anonymous" form="short" text-case="capitalize-first" strip-periods="true"/></macro><macro name="author"><names variable="author"><name name-as-sort-order="all" and="symbol" sort-separator=", " initialize-with="." delimiter-precedes-last="never" delimiter=", "/><label form="short" prefix=" " text-case="lowercase"/><substitute><names variable="editor"/><text macro="anon"/></substitute></names></macro><macro name="author-short"><names variable="author"><name form="short" and="symbol" delimiter=", " delimiter-precedes-last="never" initialize-with=". "/><substitute><names variable="editor"/><names variable="translator"/><text macro="anon"/></substitute></names></macro><macro name="access"><choose><if variable="URL"><text value="Available at:" suffix=" "/><text variable="URL"/><group prefix=" [" suffix="]"><text term="accessed" text-case="capitalize-first" suffix=" "/><date variable="accessed"><date-part name="month" suffix=" "/><date-part name="day" suffix=", "/><date-part name="year"/></date></group></if></choose></macro><macro name="title"><choose><if type="bill book graphic legal_case legislation motion_picture report song thesis" match="any"><text variable="title" font-style="italic"/></if><else><text variable="title"/></else></choose></macro><macro name="publisher"><group delimiter=": "><text variable="publisher-place"/><text variable="publisher"/></group></macro><macro name="year-date"><choose><if variable="issued"><date variable="issued"><date-part name="year"/></date></if><else><text term="no date" form="short"/></else></choose></macro><macro name="edition"><choose><if is-numeric="edition"><group delimiter=" "><number variable="edition" form="ordinal"/><text term="edition" form="short"/></group></if><else><text variable="edition" suffix="."/></else></choose></macro><macro name="pages"><group><label variable="page" form="short" suffix=" "/><text variable="page"/></group></macro><citation et-al-min="3" et-al-use-first="1" disambiguate-add-year-suffix="true" disambiguate-add-names="true" disambiguate-add-givenname="true"><layout prefix="(" suffix=")" delimiter="; "><group delimiter=", "><group delimiter=" "><text macro="author-short"/><text macro="year-date"/></group><group><label variable="locator" form="short"/><text variable="locator"/></group></group></layout></citation><bibliography hanging-indent="true" et-al-min="4" et-al-use-first="1"><sort><key macro="author"/><key variable="title"/></sort><layout><text macro="author" suffix=","/><date variable="issued" prefix=" " suffix="."><date-part name="year"/></date><choose><if type="bill book graphic legal_case legislation motion_picture report song" match="any"><group prefix=" " delimiter=" " suffix=","><text macro="title"/><text macro="edition"/><text macro="editor"/></group><text prefix=" " suffix="." macro="publisher"/></if><else-if type="chapter paper-conference" match="any"><text macro="title" prefix=" " suffix="."/><group prefix=" " delimiter=" "><text term="in" text-case="capitalize-first"/>\n<text macro="editor"/><text variable="container-title" font-style="italic" suffix="."/><text variable="collection-title" suffix="."/><text variable="event" suffix="."/><group suffix="." delimiter=", "><text macro="publisher" prefix=" "/><text macro="pages"/></group></group></else-if><else-if type="thesis"><group prefix=" " suffix="." delimiter=". "><text macro="title"/><text variable="genre"/><text macro="publisher"/></group></else-if><else><group suffix="."><text macro="title" prefix=" "/><text macro="editor" prefix=" "/></group><group prefix=" " suffix="."><text variable="container-title" font-style="italic"/><group prefix=", "><text variable="volume"/><text variable="issue" prefix="(" suffix=")"/></group><group prefix=", "><label variable="page" form="short"/><text variable="page"/></group></group></else></choose><text prefix=" " macro="access" suffix="."/></layout></bibliography></style>'}},{}],386:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.templates=exports["default"]=void 0;var _register=_interopRequireDefault(require("../../../util/register")),_styles=_interopRequireDefault(require("./styles.json"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var templates=new _register["default"](_styles["default"]);exports.templates=templates;var _default=function(style){return templates.has(style)?templates.get(style):templates.get("apa")};exports["default"]=_default},{"../../../util/register":449,"./styles.json":385}],387:[function(require,module,exports){"use strict";var _registrar=require("../registrar"),modules=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};desc.get||desc.set?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj["default"]=obj,newObj}(require("./modules"));for(var _module in modules){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=undefined;try{for(var _step,_iterator=modules[_module][Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var _ref2=_step.value,_name=_ref2.name,_formatter=_ref2.formatter;(0,_registrar.add)(_name,_formatter)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator["return"]||_iterator["return"]()}finally{if(_didIteratorError)throw _iteratorError}}}},{"../registrar":393,"./modules":390}],388:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=exports.getJsonWrapper=void 0;var obj,_deepCopy=(obj=require("../../util/deepCopy.js"))&&obj.__esModule?obj:{"default":obj},_dict=require("../dict");function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _slicedToArray(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return function(arr,i){var _arr=[],_n=!0,_d=!1,_e=undefined;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i["return"]||_i["return"]()}finally{if(_d)throw _e}}return _arr}(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}var appendCommas=function(string,index,array){return string+(index<array.length-1?",":"")},getJsonObject=function(src,dict){var entries,isArray=Array.isArray(src);return entries=(entries=isArray?src.map(function(entry){return getJsonValue(entry,dict)}):Object.entries(src).map(function(_ref){var _ref2=_slicedToArray(_ref,2),prop=_ref2[0],value=_ref2[1];return'"'.concat(prop,'": ').concat(getJsonValue(value,dict))})).map(appendCommas).map(function(entry){return dict.listItem.join(entry)}),entries=dict.list.join(entries.join("")),isArray?"[".concat(entries,"]"):"{".concat(entries,"}")},getJsonValue=function(src,dict){return"object"===_typeof(src)&&null!==src?0===src.length?"[]":0===Object.keys(src).length?"{}":getJsonObject(src,dict):JSON.stringify(src)+""},getJson=function(src,dict){var entries=src.map(function(entry){return getJsonObject(entry,dict)});return entries=entries.map(appendCommas).map(function(entry){return dict.entry.join(entry)}),dict.bibliographyContainer.join("[".concat(entries,"]"))};exports.getJsonWrapper=function(src){return getJson(src,(0,_dict.get)("html"))};var _default=[{name:"data",formatter:function(data){var _ref3$type=(arguments.length>1&&arguments[1]!==undefined?arguments[1]:{}).type,type=void 0===_ref3$type?"text":_ref3$type;return"object"===type?(0,_deepCopy["default"])(data):(0,_dict.has)(type)?getJson(data,(0,_dict.get)(type)):""}}];exports["default"]=_default},{"../../util/deepCopy.js":444,"../dict":370}],389:[function(require,module,exports){"use strict";var obj;Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=exports.getLabel=void 0;var getLabel=((obj=require("./bibtex/label"))&&obj.__esModule?obj:{"default":obj})["default"];exports.getLabel=getLabel;var _default=[{name:"label",formatter:function(data){return data.reduce(function(object,entry){return object[entry.id]=getLabel(entry),object},{})}}];exports["default"]=_default},{"./bibtex/label":375}],390:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"bibtex",{enumerable:!0,get:function(){return _bibtex["default"]}}),Object.defineProperty(exports,"data",{enumerable:!0,get:function(){return _json["default"]}}),Object.defineProperty(exports,"label",{enumerable:!0,get:function(){return _label["default"]}}),Object.defineProperty(exports,"csl",{enumerable:!0,get:function(){return _csl["default"]}}),Object.defineProperty(exports,"ris",{enumerable:!0,get:function(){return _ris["default"]}});var _bibtex=_interopRequireDefault(require("./bibtex/")),_json=_interopRequireDefault(require("./json")),_label=_interopRequireDefault(require("./label")),_csl=_interopRequireDefault(require("./csl/")),_ris=_interopRequireDefault(require("./ris/"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}},{"./bibtex/":373,"./csl/":382,"./json":388,"./label":389,"./ris/":391}],391:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=void 0;var _name=_interopRequireDefault(require("../../name")),_date=_interopRequireDefault(require("../../date"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _slicedToArray(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return function(arr,i){var _arr=[],_n=!0,_d=!1,_e=undefined;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i["return"]||_i["return"]()}finally{if(_d)throw _e}}return _arr}(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}var typeMap={graphic:"ART",bill:"BILL","post-webblog":"BLOG",book:"BOOK","review-book":"BOOK",legal_case:"CASE",chapter:"CHAP","paper-conference":"CONF",dataset:"DATA","entry-dictionary":"DICT","entry-encyclopedia":"ENCYC",figure:"FIGURE",interview:"GEN",treaty:"GEN",post:"ICOMM",article:"JOUR","article-journal":"JOUR",review:"JOUR",legislation:"LEGAL",manuscript:"MANSCPT",map:"MAP","article-magazine":"MGZN",broadcast:"MPCT",motion_picture:"MPCT",musical_score:"MUSIC","article-newspaper":"NEWS",pamphlet:"PAMP",patent:"PAT",personal_communication:"PCOMM",report:"RPRT",song:"SOUND",speech:"SOUND",thesis:"THES"},name=function(names){return names.map(function(name){return(0,_name["default"])(name,!0)})},fieldMap={TY:{fieldName:"type",convert:function(type){return typeMap[type]||"GEN"}},AU:[{type:["review","review-book"],fieldName:"reviewed-author",convert:name},{type:"__default",fieldName:"author",convert:name}],DA:{fieldName:"issued",convert:function(date){return(0,_date["default"])(date,"/")}},PY:{fieldName:"issued",convert:function(date){return date["date-parts"][0][0]}},Y2:{fieldName:"accessed",convert:function(date){return(0,_date["default"])(date,"/")}},AB:"abstract",CN:"call-number",CY:["event-place","publisher-place"],DO:"DOI",ET:[{type:"book",fieldName:["version","edition"]}],IS:[{type:"__default",fieldName:"issue"}],J2:["journalAbbreviation"],LA:"language",LB:"citation-label",M1:"number",M3:["genre","medium"],N1:"note",RI:"reviewed-title",SE:"section",SN:[{type:"__default",fieldName:["ISBN","ISSN"]},{type:["patent","report"],fieldName:"number"}],SP:{fieldName:["first-page","page"]},T2:["container-title","collection-title"],T3:{fieldName:["container-title","collection-title"],keepAll:!0,convert:function(con,col){return con?col:undefined}},TI:["original-title","title"],TT:{fieldName:["original-title","title"],keepAll:!0,convert:function(origTitle,title){return origTitle?title:undefined}},UR:"URL",VL:"volume",A2:{fieldName:"editor",convert:name},C1:[{type:"chapter",fieldName:"section"},{type:"paper-conference",fieldName:"publisher-place"},{type:"map",fieldName:"scale"},{type:"musical_score",fieldName:"medium"}],C2:[{type:["article-journal","article"],fieldName:"PMCID"},{type:"paper-conference",fieldName:"issued",convert:function(date){return date["date-parts"][0][0]}},{type:"article-newspaper",fieldName:"issue"}],C3:[{type:["graphic","speech","sound","map"],fieldName:"dimensions"},{type:"paper-conference",fieldName:"container-title"}],C4:[{type:["review","review-book"],fieldName:"author",convert:name},{type:["motion_picture","broadcast"],fieldName:"genre"}],C5:[{type:["graphic","speech","sound","motion_picture","broadcast"],fieldName:"medium"}],C6:[{type:"report",fieldName:"issue"},{type:"patent",fieldName:"status"}],C7:[{type:["article-journal","article"],fieldName:"number"}],BT:[{type:"chapter",fieldName:"container-title"}],DB:"archive",DP:"source",ED:{fieldName:"editor",convert:name},ID:"id",NV:"number-of-volumes",OP:"references",PP:"publiser-place",ST:["short-title","titleShort"]},parseFieldInfo=function parseFieldInfo(fieldInfo,field,entry){if(!0===fieldInfo)return{sourceFields:[field]};if("string"==typeof fieldInfo)return{sourceFields:[fieldInfo]};if(Array.isArray(fieldInfo)&&"string"==typeof fieldInfo[0])return{sourceFields:fieldInfo};if(Array.isArray(fieldInfo)&&"object"===_typeof(fieldInfo[0])){var specificInfo,genericInfo;fieldInfo.forEach(function(infoPart){"string"==typeof infoPart.type&&infoPart.type===entry.type||Array.isArray(infoPart.type)&&infoPart.type.includes(entry.type)?specificInfo=infoPart:"__default"===infoPart.type&&(genericInfo=infoPart)});var combinedInfo=specificInfo||genericInfo;return combinedInfo?parseFieldInfo(combinedInfo.convert?combinedInfo:combinedInfo.fieldName,field,entry):{}}return"object"===_typeof(fieldInfo)&&null!==fieldInfo?{sourceFields:[].concat(fieldInfo.fieldName),workOnEmptyInput:fieldInfo.fieldName===undefined,convert:fieldInfo.convert,keepAll:!0===fieldInfo.keepAll}:{}},json=function(entry){var target={};for(var field in fieldMap){var _parseFieldInfo=parseFieldInfo(fieldMap[field],field,entry),_parseFieldInfo$sourc=_parseFieldInfo.sourceFields,sourceFields=void 0===_parseFieldInfo$sourc?[]:_parseFieldInfo$sourc,_parseFieldInfo$workO=_parseFieldInfo.workOnEmptyInput,workOnEmptyInput=void 0!==_parseFieldInfo$workO&&_parseFieldInfo$workO,_parseFieldInfo$conve=_parseFieldInfo.convert,convert=void 0!==_parseFieldInfo$conve&&_parseFieldInfo$conve,_parseFieldInfo$keepA=_parseFieldInfo.keepAll;if(void 0!==_parseFieldInfo$keepA&&_parseFieldInfo$keepA||(sourceFields=sourceFields.filter(entry.hasOwnProperty.bind(entry))),workOnEmptyInput||0!==sourceFields.length){var value=sourceFields.map(function(sourceField){return entry[sourceField]});"function"==typeof convert?(value=convert.call.apply(convert,[entry].concat(_toConsumableArray(value))))!==undefined&&(target[field]=value):target[field]=value[0]}}return target},getRisLine=function(prop){var value=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";return"".concat(prop,"  - ").concat(value,"\n")},getRisField=function(_ref){var _ref2=_slicedToArray(_ref,2),prop=_ref2[0],value=_ref2[1];return Array.isArray(value)?value.map(function(valuePart){return getRisLine(prop,valuePart)}).join(""):getRisLine(prop,value)},getRisPropList=function(entry){var props=Object.entries(entry);if("TY"!==props[0][0]){var typeTagIndex=props.findIndex(function(_ref3){return"TY"===_slicedToArray(_ref3,1)[0]}),typeTag=_slicedToArray(props.splice(typeTagIndex,1),1)[0];props.unshift(typeTag)}return props.push(["ER"]),props.map(getRisField).join("")},_default=[{name:"ris",formatter:function(data){var _ref5$type=(arguments.length>1&&arguments[1]!==undefined?arguments[1]:{}).type;return"object"===(void 0===_ref5$type?"text":_ref5$type)?data.map(json):data.map(json).map(getRisPropList).join("")}}];exports["default"]=_default},{"../../date":369,"../../name":392}],392:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=void 0;var startParts=["dropping-particle","given"],suffixParts=["suffix"],endParts=["non-dropping-particle","family"],_default=function(name){var reversed=arguments.length>1&&arguments[1]!==undefined&&arguments[1],get=function(parts){return parts.map(function(entry){return name[entry]||""}).filter(Boolean).join(" ")};if(name.literal)return name.literal;if(reversed){var suffixPart=get(suffixParts)?", ".concat(get(suffixParts)):"",startPart=get(startParts)?", ".concat(get(startParts)):"";return get(endParts)+suffixPart+startPart}return"".concat(get(startParts.concat(suffixParts,endParts)))};exports["default"]=_default},{}],393:[function(require,module,exports){"use strict";var obj;function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.format=exports.list=exports.has=exports.remove=exports.add=exports.register=void 0;var register=new(((obj=require("../util/register"))&&obj.__esModule?obj:{"default":obj})["default"]);exports.register=register;exports.add=function(name,formatter){!function(name,formatter){if("string"!=typeof name)throw new TypeError("Invalid output format name, expected string, got ".concat(_typeof(name)));if("function"!=typeof formatter)throw new TypeError("Invalid formatter, expected function, got ".concat(_typeof(formatter)))}(name,formatter),register.set(name,formatter)};exports.remove=function(name){register.remove(name)};exports.has=function(name){return register.has(name)};exports.list=function(){return register.list()};exports.format=function(name,data){if(!register.has(name))return logger.error("[get]",'Output plugin "'.concat(name,'" unavailable')),undefined;for(var _len=arguments.length,options=new Array(_len>2?_len-2:0),_key=2;_key<_len;_key++)options[_key-2]=arguments[_key];return register.get(name).apply(void 0,[data].concat(options))}},{"../util/register":449}],394:[function(require,module,exports){(function(global){global.logger=console}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],395:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=void 0;var obj,_name=(obj=require("./name"))&&obj.__esModule?obj:{"default":obj};function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}var fieldTypes={author:2,"collection-editor":2,composer:2,"container-author":2,editor:2,"editorial-director":2,director:2,interviewer:2,illustrator:2,"original-author":2,"reviewed-author":2,recipient:2,translator:2,accessed:3,container:3,"event-date":3,issued:3,"original-date":3,submitted:3,categories:"object",id:["string","number"],type:"string",language:"string",journalAbbreviation:"string",shortTitle:"string",abstract:"string",annote:"string",archive:"string",archive_location:"string","archive-place":"string",authority:"string","call-number":"string","chapter-number":"string","citation-number":"string","citation-label":"string","collection-number":"string","collection-title":"string","container-title":"string","container-title-short":"string",dimensions:"string",DOI:"string",edition:["string","number"],event:"string","event-place":"string","first-reference-note-number":"string",genre:"string",ISBN:"string",ISSN:"string",issue:["string","number"],jurisdiction:"string",keyword:"string",locator:"string",medium:"string",note:"string",number:["string","number"],"number-of-pages":"string","number-of-volumes":["string","number"],"original-publisher":"string","original-publisher-place":"string","original-title":"string",page:"string","page-first":"string",PMCID:"string",PMID:"string",publisher:"string","publisher-place":"string",references:"string","reviewed-title":"string",scale:"string",section:"string",source:"string",status:"string",title:"string","title-short":"string",URL:"string",version:"string",volume:["string","number"],"year-suffix":"string"},correctName=function(name){var bestGuessConversions=!(arguments.length>1&&arguments[1]!==undefined)||arguments[1];return"object"===_typeof(name)&&(name.literal||name.given||name.family)?name:bestGuessConversions?"string"==typeof name?(0,_name["default"])(name):void 0:undefined},correctField=function correctField(fieldName,value){var bestGuessConversions=!(arguments.length>2&&arguments[2]!==undefined)||arguments[2],fieldType=[].concat(fieldTypes[fieldName]);switch(fieldTypes[fieldName]){case 1:return correctName(value,bestGuessConversions);case 2:return function(nameList){var bestGuessConversions=!(arguments.length>1&&arguments[1]!==undefined)||arguments[1];if(nameList instanceof Array)return nameList.map(function(name){return correctName(name,bestGuessConversions)}).filter(Boolean)||undefined}(value,bestGuessConversions);case 3:return function(date){var bestGuessConversions=!(arguments.length>1&&arguments[1]!==undefined)||arguments[1],dp="date-parts";if(date&&date[dp]instanceof Array&&date[dp].every(function(part){return part instanceof Array})){if(date[dp].every(function(part){return part.every(function(datePart){return"number"==typeof datePart})}))return _defineProperty({},dp,date[dp].map(function(part){return part.slice()}));if(!bestGuessConversions)return undefined;if(date[dp].some(function(part){return part.some(function(datePart){return"string"==typeof datePart})}))return _defineProperty({},dp,date[dp].map(function(part){return part.map(parseFloat)}))}else if(date&&date instanceof Array&&date[0][dp]instanceof Array){if(date[0][dp].every(function(datePart){return"number"==typeof datePart}))return _defineProperty({},dp,[date[0][dp].slice()]);if(!bestGuessConversions)return undefined;if(date[0][dp].every(function(datePart){return"string"==typeof datePart}))return _defineProperty({},dp,[date[0][dp].map(parseFloat)])}}(value,bestGuessConversions)}return fieldType.includes(_typeof(value))?value:/^_/.test(value)?value:bestGuessConversions?"string"==typeof value&&fieldType.includes("number")&&parseFloat(value)?parseFloat(value):"number"==typeof value&&fieldType.includes("string")&&!fieldType.includes("number")?value.toString():Array.isArray(value)&&value.length?correctField(fieldName,value[0]):void 0:undefined},_default=function(data){return data.map(function(entry){var clean={};for(var field in entry){var correction=correctField(field,entry[field]);correction!==undefined&&(clean[field]=correction)}return clean})};exports["default"]=_default},{"./name":438}],396:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=exports.parse=exports.types=exports.scope=void 0;exports["default"]=exports.parse=function(value){var date=new Date(value);return date.getFullYear()?{"date-parts":[[date.getFullYear(),date.getMonth()+1,date.getDate()]]}:{raw:value}};exports.scope="@date";exports.types="@date"},{}],397:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _exportNames={wikidata:!0,bibtex:!0,bibtxt:!0,bibjson:!0,doi:!0,input:!0,date:!0,name:!0,json:!0,csl:!0};Object.defineProperty(exports,"date",{enumerable:!0,get:function(){return _date["default"]}}),Object.defineProperty(exports,"name",{enumerable:!0,get:function(){return _name["default"]}}),Object.defineProperty(exports,"json",{enumerable:!0,get:function(){return _json.parse}}),Object.defineProperty(exports,"csl",{enumerable:!0,get:function(){return _csl["default"]}}),exports.input=exports.doi=exports.bibjson=exports.bibtxt=exports.bibtex=exports.wikidata=void 0;var input=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};desc.get||desc.set?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj["default"]=obj,newObj}(require("./input/"));exports.input=input;var _date=_interopRequireDefault(require("./date")),_name=_interopRequireDefault(require("./name"));require("./modules/");var _bibjson=require("./modules/bibjson/"),_bibtex=require("./modules/bibtex/"),_doi=require("./modules/doi/"),_wikidata=require("./modules/wikidata/"),_json=require("./modules/other/json"),_csl=_interopRequireDefault(require("./csl")),_registrar=require("./registrar/");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.keys(_registrar).forEach(function(key){"default"!==key&&"__esModule"!==key&&(Object.prototype.hasOwnProperty.call(_exportNames,key)||Object.defineProperty(exports,key,{enumerable:!0,get:function(){return _registrar[key]}}))});var wikidata={list:_wikidata.parsers.list.parse,json:_wikidata.parsers.json.parse,prop:_wikidata.parsers.prop.parse,type:_wikidata.parsers.type.parse,async:{json:_wikidata.parsers.json.parseAsync,prop:_wikidata.parsers.prop.parseAsync}};exports.wikidata=wikidata;var bibtex={json:_bibtex.parsers.json.parse,text:_bibtex.parsers.text.parse,prop:_bibtex.parsers.prop.parse,type:_bibtex.parsers.type.parse};exports.bibtex=bibtex;var bibtxt={text:_bibtex.parsers.bibtxt.text,textEntry:_bibtex.parsers.bibtxt.textEntry};exports.bibtxt=bibtxt;var bibjson=_bibjson.parsers.json.parse;exports.bibjson=bibjson;var doi={id:_doi.parsers.id.parse,api:_doi.parsers.api.parse,async:{api:_doi.parsers.api.parseAsync}};exports.doi=doi},{"./csl":395,"./date":396,"./input/":406,"./modules/":422,"./modules/bibjson/":408,"./modules/bibtex/":411,"./modules/doi/":419,"./modules/other/json":429,"./modules/wikidata/":432,"./name":438,"./registrar/":442}],398:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=void 0;var obj,_deepCopy=(obj=require("../../../util/deepCopy"))&&obj.__esModule?obj:{"default":obj},_registrar=require("../../registrar/"),_graph=require("../graph");var fn,_ref,_default=(fn=regeneratorRuntime.mark(function _callee(input){var _ref2,_ref2$maxChainLength,maxChainLength,_ref2$generateGraph,generateGraph,forceType,type,output,graph,_args=arguments;return regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:_ref2=_args.length>1&&_args[1]!==undefined?_args[1]:{},_ref2$maxChainLength=_ref2.maxChainLength,maxChainLength=void 0===_ref2$maxChainLength?10:_ref2$maxChainLength,_ref2$generateGraph=_ref2.generateGraph,generateGraph=void 0===_ref2$generateGraph||_ref2$generateGraph,forceType=_ref2.forceType,type=forceType||(0,_registrar.type)(input),output=type.match(/array|object/)?(0,_deepCopy["default"])(input):input,graph=[{type:type,data:input}];case 4:if("@csl/list+object"===type){_context.next=15;break}if(!(maxChainLength--<=0)){_context.next=8;break}return logger.error("[set]","Max. number of parsing iterations reached"),_context.abrupt("return",[]);case 8:return _context.next=10,(0,_registrar.dataAsync)(output,type);case 10:output=_context.sent,type=(0,_registrar.type)(output),graph.push({type:type}),_context.next=4;break;case 15:return _context.abrupt("return",output.map(generateGraph?function(entry){return(0,_graph.applyGraph)(entry,graph)}:_graph.removeGraph));case 16:case"end":return _context.stop()}},_callee,this)}),_ref=function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function step(key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _next(value){step("next",value)}function _throw(err){step("throw",err)}_next()})},function(_x){return _ref.apply(this,arguments)});exports["default"]=_default},{"../../../util/deepCopy":444,"../../registrar/":442,"../graph":405}],399:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=void 0;var obj,_deepCopy=(obj=require("../../../util/deepCopy"))&&obj.__esModule?obj:{"default":obj},_registrar=require("../../registrar/");var fn,_ref,_default=(fn=regeneratorRuntime.mark(function _callee(input){var type,output;return regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return type=(0,_registrar.type)(input),output=type.match(/array|object/)?(0,_deepCopy["default"])(input):input,_context.abrupt("return",(0,_registrar.dataAsync)(output,type));case 3:case"end":return _context.stop()}},_callee,this)}),_ref=function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function step(key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _next(value){step("next",value)}function _throw(err){step("throw",err)}_next()})},function(_x){return _ref.apply(this,arguments)});exports["default"]=_default},{"../../../util/deepCopy":444,"../../registrar/":442}],400:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"default",{enumerable:!0,get:function(){return _data.dataAsync}});var _data=require("../../registrar/data")},{"../../registrar/data":440}],401:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"dataAsync",{enumerable:!0,get:function(){return _data["default"]}}),Object.defineProperty(exports,"chainAsync",{enumerable:!0,get:function(){return _chain["default"]}}),Object.defineProperty(exports,"chainLinkAsync",{enumerable:!0,get:function(){return _chainLink["default"]}}),exports.async=void 0;var _data=_interopRequireDefault(require("./data")),_chain=_interopRequireDefault(require("./chain")),_chainLink=_interopRequireDefault(require("./chainLink"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var async={data:_data["default"],chain:_chain["default"],chainLink:_chainLink["default"]};exports.async=async},{"./chain":398,"./chainLink":399,"./data":400}],402:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=void 0;var obj,_deepCopy=(obj=require("../../util/deepCopy"))&&obj.__esModule?obj:{"default":obj},_registrar=require("../registrar/"),_graph=require("./graph");var _default=function(input){for(var _ref=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},_ref$maxChainLength=_ref.maxChainLength,maxChainLength=void 0===_ref$maxChainLength?10:_ref$maxChainLength,_ref$generateGraph=_ref.generateGraph,generateGraph=void 0===_ref$generateGraph||_ref$generateGraph,type=_ref.forceType||(0,_registrar.type)(input),output=type.match(/object$/)?(0,_deepCopy["default"])(input):input,graph=[{type:type,data:input}];"@csl/list+object"!==type;){if(maxChainLength--<=0)return logger.error("[set]","Max. number of parsing iterations reached"),[];output=(0,_registrar.data)(output,type),type=(0,_registrar.type)(output),graph.push({type:type})}return output.map(generateGraph?function(entry){return(0,_graph.applyGraph)(entry,graph)}:_graph.removeGraph)};exports["default"]=_default},{"../../util/deepCopy":444,"../registrar/":442,"./graph":405}],403:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=void 0;var obj,_deepCopy=(obj=require("../../util/deepCopy"))&&obj.__esModule?obj:{"default":obj},_registrar=require("../registrar/");var _default=function(input){var type=(0,_registrar.type)(input),output=type.match(/array|object/)?(0,_deepCopy["default"])(input):input;return(0,_registrar.data)(output,type)};exports["default"]=_default},{"../../util/deepCopy":444,"../registrar/":442}],404:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"default",{enumerable:!0,get:function(){return _data.data}});var _data=require("../registrar/data")},{"../registrar/data":440}],405:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.removeGraph=exports.applyGraph=void 0;exports.applyGraph=function(entry,graph){var isArrayElse=function(_ref){return"@else/list+object"===_ref.type};return Array.isArray(entry._graph)?graph.find(isArrayElse)&&(graph.splice.apply(graph,[graph.findIndex(isArrayElse),1].concat(function(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}(entry._graph.slice(0,-1)))),entry._graph=graph):entry._graph=graph,entry};exports.removeGraph=function(entry){return delete entry._graph,entry}},{}],406:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _exportNames={type:!0,data:!0,chain:!0,chainLink:!0};Object.defineProperty(exports,"type",{enumerable:!0,get:function(){return _type["default"]}}),Object.defineProperty(exports,"data",{enumerable:!0,get:function(){return _data["default"]}}),Object.defineProperty(exports,"chain",{enumerable:!0,get:function(){return _chain["default"]}}),Object.defineProperty(exports,"chainLink",{enumerable:!0,get:function(){return _chainLink["default"]}});var _type=_interopRequireDefault(require("./type")),_data=_interopRequireDefault(require("./data")),_chain=_interopRequireDefault(require("./chain")),_chainLink=_interopRequireDefault(require("./chainLink")),_async=require("./async/");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.keys(_async).forEach(function(key){"default"!==key&&"__esModule"!==key&&(Object.prototype.hasOwnProperty.call(_exportNames,key)||Object.defineProperty(exports,key,{enumerable:!0,get:function(){return _async[key]}}))})},{"./async/":401,"./chain":402,"./chainLink":403,"./data":404,"./type":407}],407:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"default",{enumerable:!0,get:function(){return _type.type}});var _type=require("../registrar/type")},{"../registrar/type":443}],408:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.types=exports.parsers=exports.scope=void 0;var json=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};desc.get||desc.set?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj["default"]=obj,newObj}(require("./json"));exports.scope="@bibjson";var parsers={json:json};exports.parsers=parsers;var types={"@bibjson/object":{dataType:"SimpleObject",propertyConstraint:{props:["fulltext_html","fulltext_xml","fulltext_pdf"],match:"some",value:function(val){return val&&Array.isArray(val.value)}}}};exports.types=types},{"./json":409}],409:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parse=exports.types=exports.scope=void 0;var _date=_interopRequireDefault(require("../../date")),_name=_interopRequireDefault(require("../../name"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}exports.parse=function(data){var res={type:"article-journal"};return Object.keys(data).forEach(function(prop){res[prop]=data[prop].value[0]}),res.hasOwnProperty("authors")&&(res.author=data.authors.value.map(_name["default"])),res.hasOwnProperty("firstpage")&&(res.page=res["page-first"]=res.firstpage),res.hasOwnProperty("date")&&(res.issued=(0,_date["default"])(res.date)),res.hasOwnProperty("journal")&&(res["container-title"]=res.journal),res.hasOwnProperty("doi")&&(res.id=res.DOI=res.doi),res};exports.scope="@bibjson";exports.types="@bibjson/object"},{"../../date":396,"../../name":438}],410:[function(require,module,exports){"use strict";function _slicedToArray(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return function(arr,i){var _arr=[],_n=!0,_d=!1,_e=undefined;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i["return"]||_i["return"]()}finally{if(_d)throw _e}}return _arr}(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.textEntry=exports.text=exports.parse=exports.types=exports.scope=void 0;var bibTxtRegex_splitEntries=/\n\s*(?=\[)/g,bibTxtRegex_parseEntry=/^\[(.+?)\]\s*(?:\n([\s\S]+))?$/,bibTxtRegex_splitPairs=/((?=.)\s)*\n\s*/g,bibTxtRegex_parsePair=/^(.+?)\s*:\s*(.+)$/,parseBibTxtEntry=function(entry){var _ref2=_slicedToArray(entry.match(bibTxtRegex_parseEntry)||[],3),label=_ref2[1],pairs=_ref2[2];if(label&&pairs){var out={type:"book",label:label,properties:{}};return pairs.trim().split(bibTxtRegex_splitPairs).filter(function(v){return v}).forEach(function(pair){var _ref4=_slicedToArray(pair.match(bibTxtRegex_parsePair)||[],3),key=_ref4[1],value=_ref4[2];key&&("type"===key?out.type=value:out.properties[key]=value)}),out}return{}};exports.textEntry=parseBibTxtEntry;exports.text=exports.parse=function(src){return src.trim().split(bibTxtRegex_splitEntries).map(parseBibTxtEntry)};exports.scope="@bibtxt";exports.types="@bibtxt/text"},{}],411:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.types=exports.parsers=exports.scope=void 0;var text=_interopRequireWildcard(require("./text")),json=_interopRequireWildcard(require("./json")),prop=_interopRequireWildcard(require("./prop")),type=_interopRequireWildcard(require("./type")),bibtxt=_interopRequireWildcard(require("./bibtxt"));function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};desc.get||desc.set?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj["default"]=obj,newObj}exports.scope="@bibtex";var parsers={text:text,json:json,prop:prop,type:type,bibtxt:bibtxt};exports.parsers=parsers;exports.types={"@bibtex/text":{dataType:"String",parseType:/^(?:\s*@\s*[^@]+?\s*\{\s*[^@]+?\s*,\s*[^@]+\})+\s*$/},"@bibtxt/text":{dataType:"String",parseType:/^\s*(\[(?!\s*[{[]).*?\]\s*(\n\s*[^[]((?!:)\S)+\s*:\s*.+?\s*)*\s*)+$/},"@bibtex/object":{dataType:"SimpleObject",propertyConstraint:{props:["type","label","properties"]}}}},{"./bibtxt":410,"./json":412,"./prop":413,"./text":414,"./type":416}],412:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=exports.parse=exports.types=exports.scope=void 0;var _prop2=_interopRequireDefault(require("./prop")),_type=_interopRequireDefault(require("./type"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _slicedToArray(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return function(arr,i){var _arr=[],_n=!0,_d=!1,_e=undefined;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i["return"]||_i["return"]()}finally{if(_d)throw _e}}return _arr}(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}exports["default"]=exports.parse=function(data){return[].concat(data).map(function(entry){var newEntry={},toMerge=[];for(var prop in entry.properties){var oldValue=entry.properties[prop],_ref2=_slicedToArray((0,_prop2["default"])(prop,oldValue)||[],2),cslField=_ref2[0],cslValue=_ref2[1];cslField&&(/^[^:\s]+?:[^.\s]+(\.[^.\s]+)*$/.test(cslField)?toMerge.push([cslField,cslValue]):newEntry[cslField]=cslValue)}return newEntry.type=(0,_type["default"])(entry.type),newEntry.id=newEntry["citation-label"]=entry.label,/\d(\D+)$/.test(entry.label)&&(newEntry["year-suffix"]=entry.label.match(/\d(\D+)$/)[1]),toMerge.forEach(function(_ref3){for(var _ref4=_slicedToArray(_ref3,2),cslField=_ref4[0],value=_ref4[1],props=cslField.split(/:|\./g),cursor=newEntry;props.length>0;){var _prop=props.shift();cursor=cursor[_prop]||(cursor[_prop]=props.length?isNaN(+props[0])?{}:[]:value)}}),newEntry})};exports.scope="@bibtex";exports.types="@bibtex/object"},{"./prop":413,"./type":416}],413:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=exports.parse=exports.types=exports.scope=void 0;var _name=_interopRequireDefault(require("../../name")),_date=_interopRequireDefault(require("../../date"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var months=[/jan(uary)?\.?/i,/feb(ruary)?\.?/i,/mar(ch)?\.?/i,/apr(il)?\.?/i,/may\.?/i,/jun(e)?\.?/i,/jul(y)?\.?/i,/aug(ust)?\.?/i,/sep(tember)?\.?/i,/oct(ober)?\.?/i,/nov(ember)?\.?/i,/dec(ember)?\.?/i],parseBibtexName=function(name){return/{|}/.test(name)?{literal:name.replace(/[{}]/g,"")}:(0,_name["default"])(name)},propMap={address:"publisher-place",author:!0,booktitle:"container-title",doi:"DOI",date:"issued",edition:!0,editor:!0,isbn:"ISBN",issn:"ISSN",issue:"issue",journal:"container-title",language:!0,location:"publisher-place",note:!0,number:"issue",numpages:"number-of-pages",pages:"page",pmid:"PMID",pmcid:"PMCID",publisher:!0,series:"collection-title",title:!0,url:"URL",volume:!0,year:"issued:date-parts.0.0",month:"issued:date-parts.0.1",day:"issued:date-parts.0.2",crossref:!1,keywords:!1};exports["default"]=exports.parse=function(name,value){if(!propMap.hasOwnProperty(name))return logger.info("[set]","Unknown property: ".concat(name)),undefined;if(!1===propMap[name])return undefined;var cslProp=!0===propMap[name]?name:propMap[name];return[cslProp,function(name,value){switch(cslProp){case"author":case"editor":return literals=[],value.replace(/%/g,"%0").replace(/{.*?}/g,function(m){return"%[".concat(literals.push(m)-1,"]")}).split(" and ").map(function(name){return name.replace(/%\[(\d+)\]/,function(_,i){return literals[+i]}).replace(/%0/g,"%")}).map(parseBibtexName);case"issued":return function(value){return/{|}/.test(value)?{literal:value.replace(/[{}]/g,"")}:(0,_date["default"])(value)}(value);case"edition":return value;case"issued:date-parts.0.1":return parseFloat(value)?value:months.findIndex(function(month){return month.test(value)})+1;case"page":return value.replace(/[\u2014\u2013]/,"-");default:return value.replace(/[{}]/g,"")}var literals}(0,value)]};exports.scope="@bibtex";exports.types="@bibtex/prop"},{"../../date":396,"../../name":438}],414:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=exports.parse=exports.types=exports.scope=void 0;var _stack=_interopRequireDefault(require("../../../util/stack")),_tokens=_interopRequireDefault(require("./tokens.json"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var tokenPattern=/\\url|\\href|{\\[a-zA-Z]+}|\$\\[a-zA-Z]+\$|\$[_^]{[0-9()+=\-n]}\$|`{2,3}|'{2,3}|-{2,3}|[!?]!|!\?|{\\~}|\\[#$%&~_^\\{}]|{\\(?:[a-z] |[`"'^~=.])\\?[a-zA-Z]}|[\s\S]/g,whitespace=/^\s$/,syntax=/^[@{}"=,\\]$/,delimiters={'"':'"',"{":"}","":""};exports["default"]=exports.parse=function(str){var entries=[],tokens=function(str){return(str=str.replace(/(\\[`"'^~=.]){\\?([A-Za-z])}/g,"{$1$2}").replace(/(\\[a-z]) ?{\\?([A-Za-z])}/g,"{$1 $2}")).match(tokenPattern)}(str),stack=new _stack["default"](tokens);try{for(stack.consumeWhitespace();stack.tokensLeft();){stack.consumeToken("@",{spaced:!1}),stack.consumeWhitespace();var type=stack.consume([whitespace,syntax],{inverse:!0}).toLowerCase();stack.consumeToken("{");var label=stack.consume([whitespace,syntax],{inverse:!0});stack.consumeToken(",");for(var properties={},_loop=function(){var key=stack.consume([whitespace,"="],{inverse:!0}).toLowerCase();stack.consumeToken("=");var startDelimiter=stack.consume(/^({|"|)$/g),endDelimiter=delimiters[startDelimiter];if(!delimiters.hasOwnProperty(startDelimiter))throw new SyntaxError("Unexpected field delimiter at index ".concat(stack.index,". Expected ")+"".concat(Object.keys(delimiters).map(function(v){return'"'.concat(v,'"')}).join(", "),'; got "').concat(startDelimiter,'"'));var openBrackets=0,val=stack.consume(function(token,index){if("{"===token&&openBrackets++,stack.tokensLeft()<endDelimiter.length)throw new SyntaxError("Unmatched delimiter at index ".concat(stack.index,": Expected ").concat(endDelimiter));return endDelimiter.length?"}"===token&&openBrackets--||!stack.matchesSequence(endDelimiter):![whitespace,syntax].some(function(rgx){return rgx.test(token)})},{tokenMap:function(token){if(_tokens["default"].hasOwnProperty(token))return _tokens["default"][token];if(token.match(/^\\[#$%&~_^\\{}]$/))return token.slice(1);if(token.length>1)throw new SyntaxError("Escape sequence not recognized: ".concat(token));return token}});return properties[key]=val,stack.consumeN(endDelimiter.length),stack.consumeWhitespace(),stack.matches("}")?"break":(stack.consumeToken(",",{spaced:!1}),stack.consumeWhitespace(),stack.matches("}")?"break":void 0)};stack.tokensLeft()&&"break"!==_loop(););stack.consumeToken("}",{spaced:!1}),stack.consumeWhitespace(),entries.push({type:type,label:label,properties:properties})}}catch(e){logger.error("Uncaught SyntaxError: ".concat(e.message,". Returning completed entries.")),entries.pop()}return entries};exports.scope="@bibtex";exports.types="@bibtex/text"},{"../../../util/stack":450,"./tokens.json":415}],415:[function(require,module,exports){module.exports={"\\url":"","\\href":"","{\\textexclamdown}":"\xa1","{\\textcent}":"\xa2","{\\textsterling}":"\xa3","{\\textyen}":"\xa5","{\\textbrokenbar}":"\xa6","{\\textsection}":"\xa7","{\\textasciidieresis}":"\xa8","{\\textcopyright}":"\xa9","{\\textordfeminine}":"\xaa","{\\guillemotleft}":"\xab","{\\textlnot}":"\xac","{\\textregistered}":"\xae","{\\textasciimacron}":"\xaf","{\\textdegree}":"\xb0","{\\textpm}":"\xb1","{\\texttwosuperior}":"\xb2","{\\textthreesuperior}":"\xb3","{\\textasciiacute}":"\xb4","{\\textmu}":"\xb5","{\\textparagraph}":"\xb6","{\\textperiodcentered}":"\xb7","{\\c\\ }":"\xb8","{\\textonesuperior}":"\xb9","{\\textordmasculine}":"\xba","{\\guillemotright}":"\xbb","{\\textonequarter}":"\xbc","{\\textonehalf}":"\xbd","{\\textthreequarters}":"\xbe","{\\textquestiondown}":"\xbf","{\\AE}":"\xc6","{\\DH}":"\xd0","{\\texttimes}":"\xd7","{\\O}":"\xd8","{\\TH}":"\xde","{\\ss}":"\xdf","{\\ae}":"\xe6","{\\dh}":"\xf0","{\\textdiv}":"\xf7","{\\o}":"\xf8","{\\th}":"\xfe","{\\i}":"\u0131","{\\NG}":"\u014a","{\\ng}":"\u014b","{\\OE}":"\u0152","{\\oe}":"\u0153","{\\textasciicircum}":"\u02c6","{\\textacutedbl}":"\u02dd","$\\Gamma$":"\u0393","$\\Delta$":"\u0394","$\\Theta$":"\u0398","$\\Lambda$":"\u039b","$\\Xi$":"\u039e","$\\Pi$":"\u03a0","$\\Sigma$":"\u03a3","$\\Phi$":"\u03a6","$\\Psi$":"\u03a8","$\\Omega$":"\u03a9","$\\alpha$":"\u03b1","$\\beta$":"\u03b2","$\\gamma$":"\u03b3","$\\delta$":"\u03b4","$\\varepsilon$":"\u03b5","$\\zeta$":"\u03b6","$\\eta$":"\u03b7","$\\theta$":"\u03b8","$\\iota$":"\u03b9","$\\kappa$":"\u03ba","$\\lambda$":"\u03bb","$\\mu$":"\u03bc","$\\nu$":"\u03bd","$\\xi$":"\u03be","$\\pi$":"\u03c0","$\\rho$":"\u03c1","$\\varsigma$":"\u03c2","$\\sigma$":"\u03c3","$\\tau$":"\u03c4","$\\upsilon$":"\u03c5","$\\varphi$":"\u03c6","$\\chi$":"\u03c7","$\\psi$":"\u03c8","$\\omega$":"\u03c9","$\\vartheta$":"\u03d1","$\\Upsilon$":"\u03d2","$\\phi$":"\u03d5","$\\varpi$":"\u03d6","$\\varrho$":"\u03f1","$\\epsilon$":"\u03f5","{\\textendash}":"\u2013","{\\textemdash}":"\u2014","---":"\u2014","--":"\u2013","{\\textbardbl}":"\u2016","{\\textunderscore}":"\u2017","{\\textquoteleft}":"\u2018","{\\textquoteright}":"\u2019","{\\quotesinglbase}":"\u201a","{\\textquotedblleft}":"\u201c","{\\textquotedblright}":"\u201d","{\\quotedblbase}":"\u201e","{\\textdagger}":"\u2020","{\\textdaggerdbl}":"\u2021","{\\textbullet}":"\u2022","{\\textellipsis}":"\u2026","{\\textperthousand}":"\u2030","'''":"\u2034","''":"\u201d","``":"\u201c","```":"\u2037","{\\guilsinglleft}":"\u2039","{\\guilsinglright}":"\u203a","!!":"\u203c","{\\textfractionsolidus}":"\u2044","?!":"\u2048","!?":"\u2049","$^{0}$":"\u2070","$^{4}$":"\u2074","$^{5}$":"\u2075","$^{6}$":"\u2076","$^{7}$":"\u2077","$^{8}$":"\u2078","$^{9}$":"\u2079","$^{+}$":"\u207a","$^{-}$":"\u207b","$^{=}$":"\u207c","$^{(}$":"\u207d","$^{)}$":"\u207e","$^{n}$":"\u207f","$_{0}$":"\u2080","$_{1}$":"\u2081","$_{2}$":"\u2082","$_{3}$":"\u2083","$_{4}$":"\u2084","$_{5}$":"\u2085","$_{6}$":"\u2086","$_{7}$":"\u2087","$_{8}$":"\u2088","$_{9}$":"\u2089","$_{+}$":"\u208a","$_{-}$":"\u208b","$_{=}$":"\u208c","$_{(}$":"\u208d","$_{)}$":"\u208e","{\\texteuro}":"\u20ac","{\\textcelsius}":"\u2103","{\\textnumero}":"\u2116","{\\textcircledP}":"\u2117","{\\textservicemark}":"\u2120","{TEL}":"\u2121","{\\texttrademark}":"\u2122","{\\textohm}":"\u2126","{\\textestimated}":"\u212e","{\\`A}":"\xc0","{\\'A}":"\xc1","{\\^A}":"\xc2","{\\~A}":"\xc3",'{\\"A}':"\xc4","{\\r A}":"\xc5","{\\c C}":"\xc7","{\\`E}":"\xc8","{\\'E}":"\xc9","{\\^E}":"\xca",'{\\"E}':"\xcb","{\\`I}":"\xcc","{\\'I}":"\xcd","{\\^I}":"\xce",'{\\"I}':"\xcf","{\\~N}":"\xd1","{\\`O}":"\xd2","{\\'O}":"\xd3","{\\^O}":"\xd4","{\\~O}":"\xd5",'{\\"O}':"\xd6","{\\`U}":"\xd9","{\\'U}":"\xda","{\\^U}":"\xdb",'{\\"U}':"\xdc","{\\'Y}":"\xdd","{\\`a}":"\xe0","{\\'a}":"\xe1","{\\^a}":"\xe2","{\\~a}":"\xe3",'{\\"a}':"\xe4","{\\r a}":"\xe5","{\\c c}":"\xe7","{\\`e}":"\xe8","{\\'e}":"\xe9","{\\^e}":"\xea",'{\\"e}':"\xeb","{\\`i}":"\xec","{\\'i}":"\xed","{\\^i}":"\xee",'{\\"i}':"\xef","{\\~n}":"\xf1","{\\`o}":"\xf2","{\\'o}":"\xf3","{\\^o}":"\xf4","{\\~o}":"\xf5",'{\\"o}':"\xf6","{\\`u}":"\xf9","{\\'u}":"\xfa","{\\^u}":"\xfb",'{\\"u}':"\xfc","{\\'y}":"\xfd",'{\\"y}':"\xff","{\\=A}":"\u0100","{\\=a}":"\u0101","{\\u A}":"\u0102","{\\u a}":"\u0103","{\\k A}":"\u0104","{\\k a}":"\u0105","{\\'C}":"\u0106","{\\'c}":"\u0107","{\\^C}":"\u0108","{\\^c}":"\u0109","{\\.C}":"\u010a","{\\.c}":"\u010b","{\\v C}":"\u010c","{\\v c}":"\u010d","{\\v D}":"\u010e","{\\v d}":"\u010f","{\\=E}":"\u0112","{\\=e}":"\u0113","{\\u E}":"\u0114","{\\u e}":"\u0115","{\\.E}":"\u0116","{\\.e}":"\u0117","{\\k E}":"\u0118","{\\k e}":"\u0119","{\\v E}":"\u011a","{\\v e}":"\u011b","{\\^G}":"\u011c","{\\^g}":"\u011d","{\\u G}":"\u011e","{\\u g}":"\u011f","{\\.G}":"\u0120","{\\.g}":"\u0121","{\\c G}":"\u0122","{\\c g}":"\u0123","{\\^H}":"\u0124","{\\^h}":"\u0125","{\\~I}":"\u0128","{\\~i}":"\u0129","{\\=I}":"\u012a","{\\=i}":"\u012b","{\\=\\i}":"\u012b","{\\u I}":"\u012c","{\\u i}":"\u012d","{\\k I}":"\u012e","{\\k i}":"\u012f","{\\.I}":"\u0130","{\\^J}":"\u0134","{\\^j}":"\u0135","{\\c K}":"\u0136","{\\c k}":"\u0137","{\\'L}":"\u0139","{\\'l}":"\u013a","{\\c L}":"\u013b","{\\c l}":"\u013c","{\\v L}":"\u013d","{\\v l}":"\u013e","{\\L }":"\u0141","{\\l }":"\u0142","{\\'N}":"\u0143","{\\'n}":"\u0144","{\\c N}":"\u0145","{\\c n}":"\u0146","{\\v N}":"\u0147","{\\v n}":"\u0148","{\\=O}":"\u014c","{\\=o}":"\u014d","{\\u O}":"\u014e","{\\u o}":"\u014f","{\\H O}":"\u0150","{\\H o}":"\u0151","{\\'R}":"\u0154","{\\'r}":"\u0155","{\\c R}":"\u0156","{\\c r}":"\u0157","{\\v R}":"\u0158","{\\v r}":"\u0159","{\\'S}":"\u015a","{\\'s}":"\u015b","{\\^S}":"\u015c","{\\^s}":"\u015d","{\\c S}":"\u015e","{\\c s}":"\u015f","{\\v S}":"\u0160","{\\v s}":"\u0161","{\\c T}":"\u0162","{\\c t}":"\u0163","{\\v T}":"\u0164","{\\v t}":"\u0165","{\\~U}":"\u0168","{\\~u}":"\u0169","{\\=U}":"\u016a","{\\=u}":"\u016b","{\\u U}":"\u016c","{\\u u}":"\u016d","{\\r U}":"\u016e","{\\r u}":"\u016f","{\\H U}":"\u0170","{\\H u}":"\u0171","{\\k U}":"\u0172","{\\k u}":"\u0173","{\\^W}":"\u0174","{\\^w}":"\u0175","{\\^Y}":"\u0176","{\\^y}":"\u0177",'{\\"Y}':"\u0178","{\\'Z}":"\u0179","{\\'z}":"\u017a","{\\.Z}":"\u017b","{\\.z}":"\u017c","{\\v Z}":"\u017d","{\\v z}":"\u017e","{\\v A}":"\u01cd","{\\v a}":"\u01ce","{\\v I}":"\u01cf","{\\v i}":"\u01d0","{\\v O}":"\u01d1","{\\v o}":"\u01d2","{\\v U}":"\u01d3","{\\v u}":"\u01d4","{\\v G}":"\u01e6","{\\v g}":"\u01e7","{\\v K}":"\u01e8","{\\v k}":"\u01e9","{\\k O}":"\u01ea","{\\k o}":"\u01eb","{\\v j}":"\u01f0","{\\'G}":"\u01f4","{\\'g}":"\u01f5","{\\.B}":"\u1e02","{\\.b}":"\u1e03","{\\d B}":"\u1e04","{\\d b}":"\u1e05","{\\b B}":"\u1e06","{\\b b}":"\u1e07","{\\.D}":"\u1e0a","{\\.d}":"\u1e0b","{\\d D}":"\u1e0c","{\\d d}":"\u1e0d","{\\b D}":"\u1e0e","{\\b d}":"\u1e0f","{\\c D}":"\u1e10","{\\c d}":"\u1e11","{\\.F}":"\u1e1e","{\\.f}":"\u1e1f","{\\=G}":"\u1e20","{\\=g}":"\u1e21","{\\.H}":"\u1e22","{\\.h}":"\u1e23","{\\d H}":"\u1e24","{\\d h}":"\u1e25",'{\\"H}':"\u1e26",'{\\"h}':"\u1e27","{\\c H}":"\u1e28","{\\c h}":"\u1e29","{\\'K}":"\u1e30","{\\'k}":"\u1e31","{\\d K}":"\u1e32","{\\d k}":"\u1e33","{\\b K}":"\u1e34","{\\b k}":"\u1e35","{\\d L}":"\u1e36","{\\d l}":"\u1e37","{\\b L}":"\u1e3a","{\\b l}":"\u1e3b","{\\'M}":"\u1e3e","{\\'m}":"\u1e3f","{\\.M}":"\u1e40","{\\.m}":"\u1e41","{\\d M}":"\u1e42","{\\d m}":"\u1e43","{\\.N}":"\u1e44","{\\.n}":"\u1e45","{\\d N}":"\u1e46","{\\d n}":"\u1e47","{\\b N}":"\u1e48","{\\b n}":"\u1e49","{\\'P}":"\u1e54","{\\'p}":"\u1e55","{\\.P}":"\u1e56","{\\.p}":"\u1e57","{\\.R}":"\u1e58","{\\.r}":"\u1e59","{\\d R}":"\u1e5a","{\\d r}":"\u1e5b","{\\b R}":"\u1e5e","{\\b r}":"\u1e5f","{\\.S}":"\u1e60","{\\.s}":"\u1e61","{\\d S}":"\u1e62","{\\d s}":"\u1e63","{\\.T}":"\u1e6a","{\\.t}":"\u1e6b","{\\d T}":"\u1e6c","{\\d t}":"\u1e6d","{\\b T}":"\u1e6e","{\\b t}":"\u1e6f","{\\~V}":"\u1e7c","{\\~v}":"\u1e7d","{\\d V}":"\u1e7e","{\\d v}":"\u1e7f","{\\`W}":"\u1e80","{\\`w}":"\u1e81","{\\'W}":"\u1e82","{\\'w}":"\u1e83",'{\\"W}':"\u1e84",'{\\"w}':"\u1e85","{\\.W}":"\u1e86","{\\.w}":"\u1e87","{\\d W}":"\u1e88","{\\d w}":"\u1e89","{\\.X}":"\u1e8a","{\\.x}":"\u1e8b",'{\\"X}':"\u1e8c",'{\\"x}':"\u1e8d","{\\.Y}":"\u1e8e","{\\.y}":"\u1e8f","{\\^Z}":"\u1e90","{\\^z}":"\u1e91","{\\d Z}":"\u1e92","{\\d z}":"\u1e93","{\\b Z}":"\u1e94","{\\b z}":"\u1e95","{\\b h}":"\u1e96",'{\\"t}':"\u1e97","{\\r w}":"\u1e98","{\\r y}":"\u1e99","{\\d A}":"\u1ea0","{\\d a}":"\u1ea1","{\\d E}":"\u1eb8","{\\d e}":"\u1eb9","{\\~E}":"\u1ebc","{\\~e}":"\u1ebd","{\\d I}":"\u1eca","{\\d i}":"\u1ecb","{\\d O}":"\u1ecc","{\\d o}":"\u1ecd","{\\d U}":"\u1ee4","{\\d u}":"\u1ee5","{\\`Y}":"\u1ef2","{\\`y}":"\u1ef3","{\\d Y}":"\u1ef4","{\\d y}":"\u1ef5","{\\~Y}":"\u1ef8","{\\~y}":"\u1ef9","{\\~}":"\u223c","~":"\xa0"}},{}],416:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=exports.parse=exports.types=exports.scope=void 0;var typeMap={article:"article-journal",book:"book",booklet:"book",proceedings:"book",manual:!1,mastersthesis:"thesis",misc:!1,inbook:"chapter",incollection:"chapter",conference:"paper-conference",inproceedings:"paper-conference",online:"website",patent:"patent",phdthesis:"thesis",techreport:"report",unpublished:"manuscript"};exports["default"]=exports.parse=function(pubType){return typeMap.hasOwnProperty(pubType)?!1===typeMap[pubType]?"book":typeMap[pubType]:(logger.warn("[set]","BibTeX publication type not recognized: ".concat(pubType,'. Defaulting to "book".')),"book")};exports.scope="@bibtex";exports.types="@bibtex/type"},{}],417:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parseAsync=exports.parse=exports.types=exports.scope=void 0;var _syncRequest=_interopRequireDefault(require("sync-request")),_json=_interopRequireDefault(require("./json"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function step(key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _next(value){step("next",value)}function _throw(err){step("throw",err)}_next()})}}var _ref,_ref2,fetchDoiApiAsync=(_ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(url){var headers;return regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.prev=0,(headers=new Headers).append("Accept","application/vnd.citationstyles.csl+json"),_context.next=5,fetch(url,{headers:headers});case 5:return _context.abrupt("return",_context.sent.json());case 8:return _context.prev=8,_context.t0=_context["catch"](0),logger.error("[set]","File '".concat(url,"' could not be fetched:"),_context.t0.message),_context.abrupt("return",{});case 12:case"end":return _context.stop()}},_callee,this,[[0,8]])})),function(_x){return _ref.apply(this,arguments)}),parseDoiApiAsync=(_ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(data){var doiJsonList;return regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,Promise.all([].concat(data).map(fetchDoiApiAsync));case 2:return doiJsonList=_context2.sent,_context2.abrupt("return",doiJsonList.map(_json["default"]));case 4:case"end":return _context2.stop()}},_callee2,this)})),function(_x2){return _ref2.apply(this,arguments)});exports.parseAsync=parseDoiApiAsync;var fetchDoiApi=function(url){try{return JSON.parse((0,_syncRequest["default"])("GET",url,{headers:{Accept:"application/vnd.citationstyles.csl+json"},allowRedirectHeaders:["Accept"]}).getBody("utf8"))}catch(e){return logger.error("[set]","File '".concat(url,"' could not be fetched:"),e.message),{}}};exports.parse=function(data){return[].concat(data).map(fetchDoiApi).map(_json["default"])};exports.scope="@doi";exports.types="@doi/api"},{"./json":420,"sync-request":331}],418:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=exports.parse=exports.types=exports.scope=void 0;exports["default"]=exports.parse=function(data){return(Array.isArray(data)?data:data.trim().split(/(?:\s+)/g)).map(function(doi){return"https://doi.org/".concat(doi)})};exports.scope="@doi";exports.types=["@doi/id","@doi/list+text","@doi/list+object"]},{}],419:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.types=exports.parsers=exports.scope=void 0;var id=_interopRequireWildcard(require("./id")),api=_interopRequireWildcard(require("./api")),json=_interopRequireWildcard(require("./json")),type=_interopRequireWildcard(require("./type"));function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};desc.get||desc.set?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj["default"]=obj,newObj}exports.scope="@doi";var parsers={id:id,api:api,json:json,type:type};exports.parsers=parsers;exports.types={"@doi/api":{dataType:"String",parseType:/^\s*(https?:\/\/(?:dx\.)?doi\.org\/(10.\d{4,9}\/[-._;()/:A-Z0-9]+))\s*$/i},"@doi/id":{dataType:"String",parseType:/^\s*(10.\d{4,9}\/[-._;()/:A-Z0-9]+)\s*$/i},"@doi/list+text":{dataType:"String",parseType:/^\s*(?:(?:10.\d{4,9}\/[-._;()/:A-Z0-9]+)\s*)+$/i},"@doi/list+object":{dataType:"Array",elementConstraint:"@doi/id"}}},{"./api":417,"./id":418,"./json":420,"./type":421}],420:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=exports.parse=exports.types=exports.scope=void 0;var obj,_type=(obj=require("./type"))&&obj.__esModule?obj:{"default":obj};exports["default"]=exports.parse=function(data){var res={type:(0,_type["default"])(data.type)};return["submitted","issued","event-date","original-date","container","accessed"].forEach(function(field){data[field]&&"number"==typeof data[field]["date-parts"][0]&&(data[field]["date-parts"]=[data[field]["date-parts"]])}),Object.assign({},data,res)};exports.scope="@doi";exports.types="@doi/object"},{"./type":421}],421:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=exports.parse=exports.types=exports.scope=void 0;var varDoiTypes={"journal-article":"article-journal","book-chapter":"chapter","posted-content":"manuscript","proceedings-article":"paper-conference"};exports["default"]=exports.parse=function(value){return varDoiTypes[value]||value};exports.scope="@doi";exports.types="@doi/type"},{}],422:[function(require,module,exports){"use strict";var _registrar=require("../registrar/");require("./native");var modules=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};desc.get||desc.set?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj["default"]=obj,newObj}(require("./modules"));for(var _module in modules){var _modules$module=modules[_module],types=_modules$module.types,parsers=_modules$module.parsers;for(var type in types)(0,_registrar.add)(type,types[type]);var _loop=function(parser){var _parsers$parser=parsers[parser],types=_parsers$parser.types,parse=_parsers$parser.parse,parseAsync=_parsers$parser.parseAsync;[].concat(types).forEach(function(type){return(0,_registrar.add)(type,{parse:parse,parseAsync:parseAsync})})};for(var parser in parsers)_loop(parser)}},{"../registrar/":442,"./modules":423,"./native":424}],423:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.other=exports.wikidata=exports.doi=exports.bibtex=exports.bibjson=void 0;var bibjson=_interopRequireWildcard(require("./bibjson/"));exports.bibjson=bibjson;var bibtex=_interopRequireWildcard(require("./bibtex/"));exports.bibtex=bibtex;var doi=_interopRequireWildcard(require("./doi/"));exports.doi=doi;var wikidata=_interopRequireWildcard(require("./wikidata/"));exports.wikidata=wikidata;var other=_interopRequireWildcard(require("./other/"));function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};desc.get||desc.set?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj["default"]=obj,newObj}exports.other=other},{"./bibjson/":408,"./bibtex/":411,"./doi/":419,"./other/":427,"./wikidata/":432}],424:[function(require,module,exports){"use strict";var _data=require("../registrar/data"),_input=require("../input/");function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}var fn,_elseListObject,nativeParsers={"@csl/object":function(input){return[input]},"@csl/list+object":function(input){return input},"@else/list+object":function(input){var _ref;return(_ref=[]).concat.apply(_ref,_toConsumableArray(input.map(_input.chain)))}},nativeAsyncParsers={"@else/list+object":(fn=regeneratorRuntime.mark(function _callee(input){var _ref2;return regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.t0=(_ref2=[]).concat,_context.t1=_ref2,_context.t2=_toConsumableArray,_context.next=5,Promise.all(input.map(_input.chainAsync));case 5:return _context.t3=_context.sent,_context.t4=(0,_context.t2)(_context.t3),_context.abrupt("return",_context.t0.apply.call(_context.t0,_context.t1,_context.t4));case 8:case"end":return _context.stop()}},_callee,this)}),_elseListObject=function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function step(key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _next(value){step("next",value)}function _throw(err){step("throw",err)}_next()})},function(_x){return _elseListObject.apply(this,arguments)})};for(var nativeParser in nativeParsers)(0,_data.addDataParser)(nativeParser,nativeParsers[nativeParser],{async:!1,native:!0});for(var nativeAsyncParser in nativeAsyncParsers)(0,_data.addDataParser)(nativeAsyncParser,nativeAsyncParsers[nativeAsyncParser],{async:!0,native:!0})},{"../input/":406,"../registrar/data":440}],425:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parse=exports.types=exports.scope=void 0;exports.scope="@empty";exports.types=["@empty","@empty/text","@empty/whitespace+text"];exports.parse=function(){return[]}},{}],426:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parse=exports.types=exports.scope=void 0;exports.scope="@else";exports.types="@else/html";exports.parse=function(input){return input.value||input.textContent}},{}],427:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.types=exports.parsers=exports.scope=void 0;var empty=_interopRequireWildcard(require("./empty")),url=_interopRequireWildcard(require("./url")),json=_interopRequireWildcard(require("./json")),jquery=_interopRequireWildcard(require("./jquery")),html=_interopRequireWildcard(require("./html"));function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};desc.get||desc.set?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj["default"]=obj,newObj}exports.scope="@else";var parsers={empty:empty,url:url,json:json,jquery:jquery,html:html};exports.parsers=parsers;var types={"@empty/text":{dataType:"String",parseType:function(input){return""===input}},"@empty/whitespace+text":{dataType:"String",parseType:/^\s+$/},"@empty":{dataType:"Primitive",parseType:function(input){return null==input}},"@else/json":{dataType:"String",parseType:/^\s*(\{[\S\s]+\}|\[[\S\s]*\])\s*$/},"@else/url":{dataType:"String",parseType:/^(https?:\/\/)?((([a-z\d]([a-z\d-]*[a-z\d])*)\.)+[a-z]{2,}|((\d{1,3}\.){3}\d{1,3})|localhost)(:\d+)?(\/[-a-z\d%_.~+:]*)*(\?[;&a-z\d%_.~+=-]*)?(#[-a-z\d_]*)?$/i},"@else/jquery":{dataType:"ComplexObject",parseType:function(input){return"undefined"!=typeof jQuery&&input instanceof jQuery}},"@else/html":{dataType:"ComplexObject",parseType:function(input){return"undefined"!=typeof HTMLElement&&input instanceof HTMLElement}}};exports.types=types},{"./empty":425,"./html":426,"./jquery":428,"./json":429,"./url":430}],428:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parse=exports.types=exports.scope=void 0;exports.scope="@else";exports.types="@else/jquery";exports.parse=function(input){return input.val()||input.text()||input.html()}},{}],429:[function(require,module,exports){"use strict";function _slicedToArray(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return function(arr,i){var _arr=[],_n=!0,_d=!1,_e=undefined;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i["return"]||_i["return"]()}finally{if(_d)throw _e}}return _arr}(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=exports.parse=exports.types=exports.scope=void 0;var substituters=[[/((?:\[|:|,)\s*)'((?:\\'|[^'])*?[^\\])?'(?=\s*(?:\]|}|,))/g,'$1"$2"'],[/((?:(?:"|]|}|\/[gmiuys]|\.|(?:\d|\.|-)*\d)\s*,|{)\s*)(?:"([^":\n]+?)"|'([^":\n]+?)'|([^":\n]+?))(\s*):/g,'$1"$2$3$4"$5:']];exports["default"]=exports.parse=function(str){try{return JSON.parse(str)}catch(e){logger.info("[set]","Input was not valid JSON, switching to experimental parser for invalid JSON");try{return substituters.forEach(function(_ref){var _ref2=_slicedToArray(_ref,2),regex=_ref2[0],subst=_ref2[1];str=str.replace(regex,subst)}),JSON.parse(str)}catch(e){return logger.error("[set]","Experimental parser failed. Please improve the JSON. If this is not JSON, please re-read the supported formats."),undefined}}};exports.scope="@else";exports.types="@else/json"},{}],430:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"parse",{enumerable:!0,get:function(){return _fetchFile["default"]}}),Object.defineProperty(exports,"parseAsync",{enumerable:!0,get:function(){return _fetchFileAsync["default"]}}),exports.types=exports.scope=void 0;var _fetchFile=_interopRequireDefault(require("../../../util/fetchFile")),_fetchFileAsync=_interopRequireDefault(require("../../../util/fetchFileAsync"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}exports.scope="@else";exports.types="@else/url"},{"../../../util/fetchFile":445,"../../../util/fetchFileAsync":446}],431:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"parse",{enumerable:!0,get:function(){return _fetchFile["default"]}}),Object.defineProperty(exports,"parseAsync",{enumerable:!0,get:function(){return _fetchFileAsync["default"]}}),exports.types=exports.scope=void 0;var _fetchFile=_interopRequireDefault(require("../../../util/fetchFile")),_fetchFileAsync=_interopRequireDefault(require("../../../util/fetchFileAsync"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}exports.scope="@wikidata";exports.types="@wikidata/api"},{"../../../util/fetchFile":445,"../../../util/fetchFileAsync":446}],432:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.types=exports.parsers=exports.scope=void 0;var list=_interopRequireWildcard(require("./list")),json=_interopRequireWildcard(require("./json")),prop=_interopRequireWildcard(require("./prop")),type=_interopRequireWildcard(require("./type")),url=_interopRequireWildcard(require("./url")),api=_interopRequireWildcard(require("./api"));function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};desc.get||desc.set?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj["default"]=obj,newObj}exports.scope="@wikidata";var parsers={list:list,json:json,prop:prop,type:type,url:url,api:api};exports.parsers=parsers;exports.types={"@wikidata/id":{dataType:"String",parseType:/^\s*(Q\d+)\s*$/},"@wikidata/list+text":{dataType:"String",parseType:/^\s*((?:Q\d+(?:\s+|,|))*Q\d+)\s*$/},"@wikidata/api":{dataType:"String",parseType:/^(https?:\/\/(?:www\.)?wikidata.org\/w\/api\.php(?:\?.*)?)$/},"@wikidata/url":{dataType:"String",parseType:/\/(Q\d+)(?:[#?/]|\s*$)/},"@wikidata/array":{dataType:"Array",elementConstraint:"@wikidata/id"},"@wikidata/object":{dataType:"SimpleObject",propertyConstraint:{props:"entities"}}}},{"./api":431,"./json":433,"./list":434,"./prop":435,"./type":436,"./url":437}],433:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parseAsync=exports["default"]=exports.parse=exports.types=exports.scope=void 0;var obj,_wikidataSdk=(obj=require("wikidata-sdk"))&&obj.__esModule?obj:{"default":obj},_prop=require("./prop");function _slicedToArray(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return function(arr,i){var _arr=[],_n=!0,_d=!1,_e=undefined;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i["return"]||_i["return"]()}finally{if(_d)throw _e}}return _arr}(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function step(key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _next(value){step("next",value)}function _throw(err){step("throw",err)}_next()})}}var _ref,parseWikidataJSONAsync=(_ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(data){return regeneratorRuntime.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return _context3.abrupt("return",Promise.all(Object.keys(data.entities).map(function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(entityKey){var _data$entities$entity,labels,claims,entity,json;return regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _data$entities$entity=data.entities[entityKey],labels=_data$entities$entity.labels,claims=_data$entities$entity.claims,entity=_wikidataSdk["default"].simplifyClaims(claims,null,null,!0),json={_wikiId:entityKey,id:entityKey},_context2.next=5,Promise.all(Object.keys(entity).map(function(){var _ref3=_asyncToGenerator(regeneratorRuntime.mark(function _callee(prop){var field,_field,fieldName,fieldValue;return regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,(0,_prop.parseAsync)(prop,entity[prop],"en");case 2:(field=_context.sent)&&(_field=_slicedToArray(field,2),fieldName=_field[0],fieldValue=_field[1],Array.isArray(json[fieldName])?json[fieldName]=json[fieldName].concat(fieldValue):fieldValue!==undefined&&(json[fieldName]=fieldValue));case 4:case"end":return _context.stop()}},_callee,this)}));return function(_x3){return _ref3.apply(this,arguments)}}()));case 5:return Array.isArray(json.author)&&json.author.sort(function(_ref4,_ref5){return _ref4._ordinal-_ref5._ordinal}),json.title||(json.title=labels.en.value),_context2.abrupt("return",json);case 8:case"end":return _context2.stop()}},_callee2,this)}));return function(_x2){return _ref2.apply(this,arguments)}}())));case 1:case"end":return _context3.stop()}},_callee3,this)})),function(_x){return _ref.apply(this,arguments)});exports.parseAsync=parseWikidataJSONAsync;exports["default"]=exports.parse=function(data){return Object.keys(data.entities).map(function(entityKey){var _data$entities$entity2=data.entities[entityKey],labels=_data$entities$entity2.labels,claims=_data$entities$entity2.claims,entity=_wikidataSdk["default"].simplifyClaims(claims,null,null,!0),json={_wikiId:entityKey,id:entityKey};return Object.keys(entity).forEach(function(prop){var field=(0,_prop.parse)(prop,entity[prop],"en");if(field){var _field2=_slicedToArray(field,2),fieldName=_field2[0],fieldValue=_field2[1];Array.isArray(json[fieldName])?json[fieldName]=json[fieldName].concat(fieldValue):fieldValue!==undefined&&(json[fieldName]=fieldValue)}}),Array.isArray(json.author)&&json.author.sort(function(_ref6,_ref7){return _ref6._ordinal-_ref7._ordinal}),json.title||(json.title=labels.en.value),json})};exports.scope="@wikidata";exports.types="@wikidata/object"},{"./prop":435,"wikidata-sdk":349}],434:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=exports.parse=exports.types=exports.scope=void 0;var obj,_wikidataSdk=(obj=require("wikidata-sdk"))&&obj.__esModule?obj:{"default":obj};exports["default"]=exports.parse=function(data){var list=Array.isArray(data)?data:data.trim().split(/(?:[\s,]\s*)/g);return[].concat(_wikidataSdk["default"].getEntities(list,["en"]))};exports.scope="@wikidata";exports.types=["@wikidata/list+text","@wikidata/id","@wikidata/list+object"]},{"wikidata-sdk":349}],435:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parseAsync=exports["default"]=exports.parse=exports.types=exports.scope=void 0;var _wikidataSdk=_interopRequireDefault(require("wikidata-sdk")),_fetchFile=_interopRequireDefault(require("../../../util/fetchFile")),_fetchFileAsync=_interopRequireDefault(require("../../../util/fetchFileAsync")),_type=_interopRequireDefault(require("./type")),_date=_interopRequireDefault(require("../../date")),_name=_interopRequireDefault(require("../../name"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function step(key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _next(value){step("next",value)}function _throw(err){step("throw",err)}_next()})}}var fetchWikidataLabel=function(q,lang){var ids=Array.isArray(q)?q:"string"==typeof q?q.split("|"):"",url=_wikidataSdk["default"].getEntities(ids,[lang],"labels"),entities=JSON.parse((0,_fetchFile["default"])(url)).entities||{};return Object.keys(entities).map(function(entityKey){return(entities[entityKey].labels[lang]||{}).value})},parseWikidataP1545=function(qualifiers){return qualifiers.P1545?parseInt(qualifiers.P1545[0]):-1},propMap={P31:"type",P50:"author",P57:"director",P86:"composer",P98:"editor",P110:"illustrator",P123:"publisher",P136:"genre",P212:"ISBN",P236:"ISSN",P291:"publisher-place",P304:"page",P348:"version",P356:"DOI",P393:"edition",P433:"issue",P478:"volume",P577:"issued",P655:"translator",P698:"PMID",P932:"PMCID",P953:"URL",P957:"ISBN",P1104:"number-of-pages",P1433:"container-title",P1476:"title",P2093:"author",P2860:!1,P921:!1,P3181:!1,P364:!1},parseWikidataProp=function(name,value,lang){if(!propMap.hasOwnProperty(name))return logger.info("[set]","Unknown property: ".concat(name)),undefined;if(!1===propMap[name])return undefined;var cslProp=propMap[name];return value?[cslProp,function(prop,valueList){var value=valueList[0].value;switch(prop){case"P31":var type=(0,_type["default"])(value);return type||(logger.warn("[set]","Wikidata entry type not recognized: ".concat(value,'. Defaulting to "book".')),"book");case"P50":case"P57":case"P86":case"P98":case"P110":case"P655":return valueList.map(function(_ref){var value=_ref.value,qualifiers=_ref.qualifiers,name=(0,_name["default"])(fetchWikidataLabel(value,lang)[0]);return name._ordinal=parseWikidataP1545(qualifiers),name});case"P577":return(0,_date["default"])(value);case"P123":case"P136":case"P291":case"P1433":return fetchWikidataLabel(value,lang)[0];case"P2093":return valueList.map(function(_ref2){var value=_ref2.value,qualifiers=_ref2.qualifiers,name=(0,_name["default"])(value);return name._ordinal=parseWikidataP1545(qualifiers),name});default:return value}}(name,value)]:cslProp};exports["default"]=exports.parse=parseWikidataProp;var _ref3,_ref4,fetchWikidataLabelAsync=(_ref3=_asyncToGenerator(regeneratorRuntime.mark(function _callee(q,lang){var ids,url,entities;return regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return ids=Array.isArray(q)?q:"string"==typeof q?q.split("|"):"",url=_wikidataSdk["default"].getEntities(ids,[lang],"labels"),_context.t1=JSON,_context.next=5,(0,_fetchFileAsync["default"])(url);case 5:if(_context.t2=_context.sent,_context.t0=_context.t1.parse.call(_context.t1,_context.t2).entities,_context.t0){_context.next=9;break}_context.t0={};case 9:return entities=_context.t0,_context.abrupt("return",Object.keys(entities).map(function(entityKey){return(entities[entityKey].labels[lang]||{}).value}));case 11:case"end":return _context.stop()}},_callee,this)})),function(_x,_x2){return _ref3.apply(this,arguments)}),parseWikidataPropAsync=(_ref4=_asyncToGenerator(regeneratorRuntime.mark(function _callee4(prop,value,lang){var cslValue;return regeneratorRuntime.wrap(function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:return _context4.next=2,function(){var _ref5=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(prop,valueList){var value;return regeneratorRuntime.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:value=valueList[0].value,_context3.t0=prop,_context3.next="P50"===_context3.t0?4:"P57"===_context3.t0?4:"P86"===_context3.t0?4:"P98"===_context3.t0?4:"P110"===_context3.t0?4:"P655"===_context3.t0?4:"P123"===_context3.t0?5:"P136"===_context3.t0?5:"P291"===_context3.t0?5:"P1433"===_context3.t0?5:8;break;case 4:return _context3.abrupt("return",Promise.all(valueList.map(function(){var _ref7=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(_ref6){var value,qualifiers,name;return regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return value=_ref6.value,qualifiers=_ref6.qualifiers,_context2.t0=_name["default"],_context2.next=4,fetchWikidataLabelAsync(value,lang);case 4:return _context2.t1=_context2.sent[0],(name=(0,_context2.t0)(_context2.t1))._ordinal=parseWikidataP1545(qualifiers),_context2.abrupt("return",name);case 8:case"end":return _context2.stop()}},_callee2,this)}));return function(_x8){return _ref7.apply(this,arguments)}}())));case 5:return _context3.next=7,fetchWikidataLabelAsync(value,lang);case 7:return _context3.abrupt("return",_context3.sent[0]);case 8:case"end":return _context3.stop()}},_callee3,this)}));return function(_x6,_x7){return _ref5.apply(this,arguments)}}()(prop,value);case 2:if(!(cslValue=_context4.sent)){_context4.next=7;break}return _context4.abrupt("return",[parseWikidataProp(prop),cslValue]);case 7:return _context4.abrupt("return",parseWikidataProp(prop,value,lang));case 8:case"end":return _context4.stop()}},_callee4,this)})),function(_x3,_x4,_x5){return _ref4.apply(this,arguments)});exports.parseAsync=parseWikidataPropAsync;exports.scope="@wikidata";exports.types="@wikidata/prop"},{"../../../util/fetchFile":445,"../../../util/fetchFileAsync":446,"../../date":396,"../../name":438,"./type":436,"wikidata-sdk":349}],436:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=exports.parse=exports.types=exports.scope=void 0;var varWikidataTypes={Q49848:"article",Q191067:"article",Q13442814:"article-journal",Q18918145:"article-journal",Q38926:"article-newspaper",Q5707594:"article-newspaper",Q30070590:"article-magazine",Q686822:"bill",Q3331189:"book",Q571:"book",Q1555508:"broadcast",Q15416:"broadcast",Q1980247:"chapter",Q1172284:"dataset",Q10389811:"entry",Q19389637:"entry",Q17329259:"entry-encyclopedia",Q30070753:"figure",Q1027879:"graphic",Q4502142:"graphic",Q478798:"graphic",Q838948:"graphic",Q178651:"interview",Q49371:"legislation",Q820655:"legislation",Q2334719:"legal_case",Q87167:"manuscript",Q4006:"map",Q11424:"motion_picture",Q30070675:"motion_picture",Q187947:"musical_score",Q18536349:"pamphlet",Q190399:"pamphlet",Q26973022:"paper-conference",Q23927052:"paper-conference",Q253623:"patent",Q30070565:"personal_communication",Q30070439:"personal_communication",Q133492:"personal_communication",Q628523:"personal_communication",Q7216866:"post",Q17928402:"post-blog",Q10870555:"report",Q265158:"review",Q637866:"review-book",Q7366:"song",Q3741908:"song",Q30070318:"song",Q24634210:"song",Q861911:"speech",Q1266946:"thesis",Q187685:"thesis",Q131569:"treaty",Q36774:"webpage"};exports["default"]=exports.parse=function(value){return varWikidataTypes[value]};exports.scope="@wikidata";exports.types="@wikidata/type"},{}],437:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parse=exports.types=exports.scope=void 0;exports.scope="@wikidata";exports.types="@wikidata/url";exports.parse=function(input){return input.match(/\/(Q\d+)(?:[#?/]|\s*$)/)[1]}},{}],438:[function(require,module,exports){"use strict";function _slicedToArray(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return function(arr,i){var _arr=[],_n=!0,_d=!1,_e=undefined;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i["return"]||_i["return"]()}finally{if(_d)throw _e}}return _arr}(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=exports.parse=exports.types=exports.scope=void 0;var punctutationMatcher=function(string){return string.replace(/$|( )|(?!^)(?=[A-Z])/g,"\\.?$1")},getListMatcher=function(list){return"(?:".concat(list.join("|"),")\\b")},getSplittingRegex=function(matcher,flags){return new RegExp("(?:^| )(".concat(matcher,"$)"),flags)},titleMatcher=getListMatcher(["mr","mrs","ms","miss","dr","herr","monsieur","hr","frau","a v m","admiraal","admiral","air cdre","air commodore","air marshal","air vice marshal","alderman","alhaji","ambassador","baron","barones","brig","brig gen","brig general","brigadier","brigadier general","brother","canon","capt","captain","cardinal","cdr","chief","cik","cmdr","coach","col","col dr","colonel","commandant","commander","commissioner","commodore","comte","comtessa","congressman","conseiller","consul","conte","contessa","corporal","councillor","count","countess","crown prince","crown princess","dame","datin","dato","datuk","datuk seri","deacon","deaconess","dean","dhr","dipl ing","doctor","dott","dott sa","dr","dr ing","dra","drs","embajador","embajadora","en","encik","eng","eur ing","exma sra","exmo sr","f o","father","first lieutient","first officer","flt lieut","flying officer","fr","frau","fraulein","fru","gen","generaal","general","governor","graaf","gravin","group captain","grp capt","h e dr","h h","h m","h r h","hajah","haji","hajim","her highness","her majesty","herr","high chief","his highness","his holiness","his majesty","hon","hr","hra","ing","ir","jonkheer","judge","justice","khun ying","kolonel","lady","lcda","lic","lieut","lieut cdr","lieut col","lieut gen","lord","m","m l","m r","madame","mademoiselle","maj gen","major","master","mevrouw","miss","mlle","mme","monsieur","monsignor","mr","mrs","ms","mstr","nti","pastor","president","prince","princess","princesse","prinses","prof","prof dr","prof sir","professor","puan","puan sri","rabbi","rear admiral","rev","rev canon","rev dr","rev mother","reverend","rva","senator","sergeant","sheikh","sheikha","sig","sig na","sig ra","sir","sister","sqn ldr","sr","sr d","sra","srta","sultan","tan sri","tan sri dato","tengku","teuku","than puying","the hon dr","the hon justice","the hon miss","the hon mr","the hon mrs","the hon ms","the hon sir","the very rev","toh puan","tun","vice admiral","viscount","viscountess","wg cdr"].map(punctutationMatcher)),suffixMatcher=getListMatcher(["I","II","III","IV","V","Senior","Junior","Jr","Sr","PhD","Ph\\.D","APR","RPh","PE","MD","MA","DMD","CME","BVM","CFRE","CLU","CPA","CSC","CSJ","DC","DD","DDS","DO","DVM","EdD","Esq","JD","LLD","OD","OSB","PC","Ret","RGS","RN","RNC","SHCJ","SJ","SNJM","SSMO","USA","USAF","USAFR","USAR","USCG","USMC","USMCR","USN","USNR"].map(punctutationMatcher)),particleMatcher=getListMatcher(["Vere","Von","Van","De","Del","Della","Di","Da","Pietro","Vanden","Du","St.","St","La","Lo","Ter","O","O'","Mac","Fitz"]),titleSplitter=new RegExp("^((?:".concat(titleMatcher," )*)(.*)$"),"i"),suffixSplitter=getSplittingRegex("(?:".concat(suffixMatcher,", )*(?:").concat(suffixMatcher,")"),"i"),particleSplitter=getSplittingRegex("".concat(/(?:[A-Z\xC0-\xD6\xD8-\xDE\u0100\u0102\u0104\u0106\u0108\u010A\u010C\u010E\u0110\u0112\u0114\u0116\u0118\u011A\u011C\u011E\u0120\u0122\u0124\u0126\u0128\u012A\u012C\u012E\u0130\u0132\u0134\u0136\u0139\u013B\u013D\u013F\u0141\u0143\u0145\u0147\u014A\u014C\u014E\u0150\u0152\u0154\u0156\u0158\u015A\u015C\u015E\u0160\u0162\u0164\u0166\u0168\u016A\u016C\u016E\u0170\u0172\u0174\u0176\u0178\u0179\u017B\u017D\u0181\u0182\u0184\u0186\u0187\u0189-\u018B\u018E-\u0191\u0193\u0194\u0196-\u0198\u019C\u019D\u019F\u01A0\u01A2\u01A4\u01A6\u01A7\u01A9\u01AC\u01AE\u01AF\u01B1-\u01B3\u01B5\u01B7\u01B8\u01BC\u01C4\u01C7\u01CA\u01CD\u01CF\u01D1\u01D3\u01D5\u01D7\u01D9\u01DB\u01DE\u01E0\u01E2\u01E4\u01E6\u01E8\u01EA\u01EC\u01EE\u01F1\u01F4\u01F6-\u01F8\u01FA\u01FC\u01FE\u0200\u0202\u0204\u0206\u0208\u020A\u020C\u020E\u0210\u0212\u0214\u0216\u0218\u021A\u021C\u021E\u0220\u0222\u0224\u0226\u0228\u022A\u022C\u022E\u0230\u0232\u023A\u023B\u023D\u023E\u0241\u0243-\u0246\u0248\u024A\u024C\u024E\u0370\u0372\u0376\u037F\u0386\u0388-\u038A\u038C\u038E\u038F\u0391-\u03A1\u03A3-\u03AB\u03CF\u03D2-\u03D4\u03D8\u03DA\u03DC\u03DE\u03E0\u03E2\u03E4\u03E6\u03E8\u03EA\u03EC\u03EE\u03F4\u03F7\u03F9\u03FA\u03FD-\u042F\u0460\u0462\u0464\u0466\u0468\u046A\u046C\u046E\u0470\u0472\u0474\u0476\u0478\u047A\u047C\u047E\u0480\u048A\u048C\u048E\u0490\u0492\u0494\u0496\u0498\u049A\u049C\u049E\u04A0\u04A2\u04A4\u04A6\u04A8\u04AA\u04AC\u04AE\u04B0\u04B2\u04B4\u04B6\u04B8\u04BA\u04BC\u04BE\u04C0\u04C1\u04C3\u04C5\u04C7\u04C9\u04CB\u04CD\u04D0\u04D2\u04D4\u04D6\u04D8\u04DA\u04DC\u04DE\u04E0\u04E2\u04E4\u04E6\u04E8\u04EA\u04EC\u04EE\u04F0\u04F2\u04F4\u04F6\u04F8\u04FA\u04FC\u04FE\u0500\u0502\u0504\u0506\u0508\u050A\u050C\u050E\u0510\u0512\u0514\u0516\u0518\u051A\u051C\u051E\u0520\u0522\u0524\u0526\u0528\u052A\u052C\u052E\u0531-\u0556\u10A0-\u10C5\u10C7\u10CD\u13A0-\u13F5\u1E00\u1E02\u1E04\u1E06\u1E08\u1E0A\u1E0C\u1E0E\u1E10\u1E12\u1E14\u1E16\u1E18\u1E1A\u1E1C\u1E1E\u1E20\u1E22\u1E24\u1E26\u1E28\u1E2A\u1E2C\u1E2E\u1E30\u1E32\u1E34\u1E36\u1E38\u1E3A\u1E3C\u1E3E\u1E40\u1E42\u1E44\u1E46\u1E48\u1E4A\u1E4C\u1E4E\u1E50\u1E52\u1E54\u1E56\u1E58\u1E5A\u1E5C\u1E5E\u1E60\u1E62\u1E64\u1E66\u1E68\u1E6A\u1E6C\u1E6E\u1E70\u1E72\u1E74\u1E76\u1E78\u1E7A\u1E7C\u1E7E\u1E80\u1E82\u1E84\u1E86\u1E88\u1E8A\u1E8C\u1E8E\u1E90\u1E92\u1E94\u1E9E\u1EA0\u1EA2\u1EA4\u1EA6\u1EA8\u1EAA\u1EAC\u1EAE\u1EB0\u1EB2\u1EB4\u1EB6\u1EB8\u1EBA\u1EBC\u1EBE\u1EC0\u1EC2\u1EC4\u1EC6\u1EC8\u1ECA\u1ECC\u1ECE\u1ED0\u1ED2\u1ED4\u1ED6\u1ED8\u1EDA\u1EDC\u1EDE\u1EE0\u1EE2\u1EE4\u1EE6\u1EE8\u1EEA\u1EEC\u1EEE\u1EF0\u1EF2\u1EF4\u1EF6\u1EF8\u1EFA\u1EFC\u1EFE\u1F08-\u1F0F\u1F18-\u1F1D\u1F28-\u1F2F\u1F38-\u1F3F\u1F48-\u1F4D\u1F59\u1F5B\u1F5D\u1F5F\u1F68-\u1F6F\u1FB8-\u1FBB\u1FC8-\u1FCB\u1FD8-\u1FDB\u1FE8-\u1FEC\u1FF8-\u1FFB\u2102\u2107\u210B-\u210D\u2110-\u2112\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u2130-\u2133\u213E\u213F\u2145\u2160-\u216F\u2183\u24B6-\u24CF\u2C00-\u2C2E\u2C60\u2C62-\u2C64\u2C67\u2C69\u2C6B\u2C6D-\u2C70\u2C72\u2C75\u2C7E-\u2C80\u2C82\u2C84\u2C86\u2C88\u2C8A\u2C8C\u2C8E\u2C90\u2C92\u2C94\u2C96\u2C98\u2C9A\u2C9C\u2C9E\u2CA0\u2CA2\u2CA4\u2CA6\u2CA8\u2CAA\u2CAC\u2CAE\u2CB0\u2CB2\u2CB4\u2CB6\u2CB8\u2CBA\u2CBC\u2CBE\u2CC0\u2CC2\u2CC4\u2CC6\u2CC8\u2CCA\u2CCC\u2CCE\u2CD0\u2CD2\u2CD4\u2CD6\u2CD8\u2CDA\u2CDC\u2CDE\u2CE0\u2CE2\u2CEB\u2CED\u2CF2\uA640\uA642\uA644\uA646\uA648\uA64A\uA64C\uA64E\uA650\uA652\uA654\uA656\uA658\uA65A\uA65C\uA65E\uA660\uA662\uA664\uA666\uA668\uA66A\uA66C\uA680\uA682\uA684\uA686\uA688\uA68A\uA68C\uA68E\uA690\uA692\uA694\uA696\uA698\uA69A\uA722\uA724\uA726\uA728\uA72A\uA72C\uA72E\uA732\uA734\uA736\uA738\uA73A\uA73C\uA73E\uA740\uA742\uA744\uA746\uA748\uA74A\uA74C\uA74E\uA750\uA752\uA754\uA756\uA758\uA75A\uA75C\uA75E\uA760\uA762\uA764\uA766\uA768\uA76A\uA76C\uA76E\uA779\uA77B\uA77D\uA77E\uA780\uA782\uA784\uA786\uA78B\uA78D\uA790\uA792\uA796\uA798\uA79A\uA79C\uA79E\uA7A0\uA7A2\uA7A4\uA7A6\uA7A8\uA7AA-\uA7AE\uA7B0-\uA7B4\uA7B6\uFF21-\uFF3A]|\uD801[\uDC00-\uDC27\uDCB0-\uDCD3]|\uD803[\uDC80-\uDCB2]|\uD806[\uDCA0-\uDCBF]|\uD835[\uDC00-\uDC19\uDC34-\uDC4D\uDC68-\uDC81\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB5\uDCD0-\uDCE9\uDD04\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD38\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD6C-\uDD85\uDDA0-\uDDB9\uDDD4-\uDDED\uDE08-\uDE21\uDE3C-\uDE55\uDE70-\uDE89\uDEA8-\uDEC0\uDEE2-\uDEFA\uDF1C-\uDF34\uDF56-\uDF6E\uDF90-\uDFA8\uDFCA]|\uD83A[\uDD00-\uDD21]|\uD83C[\uDD30-\uDD49\uDD50-\uDD69\uDD70-\uDD89])/.source,".*")),endSplitter=getSplittingRegex("(?:".concat(/(?:[a-z\xAA\xB5\xBA\xDF-\xF6\xF8-\xFF\u0101\u0103\u0105\u0107\u0109\u010B\u010D\u010F\u0111\u0113\u0115\u0117\u0119\u011B\u011D\u011F\u0121\u0123\u0125\u0127\u0129\u012B\u012D\u012F\u0131\u0133\u0135\u0137\u0138\u013A\u013C\u013E\u0140\u0142\u0144\u0146\u0148\u0149\u014B\u014D\u014F\u0151\u0153\u0155\u0157\u0159\u015B\u015D\u015F\u0161\u0163\u0165\u0167\u0169\u016B\u016D\u016F\u0171\u0173\u0175\u0177\u017A\u017C\u017E-\u0180\u0183\u0185\u0188\u018C\u018D\u0192\u0195\u0199-\u019B\u019E\u01A1\u01A3\u01A5\u01A8\u01AA\u01AB\u01AD\u01B0\u01B4\u01B6\u01B9\u01BA\u01BD-\u01BF\u01C6\u01C9\u01CC\u01CE\u01D0\u01D2\u01D4\u01D6\u01D8\u01DA\u01DC\u01DD\u01DF\u01E1\u01E3\u01E5\u01E7\u01E9\u01EB\u01ED\u01EF\u01F0\u01F3\u01F5\u01F9\u01FB\u01FD\u01FF\u0201\u0203\u0205\u0207\u0209\u020B\u020D\u020F\u0211\u0213\u0215\u0217\u0219\u021B\u021D\u021F\u0221\u0223\u0225\u0227\u0229\u022B\u022D\u022F\u0231\u0233-\u0239\u023C\u023F\u0240\u0242\u0247\u0249\u024B\u024D\u024F-\u0293\u0295-\u02B8\u02C0\u02C1\u02E0-\u02E4\u0345\u0371\u0373\u0377\u037A-\u037D\u0390\u03AC-\u03CE\u03D0\u03D1\u03D5-\u03D7\u03D9\u03DB\u03DD\u03DF\u03E1\u03E3\u03E5\u03E7\u03E9\u03EB\u03ED\u03EF-\u03F3\u03F5\u03F8\u03FB\u03FC\u0430-\u045F\u0461\u0463\u0465\u0467\u0469\u046B\u046D\u046F\u0471\u0473\u0475\u0477\u0479\u047B\u047D\u047F\u0481\u048B\u048D\u048F\u0491\u0493\u0495\u0497\u0499\u049B\u049D\u049F\u04A1\u04A3\u04A5\u04A7\u04A9\u04AB\u04AD\u04AF\u04B1\u04B3\u04B5\u04B7\u04B9\u04BB\u04BD\u04BF\u04C2\u04C4\u04C6\u04C8\u04CA\u04CC\u04CE\u04CF\u04D1\u04D3\u04D5\u04D7\u04D9\u04DB\u04DD\u04DF\u04E1\u04E3\u04E5\u04E7\u04E9\u04EB\u04ED\u04EF\u04F1\u04F3\u04F5\u04F7\u04F9\u04FB\u04FD\u04FF\u0501\u0503\u0505\u0507\u0509\u050B\u050D\u050F\u0511\u0513\u0515\u0517\u0519\u051B\u051D\u051F\u0521\u0523\u0525\u0527\u0529\u052B\u052D\u052F\u0561-\u0587\u13F8-\u13FD\u1C80-\u1C88\u1D00-\u1DBF\u1E01\u1E03\u1E05\u1E07\u1E09\u1E0B\u1E0D\u1E0F\u1E11\u1E13\u1E15\u1E17\u1E19\u1E1B\u1E1D\u1E1F\u1E21\u1E23\u1E25\u1E27\u1E29\u1E2B\u1E2D\u1E2F\u1E31\u1E33\u1E35\u1E37\u1E39\u1E3B\u1E3D\u1E3F\u1E41\u1E43\u1E45\u1E47\u1E49\u1E4B\u1E4D\u1E4F\u1E51\u1E53\u1E55\u1E57\u1E59\u1E5B\u1E5D\u1E5F\u1E61\u1E63\u1E65\u1E67\u1E69\u1E6B\u1E6D\u1E6F\u1E71\u1E73\u1E75\u1E77\u1E79\u1E7B\u1E7D\u1E7F\u1E81\u1E83\u1E85\u1E87\u1E89\u1E8B\u1E8D\u1E8F\u1E91\u1E93\u1E95-\u1E9D\u1E9F\u1EA1\u1EA3\u1EA5\u1EA7\u1EA9\u1EAB\u1EAD\u1EAF\u1EB1\u1EB3\u1EB5\u1EB7\u1EB9\u1EBB\u1EBD\u1EBF\u1EC1\u1EC3\u1EC5\u1EC7\u1EC9\u1ECB\u1ECD\u1ECF\u1ED1\u1ED3\u1ED5\u1ED7\u1ED9\u1EDB\u1EDD\u1EDF\u1EE1\u1EE3\u1EE5\u1EE7\u1EE9\u1EEB\u1EED\u1EEF\u1EF1\u1EF3\u1EF5\u1EF7\u1EF9\u1EFB\u1EFD\u1EFF-\u1F07\u1F10-\u1F15\u1F20-\u1F27\u1F30-\u1F37\u1F40-\u1F45\u1F50-\u1F57\u1F60-\u1F67\u1F70-\u1F7D\u1F80-\u1F87\u1F90-\u1F97\u1FA0-\u1FA7\u1FB0-\u1FB4\u1FB6\u1FB7\u1FBE\u1FC2-\u1FC4\u1FC6\u1FC7\u1FD0-\u1FD3\u1FD6\u1FD7\u1FE0-\u1FE7\u1FF2-\u1FF4\u1FF6\u1FF7\u2071\u207F\u2090-\u209C\u210A\u210E\u210F\u2113\u212F\u2134\u2139\u213C\u213D\u2146-\u2149\u214E\u2170-\u217F\u2184\u24D0-\u24E9\u2C30-\u2C5E\u2C61\u2C65\u2C66\u2C68\u2C6A\u2C6C\u2C71\u2C73\u2C74\u2C76-\u2C7D\u2C81\u2C83\u2C85\u2C87\u2C89\u2C8B\u2C8D\u2C8F\u2C91\u2C93\u2C95\u2C97\u2C99\u2C9B\u2C9D\u2C9F\u2CA1\u2CA3\u2CA5\u2CA7\u2CA9\u2CAB\u2CAD\u2CAF\u2CB1\u2CB3\u2CB5\u2CB7\u2CB9\u2CBB\u2CBD\u2CBF\u2CC1\u2CC3\u2CC5\u2CC7\u2CC9\u2CCB\u2CCD\u2CCF\u2CD1\u2CD3\u2CD5\u2CD7\u2CD9\u2CDB\u2CDD\u2CDF\u2CE1\u2CE3\u2CE4\u2CEC\u2CEE\u2CF3\u2D00-\u2D25\u2D27\u2D2D\uA641\uA643\uA645\uA647\uA649\uA64B\uA64D\uA64F\uA651\uA653\uA655\uA657\uA659\uA65B\uA65D\uA65F\uA661\uA663\uA665\uA667\uA669\uA66B\uA66D\uA681\uA683\uA685\uA687\uA689\uA68B\uA68D\uA68F\uA691\uA693\uA695\uA697\uA699\uA69B-\uA69D\uA723\uA725\uA727\uA729\uA72B\uA72D\uA72F-\uA731\uA733\uA735\uA737\uA739\uA73B\uA73D\uA73F\uA741\uA743\uA745\uA747\uA749\uA74B\uA74D\uA74F\uA751\uA753\uA755\uA757\uA759\uA75B\uA75D\uA75F\uA761\uA763\uA765\uA767\uA769\uA76B\uA76D\uA76F-\uA778\uA77A\uA77C\uA77F\uA781\uA783\uA785\uA787\uA78C\uA78E\uA791\uA793-\uA795\uA797\uA799\uA79B\uA79D\uA79F\uA7A1\uA7A3\uA7A5\uA7A7\uA7A9\uA7B5\uA7B7\uA7F8-\uA7FA\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABBF\uFB00-\uFB06\uFB13-\uFB17\uFF41-\uFF5A]|\uD801[\uDC28-\uDC4F\uDCD8-\uDCFB]|\uD803[\uDCC0-\uDCF2]|\uD806[\uDCC0-\uDCDF]|\uD835[\uDC1A-\uDC33\uDC4E-\uDC54\uDC56-\uDC67\uDC82-\uDC9B\uDCB6-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDCCF\uDCEA-\uDD03\uDD1E-\uDD37\uDD52-\uDD6B\uDD86-\uDD9F\uDDBA-\uDDD3\uDDEE-\uDE07\uDE22-\uDE3B\uDE56-\uDE6F\uDE8A-\uDEA5\uDEC2-\uDEDA\uDEDC-\uDEE1\uDEFC-\uDF14\uDF16-\uDF1B\uDF36-\uDF4E\uDF50-\uDF55\uDF70-\uDF88\uDF8A-\uDF8F\uDFAA-\uDFC2\uDFC4-\uDFC9\uDFCB]|\uD83A[\uDD22-\uDD43])/.source,".*|").concat(particleMatcher,".*|\\S*)"));exports["default"]=exports.parse=function(){var name=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";"string"!=typeof name&&(name+="");var start="",mid="",end="";if(/[^.], /.test(name)){var parts=name.split(", ");end=parts.shift();var suffixMatch=RegExp(suffixMatcher).exec(parts.join(", "));start=parts.splice(suffixMatch&&0!==suffixMatch.index?0:-1,1)[0],mid=parts.join(", ")}else{var _parts=name.split(suffixSplitter,2),main=_parts.shift().split(endSplitter,2);start=main[0],end=main[1],mid=_parts.pop()}var _start$match2=_slicedToArray(start.match(titleSplitter),3),droppingParticle=_start$match2[1],given=_start$match2[2],suffix=mid,_end$split$reverse2=_slicedToArray(end.split(particleSplitter,2).reverse(),2),family=_end$split$reverse2[0],nonDroppingParticle=_end$split$reverse2[1];if(!given&&family)return family.includes(" ")?{literal:family}:{family:family};if(family){var nameObject={"dropping-particle":droppingParticle,given:given,suffix:suffix,"non-dropping-particle":nonDroppingParticle,family:family};return Object.keys(nameObject).forEach(function(key){nameObject[key]||delete nameObject[key]}),nameObject}return logger.warn("[set]","Could not parse name: '".concat(name,"', falling back to literal")),{literal:name}};exports.scope="@name";exports.types="@name"},{}],439:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.add=void 0;var _type=require("./type"),_data=require("./data"),_dataType=require("./dataType");function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}var parsePropertyConstraint=function(_ref){var _ref$props=_ref.props,props=void 0===_ref$props?[]:_ref$props,_ref$match=_ref.match,match=void 0===_ref$match?"every":_ref$match,value=_ref.value,hasProp=function(input){return function(prop){return input.hasOwnProperty(prop)}};return props=[].concat(props),"function"==typeof value?function(input){return props[match](hasProp(input))&&props[match](function(prop){return value(input[prop])})}:function(input){return props[match](hasProp(input))}},getParseType=function(_ref3){var parseType=_ref3.parseType,propertyConstraint=_ref3.propertyConstraint,elementConstraint=_ref3.elementConstraint,tests=[];return parseType instanceof RegExp?tests.push(parseType.test.bind(parseType)):parseType&&tests.push(parseType),propertyConstraint&&tests.push.apply(tests,function(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}([].concat(propertyConstraint).map(parsePropertyConstraint))),elementConstraint&&tests.push(function(elementConstraint){return function(input){return input.every(function(entry){return(0,_type.type)(entry)===elementConstraint})}}(elementConstraint)),1===tests.length?tests[0]:function(input){return tests.every(function(test){return test(input)})}};exports.add=function(format){var parsers=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(function(format,parsers){if("string"!=typeof format||!format.match(_type.typeMatcher))throw new TypeError("Invalid format name, expected name starting with '@'");var dataType=parsers.dataType,parseType=parsers.parseType,propertyConstraint=parsers.propertyConstraint,elementConstraint=parsers.elementConstraint,parse=parsers.parse,parseAsync=parsers.parseAsync;if(dataType&&"string"!=typeof dataType)throw new TypeError("Invalid data type, expected string, got ".concat((0,_dataType.typeOf)(dataType)));if(parseType&&"function"!=typeof parseType&&!(parseType instanceof RegExp))throw new TypeError("Invalid type parser, expected callback or regex, got ".concat((0,_dataType.typeOf)(parseType)));if(propertyConstraint&&"object"!==_typeof(propertyConstraint))throw new TypeError("Invalid property constraint, expected object, got ".concat((0,_dataType.typeOf)(propertyConstraint)));if(elementConstraint&&"string"!=typeof elementConstraint)throw new TypeError("Invalid element constraint, expected string, got ".concat((0,_dataType.typeOf)(elementConstraint)));if(parse&&"function"!=typeof parse)throw new TypeError("Invalid data parser, expected callback, got ".concat((0,_dataType.typeOf)(parse)));if(parseAsync&&"function"!=typeof parseAsync)throw new TypeError("Invalid data parser, expected callback, got ".concat((0,_dataType.typeOf)(parseAsync)))}(format,parsers),parsers.parseType||parsers.propertyConstraint||parsers.elementConstraint){var dataType=function(_ref2){var dataType=_ref2.dataType,parseType=_ref2.parseType;return dataType||(parseType instanceof RegExp?"String":"Primitive")}(parsers),parseType=getParseType(parsers);(0,_type.addTypeParser)(format,dataType,parseType)}parsers.parse&&(0,_data.addDataParser)(format,parsers.parse,{async:!1}),parsers.parseAsync&&(0,_data.addDataParser)(format,parsers.parseAsync,{async:!0})}},{"./data":440,"./dataType":441,"./type":443}],440:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.hasDataParser=exports.addDataParser=exports.dataAsync=exports.data=void 0;var _type=require("./type");var parsers={},asyncParsers={},nativeParsers={},nativeAsyncParsers={},_={},methodNames={},capitalize=function(word){return word[0].toUpperCase()+word.slice(1).toLowerCase()},getMethodName=function(format){return methodNames[format]||(methodNames[format]=function(){for(var prefix=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"",_len=arguments.length,words=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)words[_key-1]=arguments[_key];return prefix.toLowerCase()+words.map(capitalize).join("")}.apply(void 0,function(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}(format.match(_type.typeMatcher).slice(1).filter(Boolean)))),methodNames[format]},hasDataParser=function(type){return arguments.length>1&&arguments[1]!==undefined&&arguments[1]?asyncParsers[type]||nativeAsyncParsers[type]:parsers[type]||nativeParsers[type]};exports.hasDataParser=hasDataParser;var data=function(input,type){return parsers.hasOwnProperty(type)?parsers[type](input):nativeParsers.hasOwnProperty(type)?nativeParsers[type](input):(logger.error("[set]","No synchronous parser found for ".concat(type)),null)};exports.data=data;var fn,_ref,dataAsync=(fn=regeneratorRuntime.mark(function _callee(input,type){return regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(!asyncParsers.hasOwnProperty(type)){_context.next=4;break}return _context.abrupt("return",asyncParsers[type](input));case 4:if(!nativeAsyncParsers.hasOwnProperty(type)){_context.next=8;break}return _context.abrupt("return",nativeAsyncParsers[type](input));case 8:if(!hasDataParser(type,!1)){_context.next=12;break}return _context.abrupt("return",data(input,type));case 12:return logger.error("[set]","No parser found for ".concat(type)),_context.abrupt("return",null);case 14:case"end":return _context.stop()}},_callee,this)}),_ref=function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function step(key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _next(value){step("next",value)}function _throw(err){step("throw",err)}_next()})},function(_x,_x2){return _ref.apply(this,arguments)});exports.dataAsync=dataAsync;exports.addDataParser=function(format,parser){var parserObject,_ref2=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{},_ref2$async=_ref2.async,async=void 0!==_ref2$async&&_ref2$async,_ref2$native=_ref2.native,native=void 0!==_ref2$native&&_ref2$native,methodName=getMethodName(format);async?(methodName+="Async",parserObject=native?nativeAsyncParsers:asyncParsers):parserObject=native?nativeParsers:parsers,parserObject[format]=_[methodName]=parser}},{"./type":443}],441:[function(require,module,exports){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.dataTypeOf=exports.typeOf=void 0;var typeOf=function(thing){switch(thing){case undefined:return"Undefined";case null:return"Null";default:return thing.constructor.name}};exports.typeOf=typeOf;exports.dataTypeOf=function(thing){switch(_typeof(thing)){case"string":return"String";case"object":if(Array.isArray(thing))return"Array";if("Object"===typeOf(thing))return"SimpleObject";if("Null"!==typeOf(thing))return"ComplexObject";default:return"Primitive"}}},{}],442:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _type=require("./type");Object.keys(_type).forEach(function(key){"default"!==key&&"__esModule"!==key&&Object.defineProperty(exports,key,{enumerable:!0,get:function(){return _type[key]}})});var _data=require("./data");Object.keys(_data).forEach(function(key){"default"!==key&&"__esModule"!==key&&Object.defineProperty(exports,key,{enumerable:!0,get:function(){return _data[key]}})});var _dataType=require("./dataType");Object.keys(_dataType).forEach(function(key){"default"!==key&&"__esModule"!==key&&Object.defineProperty(exports,key,{enumerable:!0,get:function(){return _dataType[key]}})});var _add=require("./add");Object.keys(_add).forEach(function(key){"default"!==key&&"__esModule"!==key&&Object.defineProperty(exports,key,{enumerable:!0,get:function(){return _add[key]}})})},{"./add":439,"./data":440,"./dataType":441,"./type":443}],443:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.typeMatcher=exports.hasTypeParser=exports.addTypeParser=exports.type=void 0;var _dataType=require("./dataType");function _slicedToArray(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return function(arr,i){var _arr=[],_n=!0,_d=!1,_e=undefined;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i["return"]||_i["return"]()}finally{if(_d)throw _e}}return _arr}(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}var types={},handleInvalidInput=function(){return logger.warn("[set]","This format is not supported or recognized"),"@invalid"},parseNativeTypes=function(input,dataType){switch(dataType){case"Array":return 0===input.length||input.every(function(entry){return"@csl/object"===type(entry)})?"@csl/list+object":"@else/list+object";case"SimpleObject":case"ComplexObject":return"@csl/object"}},type=function(input){var dataType=(0,_dataType.dataTypeOf)(input);if(!types.hasOwnProperty(dataType))return logger.warn("[set]","Data type has no formats listed"),handleInvalidInput();if("Array"===dataType&&0===input.length)return parseNativeTypes(input,dataType);var matches=Object.entries(types[dataType]).filter(function(_ref){return(0,_slicedToArray(_ref,2)[1])(input)}).map(function(_ref3){return _slicedToArray(_ref3,1)[0]});return 0===matches.length?parseNativeTypes(input,dataType)||handleInvalidInput():matches[0]};exports.type=type;exports.addTypeParser=function(format,dataType,parseType){(types[dataType]||(types[dataType]={}))[format]=parseType};exports.hasTypeParser=function(type){return types.hasOwnProperty(type)};exports.typeMatcher=/^(?:@(.+?))(?:\/(?:(.+?)\+)?(?:(.+)))?$/},{"./dataType":441}],444:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=void 0;var _default=function(obj){return JSON.parse(JSON.stringify(obj))};exports["default"]=_default},{}],445:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=void 0;var obj,_syncRequest=(obj=require("sync-request"))&&obj.__esModule?obj:{"default":obj};var _default=function(url){try{return(0,_syncRequest["default"])("GET",url).getBody("utf8")}catch(e){return logger.error("[set]","File '".concat(url,"' could not be fetched:"),e.message),"[]"}};exports["default"]=_default},{"sync-request":331}],446:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=void 0,require("isomorphic-fetch");var fn,_ref,_default=(fn=regeneratorRuntime.mark(function _callee(url){return regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.prev=0,_context.next=3,fetch(url);case 3:return _context.abrupt("return",_context.sent.text());case 6:return _context.prev=6,_context.t0=_context["catch"](0),logger.error("[set]","File '".concat(url,"' could not be fetched:"),_context.t0.message),_context.abrupt("return","[]");case 10:case"end":return _context.stop()}},_callee,this,[[0,6]])}),_ref=function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function step(key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _next(value){step("next",value)}function _throw(err){step("throw",err)}_next()})},function(_x){return _ref.apply(this,arguments)});exports["default"]=_default},{"isomorphic-fetch":326}],447:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=void 0;var _default=function(list,prefix){for(var id;list.includes(id);)id="".concat(prefix).concat(Math.random().toString().slice(2));return id};exports["default"]=_default},{}],448:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"deepCopy",{enumerable:!0,get:function(){return _deepCopy["default"]}}),Object.defineProperty(exports,"fetchFile",{enumerable:!0,get:function(){return _fetchFile["default"]}}),Object.defineProperty(exports,"fetchFileAsync",{enumerable:!0,get:function(){return _fetchFileAsync["default"]}}),Object.defineProperty(exports,"fetchId",{enumerable:!0,get:function(){return _fetchId["default"]}}),Object.defineProperty(exports,"TokenStack",{enumerable:!0,get:function(){return _stack["default"]}}),Object.defineProperty(exports,"Register",{enumerable:!0,get:function(){return _register["default"]}}),exports.attr=void 0;var _deepCopy=_interopRequireDefault(require("./deepCopy")),_fetchFile=_interopRequireDefault(require("./fetchFile")),_fetchFileAsync=_interopRequireDefault(require("./fetchFileAsync")),_fetchId=_interopRequireDefault(require("./fetchId")),_stack=_interopRequireDefault(require("./stack")),_register=_interopRequireDefault(require("./register")),_attr=require("../get/modules/csl/attr"),_affix=require("../get/modules/csl/affix");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var attr={getAttributedEntry:_attr.getAttributedEntry,getPrefixedEntry:_attr.getPrefixedEntry,getWrappedEntry:_affix.getWrappedEntry};exports.attr=attr},{"../get/modules/csl/affix":378,"../get/modules/csl/attr":379,"./deepCopy":444,"./fetchFile":445,"./fetchFileAsync":446,"./fetchId":447,"./register":449,"./stack":450}],449:[function(require,module,exports){"use strict";function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=void 0;var _default=function(){function Register(){var data=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Register),this.data=data}var Constructor,protoProps,staticProps;return Constructor=Register,(protoProps=[{key:"set",value:function(key,value){return this.data[key]=value,this}},{key:"add",value:function(){return this.set.apply(this,arguments)}},{key:"delete",value:function(key){return delete this.data[key],this}},{key:"get",value:function(key){return this.data[key]}},{key:"has",value:function(key){return this.data.hasOwnProperty(key)}},{key:"list",value:function(){return Object.keys(this.data)}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Register}();exports["default"]=_default},{}],450:[function(require,module,exports){"use strict";function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=void 0;var _default=function(){function TokenStack(array){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,TokenStack),this.stack=array,this.index=0,this.current=this.stack[this.index]}var Constructor,protoProps,staticProps;return Constructor=TokenStack,staticProps=[{key:"getPatternText",value:function(pattern){return'"'.concat(pattern instanceof RegExp?pattern.source:pattern,'"')}},{key:"getMatchCallback",value:function(pattern){if(Array.isArray(pattern)){var matches=pattern.map(TokenStack.getMatchCallback);return function(token){return matches.some(function(matchCallback){return matchCallback(token)})}}return pattern instanceof Function?pattern:pattern instanceof RegExp?function(token){return pattern.test(token)}:function(token){return pattern===token}}}],(protoProps=[{key:"tokensLeft",value:function(){return this.stack.length-this.index}},{key:"matches",value:function(pattern){return TokenStack.getMatchCallback(pattern)(this.current,this.index,this.stack)}},{key:"matchesSequence",value:function(sequence){var part=this.stack.slice(this.index,this.index+sequence.length).join("");return"string"==typeof sequence?part===sequence:sequence.every(function(pattern,index){return TokenStack.getMatchCallback(pattern)(part[index])})}},{key:"consumeToken",value:function(){var pattern=arguments.length>0&&arguments[0]!==undefined?arguments[0]:/^[\s\S]$/,_ref=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},_ref$spaced=(_ref.inverse,_ref.spaced),spaced=void 0===_ref$spaced||_ref$spaced;spaced&&this.consumeWhitespace();var token=this.current;if(!TokenStack.getMatchCallback(pattern)(token,this.index,this.stack))throw new SyntaxError("Unexpected token at index ".concat(this.index,": Expected ").concat(TokenStack.getPatternText(pattern),', got "').concat(token,'"'));return this.current=this.stack[++this.index],spaced&&this.consumeWhitespace(),token}},{key:"consumeWhitespace",value:function(){var pattern=arguments.length>0&&arguments[0]!==undefined?arguments[0]:/^\s$/,_ref2$optional=(arguments.length>1&&arguments[1]!==undefined?arguments[1]:{}).optional,optional=void 0===_ref2$optional||_ref2$optional;return this.consume(pattern,{min:+!optional})}},{key:"consumeN",value:function(length){if(this.tokensLeft()<length)throw new SyntaxError("Not enough tokens left");for(var start=this.index;length--;)this.current=this.stack[++this.index];return this.stack.slice(start,this.index).join("")}},{key:"consumeSequence",value:function(sequence){if(this.matchesSequence(sequence))return this.consumeN(sequence.length);throw new SyntaxError('Expected "'.concat(sequence,'", got "').concat(this.consumeN(sequence.length),'"'))}},{key:"consume",value:function(){for(var pattern=arguments.length>0&&arguments[0]!==undefined?arguments[0]:/^[\s\S]$/,_ref3=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},_ref3$min=_ref3.min,min=void 0===_ref3$min?0:_ref3$min,_ref3$max=_ref3.max,max=void 0===_ref3$max?Infinity:_ref3$max,_ref3$inverse=_ref3.inverse,inverse=void 0!==_ref3$inverse&&_ref3$inverse,tokenMap=_ref3.tokenMap,tokenFilter=_ref3.tokenFilter,start=this.index,match=TokenStack.getMatchCallback(pattern);match(this.current,this.index,this.stack)!==inverse;)this.current=this.stack[++this.index];var consumed=this.stack.slice(start,this.index);if(consumed.length<min)throw new SyntaxError("Not enough ".concat(TokenStack.getPatternText(pattern)));if(consumed.length>max)throw new SyntaxError("Too many ".concat(TokenStack.getPatternText(pattern)));return tokenMap&&(consumed=consumed.map(tokenMap)),tokenFilter&&(consumed=consumed.filter(tokenFilter)),consumed.join("")}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),TokenStack}();exports["default"]=_default},{}],451:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"cite",{enumerable:!0,get:function(){return _package.version}}),Object.defineProperty(exports,"citeproc",{enumerable:!0,get:function(){return _citeproc.PROCESSOR_VERSION}});var _package=require("../package.json"),_citeproc=require("citeproc")},{"../package.json":360,citeproc:324}],"citation-js":[function(require,module,exports){"use strict";require("@babel/polyfill"),require("./logger");var staticMethods=_interopRequireWildcard(require("./Cite/static")),get=_interopRequireWildcard(require("./get/index")),parse=_interopRequireWildcard(require("./parse/index")),util=_interopRequireWildcard(require("./util/index")),version=_interopRequireWildcard(require("./version")),_index4=_interopRequireDefault(require("./async/index")),_index5=_interopRequireDefault(require("./Cite/index")),_locales=_interopRequireWildcard(require("./get/modules/csl/locales")),_styles=_interopRequireWildcard(require("./get/modules/csl/styles"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};desc.get||desc.set?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj["default"]=obj,newObj}var CSL={engine:require("./get/modules/csl/engines").fetchEngine,style:_styles["default"],locale:_locales["default"],item:function(data){return function(id){return data.find(function(entry){return entry.id===id})}},register:{addTemplate:_styles.templates.add.bind(_styles.templates),getTemplate:_styles.templates.get.bind(_styles.templates),hasTemplate:_styles.templates.has.bind(_styles.templates),addLocale:_locales.locales.add.bind(_locales.locales),getLocale:_locales.locales.get.bind(_locales.locales),hasLocale:_locales.locales.has.bind(_locales.locales)}};Object.assign(_index5["default"],staticMethods,{async:_index4["default"],get:get,CSL:CSL,parse:parse,util:util,version:version,input:parse.input.chain,inputAsync:parse.input.async.chain}),module.exports=_index5["default"]},{"./Cite/index":362,"./Cite/static":367,"./async/index":368,"./get/index":371,"./get/modules/csl/engines":381,"./get/modules/csl/locales":384,"./get/modules/csl/styles":386,"./logger":394,"./parse/index":397,"./util/index":448,"./version":451,"@babel/polyfill":1}]},{},[]);